
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>isis_vty.c</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">/*</a>
<a name="ln2"> * IS-IS Rout(e)ing protocol - isis_circuit.h</a>
<a name="ln3"> *</a>
<a name="ln4"> * Copyright (C) 2001,2002   Sampo Saaristo</a>
<a name="ln5"> *                           Tampere University of Technology      </a>
<a name="ln6"> *                           Institute of Communications Engineering</a>
<a name="ln7"> * Copyright (C) 2016        David Lamparter, for NetDEF, Inc.</a>
<a name="ln8"> *</a>
<a name="ln9"> * This program is free software; you can redistribute it and/or modify it </a>
<a name="ln10"> * under the terms of the GNU General Public Licenseas published by the Free </a>
<a name="ln11"> * Software Foundation; either version 2 of the License, or (at your option) </a>
<a name="ln12"> * any later version.</a>
<a name="ln13"> *</a>
<a name="ln14"> * This program is distributed in the hope that it will be useful,but WITHOUT </a>
<a name="ln15"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or </a>
<a name="ln16"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for </a>
<a name="ln17"> * more details.</a>
<a name="ln18"> </a>
<a name="ln19"> * You should have received a copy of the GNU General Public License along </a>
<a name="ln20"> * with this program; if not, write to the Free Software Foundation, Inc., </a>
<a name="ln21"> * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</a>
<a name="ln22"> */</a>
<a name="ln23"> </a>
<a name="ln24">#include &lt;zebra.h&gt;</a>
<a name="ln25">#include &lt;command.h&gt;</a>
<a name="ln26"> </a>
<a name="ln27">#include &quot;isis_circuit.h&quot;</a>
<a name="ln28">#include &quot;isis_csm.h&quot;</a>
<a name="ln29">#include &quot;isis_misc.h&quot;</a>
<a name="ln30">#include &quot;isisd.h&quot;</a>
<a name="ln31"> </a>
<a name="ln32">static struct isis_circuit *</a>
<a name="ln33">isis_circuit_lookup (struct vty *vty)</a>
<a name="ln34">{</a>
<a name="ln35">  struct interface *ifp;</a>
<a name="ln36">  struct isis_circuit *circuit;</a>
<a name="ln37"> </a>
<a name="ln38">  ifp = (struct interface *) vty-&gt;index;</a>
<a name="ln39">  if (!ifp)</a>
<a name="ln40">    {</a>
<a name="ln41">      vty_out (vty, &quot;Invalid interface %s&quot;, VTY_NEWLINE);</a>
<a name="ln42">      return NULL;</a>
<a name="ln43">    }</a>
<a name="ln44"> </a>
<a name="ln45">  circuit = circuit_scan_by_ifp (ifp);</a>
<a name="ln46">  if (!circuit)</a>
<a name="ln47">    {</a>
<a name="ln48">      vty_out (vty, &quot;ISIS is not enabled on circuit %s%s&quot;,</a>
<a name="ln49">               ifp-&gt;name, VTY_NEWLINE);</a>
<a name="ln50">      return NULL;</a>
<a name="ln51">    }</a>
<a name="ln52"> </a>
<a name="ln53">  return circuit;</a>
<a name="ln54">}</a>
<a name="ln55"> </a>
<a name="ln56">DEFUN (ip_router_isis,</a>
<a name="ln57">       ip_router_isis_cmd,</a>
<a name="ln58">       &quot;(ip|ipv6) router isis WORD&quot;,</a>
<a name="ln59">       &quot;Interface Internet Protocol config commands\n&quot;</a>
<a name="ln60">       &quot;IP router interface commands\n&quot;</a>
<a name="ln61">       &quot;IS-IS Routing for IP\n&quot;</a>
<a name="ln62">       &quot;Routing process tag\n&quot;)</a>
<a name="ln63">{</a>
<a name="ln64">  struct interface *ifp;</a>
<a name="ln65">  struct isis_circuit *circuit;</a>
<a name="ln66">  struct isis_area *area;</a>
<a name="ln67">  const char *af = argv[0];</a>
<a name="ln68">  const char *area_tag = argv[1];</a>
<a name="ln69"> </a>
<a name="ln70">  ifp = (struct interface *) vty-&gt;index;</a>
<a name="ln71">  assert (ifp);</a>
<a name="ln72"> </a>
<a name="ln73">  /* Prevent more than one area per circuit */</a>
<a name="ln74">  circuit = circuit_scan_by_ifp (ifp);</a>
<a name="ln75">  if (circuit &amp;&amp; circuit-&gt;area)</a>
<a name="ln76">    {</a>
<a name="ln77">      if (strcmp (circuit-&gt;area-&gt;area_tag, area_tag))</a>
<a name="ln78">        {</a>
<a name="ln79">          vty_out (vty, &quot;ISIS circuit is already defined on %s%s&quot;,</a>
<a name="ln80">                   circuit-&gt;area-&gt;area_tag, VTY_NEWLINE);</a>
<a name="ln81">          return CMD_ERR_NOTHING_TODO;</a>
<a name="ln82">        }</a>
<a name="ln83">    }</a>
<a name="ln84"> </a>
<a name="ln85">  area = isis_area_lookup (area_tag);</a>
<a name="ln86">  if (!area)</a>
<a name="ln87">    area = isis_area_create (area_tag);</a>
<a name="ln88"> </a>
<a name="ln89">  if (!circuit || !circuit-&gt;area) {</a>
<a name="ln90">    circuit = isis_circuit_create (area, ifp);</a>
<a name="ln91"> </a>
<a name="ln92">    if (circuit-&gt;state != C_STATE_CONF &amp;&amp; circuit-&gt;state != C_STATE_UP)</a>
<a name="ln93">      {</a>
<a name="ln94">        vty_out(vty, &quot;Couldn't bring up interface, please check log.%s&quot;, VTY_NEWLINE);</a>
<a name="ln95">        return CMD_WARNING;</a>
<a name="ln96">      }</a>
<a name="ln97">  }</a>
<a name="ln98"> </a>
<a name="ln99">  bool ip = circuit-&gt;ip_router, ipv6 = circuit-&gt;ipv6_router;</a>
<a name="ln100">  if (af[2] != '\0')</a>
<a name="ln101">    ipv6 = true;</a>
<a name="ln102">  else</a>
<a name="ln103">    ip = true;</a>
<a name="ln104"> </a>
<a name="ln105">  isis_circuit_af_set (circuit, ip, ipv6);</a>
<a name="ln106">  return CMD_SUCCESS;</a>
<a name="ln107">}</a>
<a name="ln108"> </a>
<a name="ln109">DEFUN (no_ip_router_isis,</a>
<a name="ln110">       no_ip_router_isis_cmd,</a>
<a name="ln111">       &quot;no (ip|ipv6) router isis WORD&quot;,</a>
<a name="ln112">       NO_STR</a>
<a name="ln113">       &quot;Interface Internet Protocol config commands\n&quot;</a>
<a name="ln114">       &quot;IP router interface commands\n&quot;</a>
<a name="ln115">       &quot;IS-IS Routing for IP\n&quot;</a>
<a name="ln116">       &quot;Routing process tag\n&quot;)</a>
<a name="ln117">{</a>
<a name="ln118">  struct interface *ifp;</a>
<a name="ln119">  struct isis_area *area;</a>
<a name="ln120">  struct isis_circuit *circuit;</a>
<a name="ln121">  const char *af = argv[0];</a>
<a name="ln122">  const char *area_tag = argv[1];</a>
<a name="ln123"> </a>
<a name="ln124">  ifp = (struct interface *) vty-&gt;index;</a>
<a name="ln125">  if (!ifp)</a>
<a name="ln126">    {</a>
<a name="ln127">      vty_out (vty, &quot;Invalid interface %s&quot;, VTY_NEWLINE);</a>
<a name="ln128">      return CMD_ERR_NO_MATCH;</a>
<a name="ln129">    }</a>
<a name="ln130"> </a>
<a name="ln131">  area = isis_area_lookup (area_tag);</a>
<a name="ln132">  if (!area)</a>
<a name="ln133">    {</a>
<a name="ln134">      vty_out (vty, &quot;Can't find ISIS instance %s%s&quot;,</a>
<a name="ln135">               argv[0], VTY_NEWLINE);</a>
<a name="ln136">      return CMD_ERR_NO_MATCH;</a>
<a name="ln137">    }</a>
<a name="ln138"> </a>
<a name="ln139">  circuit = circuit_lookup_by_ifp (ifp, area-&gt;circuit_list);</a>
<a name="ln140">  if (!circuit)</a>
<a name="ln141">    {</a>
<a name="ln142">      vty_out (vty, &quot;ISIS is not enabled on circuit %s%s&quot;,</a>
<a name="ln143">               ifp-&gt;name, VTY_NEWLINE);</a>
<a name="ln144">      return CMD_ERR_NO_MATCH;</a>
<a name="ln145">    }</a>
<a name="ln146"> </a>
<a name="ln147">  bool ip = circuit-&gt;ip_router, ipv6 = circuit-&gt;ipv6_router;</a>
<a name="ln148">  if (af[2] != '\0')</a>
<a name="ln149">    ipv6 = false;</a>
<a name="ln150">  else</a>
<a name="ln151">    ip = false;</a>
<a name="ln152"> </a>
<a name="ln153">  isis_circuit_af_set (circuit, ip, ipv6);</a>
<a name="ln154">  return CMD_SUCCESS;</a>
<a name="ln155">}</a>
<a name="ln156"> </a>
<a name="ln157">DEFUN (isis_passive,</a>
<a name="ln158">       isis_passive_cmd,</a>
<a name="ln159">       &quot;isis passive&quot;,</a>
<a name="ln160">       &quot;IS-IS commands\n&quot;</a>
<a name="ln161">       &quot;Configure the passive mode for interface\n&quot;)</a>
<a name="ln162">{</a>
<a name="ln163">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln164">  if (!circuit)</a>
<a name="ln165">    return CMD_ERR_NO_MATCH;</a>
<a name="ln166"> </a>
<a name="ln167">  isis_circuit_passive_set (circuit, 1);</a>
<a name="ln168">  return CMD_SUCCESS;</a>
<a name="ln169">}</a>
<a name="ln170"> </a>
<a name="ln171">DEFUN (no_isis_passive,</a>
<a name="ln172">       no_isis_passive_cmd,</a>
<a name="ln173">       &quot;no isis passive&quot;,</a>
<a name="ln174">       NO_STR</a>
<a name="ln175">       &quot;IS-IS commands\n&quot;</a>
<a name="ln176">       &quot;Configure the passive mode for interface\n&quot;)</a>
<a name="ln177">{</a>
<a name="ln178">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln179">  if (!circuit)</a>
<a name="ln180">    return CMD_ERR_NO_MATCH;</a>
<a name="ln181"> </a>
<a name="ln182">  if (if_is_loopback (circuit-&gt;interface))</a>
<a name="ln183">    {</a>
<a name="ln184">      vty_out (vty, &quot;Can't set no passive for loopback interface%s&quot;,</a>
<a name="ln185">               VTY_NEWLINE);</a>
<a name="ln186">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln187">    }</a>
<a name="ln188"> </a>
<a name="ln189">  isis_circuit_passive_set (circuit, 0);</a>
<a name="ln190">  return CMD_SUCCESS;</a>
<a name="ln191">}</a>
<a name="ln192"> </a>
<a name="ln193">DEFUN (isis_circuit_type,</a>
<a name="ln194">       isis_circuit_type_cmd,</a>
<a name="ln195">       &quot;isis circuit-type (level-1|level-1-2|level-2-only)&quot;,</a>
<a name="ln196">       &quot;IS-IS commands\n&quot;</a>
<a name="ln197">       &quot;Configure circuit type for interface\n&quot;</a>
<a name="ln198">       &quot;Level-1 only adjacencies are formed\n&quot;</a>
<a name="ln199">       &quot;Level-1-2 adjacencies are formed\n&quot;</a>
<a name="ln200">       &quot;Level-2 only adjacencies are formed\n&quot;)</a>
<a name="ln201">{</a>
<a name="ln202">  int is_type;</a>
<a name="ln203">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln204">  if (!circuit)</a>
<a name="ln205">    return CMD_ERR_NO_MATCH;</a>
<a name="ln206"> </a>
<a name="ln207">  is_type = string2circuit_t (argv[0]);</a>
<a name="ln208">  if (!is_type)</a>
<a name="ln209">    {</a>
<a name="ln210">      vty_out (vty, &quot;Unknown circuit-type %s&quot;, VTY_NEWLINE);</a>
<a name="ln211">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln212">    }</a>
<a name="ln213"> </a>
<a name="ln214">  if (circuit-&gt;state == C_STATE_UP &amp;&amp;</a>
<a name="ln215">      circuit-&gt;area-&gt;is_type != IS_LEVEL_1_AND_2 &amp;&amp;</a>
<a name="ln216">      circuit-&gt;area-&gt;is_type != is_type)</a>
<a name="ln217">    {</a>
<a name="ln218">      vty_out (vty, &quot;Invalid circuit level for area %s.%s&quot;,</a>
<a name="ln219">               circuit-&gt;area-&gt;area_tag, VTY_NEWLINE);</a>
<a name="ln220">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln221">    }</a>
<a name="ln222">  isis_circuit_is_type_set (circuit, is_type);</a>
<a name="ln223"> </a>
<a name="ln224">  return CMD_SUCCESS;</a>
<a name="ln225">}</a>
<a name="ln226"> </a>
<a name="ln227">DEFUN (no_isis_circuit_type,</a>
<a name="ln228">       no_isis_circuit_type_cmd,</a>
<a name="ln229">       &quot;no isis circuit-type (level-1|level-1-2|level-2-only)&quot;,</a>
<a name="ln230">       NO_STR</a>
<a name="ln231">       &quot;IS-IS commands\n&quot;</a>
<a name="ln232">       &quot;Configure circuit type for interface\n&quot;</a>
<a name="ln233">       &quot;Level-1 only adjacencies are formed\n&quot;</a>
<a name="ln234">       &quot;Level-1-2 adjacencies are formed\n&quot;</a>
<a name="ln235">       &quot;Level-2 only adjacencies are formed\n&quot;)</a>
<a name="ln236">{</a>
<a name="ln237">  int is_type;</a>
<a name="ln238">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln239">  if (!circuit)</a>
<a name="ln240">    return CMD_ERR_NO_MATCH;</a>
<a name="ln241"> </a>
<a name="ln242">  /*</a>
<a name="ln243">   * Set the circuits level to its default value</a>
<a name="ln244">   */</a>
<a name="ln245">  if (circuit-&gt;state == C_STATE_UP)</a>
<a name="ln246">    is_type = circuit-&gt;area-&gt;is_type;</a>
<a name="ln247">  else</a>
<a name="ln248">    is_type = IS_LEVEL_1_AND_2;</a>
<a name="ln249">  isis_circuit_is_type_set (circuit, is_type);</a>
<a name="ln250"> </a>
<a name="ln251">  return CMD_SUCCESS;</a>
<a name="ln252">}</a>
<a name="ln253"> </a>
<a name="ln254">DEFUN (isis_network,</a>
<a name="ln255">       isis_network_cmd,</a>
<a name="ln256">       &quot;isis network point-to-point&quot;,</a>
<a name="ln257">       &quot;IS-IS commands\n&quot;</a>
<a name="ln258">       &quot;Set network type\n&quot;</a>
<a name="ln259">       &quot;point-to-point network type\n&quot;)</a>
<a name="ln260">{</a>
<a name="ln261">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln262">  if (!circuit)</a>
<a name="ln263">    return CMD_ERR_NO_MATCH;</a>
<a name="ln264"> </a>
<a name="ln265">  if (isis_circuit_circ_type_set(circuit, CIRCUIT_T_P2P))</a>
<a name="ln266">    {</a>
<a name="ln267">      vty_out (vty, &quot;isis network point-to-point &quot;</a>
<a name="ln268">               &quot;is valid only on broadcast interfaces%s&quot;,</a>
<a name="ln269">               VTY_NEWLINE);</a>
<a name="ln270">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln271">    }</a>
<a name="ln272"> </a>
<a name="ln273">  return CMD_SUCCESS;</a>
<a name="ln274">}</a>
<a name="ln275"> </a>
<a name="ln276">DEFUN (no_isis_network,</a>
<a name="ln277">       no_isis_network_cmd,</a>
<a name="ln278">       &quot;no isis network point-to-point&quot;,</a>
<a name="ln279">       NO_STR</a>
<a name="ln280">       &quot;IS-IS commands\n&quot;</a>
<a name="ln281">       &quot;Set network type for circuit\n&quot;</a>
<a name="ln282">       &quot;point-to-point network type\n&quot;)</a>
<a name="ln283">{</a>
<a name="ln284">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln285">  if (!circuit)</a>
<a name="ln286">    return CMD_ERR_NO_MATCH;</a>
<a name="ln287"> </a>
<a name="ln288">  if (isis_circuit_circ_type_set(circuit, CIRCUIT_T_BROADCAST))</a>
<a name="ln289">    {</a>
<a name="ln290">      vty_out (vty, &quot;isis network point-to-point &quot;</a>
<a name="ln291">               &quot;is valid only on broadcast interfaces%s&quot;,</a>
<a name="ln292">               VTY_NEWLINE);</a>
<a name="ln293">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln294">    }</a>
<a name="ln295"> </a>
<a name="ln296">  return CMD_SUCCESS;</a>
<a name="ln297">}</a>
<a name="ln298"> </a>
<a name="ln299">DEFUN (isis_passwd,</a>
<a name="ln300">       isis_passwd_cmd,</a>
<a name="ln301">       &quot;isis password (md5|clear) WORD&quot;,</a>
<a name="ln302">       &quot;IS-IS commands\n&quot;</a>
<a name="ln303">       &quot;Configure the authentication password for a circuit\n&quot;</a>
<a name="ln304">       &quot;HMAC-MD5 authentication\n&quot;</a>
<a name="ln305">       &quot;Cleartext password\n&quot;</a>
<a name="ln306">       &quot;Circuit password\n&quot;)</a>
<a name="ln307">{</a>
<a name="ln308">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln309">  int rv;</a>
<a name="ln310">  if (!circuit)</a>
<a name="ln311">    return CMD_ERR_NO_MATCH;</a>
<a name="ln312"> </a>
<a name="ln313">  if (argv[0][0] == 'm')</a>
<a name="ln314">    rv = isis_circuit_passwd_hmac_md5_set(circuit, argv[1]);</a>
<a name="ln315">  else</a>
<a name="ln316">    rv = isis_circuit_passwd_cleartext_set(circuit, argv[1]);</a>
<a name="ln317">  if (rv)</a>
<a name="ln318">    {</a>
<a name="ln319">      vty_out (vty, &quot;Too long circuit password (&gt;254)%s&quot;, VTY_NEWLINE);</a>
<a name="ln320">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln321">    }</a>
<a name="ln322"> </a>
<a name="ln323">  return CMD_SUCCESS;</a>
<a name="ln324">}</a>
<a name="ln325"> </a>
<a name="ln326">DEFUN (no_isis_passwd,</a>
<a name="ln327">       no_isis_passwd_cmd,</a>
<a name="ln328">       &quot;no isis password&quot;,</a>
<a name="ln329">       NO_STR</a>
<a name="ln330">       &quot;IS-IS commands\n&quot;</a>
<a name="ln331">       &quot;Configure the authentication password for a circuit\n&quot;)</a>
<a name="ln332">{</a>
<a name="ln333">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln334">  if (!circuit)</a>
<a name="ln335">    return CMD_ERR_NO_MATCH;</a>
<a name="ln336"> </a>
<a name="ln337">  isis_circuit_passwd_unset(circuit);</a>
<a name="ln338"> </a>
<a name="ln339">  return CMD_SUCCESS;</a>
<a name="ln340">}</a>
<a name="ln341"> </a>
<a name="ln342">ALIAS (no_isis_passwd,</a>
<a name="ln343">       no_isis_passwd_arg_cmd,</a>
<a name="ln344">       &quot;no isis password (md5|clear) WORD&quot;,</a>
<a name="ln345">       NO_STR</a>
<a name="ln346">       &quot;IS-IS commands\n&quot;</a>
<a name="ln347">       &quot;Configure the authentication password for a circuit\n&quot;</a>
<a name="ln348">       &quot;HMAC-MD5 authentication\n&quot;</a>
<a name="ln349">       &quot;Cleartext password\n&quot;</a>
<a name="ln350">       &quot;Circuit password\n&quot;)</a>
<a name="ln351"> </a>
<a name="ln352">DEFUN (isis_priority,</a>
<a name="ln353">       isis_priority_cmd,</a>
<a name="ln354">       &quot;isis priority &lt;0-127&gt;&quot;,</a>
<a name="ln355">       &quot;IS-IS commands\n&quot;</a>
<a name="ln356">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln357">       &quot;Priority value\n&quot;)</a>
<a name="ln358">{</a>
<a name="ln359">  int prio;</a>
<a name="ln360">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln361">  if (!circuit)</a>
<a name="ln362">    return CMD_ERR_NO_MATCH;</a>
<a name="ln363"> </a>
<a name="ln364">  prio = atoi (argv[0]);</a>
<a name="ln365">  if (prio &lt; MIN_PRIORITY || prio &gt; MAX_PRIORITY)</a>
<a name="ln366">    {</a>
<a name="ln367">      vty_out (vty, &quot;Invalid priority %d - should be &lt;0-127&gt;%s&quot;,</a>
<a name="ln368">               prio, VTY_NEWLINE);</a>
<a name="ln369">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln370">    }</a>
<a name="ln371"> </a>
<a name="ln372">  circuit-&gt;priority[0] = prio;</a>
<a name="ln373">  circuit-&gt;priority[1] = prio;</a>
<a name="ln374"> </a>
<a name="ln375">  return CMD_SUCCESS;</a>
<a name="ln376">}</a>
<a name="ln377"> </a>
<a name="ln378">DEFUN (no_isis_priority,</a>
<a name="ln379">       no_isis_priority_cmd,</a>
<a name="ln380">       &quot;no isis priority&quot;,</a>
<a name="ln381">       NO_STR</a>
<a name="ln382">       &quot;IS-IS commands\n&quot;</a>
<a name="ln383">       &quot;Set priority for Designated Router election\n&quot;)</a>
<a name="ln384">{</a>
<a name="ln385">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln386">  if (!circuit)</a>
<a name="ln387">    return CMD_ERR_NO_MATCH;</a>
<a name="ln388"> </a>
<a name="ln389">  circuit-&gt;priority[0] = DEFAULT_PRIORITY;</a>
<a name="ln390">  circuit-&gt;priority[1] = DEFAULT_PRIORITY;</a>
<a name="ln391"> </a>
<a name="ln392">  return CMD_SUCCESS;</a>
<a name="ln393">}</a>
<a name="ln394"> </a>
<a name="ln395">ALIAS (no_isis_priority,</a>
<a name="ln396">       no_isis_priority_arg_cmd,</a>
<a name="ln397">       &quot;no isis priority &lt;0-127&gt;&quot;,</a>
<a name="ln398">       NO_STR</a>
<a name="ln399">       &quot;IS-IS commands\n&quot;</a>
<a name="ln400">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln401">       &quot;Priority value\n&quot;)</a>
<a name="ln402"> </a>
<a name="ln403">DEFUN (isis_priority_l1,</a>
<a name="ln404">       isis_priority_l1_cmd,</a>
<a name="ln405">       &quot;isis priority &lt;0-127&gt; level-1&quot;,</a>
<a name="ln406">       &quot;IS-IS commands\n&quot;</a>
<a name="ln407">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln408">       &quot;Priority value\n&quot;</a>
<a name="ln409">       &quot;Specify priority for level-1 routing\n&quot;)</a>
<a name="ln410">{</a>
<a name="ln411">  int prio;</a>
<a name="ln412">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln413">  if (!circuit)</a>
<a name="ln414">    return CMD_ERR_NO_MATCH;</a>
<a name="ln415"> </a>
<a name="ln416">  prio = atoi (argv[0]);</a>
<a name="ln417">  if (prio &lt; MIN_PRIORITY || prio &gt; MAX_PRIORITY)</a>
<a name="ln418">    {</a>
<a name="ln419">      vty_out (vty, &quot;Invalid priority %d - should be &lt;0-127&gt;%s&quot;,</a>
<a name="ln420">               prio, VTY_NEWLINE);</a>
<a name="ln421">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln422">    }</a>
<a name="ln423"> </a>
<a name="ln424">  circuit-&gt;priority[0] = prio;</a>
<a name="ln425"> </a>
<a name="ln426">  return CMD_SUCCESS;</a>
<a name="ln427">}</a>
<a name="ln428"> </a>
<a name="ln429">DEFUN (no_isis_priority_l1,</a>
<a name="ln430">       no_isis_priority_l1_cmd,</a>
<a name="ln431">       &quot;no isis priority level-1&quot;,</a>
<a name="ln432">       NO_STR</a>
<a name="ln433">       &quot;IS-IS commands\n&quot;</a>
<a name="ln434">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln435">       &quot;Specify priority for level-1 routing\n&quot;)</a>
<a name="ln436">{</a>
<a name="ln437">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln438">  if (!circuit)</a>
<a name="ln439">    return CMD_ERR_NO_MATCH;</a>
<a name="ln440"> </a>
<a name="ln441">  circuit-&gt;priority[0] = DEFAULT_PRIORITY;</a>
<a name="ln442"> </a>
<a name="ln443">  return CMD_SUCCESS;</a>
<a name="ln444">}</a>
<a name="ln445"> </a>
<a name="ln446">ALIAS (no_isis_priority_l1,</a>
<a name="ln447">       no_isis_priority_l1_arg_cmd,</a>
<a name="ln448">       &quot;no isis priority &lt;0-127&gt; level-1&quot;,</a>
<a name="ln449">       NO_STR</a>
<a name="ln450">       &quot;IS-IS commands\n&quot;</a>
<a name="ln451">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln452">       &quot;Priority value\n&quot;</a>
<a name="ln453">       &quot;Specify priority for level-1 routing\n&quot;)</a>
<a name="ln454"> </a>
<a name="ln455">DEFUN (isis_priority_l2,</a>
<a name="ln456">       isis_priority_l2_cmd,</a>
<a name="ln457">       &quot;isis priority &lt;0-127&gt; level-2&quot;,</a>
<a name="ln458">       &quot;IS-IS commands\n&quot;</a>
<a name="ln459">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln460">       &quot;Priority value\n&quot;</a>
<a name="ln461">       &quot;Specify priority for level-2 routing\n&quot;)</a>
<a name="ln462">{</a>
<a name="ln463">  int prio;</a>
<a name="ln464">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln465">  if (!circuit)</a>
<a name="ln466">    return CMD_ERR_NO_MATCH;</a>
<a name="ln467"> </a>
<a name="ln468">  prio = atoi (argv[0]);</a>
<a name="ln469">  if (prio &lt; MIN_PRIORITY || prio &gt; MAX_PRIORITY)</a>
<a name="ln470">    {</a>
<a name="ln471">      vty_out (vty, &quot;Invalid priority %d - should be &lt;0-127&gt;%s&quot;,</a>
<a name="ln472">               prio, VTY_NEWLINE);</a>
<a name="ln473">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln474">    }</a>
<a name="ln475"> </a>
<a name="ln476">  circuit-&gt;priority[1] = prio;</a>
<a name="ln477"> </a>
<a name="ln478">  return CMD_SUCCESS;</a>
<a name="ln479">}</a>
<a name="ln480"> </a>
<a name="ln481">DEFUN (no_isis_priority_l2,</a>
<a name="ln482">       no_isis_priority_l2_cmd,</a>
<a name="ln483">       &quot;no isis priority level-2&quot;,</a>
<a name="ln484">       NO_STR</a>
<a name="ln485">       &quot;IS-IS commands\n&quot;</a>
<a name="ln486">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln487">       &quot;Specify priority for level-2 routing\n&quot;)</a>
<a name="ln488">{</a>
<a name="ln489">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln490">  if (!circuit)</a>
<a name="ln491">    return CMD_ERR_NO_MATCH;</a>
<a name="ln492"> </a>
<a name="ln493">  circuit-&gt;priority[1] = DEFAULT_PRIORITY;</a>
<a name="ln494"> </a>
<a name="ln495">  return CMD_SUCCESS;</a>
<a name="ln496">}</a>
<a name="ln497"> </a>
<a name="ln498">ALIAS (no_isis_priority_l2,</a>
<a name="ln499">       no_isis_priority_l2_arg_cmd,</a>
<a name="ln500">       &quot;no isis priority &lt;0-127&gt; level-2&quot;,</a>
<a name="ln501">       NO_STR</a>
<a name="ln502">       &quot;IS-IS commands\n&quot;</a>
<a name="ln503">       &quot;Set priority for Designated Router election\n&quot;</a>
<a name="ln504">       &quot;Priority value\n&quot;</a>
<a name="ln505">       &quot;Specify priority for level-2 routing\n&quot;)</a>
<a name="ln506"> </a>
<a name="ln507">/* Metric command */</a>
<a name="ln508">DEFUN (isis_metric,</a>
<a name="ln509">       isis_metric_cmd,</a>
<a name="ln510">       &quot;isis metric &lt;0-16777215&gt;&quot;,</a>
<a name="ln511">       &quot;IS-IS commands\n&quot;</a>
<a name="ln512">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln513">       &quot;Default metric value\n&quot;)</a>
<a name="ln514">{</a>
<a name="ln515">  int met;</a>
<a name="ln516">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln517">  if (!circuit)</a>
<a name="ln518">    return CMD_ERR_NO_MATCH;</a>
<a name="ln519"> </a>
<a name="ln520">  met = atoi (argv[0]);</a>
<a name="ln521"> </a>
<a name="ln522">  /* RFC3787 section 5.1 */</a>
<a name="ln523">  if (circuit-&gt;area &amp;&amp; circuit-&gt;area-&gt;oldmetric == 1 &amp;&amp;</a>
<a name="ln524">      met &gt; MAX_NARROW_LINK_METRIC)</a>
<a name="ln525">    {</a>
<a name="ln526">      vty_out (vty, &quot;Invalid metric %d - should be &lt;0-63&gt; &quot;</a>
<a name="ln527">               &quot;when narrow metric type enabled%s&quot;,</a>
<a name="ln528">               met, VTY_NEWLINE);</a>
<a name="ln529">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln530">    }</a>
<a name="ln531"> </a>
<a name="ln532">  /* RFC4444 */</a>
<a name="ln533">  if (circuit-&gt;area &amp;&amp; circuit-&gt;area-&gt;newmetric == 1 &amp;&amp;</a>
<a name="ln534">      met &gt; MAX_WIDE_LINK_METRIC)</a>
<a name="ln535">    {</a>
<a name="ln536">      vty_out (vty, &quot;Invalid metric %d - should be &lt;0-16777215&gt; &quot;</a>
<a name="ln537">               &quot;when wide metric type enabled%s&quot;,</a>
<a name="ln538">               met, VTY_NEWLINE);</a>
<a name="ln539">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln540">    }</a>
<a name="ln541"> </a>
<a name="ln542">  isis_circuit_metric_set (circuit, IS_LEVEL_1, met);</a>
<a name="ln543">  isis_circuit_metric_set (circuit, IS_LEVEL_2, met);</a>
<a name="ln544">  return CMD_SUCCESS;</a>
<a name="ln545">}</a>
<a name="ln546"> </a>
<a name="ln547">DEFUN (no_isis_metric,</a>
<a name="ln548">       no_isis_metric_cmd,</a>
<a name="ln549">       &quot;no isis metric&quot;,</a>
<a name="ln550">       NO_STR</a>
<a name="ln551">       &quot;IS-IS commands\n&quot;</a>
<a name="ln552">       &quot;Set default metric for circuit\n&quot;)</a>
<a name="ln553">{</a>
<a name="ln554">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln555">  if (!circuit)</a>
<a name="ln556">    return CMD_ERR_NO_MATCH;</a>
<a name="ln557"> </a>
<a name="ln558">  isis_circuit_metric_set (circuit, IS_LEVEL_1, DEFAULT_CIRCUIT_METRIC);</a>
<a name="ln559">  isis_circuit_metric_set (circuit, IS_LEVEL_2, DEFAULT_CIRCUIT_METRIC);</a>
<a name="ln560">  return CMD_SUCCESS;</a>
<a name="ln561">}</a>
<a name="ln562"> </a>
<a name="ln563">ALIAS (no_isis_metric,</a>
<a name="ln564">       no_isis_metric_arg_cmd,</a>
<a name="ln565">       &quot;no isis metric &lt;0-16777215&gt;&quot;,</a>
<a name="ln566">       NO_STR</a>
<a name="ln567">       &quot;IS-IS commands\n&quot;</a>
<a name="ln568">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln569">       &quot;Default metric value\n&quot;)</a>
<a name="ln570"> </a>
<a name="ln571">DEFUN (isis_metric_l1,</a>
<a name="ln572">       isis_metric_l1_cmd,</a>
<a name="ln573">       &quot;isis metric &lt;0-16777215&gt; level-1&quot;,</a>
<a name="ln574">       &quot;IS-IS commands\n&quot;</a>
<a name="ln575">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln576">       &quot;Default metric value\n&quot;</a>
<a name="ln577">       &quot;Specify metric for level-1 routing\n&quot;)</a>
<a name="ln578">{</a>
<a name="ln579">  int met;</a>
<a name="ln580">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln581">  if (!circuit)</a>
<a name="ln582">    return CMD_ERR_NO_MATCH;</a>
<a name="ln583"> </a>
<a name="ln584">  met = atoi (argv[0]);</a>
<a name="ln585"> </a>
<a name="ln586">  /* RFC3787 section 5.1 */</a>
<a name="ln587">  if (circuit-&gt;area &amp;&amp; circuit-&gt;area-&gt;oldmetric == 1 &amp;&amp;</a>
<a name="ln588">      met &gt; MAX_NARROW_LINK_METRIC)</a>
<a name="ln589">    {</a>
<a name="ln590">      vty_out (vty, &quot;Invalid metric %d - should be &lt;0-63&gt; &quot;</a>
<a name="ln591">               &quot;when narrow metric type enabled%s&quot;,</a>
<a name="ln592">               met, VTY_NEWLINE);</a>
<a name="ln593">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln594">    }</a>
<a name="ln595"> </a>
<a name="ln596">  /* RFC4444 */</a>
<a name="ln597">  if (circuit-&gt;area &amp;&amp; circuit-&gt;area-&gt;newmetric == 1 &amp;&amp;</a>
<a name="ln598">      met &gt; MAX_WIDE_LINK_METRIC)</a>
<a name="ln599">    {</a>
<a name="ln600">      vty_out (vty, &quot;Invalid metric %d - should be &lt;0-16777215&gt; &quot;</a>
<a name="ln601">               &quot;when wide metric type enabled%s&quot;,</a>
<a name="ln602">               met, VTY_NEWLINE);</a>
<a name="ln603">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln604">    }</a>
<a name="ln605"> </a>
<a name="ln606">  isis_circuit_metric_set (circuit, IS_LEVEL_1, met);</a>
<a name="ln607">  return CMD_SUCCESS;</a>
<a name="ln608">}</a>
<a name="ln609"> </a>
<a name="ln610">DEFUN (no_isis_metric_l1,</a>
<a name="ln611">       no_isis_metric_l1_cmd,</a>
<a name="ln612">       &quot;no isis metric level-1&quot;,</a>
<a name="ln613">       NO_STR</a>
<a name="ln614">       &quot;IS-IS commands\n&quot;</a>
<a name="ln615">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln616">       &quot;Specify metric for level-1 routing\n&quot;)</a>
<a name="ln617">{</a>
<a name="ln618">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln619">  if (!circuit)</a>
<a name="ln620">    return CMD_ERR_NO_MATCH;</a>
<a name="ln621"> </a>
<a name="ln622">  isis_circuit_metric_set (circuit, IS_LEVEL_1, DEFAULT_CIRCUIT_METRIC);</a>
<a name="ln623">  return CMD_SUCCESS;</a>
<a name="ln624">}</a>
<a name="ln625"> </a>
<a name="ln626">ALIAS (no_isis_metric_l1,</a>
<a name="ln627">       no_isis_metric_l1_arg_cmd,</a>
<a name="ln628">       &quot;no isis metric &lt;0-16777215&gt; level-1&quot;,</a>
<a name="ln629">       NO_STR</a>
<a name="ln630">       &quot;IS-IS commands\n&quot;</a>
<a name="ln631">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln632">       &quot;Default metric value\n&quot;</a>
<a name="ln633">       &quot;Specify metric for level-1 routing\n&quot;)</a>
<a name="ln634"> </a>
<a name="ln635">DEFUN (isis_metric_l2,</a>
<a name="ln636">       isis_metric_l2_cmd,</a>
<a name="ln637">       &quot;isis metric &lt;0-16777215&gt; level-2&quot;,</a>
<a name="ln638">       &quot;IS-IS commands\n&quot;</a>
<a name="ln639">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln640">       &quot;Default metric value\n&quot;</a>
<a name="ln641">       &quot;Specify metric for level-2 routing\n&quot;)</a>
<a name="ln642">{</a>
<a name="ln643">  int met;</a>
<a name="ln644">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln645">  if (!circuit)</a>
<a name="ln646">    return CMD_ERR_NO_MATCH;</a>
<a name="ln647"> </a>
<a name="ln648">  met = atoi (argv[0]);</a>
<a name="ln649"> </a>
<a name="ln650">  /* RFC3787 section 5.1 */</a>
<a name="ln651">  if (circuit-&gt;area &amp;&amp; circuit-&gt;area-&gt;oldmetric == 1 &amp;&amp;</a>
<a name="ln652">      met &gt; MAX_NARROW_LINK_METRIC)</a>
<a name="ln653">    {</a>
<a name="ln654">      vty_out (vty, &quot;Invalid metric %d - should be &lt;0-63&gt; &quot;</a>
<a name="ln655">               &quot;when narrow metric type enabled%s&quot;,</a>
<a name="ln656">               met, VTY_NEWLINE);</a>
<a name="ln657">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln658">    }</a>
<a name="ln659"> </a>
<a name="ln660">  /* RFC4444 */</a>
<a name="ln661">  if (circuit-&gt;area &amp;&amp; circuit-&gt;area-&gt;newmetric == 1 &amp;&amp;</a>
<a name="ln662">      met &gt; MAX_WIDE_LINK_METRIC)</a>
<a name="ln663">    {</a>
<a name="ln664">      vty_out (vty, &quot;Invalid metric %d - should be &lt;0-16777215&gt; &quot;</a>
<a name="ln665">               &quot;when wide metric type enabled%s&quot;,</a>
<a name="ln666">               met, VTY_NEWLINE);</a>
<a name="ln667">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln668">    }</a>
<a name="ln669"> </a>
<a name="ln670">  isis_circuit_metric_set (circuit, IS_LEVEL_2, met);</a>
<a name="ln671">  return CMD_SUCCESS;</a>
<a name="ln672">}</a>
<a name="ln673"> </a>
<a name="ln674">DEFUN (no_isis_metric_l2,</a>
<a name="ln675">       no_isis_metric_l2_cmd,</a>
<a name="ln676">       &quot;no isis metric level-2&quot;,</a>
<a name="ln677">       NO_STR</a>
<a name="ln678">       &quot;IS-IS commands\n&quot;</a>
<a name="ln679">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln680">       &quot;Specify metric for level-2 routing\n&quot;)</a>
<a name="ln681">{</a>
<a name="ln682">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln683">  if (!circuit)</a>
<a name="ln684">    return CMD_ERR_NO_MATCH;</a>
<a name="ln685"> </a>
<a name="ln686">  isis_circuit_metric_set (circuit, IS_LEVEL_2, DEFAULT_CIRCUIT_METRIC);</a>
<a name="ln687">  return CMD_SUCCESS;</a>
<a name="ln688">}</a>
<a name="ln689"> </a>
<a name="ln690">ALIAS (no_isis_metric_l2,</a>
<a name="ln691">       no_isis_metric_l2_arg_cmd,</a>
<a name="ln692">       &quot;no isis metric &lt;0-16777215&gt; level-2&quot;,</a>
<a name="ln693">       NO_STR</a>
<a name="ln694">       &quot;IS-IS commands\n&quot;</a>
<a name="ln695">       &quot;Set default metric for circuit\n&quot;</a>
<a name="ln696">       &quot;Default metric value\n&quot;</a>
<a name="ln697">       &quot;Specify metric for level-2 routing\n&quot;)</a>
<a name="ln698">/* end of metrics */</a>
<a name="ln699"> </a>
<a name="ln700">DEFUN (isis_hello_interval,</a>
<a name="ln701">       isis_hello_interval_cmd,</a>
<a name="ln702">       &quot;isis hello-interval &lt;1-600&gt;&quot;,</a>
<a name="ln703">       &quot;IS-IS commands\n&quot;</a>
<a name="ln704">       &quot;Set Hello interval\n&quot;</a>
<a name="ln705">       &quot;Hello interval value\n&quot;</a>
<a name="ln706">       &quot;Holdtime 1 seconds, interval depends on multiplier\n&quot;)</a>
<a name="ln707">{</a>
<a name="ln708">  int interval;</a>
<a name="ln709">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln710">  if (!circuit)</a>
<a name="ln711">    return CMD_ERR_NO_MATCH;</a>
<a name="ln712"> </a>
<a name="ln713">  interval = atoi (argv[0]);</a>
<a name="ln714">  if (interval &lt; MIN_HELLO_INTERVAL || interval &gt; MAX_HELLO_INTERVAL)</a>
<a name="ln715">    {</a>
<a name="ln716">      vty_out (vty, &quot;Invalid hello-interval %d - should be &lt;1-600&gt;%s&quot;,</a>
<a name="ln717">               interval, VTY_NEWLINE);</a>
<a name="ln718">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln719">    }</a>
<a name="ln720"> </a>
<a name="ln721">  circuit-&gt;hello_interval[0] = (u_int16_t) interval;</a>
<a name="ln722">  circuit-&gt;hello_interval[1] = (u_int16_t) interval;</a>
<a name="ln723"> </a>
<a name="ln724">  return CMD_SUCCESS;</a>
<a name="ln725">}</a>
<a name="ln726"> </a>
<a name="ln727">DEFUN (no_isis_hello_interval,</a>
<a name="ln728">       no_isis_hello_interval_cmd,</a>
<a name="ln729">       &quot;no isis hello-interval&quot;,</a>
<a name="ln730">       NO_STR</a>
<a name="ln731">       &quot;IS-IS commands\n&quot;</a>
<a name="ln732">       &quot;Set Hello interval\n&quot;)</a>
<a name="ln733">{</a>
<a name="ln734">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln735">  if (!circuit)</a>
<a name="ln736">    return CMD_ERR_NO_MATCH;</a>
<a name="ln737"> </a>
<a name="ln738">  circuit-&gt;hello_interval[0] = DEFAULT_HELLO_INTERVAL;</a>
<a name="ln739">  circuit-&gt;hello_interval[1] = DEFAULT_HELLO_INTERVAL;</a>
<a name="ln740"> </a>
<a name="ln741">  return CMD_SUCCESS;</a>
<a name="ln742">}</a>
<a name="ln743"> </a>
<a name="ln744">ALIAS (no_isis_hello_interval,</a>
<a name="ln745">       no_isis_hello_interval_arg_cmd,</a>
<a name="ln746">       &quot;no isis hello-interval &lt;1-600&gt;&quot;,</a>
<a name="ln747">       NO_STR</a>
<a name="ln748">       &quot;IS-IS commands\n&quot;</a>
<a name="ln749">       &quot;Set Hello interval\n&quot;</a>
<a name="ln750">       &quot;Hello interval value\n&quot;</a>
<a name="ln751">       &quot;Holdtime 1 second, interval depends on multiplier\n&quot;)</a>
<a name="ln752"> </a>
<a name="ln753">DEFUN (isis_hello_interval_l1,</a>
<a name="ln754">       isis_hello_interval_l1_cmd,</a>
<a name="ln755">       &quot;isis hello-interval &lt;1-600&gt; level-1&quot;,</a>
<a name="ln756">       &quot;IS-IS commands\n&quot;</a>
<a name="ln757">       &quot;Set Hello interval\n&quot;</a>
<a name="ln758">       &quot;Hello interval value\n&quot;</a>
<a name="ln759">       &quot;Holdtime 1 second, interval depends on multiplier\n&quot;</a>
<a name="ln760">       &quot;Specify hello-interval for level-1 IIHs\n&quot;)</a>
<a name="ln761">{</a>
<a name="ln762">  long interval;</a>
<a name="ln763">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln764">  if (!circuit)</a>
<a name="ln765">    return CMD_ERR_NO_MATCH;</a>
<a name="ln766"> </a>
<a name="ln767">  interval = atoi (argv[0]);</a>
<a name="ln768">  if (interval &lt; MIN_HELLO_INTERVAL || interval &gt; MAX_HELLO_INTERVAL)</a>
<a name="ln769">    {</a>
<a name="ln770">      vty_out (vty, &quot;Invalid hello-interval %ld - should be &lt;1-600&gt;%s&quot;,</a>
<a name="ln771">               interval, VTY_NEWLINE);</a>
<a name="ln772">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln773">    }</a>
<a name="ln774"> </a>
<a name="ln775">  circuit-&gt;hello_interval[0] = (u_int16_t) interval;</a>
<a name="ln776"> </a>
<a name="ln777">  return CMD_SUCCESS;</a>
<a name="ln778">}</a>
<a name="ln779"> </a>
<a name="ln780">DEFUN (no_isis_hello_interval_l1,</a>
<a name="ln781">       no_isis_hello_interval_l1_cmd,</a>
<a name="ln782">       &quot;no isis hello-interval level-1&quot;,</a>
<a name="ln783">       NO_STR</a>
<a name="ln784">       &quot;IS-IS commands\n&quot;</a>
<a name="ln785">       &quot;Set Hello interval\n&quot;</a>
<a name="ln786">       &quot;Specify hello-interval for level-1 IIHs\n&quot;)</a>
<a name="ln787">{</a>
<a name="ln788">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln789">  if (!circuit)</a>
<a name="ln790">    return CMD_ERR_NO_MATCH;</a>
<a name="ln791"> </a>
<a name="ln792">  circuit-&gt;hello_interval[0] = DEFAULT_HELLO_INTERVAL;</a>
<a name="ln793"> </a>
<a name="ln794">  return CMD_SUCCESS;</a>
<a name="ln795">}</a>
<a name="ln796"> </a>
<a name="ln797">ALIAS (no_isis_hello_interval_l1,</a>
<a name="ln798">       no_isis_hello_interval_l1_arg_cmd,</a>
<a name="ln799">       &quot;no isis hello-interval &lt;1-600&gt; level-1&quot;,</a>
<a name="ln800">       NO_STR</a>
<a name="ln801">       &quot;IS-IS commands\n&quot;</a>
<a name="ln802">       &quot;Set Hello interval\n&quot;</a>
<a name="ln803">       &quot;Hello interval value\n&quot;</a>
<a name="ln804">       &quot;Holdtime 1 second, interval depends on multiplier\n&quot;</a>
<a name="ln805">       &quot;Specify hello-interval for level-1 IIHs\n&quot;)</a>
<a name="ln806"> </a>
<a name="ln807">DEFUN (isis_hello_interval_l2,</a>
<a name="ln808">       isis_hello_interval_l2_cmd,</a>
<a name="ln809">       &quot;isis hello-interval &lt;1-600&gt; level-2&quot;,</a>
<a name="ln810">       &quot;IS-IS commands\n&quot;</a>
<a name="ln811">       &quot;Set Hello interval\n&quot;</a>
<a name="ln812">       &quot;Hello interval value\n&quot;</a>
<a name="ln813">       &quot;Holdtime 1 second, interval depends on multiplier\n&quot;</a>
<a name="ln814">       &quot;Specify hello-interval for level-2 IIHs\n&quot;)</a>
<a name="ln815">{</a>
<a name="ln816">  long interval;</a>
<a name="ln817">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln818">  if (!circuit)</a>
<a name="ln819">    return CMD_ERR_NO_MATCH;</a>
<a name="ln820"> </a>
<a name="ln821">  interval = atoi (argv[0]);</a>
<a name="ln822">  if (interval &lt; MIN_HELLO_INTERVAL || interval &gt; MAX_HELLO_INTERVAL)</a>
<a name="ln823">    {</a>
<a name="ln824">      vty_out (vty, &quot;Invalid hello-interval %ld - should be &lt;1-600&gt;%s&quot;,</a>
<a name="ln825">               interval, VTY_NEWLINE);</a>
<a name="ln826">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln827">    }</a>
<a name="ln828"> </a>
<a name="ln829">  circuit-&gt;hello_interval[1] = (u_int16_t) interval;</a>
<a name="ln830"> </a>
<a name="ln831">  return CMD_SUCCESS;</a>
<a name="ln832">}</a>
<a name="ln833"> </a>
<a name="ln834">DEFUN (no_isis_hello_interval_l2,</a>
<a name="ln835">       no_isis_hello_interval_l2_cmd,</a>
<a name="ln836">       &quot;no isis hello-interval level-2&quot;,</a>
<a name="ln837">       NO_STR</a>
<a name="ln838">       &quot;IS-IS commands\n&quot;</a>
<a name="ln839">       &quot;Set Hello interval\n&quot;</a>
<a name="ln840">       &quot;Specify hello-interval for level-2 IIHs\n&quot;)</a>
<a name="ln841">{</a>
<a name="ln842">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln843">  if (!circuit)</a>
<a name="ln844">    return CMD_ERR_NO_MATCH;</a>
<a name="ln845"> </a>
<a name="ln846">  circuit-&gt;hello_interval[1] = DEFAULT_HELLO_INTERVAL;</a>
<a name="ln847"> </a>
<a name="ln848">  return CMD_SUCCESS;</a>
<a name="ln849">}</a>
<a name="ln850"> </a>
<a name="ln851">ALIAS (no_isis_hello_interval_l2,</a>
<a name="ln852">       no_isis_hello_interval_l2_arg_cmd,</a>
<a name="ln853">       &quot;no isis hello-interval &lt;1-600&gt; level-2&quot;,</a>
<a name="ln854">       NO_STR</a>
<a name="ln855">       &quot;IS-IS commands\n&quot;</a>
<a name="ln856">       &quot;Set Hello interval\n&quot;</a>
<a name="ln857">       &quot;Hello interval value\n&quot;</a>
<a name="ln858">       &quot;Holdtime 1 second, interval depends on multiplier\n&quot;</a>
<a name="ln859">       &quot;Specify hello-interval for level-2 IIHs\n&quot;)</a>
<a name="ln860"> </a>
<a name="ln861">DEFUN (isis_hello_multiplier,</a>
<a name="ln862">       isis_hello_multiplier_cmd,</a>
<a name="ln863">       &quot;isis hello-multiplier &lt;2-100&gt;&quot;,</a>
<a name="ln864">       &quot;IS-IS commands\n&quot;</a>
<a name="ln865">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln866">       &quot;Hello multiplier value\n&quot;)</a>
<a name="ln867">{</a>
<a name="ln868">  int mult;</a>
<a name="ln869">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln870">  if (!circuit)</a>
<a name="ln871">    return CMD_ERR_NO_MATCH;</a>
<a name="ln872"> </a>
<a name="ln873">  mult = atoi (argv[0]);</a>
<a name="ln874">  if (mult &lt; MIN_HELLO_MULTIPLIER || mult &gt; MAX_HELLO_MULTIPLIER)</a>
<a name="ln875">    {</a>
<a name="ln876">      vty_out (vty, &quot;Invalid hello-multiplier %d - should be &lt;2-100&gt;%s&quot;,</a>
<a name="ln877">               mult, VTY_NEWLINE);</a>
<a name="ln878">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln879">    }</a>
<a name="ln880"> </a>
<a name="ln881">  circuit-&gt;hello_multiplier[0] = (u_int16_t) mult;</a>
<a name="ln882">  circuit-&gt;hello_multiplier[1] = (u_int16_t) mult;</a>
<a name="ln883"> </a>
<a name="ln884">  return CMD_SUCCESS;</a>
<a name="ln885">}</a>
<a name="ln886"> </a>
<a name="ln887">DEFUN (no_isis_hello_multiplier,</a>
<a name="ln888">       no_isis_hello_multiplier_cmd,</a>
<a name="ln889">       &quot;no isis hello-multiplier&quot;,</a>
<a name="ln890">       NO_STR</a>
<a name="ln891">       &quot;IS-IS commands\n&quot;</a>
<a name="ln892">       &quot;Set multiplier for Hello holding time\n&quot;)</a>
<a name="ln893">{</a>
<a name="ln894">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln895">  if (!circuit)</a>
<a name="ln896">    return CMD_ERR_NO_MATCH;</a>
<a name="ln897"> </a>
<a name="ln898">  circuit-&gt;hello_multiplier[0] = DEFAULT_HELLO_MULTIPLIER;</a>
<a name="ln899">  circuit-&gt;hello_multiplier[1] = DEFAULT_HELLO_MULTIPLIER;</a>
<a name="ln900"> </a>
<a name="ln901">  return CMD_SUCCESS;</a>
<a name="ln902">}</a>
<a name="ln903"> </a>
<a name="ln904">ALIAS (no_isis_hello_multiplier,</a>
<a name="ln905">       no_isis_hello_multiplier_arg_cmd,</a>
<a name="ln906">       &quot;no isis hello-multiplier &lt;2-100&gt;&quot;,</a>
<a name="ln907">       NO_STR</a>
<a name="ln908">       &quot;IS-IS commands\n&quot;</a>
<a name="ln909">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln910">       &quot;Hello multiplier value\n&quot;)</a>
<a name="ln911"> </a>
<a name="ln912">DEFUN (isis_hello_multiplier_l1,</a>
<a name="ln913">       isis_hello_multiplier_l1_cmd,</a>
<a name="ln914">       &quot;isis hello-multiplier &lt;2-100&gt; level-1&quot;,</a>
<a name="ln915">       &quot;IS-IS commands\n&quot;</a>
<a name="ln916">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln917">       &quot;Hello multiplier value\n&quot;</a>
<a name="ln918">       &quot;Specify hello multiplier for level-1 IIHs\n&quot;)</a>
<a name="ln919">{</a>
<a name="ln920">  int mult;</a>
<a name="ln921">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln922">  if (!circuit)</a>
<a name="ln923">    return CMD_ERR_NO_MATCH;</a>
<a name="ln924"> </a>
<a name="ln925">  mult = atoi (argv[0]);</a>
<a name="ln926">  if (mult &lt; MIN_HELLO_MULTIPLIER || mult &gt; MAX_HELLO_MULTIPLIER)</a>
<a name="ln927">    {</a>
<a name="ln928">      vty_out (vty, &quot;Invalid hello-multiplier %d - should be &lt;2-100&gt;%s&quot;,</a>
<a name="ln929">               mult, VTY_NEWLINE);</a>
<a name="ln930">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln931">    }</a>
<a name="ln932"> </a>
<a name="ln933">  circuit-&gt;hello_multiplier[0] = (u_int16_t) mult;</a>
<a name="ln934"> </a>
<a name="ln935">  return CMD_SUCCESS;</a>
<a name="ln936">}</a>
<a name="ln937"> </a>
<a name="ln938">DEFUN (no_isis_hello_multiplier_l1,</a>
<a name="ln939">       no_isis_hello_multiplier_l1_cmd,</a>
<a name="ln940">       &quot;no isis hello-multiplier level-1&quot;,</a>
<a name="ln941">       NO_STR</a>
<a name="ln942">       &quot;IS-IS commands\n&quot;</a>
<a name="ln943">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln944">       &quot;Specify hello multiplier for level-1 IIHs\n&quot;)</a>
<a name="ln945">{</a>
<a name="ln946">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln947">  if (!circuit)</a>
<a name="ln948">    return CMD_ERR_NO_MATCH;</a>
<a name="ln949"> </a>
<a name="ln950">  circuit-&gt;hello_multiplier[0] = DEFAULT_HELLO_MULTIPLIER;</a>
<a name="ln951"> </a>
<a name="ln952">  return CMD_SUCCESS;</a>
<a name="ln953">}</a>
<a name="ln954"> </a>
<a name="ln955">ALIAS (no_isis_hello_multiplier_l1,</a>
<a name="ln956">       no_isis_hello_multiplier_l1_arg_cmd,</a>
<a name="ln957">       &quot;no isis hello-multiplier &lt;2-100&gt; level-1&quot;,</a>
<a name="ln958">       NO_STR</a>
<a name="ln959">       &quot;IS-IS commands\n&quot;</a>
<a name="ln960">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln961">       &quot;Hello multiplier value\n&quot;</a>
<a name="ln962">       &quot;Specify hello multiplier for level-1 IIHs\n&quot;)</a>
<a name="ln963"> </a>
<a name="ln964">DEFUN (isis_hello_multiplier_l2,</a>
<a name="ln965">       isis_hello_multiplier_l2_cmd,</a>
<a name="ln966">       &quot;isis hello-multiplier &lt;2-100&gt; level-2&quot;,</a>
<a name="ln967">       &quot;IS-IS commands\n&quot;</a>
<a name="ln968">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln969">       &quot;Hello multiplier value\n&quot;</a>
<a name="ln970">       &quot;Specify hello multiplier for level-2 IIHs\n&quot;)</a>
<a name="ln971">{</a>
<a name="ln972">  int mult;</a>
<a name="ln973">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln974">  if (!circuit)</a>
<a name="ln975">    return CMD_ERR_NO_MATCH;</a>
<a name="ln976"> </a>
<a name="ln977">  mult = atoi (argv[0]);</a>
<a name="ln978">  if (mult &lt; MIN_HELLO_MULTIPLIER || mult &gt; MAX_HELLO_MULTIPLIER)</a>
<a name="ln979">    {</a>
<a name="ln980">      vty_out (vty, &quot;Invalid hello-multiplier %d - should be &lt;2-100&gt;%s&quot;,</a>
<a name="ln981">               mult, VTY_NEWLINE);</a>
<a name="ln982">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln983">    }</a>
<a name="ln984"> </a>
<a name="ln985">  circuit-&gt;hello_multiplier[1] = (u_int16_t) mult;</a>
<a name="ln986"> </a>
<a name="ln987">  return CMD_SUCCESS;</a>
<a name="ln988">}</a>
<a name="ln989"> </a>
<a name="ln990">DEFUN (no_isis_hello_multiplier_l2,</a>
<a name="ln991">       no_isis_hello_multiplier_l2_cmd,</a>
<a name="ln992">       &quot;no isis hello-multiplier level-2&quot;,</a>
<a name="ln993">       NO_STR</a>
<a name="ln994">       &quot;IS-IS commands\n&quot;</a>
<a name="ln995">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln996">       &quot;Specify hello multiplier for level-2 IIHs\n&quot;)</a>
<a name="ln997">{</a>
<a name="ln998">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln999">  if (!circuit)</a>
<a name="ln1000">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1001"> </a>
<a name="ln1002">  circuit-&gt;hello_multiplier[1] = DEFAULT_HELLO_MULTIPLIER;</a>
<a name="ln1003"> </a>
<a name="ln1004">  return CMD_SUCCESS;</a>
<a name="ln1005">}</a>
<a name="ln1006"> </a>
<a name="ln1007">ALIAS (no_isis_hello_multiplier_l2,</a>
<a name="ln1008">       no_isis_hello_multiplier_l2_arg_cmd,</a>
<a name="ln1009">       &quot;no isis hello-multiplier &lt;2-100&gt; level-2&quot;,</a>
<a name="ln1010">       NO_STR</a>
<a name="ln1011">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1012">       &quot;Set multiplier for Hello holding time\n&quot;</a>
<a name="ln1013">       &quot;Hello multiplier value\n&quot;</a>
<a name="ln1014">       &quot;Specify hello multiplier for level-2 IIHs\n&quot;)</a>
<a name="ln1015"> </a>
<a name="ln1016">DEFUN (isis_hello_padding,</a>
<a name="ln1017">       isis_hello_padding_cmd,</a>
<a name="ln1018">       &quot;isis hello padding&quot;,</a>
<a name="ln1019">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1020">       &quot;Add padding to IS-IS hello packets\n&quot;</a>
<a name="ln1021">       &quot;Pad hello packets\n&quot;</a>
<a name="ln1022">       &quot;&lt;cr&gt;\n&quot;)</a>
<a name="ln1023">{</a>
<a name="ln1024">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1025">  if (!circuit)</a>
<a name="ln1026">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1027"> </a>
<a name="ln1028">  circuit-&gt;pad_hellos = 1;</a>
<a name="ln1029"> </a>
<a name="ln1030">  return CMD_SUCCESS;</a>
<a name="ln1031">}</a>
<a name="ln1032"> </a>
<a name="ln1033">DEFUN (no_isis_hello_padding,</a>
<a name="ln1034">       no_isis_hello_padding_cmd,</a>
<a name="ln1035">       &quot;no isis hello padding&quot;,</a>
<a name="ln1036">       NO_STR</a>
<a name="ln1037">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1038">       &quot;Add padding to IS-IS hello packets\n&quot;</a>
<a name="ln1039">       &quot;Pad hello packets\n&quot;</a>
<a name="ln1040">       &quot;&lt;cr&gt;\n&quot;)</a>
<a name="ln1041">{</a>
<a name="ln1042">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1043">  if (!circuit)</a>
<a name="ln1044">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1045"> </a>
<a name="ln1046">  circuit-&gt;pad_hellos = 0;</a>
<a name="ln1047"> </a>
<a name="ln1048">  return CMD_SUCCESS;</a>
<a name="ln1049">}</a>
<a name="ln1050"> </a>
<a name="ln1051">DEFUN (csnp_interval,</a>
<a name="ln1052">       csnp_interval_cmd,</a>
<a name="ln1053">       &quot;isis csnp-interval &lt;1-600&gt;&quot;,</a>
<a name="ln1054">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1055">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1056">       &quot;CSNP interval value\n&quot;)</a>
<a name="ln1057">{</a>
<a name="ln1058">  unsigned long interval;</a>
<a name="ln1059">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1060">  if (!circuit)</a>
<a name="ln1061">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1062"> </a>
<a name="ln1063">  interval = atol (argv[0]);</a>
<a name="ln1064">  if (interval &lt; MIN_CSNP_INTERVAL || interval &gt; MAX_CSNP_INTERVAL)</a>
<a name="ln1065">    {</a>
<a name="ln1066">      vty_out (vty, &quot;Invalid csnp-interval %lu - should be &lt;1-600&gt;%s&quot;,</a>
<a name="ln1067">               interval, VTY_NEWLINE);</a>
<a name="ln1068">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1069">    }</a>
<a name="ln1070"> </a>
<a name="ln1071">  circuit-&gt;csnp_interval[0] = (u_int16_t) interval;</a>
<a name="ln1072">  circuit-&gt;csnp_interval[1] = (u_int16_t) interval;</a>
<a name="ln1073"> </a>
<a name="ln1074">  return CMD_SUCCESS;</a>
<a name="ln1075">}</a>
<a name="ln1076"> </a>
<a name="ln1077">DEFUN (no_csnp_interval,</a>
<a name="ln1078">       no_csnp_interval_cmd,</a>
<a name="ln1079">       &quot;no isis csnp-interval&quot;,</a>
<a name="ln1080">       NO_STR</a>
<a name="ln1081">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1082">       &quot;Set CSNP interval in seconds\n&quot;)</a>
<a name="ln1083">{</a>
<a name="ln1084">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1085">  if (!circuit)</a>
<a name="ln1086">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1087"> </a>
<a name="ln1088">  circuit-&gt;csnp_interval[0] = DEFAULT_CSNP_INTERVAL;</a>
<a name="ln1089">  circuit-&gt;csnp_interval[1] = DEFAULT_CSNP_INTERVAL;</a>
<a name="ln1090"> </a>
<a name="ln1091">  return CMD_SUCCESS;</a>
<a name="ln1092">}</a>
<a name="ln1093"> </a>
<a name="ln1094">ALIAS (no_csnp_interval,</a>
<a name="ln1095">       no_csnp_interval_arg_cmd,</a>
<a name="ln1096">       &quot;no isis csnp-interval &lt;1-600&gt;&quot;,</a>
<a name="ln1097">       NO_STR</a>
<a name="ln1098">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1099">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1100">       &quot;CSNP interval value\n&quot;)</a>
<a name="ln1101"> </a>
<a name="ln1102">DEFUN (csnp_interval_l1,</a>
<a name="ln1103">       csnp_interval_l1_cmd,</a>
<a name="ln1104">       &quot;isis csnp-interval &lt;1-600&gt; level-1&quot;,</a>
<a name="ln1105">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1106">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1107">       &quot;CSNP interval value\n&quot;</a>
<a name="ln1108">       &quot;Specify interval for level-1 CSNPs\n&quot;)</a>
<a name="ln1109">{</a>
<a name="ln1110">  unsigned long interval;</a>
<a name="ln1111">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1112">  if (!circuit)</a>
<a name="ln1113">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1114"> </a>
<a name="ln1115">  interval = atol (argv[0]);</a>
<a name="ln1116">  if (interval &lt; MIN_CSNP_INTERVAL || interval &gt; MAX_CSNP_INTERVAL)</a>
<a name="ln1117">    {</a>
<a name="ln1118">      vty_out (vty, &quot;Invalid csnp-interval %lu - should be &lt;1-600&gt;%s&quot;,</a>
<a name="ln1119">               interval, VTY_NEWLINE);</a>
<a name="ln1120">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1121">    }</a>
<a name="ln1122"> </a>
<a name="ln1123">  circuit-&gt;csnp_interval[0] = (u_int16_t) interval;</a>
<a name="ln1124"> </a>
<a name="ln1125">  return CMD_SUCCESS;</a>
<a name="ln1126">}</a>
<a name="ln1127"> </a>
<a name="ln1128">DEFUN (no_csnp_interval_l1,</a>
<a name="ln1129">       no_csnp_interval_l1_cmd,</a>
<a name="ln1130">       &quot;no isis csnp-interval level-1&quot;,</a>
<a name="ln1131">       NO_STR</a>
<a name="ln1132">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1133">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1134">       &quot;Specify interval for level-1 CSNPs\n&quot;)</a>
<a name="ln1135">{</a>
<a name="ln1136">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1137">  if (!circuit)</a>
<a name="ln1138">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1139"> </a>
<a name="ln1140">  circuit-&gt;csnp_interval[0] = DEFAULT_CSNP_INTERVAL;</a>
<a name="ln1141"> </a>
<a name="ln1142">  return CMD_SUCCESS;</a>
<a name="ln1143">}</a>
<a name="ln1144"> </a>
<a name="ln1145">ALIAS (no_csnp_interval_l1,</a>
<a name="ln1146">       no_csnp_interval_l1_arg_cmd,</a>
<a name="ln1147">       &quot;no isis csnp-interval &lt;1-600&gt; level-1&quot;,</a>
<a name="ln1148">       NO_STR</a>
<a name="ln1149">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1150">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1151">       &quot;CSNP interval value\n&quot;</a>
<a name="ln1152">       &quot;Specify interval for level-1 CSNPs\n&quot;)</a>
<a name="ln1153"> </a>
<a name="ln1154">DEFUN (csnp_interval_l2,</a>
<a name="ln1155">       csnp_interval_l2_cmd,</a>
<a name="ln1156">       &quot;isis csnp-interval &lt;1-600&gt; level-2&quot;,</a>
<a name="ln1157">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1158">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1159">       &quot;CSNP interval value\n&quot;</a>
<a name="ln1160">       &quot;Specify interval for level-2 CSNPs\n&quot;)</a>
<a name="ln1161">{</a>
<a name="ln1162">  unsigned long interval;</a>
<a name="ln1163">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1164">  if (!circuit)</a>
<a name="ln1165">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1166"> </a>
<a name="ln1167">  interval = atol (argv[0]);</a>
<a name="ln1168">  if (interval &lt; MIN_CSNP_INTERVAL || interval &gt; MAX_CSNP_INTERVAL)</a>
<a name="ln1169">    {</a>
<a name="ln1170">      vty_out (vty, &quot;Invalid csnp-interval %lu - should be &lt;1-600&gt;%s&quot;,</a>
<a name="ln1171">               interval, VTY_NEWLINE);</a>
<a name="ln1172">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1173">    }</a>
<a name="ln1174"> </a>
<a name="ln1175">  circuit-&gt;csnp_interval[1] = (u_int16_t) interval;</a>
<a name="ln1176"> </a>
<a name="ln1177">  return CMD_SUCCESS;</a>
<a name="ln1178">}</a>
<a name="ln1179"> </a>
<a name="ln1180">DEFUN (no_csnp_interval_l2,</a>
<a name="ln1181">       no_csnp_interval_l2_cmd,</a>
<a name="ln1182">       &quot;no isis csnp-interval level-2&quot;,</a>
<a name="ln1183">       NO_STR</a>
<a name="ln1184">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1185">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1186">       &quot;Specify interval for level-2 CSNPs\n&quot;)</a>
<a name="ln1187">{</a>
<a name="ln1188">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1189">  if (!circuit)</a>
<a name="ln1190">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1191"> </a>
<a name="ln1192">  circuit-&gt;csnp_interval[1] = DEFAULT_CSNP_INTERVAL;</a>
<a name="ln1193"> </a>
<a name="ln1194">  return CMD_SUCCESS;</a>
<a name="ln1195">}</a>
<a name="ln1196"> </a>
<a name="ln1197">ALIAS (no_csnp_interval_l2,</a>
<a name="ln1198">       no_csnp_interval_l2_arg_cmd,</a>
<a name="ln1199">       &quot;no isis csnp-interval &lt;1-600&gt; level-2&quot;,</a>
<a name="ln1200">       NO_STR</a>
<a name="ln1201">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1202">       &quot;Set CSNP interval in seconds\n&quot;</a>
<a name="ln1203">       &quot;CSNP interval value\n&quot;</a>
<a name="ln1204">       &quot;Specify interval for level-2 CSNPs\n&quot;)</a>
<a name="ln1205"> </a>
<a name="ln1206">DEFUN (psnp_interval,</a>
<a name="ln1207">       psnp_interval_cmd,</a>
<a name="ln1208">       &quot;isis psnp-interval &lt;1-120&gt;&quot;,</a>
<a name="ln1209">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1210">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1211">       &quot;PSNP interval value\n&quot;)</a>
<a name="ln1212">{</a>
<a name="ln1213">  unsigned long interval;</a>
<a name="ln1214">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1215">  if (!circuit)</a>
<a name="ln1216">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1217"> </a>
<a name="ln1218">  interval = atol (argv[0]);</a>
<a name="ln1219">  if (interval &lt; MIN_PSNP_INTERVAL || interval &gt; MAX_PSNP_INTERVAL)</a>
<a name="ln1220">    {</a>
<a name="ln1221">      vty_out (vty, &quot;Invalid psnp-interval %lu - should be &lt;1-120&gt;%s&quot;,</a>
<a name="ln1222">               interval, VTY_NEWLINE);</a>
<a name="ln1223">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1224">    }</a>
<a name="ln1225"> </a>
<a name="ln1226">  circuit-&gt;psnp_interval[0] = (u_int16_t) interval;</a>
<a name="ln1227">  circuit-&gt;psnp_interval[1] = (u_int16_t) interval;</a>
<a name="ln1228"> </a>
<a name="ln1229">  return CMD_SUCCESS;</a>
<a name="ln1230">}</a>
<a name="ln1231"> </a>
<a name="ln1232">DEFUN (no_psnp_interval,</a>
<a name="ln1233">       no_psnp_interval_cmd,</a>
<a name="ln1234">       &quot;no isis psnp-interval&quot;,</a>
<a name="ln1235">       NO_STR</a>
<a name="ln1236">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1237">       &quot;Set PSNP interval in seconds\n&quot;)</a>
<a name="ln1238">{</a>
<a name="ln1239">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1240">  if (!circuit)</a>
<a name="ln1241">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1242"> </a>
<a name="ln1243">  circuit-&gt;psnp_interval[0] = DEFAULT_PSNP_INTERVAL;</a>
<a name="ln1244">  circuit-&gt;psnp_interval[1] = DEFAULT_PSNP_INTERVAL;</a>
<a name="ln1245"> </a>
<a name="ln1246">  return CMD_SUCCESS;</a>
<a name="ln1247">}</a>
<a name="ln1248"> </a>
<a name="ln1249">ALIAS (no_psnp_interval,</a>
<a name="ln1250">       no_psnp_interval_arg_cmd,</a>
<a name="ln1251">       &quot;no isis psnp-interval &lt;1-120&gt;&quot;,</a>
<a name="ln1252">       NO_STR</a>
<a name="ln1253">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1254">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1255">       &quot;PSNP interval value\n&quot;)</a>
<a name="ln1256"> </a>
<a name="ln1257">DEFUN (psnp_interval_l1,</a>
<a name="ln1258">       psnp_interval_l1_cmd,</a>
<a name="ln1259">       &quot;isis psnp-interval &lt;1-120&gt; level-1&quot;,</a>
<a name="ln1260">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1261">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1262">       &quot;PSNP interval value\n&quot;</a>
<a name="ln1263">       &quot;Specify interval for level-1 PSNPs\n&quot;)</a>
<a name="ln1264">{</a>
<a name="ln1265">  unsigned long interval;</a>
<a name="ln1266">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1267">  if (!circuit)</a>
<a name="ln1268">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1269"> </a>
<a name="ln1270">  interval = atol (argv[0]);</a>
<a name="ln1271">  if (interval &lt; MIN_PSNP_INTERVAL || interval &gt; MAX_PSNP_INTERVAL)</a>
<a name="ln1272">    {</a>
<a name="ln1273">      vty_out (vty, &quot;Invalid psnp-interval %lu - should be &lt;1-120&gt;%s&quot;,</a>
<a name="ln1274">               interval, VTY_NEWLINE);</a>
<a name="ln1275">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1276">    }</a>
<a name="ln1277"> </a>
<a name="ln1278">  circuit-&gt;psnp_interval[0] = (u_int16_t) interval;</a>
<a name="ln1279"> </a>
<a name="ln1280">  return CMD_SUCCESS;</a>
<a name="ln1281">}</a>
<a name="ln1282"> </a>
<a name="ln1283">DEFUN (no_psnp_interval_l1,</a>
<a name="ln1284">       no_psnp_interval_l1_cmd,</a>
<a name="ln1285">       &quot;no isis psnp-interval level-1&quot;,</a>
<a name="ln1286">       NO_STR</a>
<a name="ln1287">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1288">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1289">       &quot;Specify interval for level-1 PSNPs\n&quot;)</a>
<a name="ln1290">{</a>
<a name="ln1291">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1292">  if (!circuit)</a>
<a name="ln1293">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1294"> </a>
<a name="ln1295">  circuit-&gt;psnp_interval[0] = DEFAULT_PSNP_INTERVAL;</a>
<a name="ln1296"> </a>
<a name="ln1297">  return CMD_SUCCESS;</a>
<a name="ln1298">}</a>
<a name="ln1299"> </a>
<a name="ln1300">ALIAS (no_psnp_interval_l1,</a>
<a name="ln1301">       no_psnp_interval_l1_arg_cmd,</a>
<a name="ln1302">       &quot;no isis psnp-interval &lt;1-120&gt; level-1&quot;,</a>
<a name="ln1303">       NO_STR</a>
<a name="ln1304">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1305">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1306">       &quot;PSNP interval value\n&quot;</a>
<a name="ln1307">       &quot;Specify interval for level-1 PSNPs\n&quot;)</a>
<a name="ln1308"> </a>
<a name="ln1309">DEFUN (psnp_interval_l2,</a>
<a name="ln1310">       psnp_interval_l2_cmd,</a>
<a name="ln1311">       &quot;isis psnp-interval &lt;1-120&gt; level-2&quot;,</a>
<a name="ln1312">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1313">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1314">       &quot;PSNP interval value\n&quot;</a>
<a name="ln1315">       &quot;Specify interval for level-2 PSNPs\n&quot;)</a>
<a name="ln1316">{</a>
<a name="ln1317">  unsigned long interval;</a>
<a name="ln1318">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1319">  if (!circuit)</a>
<a name="ln1320">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1321"> </a>
<a name="ln1322">  interval = atol (argv[0]);</a>
<a name="ln1323">  if (interval &lt; MIN_PSNP_INTERVAL || interval &gt; MAX_PSNP_INTERVAL)</a>
<a name="ln1324">    {</a>
<a name="ln1325">      vty_out (vty, &quot;Invalid psnp-interval %lu - should be &lt;1-120&gt;%s&quot;,</a>
<a name="ln1326">               interval, VTY_NEWLINE);</a>
<a name="ln1327">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1328">    }</a>
<a name="ln1329"> </a>
<a name="ln1330">  circuit-&gt;psnp_interval[1] = (u_int16_t) interval;</a>
<a name="ln1331"> </a>
<a name="ln1332">  return CMD_SUCCESS;</a>
<a name="ln1333">}</a>
<a name="ln1334"> </a>
<a name="ln1335">DEFUN (no_psnp_interval_l2,</a>
<a name="ln1336">       no_psnp_interval_l2_cmd,</a>
<a name="ln1337">       &quot;no isis psnp-interval level-2&quot;,</a>
<a name="ln1338">       NO_STR</a>
<a name="ln1339">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1340">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1341">       &quot;Specify interval for level-2 PSNPs\n&quot;)</a>
<a name="ln1342">{</a>
<a name="ln1343">  struct isis_circuit *circuit = isis_circuit_lookup (vty);</a>
<a name="ln1344">  if (!circuit)</a>
<a name="ln1345">    return CMD_ERR_NO_MATCH;</a>
<a name="ln1346"> </a>
<a name="ln1347">  circuit-&gt;psnp_interval[1] = DEFAULT_PSNP_INTERVAL;</a>
<a name="ln1348"> </a>
<a name="ln1349">  return CMD_SUCCESS;</a>
<a name="ln1350">}</a>
<a name="ln1351"> </a>
<a name="ln1352">ALIAS (no_psnp_interval_l2,</a>
<a name="ln1353">       no_psnp_interval_l2_arg_cmd,</a>
<a name="ln1354">       &quot;no isis psnp-interval &lt;1-120&gt; level-2&quot;,</a>
<a name="ln1355">       NO_STR</a>
<a name="ln1356">       &quot;IS-IS commands\n&quot;</a>
<a name="ln1357">       &quot;Set PSNP interval in seconds\n&quot;</a>
<a name="ln1358">       &quot;PSNP interval value\n&quot;</a>
<a name="ln1359">       &quot;Specify interval for level-2 PSNPs\n&quot;)</a>
<a name="ln1360"> </a>
<a name="ln1361">static int</a>
<a name="ln1362">validate_metric_style_narrow (struct vty *vty, struct isis_area *area)</a>
<a name="ln1363">{</a>
<a name="ln1364">  struct isis_circuit *circuit;</a>
<a name="ln1365">  struct listnode *node;</a>
<a name="ln1366"> </a>
<a name="ln1367">  if (! vty)</a>
<a name="ln1368">    return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1369"> </a>
<a name="ln1370">  if (! area)</a>
<a name="ln1371">    {</a>
<a name="ln1372">      vty_out (vty, &quot;ISIS area is invalid%s&quot;, VTY_NEWLINE);</a>
<a name="ln1373">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1374">    }</a>
<a name="ln1375"> </a>
<a name="ln1376">  for (ALL_LIST_ELEMENTS_RO (area-&gt;circuit_list, node, circuit))</a>
<a name="ln1377">    {</a>
<a name="ln1378">      if ((area-&gt;is_type &amp; IS_LEVEL_1) &amp;&amp;</a>
<a name="ln1379">          (circuit-&gt;is_type &amp; IS_LEVEL_1) &amp;&amp;</a>
<a name="ln1380">          (circuit-&gt;te_metric[0] &gt; MAX_NARROW_LINK_METRIC))</a>
<a name="ln1381">        {</a>
<a name="ln1382">          vty_out (vty, &quot;ISIS circuit %s metric is invalid%s&quot;,</a>
<a name="ln1383">                   circuit-&gt;interface-&gt;name, VTY_NEWLINE);</a>
<a name="ln1384">          return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1385">        }</a>
<a name="ln1386">      if ((area-&gt;is_type &amp; IS_LEVEL_2) &amp;&amp;</a>
<a name="ln1387">          (circuit-&gt;is_type &amp; IS_LEVEL_2) &amp;&amp;</a>
<a name="ln1388">          (circuit-&gt;te_metric[1] &gt; MAX_NARROW_LINK_METRIC))</a>
<a name="ln1389">        {</a>
<a name="ln1390">          vty_out (vty, &quot;ISIS circuit %s metric is invalid%s&quot;,</a>
<a name="ln1391">                   circuit-&gt;interface-&gt;name, VTY_NEWLINE);</a>
<a name="ln1392">          return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1393">        }</a>
<a name="ln1394">    }</a>
<a name="ln1395"> </a>
<a name="ln1396">  return CMD_SUCCESS;</a>
<a name="ln1397">}</a>
<a name="ln1398"> </a>
<a name="ln1399">DEFUN (metric_style,</a>
<a name="ln1400">       metric_style_cmd,</a>
<a name="ln1401">       &quot;metric-style (narrow|transition|wide)&quot;,</a>
<a name="ln1402">       &quot;Use old-style (ISO 10589) or new-style packet formats\n&quot;</a>
<a name="ln1403">       &quot;Use old style of TLVs with narrow metric\n&quot;</a>
<a name="ln1404">       &quot;Send and accept both styles of TLVs during transition\n&quot;</a>
<a name="ln1405">       &quot;Use new style of TLVs to carry wider metric\n&quot;)</a>
<a name="ln1406">{</a>
<a name="ln1407">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1408">  int ret;</a>
<a name="ln1409"> </a>
<a name="ln1410">  assert(area);</a>
<a name="ln1411"> </a>
<a name="ln1412">  if (strncmp (argv[0], &quot;w&quot;, 1) == 0)</a>
<a name="ln1413">    {</a>
<a name="ln1414">      isis_area_metricstyle_set(area, false, true);</a>
<a name="ln1415">      return CMD_SUCCESS;</a>
<a name="ln1416">    }</a>
<a name="ln1417"> </a>
<a name="ln1418">  ret = validate_metric_style_narrow (vty, area);</a>
<a name="ln1419">  if (ret != CMD_SUCCESS)</a>
<a name="ln1420">    return ret;</a>
<a name="ln1421"> </a>
<a name="ln1422">  if (strncmp (argv[0], &quot;t&quot;, 1) == 0)</a>
<a name="ln1423">    isis_area_metricstyle_set(area, true, true);</a>
<a name="ln1424">  else if (strncmp (argv[0], &quot;n&quot;, 1) == 0)</a>
<a name="ln1425">    isis_area_metricstyle_set(area, true, false);</a>
<a name="ln1426">      return CMD_SUCCESS;</a>
<a name="ln1427"> </a>
<a name="ln1428">  return CMD_SUCCESS;</a>
<a name="ln1429">}</a>
<a name="ln1430"> </a>
<a name="ln1431">DEFUN (no_metric_style,</a>
<a name="ln1432">       no_metric_style_cmd,</a>
<a name="ln1433">       &quot;no metric-style&quot;,</a>
<a name="ln1434">       NO_STR</a>
<a name="ln1435">       &quot;Use old-style (ISO 10589) or new-style packet formats\n&quot;)</a>
<a name="ln1436">{</a>
<a name="ln1437">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1438">  int ret;</a>
<a name="ln1439"> </a>
<a name="ln1440">  assert (area);</a>
<a name="ln1441">  ret = validate_metric_style_narrow (vty, area);</a>
<a name="ln1442">  if (ret != CMD_SUCCESS)</a>
<a name="ln1443">    return ret;</a>
<a name="ln1444"> </a>
<a name="ln1445">  isis_area_metricstyle_set(area, true, false);</a>
<a name="ln1446">  return CMD_SUCCESS;</a>
<a name="ln1447">}</a>
<a name="ln1448"> </a>
<a name="ln1449">DEFUN (set_overload_bit,</a>
<a name="ln1450">       set_overload_bit_cmd,</a>
<a name="ln1451">       &quot;set-overload-bit&quot;,</a>
<a name="ln1452">       &quot;Set overload bit to avoid any transit traffic\n&quot;</a>
<a name="ln1453">       &quot;Set overload bit\n&quot;)</a>
<a name="ln1454">{</a>
<a name="ln1455">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1456">  assert (area);</a>
<a name="ln1457"> </a>
<a name="ln1458">  isis_area_overload_bit_set(area, true);</a>
<a name="ln1459">  return CMD_SUCCESS;</a>
<a name="ln1460">}</a>
<a name="ln1461"> </a>
<a name="ln1462">DEFUN (no_set_overload_bit,</a>
<a name="ln1463">       no_set_overload_bit_cmd,</a>
<a name="ln1464">       &quot;no set-overload-bit&quot;,</a>
<a name="ln1465">       &quot;Reset overload bit to accept transit traffic\n&quot;</a>
<a name="ln1466">       &quot;Reset overload bit\n&quot;)</a>
<a name="ln1467">{</a>
<a name="ln1468">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1469">  assert (area);</a>
<a name="ln1470"> </a>
<a name="ln1471">  isis_area_overload_bit_set(area, false);</a>
<a name="ln1472">  return CMD_SUCCESS;</a>
<a name="ln1473">}</a>
<a name="ln1474"> </a>
<a name="ln1475">DEFUN (set_attached_bit,</a>
<a name="ln1476">       set_attached_bit_cmd,</a>
<a name="ln1477">       &quot;set-attached-bit&quot;,</a>
<a name="ln1478">       &quot;Set attached bit to identify as L1/L2 router for inter-area traffic\n&quot;</a>
<a name="ln1479">       &quot;Set attached bit\n&quot;)</a>
<a name="ln1480">{</a>
<a name="ln1481">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1482">  assert (area);</a>
<a name="ln1483"> </a>
<a name="ln1484">  isis_area_attached_bit_set(area, true);</a>
<a name="ln1485">  return CMD_SUCCESS;</a>
<a name="ln1486">}</a>
<a name="ln1487"> </a>
<a name="ln1488">DEFUN (no_set_attached_bit,</a>
<a name="ln1489">       no_set_attached_bit_cmd,</a>
<a name="ln1490">       &quot;no set-attached-bit&quot;,</a>
<a name="ln1491">       &quot;Reset attached bit\n&quot;)</a>
<a name="ln1492">{</a>
<a name="ln1493">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1494">  assert (area);</a>
<a name="ln1495"> </a>
<a name="ln1496">  isis_area_attached_bit_set(area, false);</a>
<a name="ln1497">  return CMD_SUCCESS;</a>
<a name="ln1498">}</a>
<a name="ln1499"> </a>
<a name="ln1500">DEFUN (dynamic_hostname,</a>
<a name="ln1501">       dynamic_hostname_cmd,</a>
<a name="ln1502">       &quot;hostname dynamic&quot;,</a>
<a name="ln1503">       &quot;Dynamic hostname for IS-IS\n&quot;</a>
<a name="ln1504">       &quot;Dynamic hostname\n&quot;)</a>
<a name="ln1505">{</a>
<a name="ln1506">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1507">  assert(area);</a>
<a name="ln1508"> </a>
<a name="ln1509">  isis_area_dynhostname_set(area, true);</a>
<a name="ln1510">  return CMD_SUCCESS;</a>
<a name="ln1511">}</a>
<a name="ln1512"> </a>
<a name="ln1513">DEFUN (no_dynamic_hostname,</a>
<a name="ln1514">       no_dynamic_hostname_cmd,</a>
<a name="ln1515">       &quot;no hostname dynamic&quot;,</a>
<a name="ln1516">       NO_STR</a>
<a name="ln1517">       &quot;Dynamic hostname for IS-IS\n&quot;</a>
<a name="ln1518">       &quot;Dynamic hostname\n&quot;)</a>
<a name="ln1519">{</a>
<a name="ln1520">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1521">  assert(area);</a>
<a name="ln1522"> </a>
<a name="ln1523">  isis_area_dynhostname_set(area, false);</a>
<a name="ln1524">  return CMD_SUCCESS;</a>
<a name="ln1525">}</a>
<a name="ln1526"> </a>
<a name="ln1527">static int area_lsp_mtu_set(struct vty *vty, unsigned int lsp_mtu)</a>
<a name="ln1528">{</a>
<a name="ln1529">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1530">  struct listnode *node;</a>
<a name="ln1531">  struct isis_circuit *circuit;</a>
<a name="ln1532"> </a>
<a name="ln1533">  if (!area)</a>
<a name="ln1534">    {</a>
<a name="ln1535">      vty_out (vty, &quot;Can't find ISIS instance %s&quot;, VTY_NEWLINE);</a>
<a name="ln1536">      return CMD_ERR_NO_MATCH;</a>
<a name="ln1537">    }</a>
<a name="ln1538"> </a>
<a name="ln1539">  for (ALL_LIST_ELEMENTS_RO(area-&gt;circuit_list, node, circuit))</a>
<a name="ln1540">    {</a>
<a name="ln1541">      if(circuit-&gt;state != C_STATE_INIT &amp;&amp; circuit-&gt;state != C_STATE_UP)</a>
<a name="ln1542">        continue;</a>
<a name="ln1543">      if(lsp_mtu &gt; isis_circuit_pdu_size(circuit))</a>
<a name="ln1544">        {</a>
<a name="ln1545">          vty_out(vty, &quot;ISIS area contains circuit %s, which has a maximum PDU size of %zu.%s&quot;,</a>
<a name="ln1546">                  circuit-&gt;interface-&gt;name, isis_circuit_pdu_size(circuit),</a>
<a name="ln1547">                  VTY_NEWLINE);</a>
<a name="ln1548">          return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1549">        }</a>
<a name="ln1550">    }</a>
<a name="ln1551"> </a>
<a name="ln1552">  isis_area_lsp_mtu_set(area, lsp_mtu);</a>
<a name="ln1553">  return CMD_SUCCESS;</a>
<a name="ln1554">}</a>
<a name="ln1555"> </a>
<a name="ln1556">DEFUN (area_lsp_mtu,</a>
<a name="ln1557">       area_lsp_mtu_cmd,</a>
<a name="ln1558">       &quot;lsp-mtu &lt;128-4352&gt;&quot;,</a>
<a name="ln1559">       &quot;Configure the maximum size of generated LSPs\n&quot;</a>
<a name="ln1560">       &quot;Maximum size of generated LSPs\n&quot;)</a>
<a name="ln1561">{</a>
<a name="ln1562">  unsigned int lsp_mtu;</a>
<a name="ln1563"> </a>
<a name="ln1564">  VTY_GET_INTEGER_RANGE(&quot;lsp-mtu&quot;, lsp_mtu, argv[0], 128, 4352);</a>
<a name="ln1565"> </a>
<a name="ln1566">  return area_lsp_mtu_set(vty, lsp_mtu);</a>
<a name="ln1567">}</a>
<a name="ln1568"> </a>
<a name="ln1569">DEFUN(no_area_lsp_mtu,</a>
<a name="ln1570">      no_area_lsp_mtu_cmd,</a>
<a name="ln1571">      &quot;no lsp-mtu&quot;,</a>
<a name="ln1572">      NO_STR</a>
<a name="ln1573">      &quot;Configure the maximum size of generated LSPs\n&quot;)</a>
<a name="ln1574">{</a>
<a name="ln1575">  return area_lsp_mtu_set(vty, DEFAULT_LSP_MTU);</a>
<a name="ln1576">}</a>
<a name="ln1577"> </a>
<a name="ln1578">ALIAS(no_area_lsp_mtu,</a>
<a name="ln1579">      no_area_lsp_mtu_arg_cmd,</a>
<a name="ln1580">      &quot;no lsp-mtu &lt;128-4352&gt;&quot;,</a>
<a name="ln1581">      NO_STR</a>
<a name="ln1582">      &quot;Configure the maximum size of generated LSPs\n&quot;</a>
<a name="ln1583">      &quot;Maximum size of generated LSPs\n&quot;);</a>
<a name="ln1584"> </a>
<a name="ln1585">DEFUN (is_type,</a>
<a name="ln1586">       is_type_cmd,</a>
<a name="ln1587">       &quot;is-type (level-1|level-1-2|level-2-only)&quot;,</a>
<a name="ln1588">       &quot;IS Level for this routing process (OSI only)\n&quot;</a>
<a name="ln1589">       &quot;Act as a station router only\n&quot;</a>
<a name="ln1590">       &quot;Act as both a station router and an area router\n&quot;</a>
<a name="ln1591">       &quot;Act as an area router only\n&quot;)</a>
<a name="ln1592">{</a>
<a name="ln1593">  struct isis_area *area;</a>
<a name="ln1594">  int type;</a>
<a name="ln1595"> </a>
<a name="ln1596">  area = vty-&gt;index;</a>
<a name="ln1597"> </a>
<a name="ln1598">  if (!area)</a>
<a name="ln1599">    {</a>
<a name="ln1600">      vty_out (vty, &quot;Can't find IS-IS instance%s&quot;, VTY_NEWLINE);</a>
<a name="ln1601">      return CMD_ERR_NO_MATCH;</a>
<a name="ln1602">    }</a>
<a name="ln1603"> </a>
<a name="ln1604">  type = string2circuit_t (argv[0]);</a>
<a name="ln1605">  if (!type)</a>
<a name="ln1606">    {</a>
<a name="ln1607">      vty_out (vty, &quot;Unknown IS level %s&quot;, VTY_NEWLINE);</a>
<a name="ln1608">      return CMD_SUCCESS;</a>
<a name="ln1609">    }</a>
<a name="ln1610"> </a>
<a name="ln1611">  isis_area_is_type_set(area, type);</a>
<a name="ln1612"> </a>
<a name="ln1613">  return CMD_SUCCESS;</a>
<a name="ln1614">}</a>
<a name="ln1615"> </a>
<a name="ln1616">DEFUN (no_is_type,</a>
<a name="ln1617">       no_is_type_cmd,</a>
<a name="ln1618">       &quot;no is-type (level-1|level-1-2|level-2-only)&quot;,</a>
<a name="ln1619">       NO_STR</a>
<a name="ln1620">       &quot;IS Level for this routing process (OSI only)\n&quot;</a>
<a name="ln1621">       &quot;Act as a station router only\n&quot;</a>
<a name="ln1622">       &quot;Act as both a station router and an area router\n&quot;</a>
<a name="ln1623">       &quot;Act as an area router only\n&quot;)</a>
<a name="ln1624">{</a>
<a name="ln1625">  struct isis_area *area;</a>
<a name="ln1626">  int type;</a>
<a name="ln1627"> </a>
<a name="ln1628">  area = vty-&gt;index;</a>
<a name="ln1629">  assert (area);</a>
<a name="ln1630"> </a>
<a name="ln1631">  /*</a>
<a name="ln1632">   * Put the is-type back to defaults:</a>
<a name="ln1633">   * - level-1-2 on first area</a>
<a name="ln1634">   * - level-1 for the rest</a>
<a name="ln1635">   */</a>
<a name="ln1636">  if (listgetdata (listhead (isis-&gt;area_list)) == area)</a>
<a name="ln1637">    type = IS_LEVEL_1_AND_2;</a>
<a name="ln1638">  else</a>
<a name="ln1639">    type = IS_LEVEL_1;</a>
<a name="ln1640"> </a>
<a name="ln1641">  isis_area_is_type_set(area, type);</a>
<a name="ln1642"> </a>
<a name="ln1643">  return CMD_SUCCESS;</a>
<a name="ln1644">}</a>
<a name="ln1645"> </a>
<a name="ln1646">static int</a>
<a name="ln1647">set_lsp_gen_interval (struct vty *vty, struct isis_area *area,</a>
<a name="ln1648">                      uint16_t interval, int level)</a>
<a name="ln1649">{</a>
<a name="ln1650">  int lvl;</a>
<a name="ln1651"> </a>
<a name="ln1652">  for (lvl = IS_LEVEL_1; lvl &lt;= IS_LEVEL_2; ++lvl)</a>
<a name="ln1653">    {</a>
<a name="ln1654">      if (!(lvl &amp; level))</a>
<a name="ln1655">        continue;</a>
<a name="ln1656"> </a>
<a name="ln1657">      if (interval &gt;= area-&gt;lsp_refresh[lvl-1])</a>
<a name="ln1658">        {</a>
<a name="ln1659">          vty_out (vty, &quot;LSP gen interval %us must be less than &quot;</a>
<a name="ln1660">                   &quot;the LSP refresh interval %us%s&quot;,</a>
<a name="ln1661">                   interval, area-&gt;lsp_refresh[lvl-1], VTY_NEWLINE);</a>
<a name="ln1662">          return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1663">        }</a>
<a name="ln1664">    }</a>
<a name="ln1665"> </a>
<a name="ln1666">  for (lvl = IS_LEVEL_1; lvl &lt;= IS_LEVEL_2; ++lvl)</a>
<a name="ln1667">    {</a>
<a name="ln1668">      if (!(lvl &amp; level))</a>
<a name="ln1669">        continue;</a>
<a name="ln1670">      area-&gt;lsp_gen_interval[lvl-1] = interval;</a>
<a name="ln1671">    }</a>
<a name="ln1672"> </a>
<a name="ln1673">  return CMD_SUCCESS;</a>
<a name="ln1674">}</a>
<a name="ln1675"> </a>
<a name="ln1676">DEFUN (lsp_gen_interval,</a>
<a name="ln1677">       lsp_gen_interval_cmd,</a>
<a name="ln1678">       &quot;lsp-gen-interval &lt;1-120&gt;&quot;,</a>
<a name="ln1679">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1680">       &quot;Minimum interval in seconds\n&quot;)</a>
<a name="ln1681">{</a>
<a name="ln1682">  struct isis_area *area;</a>
<a name="ln1683">  uint16_t interval;</a>
<a name="ln1684">  int level;</a>
<a name="ln1685"> </a>
<a name="ln1686">  area = vty-&gt;index;</a>
<a name="ln1687">  interval = atoi (argv[0]);</a>
<a name="ln1688">  level = IS_LEVEL_1 | IS_LEVEL_2;</a>
<a name="ln1689">  return set_lsp_gen_interval (vty, area, interval, level);</a>
<a name="ln1690">}</a>
<a name="ln1691"> </a>
<a name="ln1692">DEFUN (no_lsp_gen_interval,</a>
<a name="ln1693">       no_lsp_gen_interval_cmd,</a>
<a name="ln1694">       &quot;no lsp-gen-interval&quot;,</a>
<a name="ln1695">       NO_STR</a>
<a name="ln1696">       &quot;Minimum interval between regenerating same LSP\n&quot;)</a>
<a name="ln1697">{</a>
<a name="ln1698">  struct isis_area *area;</a>
<a name="ln1699">  uint16_t interval;</a>
<a name="ln1700">  int level;</a>
<a name="ln1701"> </a>
<a name="ln1702">  area = vty-&gt;index;</a>
<a name="ln1703">  interval = DEFAULT_MIN_LSP_GEN_INTERVAL;</a>
<a name="ln1704">  level = IS_LEVEL_1 | IS_LEVEL_2;</a>
<a name="ln1705">  return set_lsp_gen_interval (vty, area, interval, level);</a>
<a name="ln1706">}</a>
<a name="ln1707"> </a>
<a name="ln1708">ALIAS (no_lsp_gen_interval,</a>
<a name="ln1709">       no_lsp_gen_interval_arg_cmd,</a>
<a name="ln1710">       &quot;no lsp-gen-interval &lt;1-120&gt;&quot;,</a>
<a name="ln1711">       NO_STR</a>
<a name="ln1712">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1713">       &quot;Minimum interval in seconds\n&quot;)</a>
<a name="ln1714"> </a>
<a name="ln1715">DEFUN (lsp_gen_interval_l1,</a>
<a name="ln1716">       lsp_gen_interval_l1_cmd,</a>
<a name="ln1717">       &quot;lsp-gen-interval level-1 &lt;1-120&gt;&quot;,</a>
<a name="ln1718">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1719">       &quot;Set interval for level 1 only\n&quot;</a>
<a name="ln1720">       &quot;Minimum interval in seconds\n&quot;)</a>
<a name="ln1721">{</a>
<a name="ln1722">  struct isis_area *area;</a>
<a name="ln1723">  uint16_t interval;</a>
<a name="ln1724">  int level;</a>
<a name="ln1725"> </a>
<a name="ln1726">  area = vty-&gt;index;</a>
<a name="ln1727">  interval = atoi (argv[0]);</a>
<a name="ln1728">  level = IS_LEVEL_1;</a>
<a name="ln1729">  return set_lsp_gen_interval (vty, area, interval, level);</a>
<a name="ln1730">}</a>
<a name="ln1731"> </a>
<a name="ln1732">DEFUN (no_lsp_gen_interval_l1,</a>
<a name="ln1733">       no_lsp_gen_interval_l1_cmd,</a>
<a name="ln1734">       &quot;no lsp-gen-interval level-1&quot;,</a>
<a name="ln1735">       NO_STR</a>
<a name="ln1736">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1737">       &quot;Set interval for level 1 only\n&quot;)</a>
<a name="ln1738">{</a>
<a name="ln1739">  struct isis_area *area;</a>
<a name="ln1740">  uint16_t interval;</a>
<a name="ln1741">  int level;</a>
<a name="ln1742"> </a>
<a name="ln1743">  area = vty-&gt;index;</a>
<a name="ln1744">  interval = DEFAULT_MIN_LSP_GEN_INTERVAL;</a>
<a name="ln1745">  level = IS_LEVEL_1;</a>
<a name="ln1746">  return set_lsp_gen_interval (vty, area, interval, level);</a>
<a name="ln1747">}</a>
<a name="ln1748"> </a>
<a name="ln1749">ALIAS (no_lsp_gen_interval_l1,</a>
<a name="ln1750">       no_lsp_gen_interval_l1_arg_cmd,</a>
<a name="ln1751">       &quot;no lsp-gen-interval level-1 &lt;1-120&gt;&quot;,</a>
<a name="ln1752">       NO_STR</a>
<a name="ln1753">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1754">       &quot;Set interval for level 1 only\n&quot;</a>
<a name="ln1755">       &quot;Minimum interval in seconds\n&quot;)</a>
<a name="ln1756"> </a>
<a name="ln1757">DEFUN (lsp_gen_interval_l2,</a>
<a name="ln1758">       lsp_gen_interval_l2_cmd,</a>
<a name="ln1759">       &quot;lsp-gen-interval level-2 &lt;1-120&gt;&quot;,</a>
<a name="ln1760">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1761">       &quot;Set interval for level 2 only\n&quot;</a>
<a name="ln1762">       &quot;Minimum interval in seconds\n&quot;)</a>
<a name="ln1763">{</a>
<a name="ln1764">  struct isis_area *area;</a>
<a name="ln1765">  uint16_t interval;</a>
<a name="ln1766">  int level;</a>
<a name="ln1767"> </a>
<a name="ln1768">  area = vty-&gt;index;</a>
<a name="ln1769">  interval = atoi (argv[0]);</a>
<a name="ln1770">  level = IS_LEVEL_2;</a>
<a name="ln1771">  return set_lsp_gen_interval (vty, area, interval, level);</a>
<a name="ln1772">}</a>
<a name="ln1773"> </a>
<a name="ln1774">DEFUN (no_lsp_gen_interval_l2,</a>
<a name="ln1775">       no_lsp_gen_interval_l2_cmd,</a>
<a name="ln1776">       &quot;no lsp-gen-interval level-2&quot;,</a>
<a name="ln1777">       NO_STR</a>
<a name="ln1778">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1779">       &quot;Set interval for level 2 only\n&quot;)</a>
<a name="ln1780">{</a>
<a name="ln1781">  struct isis_area *area;</a>
<a name="ln1782">  uint16_t interval;</a>
<a name="ln1783">  int level;</a>
<a name="ln1784"> </a>
<a name="ln1785">  area = vty-&gt;index;</a>
<a name="ln1786">  interval = DEFAULT_MIN_LSP_GEN_INTERVAL;</a>
<a name="ln1787">  level = IS_LEVEL_2;</a>
<a name="ln1788">  return set_lsp_gen_interval (vty, area, interval, level);</a>
<a name="ln1789">}</a>
<a name="ln1790"> </a>
<a name="ln1791">ALIAS (no_lsp_gen_interval_l2,</a>
<a name="ln1792">       no_lsp_gen_interval_l2_arg_cmd,</a>
<a name="ln1793">       &quot;no lsp-gen-interval level-2 &lt;1-120&gt;&quot;,</a>
<a name="ln1794">       NO_STR</a>
<a name="ln1795">       &quot;Minimum interval between regenerating same LSP\n&quot;</a>
<a name="ln1796">       &quot;Set interval for level 2 only\n&quot;</a>
<a name="ln1797">       &quot;Minimum interval in seconds\n&quot;)</a>
<a name="ln1798"> </a>
<a name="ln1799">DEFUN (spf_interval,</a>
<a name="ln1800">       spf_interval_cmd,</a>
<a name="ln1801">       &quot;spf-interval &lt;1-120&gt;&quot;,</a>
<a name="ln1802">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1803">       &quot;Minimum interval between consecutive SPFs in seconds\n&quot;)</a>
<a name="ln1804">{</a>
<a name="ln1805">  struct isis_area *area;</a>
<a name="ln1806">  u_int16_t interval;</a>
<a name="ln1807"> </a>
<a name="ln1808">  area = vty-&gt;index;</a>
<a name="ln1809">  interval = atoi (argv[0]);</a>
<a name="ln1810">  area-&gt;min_spf_interval[0] = interval;</a>
<a name="ln1811">  area-&gt;min_spf_interval[1] = interval;</a>
<a name="ln1812"> </a>
<a name="ln1813">  return CMD_SUCCESS;</a>
<a name="ln1814">}</a>
<a name="ln1815"> </a>
<a name="ln1816">DEFUN (no_spf_interval,</a>
<a name="ln1817">       no_spf_interval_cmd,</a>
<a name="ln1818">       &quot;no spf-interval&quot;,</a>
<a name="ln1819">       NO_STR</a>
<a name="ln1820">       &quot;Minimum interval between SPF calculations\n&quot;)</a>
<a name="ln1821">{</a>
<a name="ln1822">  struct isis_area *area;</a>
<a name="ln1823"> </a>
<a name="ln1824">  area = vty-&gt;index;</a>
<a name="ln1825"> </a>
<a name="ln1826">  area-&gt;min_spf_interval[0] = MINIMUM_SPF_INTERVAL;</a>
<a name="ln1827">  area-&gt;min_spf_interval[1] = MINIMUM_SPF_INTERVAL;</a>
<a name="ln1828"> </a>
<a name="ln1829">  return CMD_SUCCESS;</a>
<a name="ln1830">}</a>
<a name="ln1831"> </a>
<a name="ln1832">ALIAS (no_spf_interval,</a>
<a name="ln1833">       no_spf_interval_arg_cmd,</a>
<a name="ln1834">       &quot;no spf-interval &lt;1-120&gt;&quot;,</a>
<a name="ln1835">       NO_STR</a>
<a name="ln1836">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1837">       &quot;Minimum interval between consecutive SPFs in seconds\n&quot;)</a>
<a name="ln1838"> </a>
<a name="ln1839">DEFUN (spf_interval_l1,</a>
<a name="ln1840">       spf_interval_l1_cmd,</a>
<a name="ln1841">       &quot;spf-interval level-1 &lt;1-120&gt;&quot;,</a>
<a name="ln1842">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1843">       &quot;Set interval for level 1 only\n&quot;</a>
<a name="ln1844">       &quot;Minimum interval between consecutive SPFs in seconds\n&quot;)</a>
<a name="ln1845">{</a>
<a name="ln1846">  struct isis_area *area;</a>
<a name="ln1847">  u_int16_t interval;</a>
<a name="ln1848"> </a>
<a name="ln1849">  area = vty-&gt;index;</a>
<a name="ln1850">  interval = atoi (argv[0]);</a>
<a name="ln1851">  area-&gt;min_spf_interval[0] = interval;</a>
<a name="ln1852"> </a>
<a name="ln1853">  return CMD_SUCCESS;</a>
<a name="ln1854">}</a>
<a name="ln1855"> </a>
<a name="ln1856">DEFUN (no_spf_interval_l1,</a>
<a name="ln1857">       no_spf_interval_l1_cmd,</a>
<a name="ln1858">       &quot;no spf-interval level-1&quot;,</a>
<a name="ln1859">       NO_STR</a>
<a name="ln1860">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1861">       &quot;Set interval for level 1 only\n&quot;)</a>
<a name="ln1862">{</a>
<a name="ln1863">  struct isis_area *area;</a>
<a name="ln1864"> </a>
<a name="ln1865">  area = vty-&gt;index;</a>
<a name="ln1866"> </a>
<a name="ln1867">  area-&gt;min_spf_interval[0] = MINIMUM_SPF_INTERVAL;</a>
<a name="ln1868"> </a>
<a name="ln1869">  return CMD_SUCCESS;</a>
<a name="ln1870">}</a>
<a name="ln1871"> </a>
<a name="ln1872">ALIAS (no_spf_interval,</a>
<a name="ln1873">       no_spf_interval_l1_arg_cmd,</a>
<a name="ln1874">       &quot;no spf-interval level-1 &lt;1-120&gt;&quot;,</a>
<a name="ln1875">       NO_STR</a>
<a name="ln1876">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1877">       &quot;Set interval for level 1 only\n&quot;</a>
<a name="ln1878">       &quot;Minimum interval between consecutive SPFs in seconds\n&quot;)</a>
<a name="ln1879"> </a>
<a name="ln1880">DEFUN (spf_interval_l2,</a>
<a name="ln1881">       spf_interval_l2_cmd,</a>
<a name="ln1882">       &quot;spf-interval level-2 &lt;1-120&gt;&quot;,</a>
<a name="ln1883">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1884">       &quot;Set interval for level 2 only\n&quot;</a>
<a name="ln1885">       &quot;Minimum interval between consecutive SPFs in seconds\n&quot;)</a>
<a name="ln1886">{</a>
<a name="ln1887">  struct isis_area *area;</a>
<a name="ln1888">  u_int16_t interval;</a>
<a name="ln1889"> </a>
<a name="ln1890">  area = vty-&gt;index;</a>
<a name="ln1891">  interval = atoi (argv[0]);</a>
<a name="ln1892">  area-&gt;min_spf_interval[1] = interval;</a>
<a name="ln1893"> </a>
<a name="ln1894">  return CMD_SUCCESS;</a>
<a name="ln1895">}</a>
<a name="ln1896"> </a>
<a name="ln1897">DEFUN (no_spf_interval_l2,</a>
<a name="ln1898">       no_spf_interval_l2_cmd,</a>
<a name="ln1899">       &quot;no spf-interval level-2&quot;,</a>
<a name="ln1900">       NO_STR</a>
<a name="ln1901">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1902">       &quot;Set interval for level 2 only\n&quot;)</a>
<a name="ln1903">{</a>
<a name="ln1904">  struct isis_area *area;</a>
<a name="ln1905"> </a>
<a name="ln1906">  area = vty-&gt;index;</a>
<a name="ln1907"> </a>
<a name="ln1908">  area-&gt;min_spf_interval[1] = MINIMUM_SPF_INTERVAL;</a>
<a name="ln1909"> </a>
<a name="ln1910">  return CMD_SUCCESS;</a>
<a name="ln1911">}</a>
<a name="ln1912"> </a>
<a name="ln1913">ALIAS (no_spf_interval,</a>
<a name="ln1914">       no_spf_interval_l2_arg_cmd,</a>
<a name="ln1915">       &quot;no spf-interval level-2 &lt;1-120&gt;&quot;,</a>
<a name="ln1916">       NO_STR</a>
<a name="ln1917">       &quot;Minimum interval between SPF calculations\n&quot;</a>
<a name="ln1918">       &quot;Set interval for level 2 only\n&quot;</a>
<a name="ln1919">       &quot;Minimum interval between consecutive SPFs in seconds\n&quot;)</a>
<a name="ln1920"> </a>
<a name="ln1921">static int</a>
<a name="ln1922">area_max_lsp_lifetime_set(struct vty *vty, int level,</a>
<a name="ln1923">			  uint16_t interval)</a>
<a name="ln1924">{</a>
<a name="ln1925">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln1926">  int lvl;</a>
<a name="ln1927">  uint16_t refresh_interval = interval - 300;</a>
<a name="ln1928">  int set_refresh_interval[ISIS_LEVELS] = {0, 0};</a>
<a name="ln1929"> </a>
<a name="ln1930">  if (!area)</a>
<a name="ln1931">    {</a>
<a name="ln1932">      vty_out (vty, &quot;Can't find ISIS instance %s&quot;, VTY_NEWLINE);</a>
<a name="ln1933">      return CMD_ERR_NO_MATCH;</a>
<a name="ln1934">    }</a>
<a name="ln1935"> </a>
<a name="ln1936">  for (lvl = IS_LEVEL_1; lvl &lt;= IS_LEVEL_2; lvl++)</a>
<a name="ln1937">    {</a>
<a name="ln1938">      if (!(lvl &amp; level))</a>
<a name="ln1939">        continue;</a>
<a name="ln1940"> </a>
<a name="ln1941">      if (refresh_interval &lt; area-&gt;lsp_refresh[lvl-1])</a>
<a name="ln1942">        {</a>
<a name="ln1943">          vty_out (vty, &quot;Level %d Max LSP lifetime %us must be 300s greater than &quot;</a>
<a name="ln1944">                   &quot;the configured LSP refresh interval %us%s&quot;,</a>
<a name="ln1945">                   lvl, interval, area-&gt;lsp_refresh[lvl-1], VTY_NEWLINE);</a>
<a name="ln1946">          vty_out (vty, &quot;Automatically reducing level %d LSP refresh interval &quot;</a>
<a name="ln1947">                   &quot;to %us%s&quot;, lvl, refresh_interval, VTY_NEWLINE);</a>
<a name="ln1948">          set_refresh_interval[lvl-1] = 1;</a>
<a name="ln1949"> </a>
<a name="ln1950">          if (refresh_interval &lt;= area-&gt;lsp_gen_interval[lvl-1])</a>
<a name="ln1951">            {</a>
<a name="ln1952">              vty_out (vty, &quot;LSP refresh interval %us must be greater than &quot;</a>
<a name="ln1953">                       &quot;the configured LSP gen interval %us%s&quot;,</a>
<a name="ln1954">                       refresh_interval, area-&gt;lsp_gen_interval[lvl-1],</a>
<a name="ln1955">                       VTY_NEWLINE);</a>
<a name="ln1956">              return CMD_ERR_AMBIGUOUS;</a>
<a name="ln1957">            }</a>
<a name="ln1958">        }</a>
<a name="ln1959">    }</a>
<a name="ln1960"> </a>
<a name="ln1961">  for (lvl = IS_LEVEL_1; lvl &lt;= IS_LEVEL_2; lvl++)</a>
<a name="ln1962">    {</a>
<a name="ln1963">      if (!(lvl &amp; level))</a>
<a name="ln1964">        continue;</a>
<a name="ln1965">      isis_area_max_lsp_lifetime_set(area, lvl, interval);</a>
<a name="ln1966">      if (set_refresh_interval[lvl-1])</a>
<a name="ln1967">        isis_area_lsp_refresh_set(area, lvl, refresh_interval);</a>
<a name="ln1968">    }</a>
<a name="ln1969"> </a>
<a name="ln1970">  return CMD_SUCCESS;</a>
<a name="ln1971">}</a>
<a name="ln1972"> </a>
<a name="ln1973">DEFUN (max_lsp_lifetime,</a>
<a name="ln1974">       max_lsp_lifetime_cmd,</a>
<a name="ln1975">       &quot;max-lsp-lifetime &lt;350-65535&gt;&quot;,</a>
<a name="ln1976">       &quot;Maximum LSP lifetime\n&quot;</a>
<a name="ln1977">       &quot;LSP lifetime in seconds\n&quot;)</a>
<a name="ln1978">{</a>
<a name="ln1979">  return area_max_lsp_lifetime_set(vty, IS_LEVEL_1_AND_2, atoi(argv[0]));</a>
<a name="ln1980">}</a>
<a name="ln1981"> </a>
<a name="ln1982">DEFUN (no_max_lsp_lifetime,</a>
<a name="ln1983">       no_max_lsp_lifetime_cmd,</a>
<a name="ln1984">       &quot;no max-lsp-lifetime&quot;,</a>
<a name="ln1985">       NO_STR</a>
<a name="ln1986">       &quot;LSP lifetime in seconds\n&quot;)</a>
<a name="ln1987">{</a>
<a name="ln1988">  return area_max_lsp_lifetime_set(vty, IS_LEVEL_1_AND_2,</a>
<a name="ln1989">				   DEFAULT_LSP_LIFETIME);</a>
<a name="ln1990">}</a>
<a name="ln1991"> </a>
<a name="ln1992">ALIAS (no_max_lsp_lifetime,</a>
<a name="ln1993">       no_max_lsp_lifetime_arg_cmd,</a>
<a name="ln1994">       &quot;no max-lsp-lifetime &lt;350-65535&gt;&quot;,</a>
<a name="ln1995">       NO_STR</a>
<a name="ln1996">       &quot;Maximum LSP lifetime\n&quot;</a>
<a name="ln1997">       &quot;LSP lifetime in seconds\n&quot;)</a>
<a name="ln1998"> </a>
<a name="ln1999">DEFUN (max_lsp_lifetime_l1,</a>
<a name="ln2000">       max_lsp_lifetime_l1_cmd,</a>
<a name="ln2001">       &quot;max-lsp-lifetime level-1 &lt;350-65535&gt;&quot;,</a>
<a name="ln2002">       &quot;Maximum LSP lifetime for Level 1 only\n&quot;</a>
<a name="ln2003">       &quot;LSP lifetime for Level 1 only in seconds\n&quot;)</a>
<a name="ln2004">{</a>
<a name="ln2005">  return area_max_lsp_lifetime_set(vty, IS_LEVEL_1, atoi(argv[0]));</a>
<a name="ln2006">}</a>
<a name="ln2007"> </a>
<a name="ln2008">DEFUN (no_max_lsp_lifetime_l1,</a>
<a name="ln2009">       no_max_lsp_lifetime_l1_cmd,</a>
<a name="ln2010">       &quot;no max-lsp-lifetime level-1&quot;,</a>
<a name="ln2011">       NO_STR</a>
<a name="ln2012">       &quot;LSP lifetime for Level 1 only in seconds\n&quot;)</a>
<a name="ln2013">{</a>
<a name="ln2014">  return area_max_lsp_lifetime_set(vty, IS_LEVEL_1, DEFAULT_LSP_LIFETIME);</a>
<a name="ln2015">}</a>
<a name="ln2016"> </a>
<a name="ln2017">ALIAS (no_max_lsp_lifetime_l1,</a>
<a name="ln2018">       no_max_lsp_lifetime_l1_arg_cmd,</a>
<a name="ln2019">       &quot;no max-lsp-lifetime level-1 &lt;350-65535&gt;&quot;,</a>
<a name="ln2020">       NO_STR</a>
<a name="ln2021">       &quot;Maximum LSP lifetime for Level 1 only\n&quot;</a>
<a name="ln2022">       &quot;LSP lifetime for Level 1 only in seconds\n&quot;)</a>
<a name="ln2023"> </a>
<a name="ln2024">DEFUN (max_lsp_lifetime_l2,</a>
<a name="ln2025">       max_lsp_lifetime_l2_cmd,</a>
<a name="ln2026">       &quot;max-lsp-lifetime level-2 &lt;350-65535&gt;&quot;,</a>
<a name="ln2027">       &quot;Maximum LSP lifetime for Level 2 only\n&quot;</a>
<a name="ln2028">       &quot;LSP lifetime for Level 2 only in seconds\n&quot;)</a>
<a name="ln2029">{</a>
<a name="ln2030">  return area_max_lsp_lifetime_set(vty, IS_LEVEL_2, atoi(argv[0]));</a>
<a name="ln2031">}</a>
<a name="ln2032"> </a>
<a name="ln2033">DEFUN (no_max_lsp_lifetime_l2,</a>
<a name="ln2034">       no_max_lsp_lifetime_l2_cmd,</a>
<a name="ln2035">       &quot;no max-lsp-lifetime level-2&quot;,</a>
<a name="ln2036">       NO_STR</a>
<a name="ln2037">       &quot;LSP lifetime for Level 2 only in seconds\n&quot;)</a>
<a name="ln2038">{</a>
<a name="ln2039">  return area_max_lsp_lifetime_set(vty, IS_LEVEL_2, DEFAULT_LSP_LIFETIME);</a>
<a name="ln2040">}</a>
<a name="ln2041"> </a>
<a name="ln2042">ALIAS (no_max_lsp_lifetime_l2,</a>
<a name="ln2043">       no_max_lsp_lifetime_l2_arg_cmd,</a>
<a name="ln2044">       &quot;no max-lsp-lifetime level-2 &lt;350-65535&gt;&quot;,</a>
<a name="ln2045">       NO_STR</a>
<a name="ln2046">       &quot;Maximum LSP lifetime for Level 2 only\n&quot;</a>
<a name="ln2047">       &quot;LSP lifetime for Level 2 only in seconds\n&quot;)</a>
<a name="ln2048"> </a>
<a name="ln2049">static int</a>
<a name="ln2050">area_lsp_refresh_interval_set(struct vty *vty, int level, uint16_t interval)</a>
<a name="ln2051">{</a>
<a name="ln2052">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln2053">  int lvl;</a>
<a name="ln2054"> </a>
<a name="ln2055">  if (!area)</a>
<a name="ln2056">    {</a>
<a name="ln2057">      vty_out (vty, &quot;Can't find ISIS instance %s&quot;, VTY_NEWLINE);</a>
<a name="ln2058">      return CMD_ERR_NO_MATCH;</a>
<a name="ln2059">    }</a>
<a name="ln2060"> </a>
<a name="ln2061">  for (lvl = IS_LEVEL_1; lvl &lt;= IS_LEVEL_2; ++lvl)</a>
<a name="ln2062">    {</a>
<a name="ln2063">      if (!(lvl &amp; level))</a>
<a name="ln2064">        continue;</a>
<a name="ln2065">      if (interval &lt;= area-&gt;lsp_gen_interval[lvl-1])</a>
<a name="ln2066">        {</a>
<a name="ln2067">          vty_out (vty, &quot;LSP refresh interval %us must be greater than &quot;</a>
<a name="ln2068">                   &quot;the configured LSP gen interval %us%s&quot;,</a>
<a name="ln2069">                   interval, area-&gt;lsp_gen_interval[lvl-1],</a>
<a name="ln2070">                   VTY_NEWLINE);</a>
<a name="ln2071">          return CMD_ERR_AMBIGUOUS;</a>
<a name="ln2072">        }</a>
<a name="ln2073">      if (interval &gt; (area-&gt;max_lsp_lifetime[lvl-1] - 300))</a>
<a name="ln2074">        {</a>
<a name="ln2075">          vty_out (vty, &quot;LSP refresh interval %us must be less than &quot;</a>
<a name="ln2076">                   &quot;the configured LSP lifetime %us less 300%s&quot;,</a>
<a name="ln2077">                   interval, area-&gt;max_lsp_lifetime[lvl-1],</a>
<a name="ln2078">                   VTY_NEWLINE);</a>
<a name="ln2079">          return CMD_ERR_AMBIGUOUS;</a>
<a name="ln2080">        }</a>
<a name="ln2081">    }</a>
<a name="ln2082"> </a>
<a name="ln2083">  for (lvl = IS_LEVEL_1; lvl &lt;= IS_LEVEL_2; ++lvl)</a>
<a name="ln2084">    {</a>
<a name="ln2085">      if (!(lvl &amp; level))</a>
<a name="ln2086">        continue;</a>
<a name="ln2087">      isis_area_lsp_refresh_set(area, lvl, interval);</a>
<a name="ln2088">    }</a>
<a name="ln2089"> </a>
<a name="ln2090">  return CMD_SUCCESS;</a>
<a name="ln2091">}</a>
<a name="ln2092"> </a>
<a name="ln2093">DEFUN (lsp_refresh_interval,</a>
<a name="ln2094">       lsp_refresh_interval_cmd,</a>
<a name="ln2095">       &quot;lsp-refresh-interval &lt;1-65235&gt;&quot;,</a>
<a name="ln2096">       &quot;LSP refresh interval\n&quot;</a>
<a name="ln2097">       &quot;LSP refresh interval in seconds\n&quot;)</a>
<a name="ln2098">{</a>
<a name="ln2099">  return area_lsp_refresh_interval_set(vty, IS_LEVEL_1_AND_2, atoi(argv[0]));</a>
<a name="ln2100">}</a>
<a name="ln2101"> </a>
<a name="ln2102">DEFUN (no_lsp_refresh_interval,</a>
<a name="ln2103">       no_lsp_refresh_interval_cmd,</a>
<a name="ln2104">       &quot;no lsp-refresh-interval&quot;,</a>
<a name="ln2105">       NO_STR</a>
<a name="ln2106">       &quot;LSP refresh interval in seconds\n&quot;)</a>
<a name="ln2107">{</a>
<a name="ln2108">  return area_lsp_refresh_interval_set(vty, IS_LEVEL_1_AND_2,</a>
<a name="ln2109">				       DEFAULT_MAX_LSP_GEN_INTERVAL);</a>
<a name="ln2110">}</a>
<a name="ln2111"> </a>
<a name="ln2112">ALIAS (no_lsp_refresh_interval,</a>
<a name="ln2113">       no_lsp_refresh_interval_arg_cmd,</a>
<a name="ln2114">       &quot;no lsp-refresh-interval &lt;1-65235&gt;&quot;,</a>
<a name="ln2115">       NO_STR</a>
<a name="ln2116">       &quot;LSP refresh interval\n&quot;</a>
<a name="ln2117">       &quot;LSP refresh interval in seconds\n&quot;)</a>
<a name="ln2118"> </a>
<a name="ln2119">DEFUN (lsp_refresh_interval_l1,</a>
<a name="ln2120">       lsp_refresh_interval_l1_cmd,</a>
<a name="ln2121">       &quot;lsp-refresh-interval level-1 &lt;1-65235&gt;&quot;,</a>
<a name="ln2122">       &quot;LSP refresh interval for Level 1 only\n&quot;</a>
<a name="ln2123">       &quot;LSP refresh interval for Level 1 only in seconds\n&quot;)</a>
<a name="ln2124">{</a>
<a name="ln2125">  return area_lsp_refresh_interval_set(vty, IS_LEVEL_1, atoi(argv[0]));</a>
<a name="ln2126">}</a>
<a name="ln2127"> </a>
<a name="ln2128">DEFUN (no_lsp_refresh_interval_l1,</a>
<a name="ln2129">       no_lsp_refresh_interval_l1_cmd,</a>
<a name="ln2130">       &quot;no lsp-refresh-interval level-1&quot;,</a>
<a name="ln2131">       NO_STR</a>
<a name="ln2132">       &quot;LSP refresh interval for Level 1 only in seconds\n&quot;)</a>
<a name="ln2133">{</a>
<a name="ln2134">  return area_lsp_refresh_interval_set(vty, IS_LEVEL_1,</a>
<a name="ln2135">				       DEFAULT_MAX_LSP_GEN_INTERVAL);</a>
<a name="ln2136">}</a>
<a name="ln2137"> </a>
<a name="ln2138">ALIAS (no_lsp_refresh_interval_l1,</a>
<a name="ln2139">       no_lsp_refresh_interval_l1_arg_cmd,</a>
<a name="ln2140">       &quot;no lsp-refresh-interval level-1 &lt;1-65235&gt;&quot;,</a>
<a name="ln2141">       NO_STR</a>
<a name="ln2142">       &quot;LSP refresh interval for Level 1 only\n&quot;</a>
<a name="ln2143">       &quot;LSP refresh interval for Level 1 only in seconds\n&quot;)</a>
<a name="ln2144"> </a>
<a name="ln2145">DEFUN (lsp_refresh_interval_l2,</a>
<a name="ln2146">       lsp_refresh_interval_l2_cmd,</a>
<a name="ln2147">       &quot;lsp-refresh-interval level-2 &lt;1-65235&gt;&quot;,</a>
<a name="ln2148">       &quot;LSP refresh interval for Level 2 only\n&quot;</a>
<a name="ln2149">       &quot;LSP refresh interval for Level 2 only in seconds\n&quot;)</a>
<a name="ln2150">{</a>
<a name="ln2151">  return area_lsp_refresh_interval_set(vty, IS_LEVEL_2, atoi(argv[0]));</a>
<a name="ln2152">}</a>
<a name="ln2153"> </a>
<a name="ln2154">DEFUN (no_lsp_refresh_interval_l2,</a>
<a name="ln2155">       no_lsp_refresh_interval_l2_cmd,</a>
<a name="ln2156">       &quot;no lsp-refresh-interval level-2&quot;,</a>
<a name="ln2157">       NO_STR</a>
<a name="ln2158">       &quot;LSP refresh interval for Level 2 only in seconds\n&quot;)</a>
<a name="ln2159">{</a>
<a name="ln2160">  return area_lsp_refresh_interval_set(vty, IS_LEVEL_2,</a>
<a name="ln2161">				       DEFAULT_MAX_LSP_GEN_INTERVAL);</a>
<a name="ln2162">}</a>
<a name="ln2163"> </a>
<a name="ln2164">ALIAS (no_lsp_refresh_interval_l2,</a>
<a name="ln2165">       no_lsp_refresh_interval_l2_arg_cmd,</a>
<a name="ln2166">       &quot;no lsp-refresh-interval level-2 &lt;1-65235&gt;&quot;,</a>
<a name="ln2167">       NO_STR</a>
<a name="ln2168">       &quot;LSP refresh interval for Level 2 only\n&quot;</a>
<a name="ln2169">       &quot;LSP refresh interval for Level 2 only in seconds\n&quot;)</a>
<a name="ln2170"> </a>
<a name="ln2171">static int</a>
<a name="ln2172">area_passwd_set(struct vty *vty, int level,</a>
<a name="ln2173">                int (*type_set)(struct isis_area *area, int level,</a>
<a name="ln2174">                                const char *passwd, u_char snp_auth),</a>
<a name="ln2175">                const char *passwd, u_char snp_auth)</a>
<a name="ln2176">{</a>
<a name="ln2177">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln2178"> </a>
<a name="ln2179">  if (!area)</a>
<a name="ln2180">    {</a>
<a name="ln2181">      vty_out (vty, &quot;Can't find IS-IS instance%s&quot;, VTY_NEWLINE);</a>
<a name="ln2182">      return CMD_ERR_NO_MATCH;</a>
<a name="ln2183">    }</a>
<a name="ln2184"> </a>
<a name="ln2185">  if (passwd &amp;&amp; strlen(passwd) &gt; 254)</a>
<a name="ln2186">    {</a>
<a name="ln2187">      vty_out (vty, &quot;Too long area password (&gt;254)%s&quot;, VTY_NEWLINE);</a>
<a name="ln2188">      return CMD_ERR_AMBIGUOUS;</a>
<a name="ln2189">    }</a>
<a name="ln2190"> </a>
<a name="ln2191">  type_set(area, level, passwd, snp_auth);</a>
<a name="ln2192">  return CMD_SUCCESS;</a>
<a name="ln2193">}</a>
<a name="ln2194"> </a>
<a name="ln2195">DEFUN (area_passwd_md5,</a>
<a name="ln2196">       area_passwd_md5_cmd,</a>
<a name="ln2197">       &quot;(area-password|domain-password) md5 WORD&quot;,</a>
<a name="ln2198">       &quot;Configure the authentication password for an area\n&quot;</a>
<a name="ln2199">       &quot;Set the authentication password for a routing domain\n&quot;</a>
<a name="ln2200">       &quot;Authentication type\n&quot;</a>
<a name="ln2201">       &quot;Level-wide password\n&quot;)</a>
<a name="ln2202">{</a>
<a name="ln2203">  u_char snp_auth = 0;</a>
<a name="ln2204">  int level = (argv[0][0] == 'd') ? IS_LEVEL_2 : IS_LEVEL_1;</a>
<a name="ln2205"> </a>
<a name="ln2206">  if (argc &gt; 2)</a>
<a name="ln2207">    {</a>
<a name="ln2208">      snp_auth = SNP_AUTH_SEND;</a>
<a name="ln2209">      if (strncmp(argv[2], &quot;v&quot;, 1) == 0)</a>
<a name="ln2210">        snp_auth |= SNP_AUTH_RECV;</a>
<a name="ln2211">    }</a>
<a name="ln2212"> </a>
<a name="ln2213">  return area_passwd_set(vty, level, isis_area_passwd_hmac_md5_set,</a>
<a name="ln2214">                         argv[1], snp_auth);</a>
<a name="ln2215">}</a>
<a name="ln2216"> </a>
<a name="ln2217">ALIAS (area_passwd_md5,</a>
<a name="ln2218">       area_passwd_md5_snpauth_cmd,</a>
<a name="ln2219">       &quot;(area-password|domain-password) md5 WORD authenticate snp (send-only|validate)&quot;,</a>
<a name="ln2220">       &quot;Configure the authentication password for an area\n&quot;</a>
<a name="ln2221">       &quot;Set the authentication password for a routing domain\n&quot;</a>
<a name="ln2222">       &quot;Authentication type\n&quot;</a>
<a name="ln2223">       &quot;Level-wide password\n&quot;</a>
<a name="ln2224">       &quot;Authentication\n&quot;</a>
<a name="ln2225">       &quot;SNP PDUs\n&quot;</a>
<a name="ln2226">       &quot;Send but do not check PDUs on receiving\n&quot;</a>
<a name="ln2227">       &quot;Send and check PDUs on receiving\n&quot;)</a>
<a name="ln2228"> </a>
<a name="ln2229">DEFUN (area_passwd_clear,</a>
<a name="ln2230">       area_passwd_clear_cmd,</a>
<a name="ln2231">       &quot;(area-password|domain-password) clear WORD&quot;,</a>
<a name="ln2232">       &quot;Configure the authentication password for an area\n&quot;</a>
<a name="ln2233">       &quot;Set the authentication password for a routing domain\n&quot;</a>
<a name="ln2234">       &quot;Authentication type\n&quot;</a>
<a name="ln2235">       &quot;Area password\n&quot;)</a>
<a name="ln2236">{</a>
<a name="ln2237">  u_char snp_auth = 0;</a>
<a name="ln2238">  int level = (argv[0][0] == 'd') ? IS_LEVEL_2 : IS_LEVEL_1;</a>
<a name="ln2239"> </a>
<a name="ln2240">  if (argc &gt; 2)</a>
<a name="ln2241">    {</a>
<a name="ln2242">      snp_auth = SNP_AUTH_SEND;</a>
<a name="ln2243">      if (strncmp(argv[2], &quot;v&quot;, 1) == 0)</a>
<a name="ln2244">        snp_auth |= SNP_AUTH_RECV;</a>
<a name="ln2245">    }</a>
<a name="ln2246"> </a>
<a name="ln2247">  return area_passwd_set(vty, level, isis_area_passwd_cleartext_set,</a>
<a name="ln2248">                         argv[1], snp_auth);</a>
<a name="ln2249">}</a>
<a name="ln2250"> </a>
<a name="ln2251">ALIAS (area_passwd_clear,</a>
<a name="ln2252">       area_passwd_clear_snpauth_cmd,</a>
<a name="ln2253">       &quot;(area-password|domain-password) clear WORD authenticate snp (send-only|validate)&quot;,</a>
<a name="ln2254">       &quot;Configure the authentication password for an area\n&quot;</a>
<a name="ln2255">       &quot;Set the authentication password for a routing domain\n&quot;</a>
<a name="ln2256">       &quot;Authentication type\n&quot;</a>
<a name="ln2257">       &quot;Area password\n&quot;</a>
<a name="ln2258">       &quot;Authentication\n&quot;</a>
<a name="ln2259">       &quot;SNP PDUs\n&quot;</a>
<a name="ln2260">       &quot;Send but do not check PDUs on receiving\n&quot;</a>
<a name="ln2261">       &quot;Send and check PDUs on receiving\n&quot;)</a>
<a name="ln2262"> </a>
<a name="ln2263">DEFUN (no_area_passwd,</a>
<a name="ln2264">       no_area_passwd_cmd,</a>
<a name="ln2265">       &quot;no (area-password|domain-password)&quot;,</a>
<a name="ln2266">       NO_STR</a>
<a name="ln2267">       &quot;Configure the authentication password for an area\n&quot;</a>
<a name="ln2268">       &quot;Set the authentication password for a routing domain\n&quot;)</a>
<a name="ln2269">{</a>
<a name="ln2270">  int level = (argv[0][0] == 'd') ? IS_LEVEL_2 : IS_LEVEL_1;</a>
<a name="ln2271">  struct isis_area *area = vty-&gt;index;</a>
<a name="ln2272"> </a>
<a name="ln2273">  if (!area)</a>
<a name="ln2274">    {</a>
<a name="ln2275">      vty_out (vty, &quot;Can't find IS-IS instance%s&quot;, VTY_NEWLINE);</a>
<a name="ln2276">      return CMD_ERR_NO_MATCH;</a>
<a name="ln2277">    }</a>
<a name="ln2278"> </a>
<a name="ln2279">  return isis_area_passwd_unset (area, level);</a>
<a name="ln2280">}</a>
<a name="ln2281"> </a>
<a name="ln2282">void</a>
<a name="ln2283">isis_vty_init (void)</a>
<a name="ln2284">{</a>
<a name="ln2285">  install_element (INTERFACE_NODE, &amp;ip_router_isis_cmd);</a>
<a name="ln2286">  install_element (INTERFACE_NODE, &amp;no_ip_router_isis_cmd);</a>
<a name="ln2287"> </a>
<a name="ln2288">  install_element (INTERFACE_NODE, &amp;isis_passive_cmd);</a>
<a name="ln2289">  install_element (INTERFACE_NODE, &amp;no_isis_passive_cmd);</a>
<a name="ln2290"> </a>
<a name="ln2291">  install_element (INTERFACE_NODE, &amp;isis_circuit_type_cmd);</a>
<a name="ln2292">  install_element (INTERFACE_NODE, &amp;no_isis_circuit_type_cmd);</a>
<a name="ln2293"> </a>
<a name="ln2294">  install_element (INTERFACE_NODE, &amp;isis_network_cmd);</a>
<a name="ln2295">  install_element (INTERFACE_NODE, &amp;no_isis_network_cmd);</a>
<a name="ln2296"> </a>
<a name="ln2297">  install_element (INTERFACE_NODE, &amp;isis_passwd_cmd);</a>
<a name="ln2298">  install_element (INTERFACE_NODE, &amp;no_isis_passwd_cmd);</a>
<a name="ln2299">  install_element (INTERFACE_NODE, &amp;no_isis_passwd_arg_cmd);</a>
<a name="ln2300"> </a>
<a name="ln2301">  install_element (INTERFACE_NODE, &amp;isis_priority_cmd);</a>
<a name="ln2302">  install_element (INTERFACE_NODE, &amp;no_isis_priority_cmd);</a>
<a name="ln2303">  install_element (INTERFACE_NODE, &amp;no_isis_priority_arg_cmd);</a>
<a name="ln2304">  install_element (INTERFACE_NODE, &amp;isis_priority_l1_cmd);</a>
<a name="ln2305">  install_element (INTERFACE_NODE, &amp;no_isis_priority_l1_cmd);</a>
<a name="ln2306">  install_element (INTERFACE_NODE, &amp;no_isis_priority_l1_arg_cmd);</a>
<a name="ln2307">  install_element (INTERFACE_NODE, &amp;isis_priority_l2_cmd);</a>
<a name="ln2308">  install_element (INTERFACE_NODE, &amp;no_isis_priority_l2_cmd);</a>
<a name="ln2309">  install_element (INTERFACE_NODE, &amp;no_isis_priority_l2_arg_cmd);</a>
<a name="ln2310"> </a>
<a name="ln2311">  install_element (INTERFACE_NODE, &amp;isis_metric_cmd);</a>
<a name="ln2312">  install_element (INTERFACE_NODE, &amp;no_isis_metric_cmd);</a>
<a name="ln2313">  install_element (INTERFACE_NODE, &amp;no_isis_metric_arg_cmd);</a>
<a name="ln2314">  install_element (INTERFACE_NODE, &amp;isis_metric_l1_cmd);</a>
<a name="ln2315">  install_element (INTERFACE_NODE, &amp;no_isis_metric_l1_cmd);</a>
<a name="ln2316">  install_element (INTERFACE_NODE, &amp;no_isis_metric_l1_arg_cmd);</a>
<a name="ln2317">  install_element (INTERFACE_NODE, &amp;isis_metric_l2_cmd);</a>
<a name="ln2318">  install_element (INTERFACE_NODE, &amp;no_isis_metric_l2_cmd);</a>
<a name="ln2319">  install_element (INTERFACE_NODE, &amp;no_isis_metric_l2_arg_cmd);</a>
<a name="ln2320"> </a>
<a name="ln2321">  install_element (INTERFACE_NODE, &amp;isis_hello_interval_cmd);</a>
<a name="ln2322">  install_element (INTERFACE_NODE, &amp;no_isis_hello_interval_cmd);</a>
<a name="ln2323">  install_element (INTERFACE_NODE, &amp;no_isis_hello_interval_arg_cmd);</a>
<a name="ln2324">  install_element (INTERFACE_NODE, &amp;isis_hello_interval_l1_cmd);</a>
<a name="ln2325">  install_element (INTERFACE_NODE, &amp;no_isis_hello_interval_l1_cmd);</a>
<a name="ln2326">  install_element (INTERFACE_NODE, &amp;no_isis_hello_interval_l1_arg_cmd);</a>
<a name="ln2327">  install_element (INTERFACE_NODE, &amp;isis_hello_interval_l2_cmd);</a>
<a name="ln2328">  install_element (INTERFACE_NODE, &amp;no_isis_hello_interval_l2_cmd);</a>
<a name="ln2329">  install_element (INTERFACE_NODE, &amp;no_isis_hello_interval_l2_arg_cmd);</a>
<a name="ln2330"> </a>
<a name="ln2331">  install_element (INTERFACE_NODE, &amp;isis_hello_multiplier_cmd);</a>
<a name="ln2332">  install_element (INTERFACE_NODE, &amp;no_isis_hello_multiplier_cmd);</a>
<a name="ln2333">  install_element (INTERFACE_NODE, &amp;no_isis_hello_multiplier_arg_cmd);</a>
<a name="ln2334">  install_element (INTERFACE_NODE, &amp;isis_hello_multiplier_l1_cmd);</a>
<a name="ln2335">  install_element (INTERFACE_NODE, &amp;no_isis_hello_multiplier_l1_cmd);</a>
<a name="ln2336">  install_element (INTERFACE_NODE, &amp;no_isis_hello_multiplier_l1_arg_cmd);</a>
<a name="ln2337">  install_element (INTERFACE_NODE, &amp;isis_hello_multiplier_l2_cmd);</a>
<a name="ln2338">  install_element (INTERFACE_NODE, &amp;no_isis_hello_multiplier_l2_cmd);</a>
<a name="ln2339">  install_element (INTERFACE_NODE, &amp;no_isis_hello_multiplier_l2_arg_cmd);</a>
<a name="ln2340"> </a>
<a name="ln2341">  install_element (INTERFACE_NODE, &amp;isis_hello_padding_cmd);</a>
<a name="ln2342">  install_element (INTERFACE_NODE, &amp;no_isis_hello_padding_cmd);</a>
<a name="ln2343"> </a>
<a name="ln2344">  install_element (INTERFACE_NODE, &amp;csnp_interval_cmd);</a>
<a name="ln2345">  install_element (INTERFACE_NODE, &amp;no_csnp_interval_cmd);</a>
<a name="ln2346">  install_element (INTERFACE_NODE, &amp;no_csnp_interval_arg_cmd);</a>
<a name="ln2347">  install_element (INTERFACE_NODE, &amp;csnp_interval_l1_cmd);</a>
<a name="ln2348">  install_element (INTERFACE_NODE, &amp;no_csnp_interval_l1_cmd);</a>
<a name="ln2349">  install_element (INTERFACE_NODE, &amp;no_csnp_interval_l1_arg_cmd);</a>
<a name="ln2350">  install_element (INTERFACE_NODE, &amp;csnp_interval_l2_cmd);</a>
<a name="ln2351">  install_element (INTERFACE_NODE, &amp;no_csnp_interval_l2_cmd);</a>
<a name="ln2352">  install_element (INTERFACE_NODE, &amp;no_csnp_interval_l2_arg_cmd);</a>
<a name="ln2353"> </a>
<a name="ln2354">  install_element (INTERFACE_NODE, &amp;psnp_interval_cmd);</a>
<a name="ln2355">  install_element (INTERFACE_NODE, &amp;no_psnp_interval_cmd);</a>
<a name="ln2356">  install_element (INTERFACE_NODE, &amp;no_psnp_interval_arg_cmd);</a>
<a name="ln2357">  install_element (INTERFACE_NODE, &amp;psnp_interval_l1_cmd);</a>
<a name="ln2358">  install_element (INTERFACE_NODE, &amp;no_psnp_interval_l1_cmd);</a>
<a name="ln2359">  install_element (INTERFACE_NODE, &amp;no_psnp_interval_l1_arg_cmd);</a>
<a name="ln2360">  install_element (INTERFACE_NODE, &amp;psnp_interval_l2_cmd);</a>
<a name="ln2361">  install_element (INTERFACE_NODE, &amp;no_psnp_interval_l2_cmd);</a>
<a name="ln2362">  install_element (INTERFACE_NODE, &amp;no_psnp_interval_l2_arg_cmd);</a>
<a name="ln2363"> </a>
<a name="ln2364">  install_element (ISIS_NODE, &amp;metric_style_cmd);</a>
<a name="ln2365">  install_element (ISIS_NODE, &amp;no_metric_style_cmd);</a>
<a name="ln2366"> </a>
<a name="ln2367">  install_element (ISIS_NODE, &amp;set_overload_bit_cmd);</a>
<a name="ln2368">  install_element (ISIS_NODE, &amp;no_set_overload_bit_cmd);</a>
<a name="ln2369"> </a>
<a name="ln2370">  install_element (ISIS_NODE, &amp;set_attached_bit_cmd);</a>
<a name="ln2371">  install_element (ISIS_NODE, &amp;no_set_attached_bit_cmd);</a>
<a name="ln2372"> </a>
<a name="ln2373">  install_element (ISIS_NODE, &amp;dynamic_hostname_cmd);</a>
<a name="ln2374">  install_element (ISIS_NODE, &amp;no_dynamic_hostname_cmd);</a>
<a name="ln2375"> </a>
<a name="ln2376">  install_element (ISIS_NODE, &amp;area_lsp_mtu_cmd);</a>
<a name="ln2377">  install_element (ISIS_NODE, &amp;no_area_lsp_mtu_cmd);</a>
<a name="ln2378">  install_element (ISIS_NODE, &amp;no_area_lsp_mtu_arg_cmd);</a>
<a name="ln2379"> </a>
<a name="ln2380">  install_element (ISIS_NODE, &amp;is_type_cmd);</a>
<a name="ln2381">  install_element (ISIS_NODE, &amp;no_is_type_cmd);</a>
<a name="ln2382"> </a>
<a name="ln2383">  install_element (ISIS_NODE, &amp;lsp_gen_interval_cmd);</a>
<a name="ln2384">  install_element (ISIS_NODE, &amp;no_lsp_gen_interval_cmd);</a>
<a name="ln2385">  install_element (ISIS_NODE, &amp;no_lsp_gen_interval_arg_cmd);</a>
<a name="ln2386">  install_element (ISIS_NODE, &amp;lsp_gen_interval_l1_cmd);</a>
<a name="ln2387">  install_element (ISIS_NODE, &amp;no_lsp_gen_interval_l1_cmd);</a>
<a name="ln2388">  install_element (ISIS_NODE, &amp;no_lsp_gen_interval_l1_arg_cmd);</a>
<a name="ln2389">  install_element (ISIS_NODE, &amp;lsp_gen_interval_l2_cmd);</a>
<a name="ln2390">  install_element (ISIS_NODE, &amp;no_lsp_gen_interval_l2_cmd);</a>
<a name="ln2391">  install_element (ISIS_NODE, &amp;no_lsp_gen_interval_l2_arg_cmd);</a>
<a name="ln2392"> </a>
<a name="ln2393">  install_element (ISIS_NODE, &amp;spf_interval_cmd);</a>
<a name="ln2394">  install_element (ISIS_NODE, &amp;no_spf_interval_cmd);</a>
<a name="ln2395">  install_element (ISIS_NODE, &amp;no_spf_interval_arg_cmd);</a>
<a name="ln2396">  install_element (ISIS_NODE, &amp;spf_interval_l1_cmd);</a>
<a name="ln2397">  install_element (ISIS_NODE, &amp;no_spf_interval_l1_cmd);</a>
<a name="ln2398">  install_element (ISIS_NODE, &amp;no_spf_interval_l1_arg_cmd);</a>
<a name="ln2399">  install_element (ISIS_NODE, &amp;spf_interval_l2_cmd);</a>
<a name="ln2400">  install_element (ISIS_NODE, &amp;no_spf_interval_l2_cmd);</a>
<a name="ln2401">  install_element (ISIS_NODE, &amp;no_spf_interval_l2_arg_cmd);</a>
<a name="ln2402"> </a>
<a name="ln2403">  install_element (ISIS_NODE, &amp;max_lsp_lifetime_cmd);</a>
<a name="ln2404">  install_element (ISIS_NODE, &amp;no_max_lsp_lifetime_cmd);</a>
<a name="ln2405">  install_element (ISIS_NODE, &amp;no_max_lsp_lifetime_arg_cmd);</a>
<a name="ln2406">  install_element (ISIS_NODE, &amp;max_lsp_lifetime_l1_cmd);</a>
<a name="ln2407">  install_element (ISIS_NODE, &amp;no_max_lsp_lifetime_l1_cmd);</a>
<a name="ln2408">  install_element (ISIS_NODE, &amp;no_max_lsp_lifetime_l1_arg_cmd);</a>
<a name="ln2409">  install_element (ISIS_NODE, &amp;max_lsp_lifetime_l2_cmd);</a>
<a name="ln2410">  install_element (ISIS_NODE, &amp;no_max_lsp_lifetime_l2_cmd);</a>
<a name="ln2411">  install_element (ISIS_NODE, &amp;no_max_lsp_lifetime_l2_arg_cmd);</a>
<a name="ln2412"> </a>
<a name="ln2413">  install_element (ISIS_NODE, &amp;lsp_refresh_interval_cmd);</a>
<a name="ln2414">  install_element (ISIS_NODE, &amp;no_lsp_refresh_interval_cmd);</a>
<a name="ln2415">  install_element (ISIS_NODE, &amp;no_lsp_refresh_interval_arg_cmd);</a>
<a name="ln2416">  install_element (ISIS_NODE, &amp;lsp_refresh_interval_l1_cmd);</a>
<a name="ln2417">  install_element (ISIS_NODE, &amp;no_lsp_refresh_interval_l1_cmd);</a>
<a name="ln2418">  install_element (ISIS_NODE, &amp;no_lsp_refresh_interval_l1_arg_cmd);</a>
<a name="ln2419">  install_element (ISIS_NODE, &amp;lsp_refresh_interval_l2_cmd);</a>
<a name="ln2420">  install_element (ISIS_NODE, &amp;no_lsp_refresh_interval_l2_cmd);</a>
<a name="ln2421">  install_element (ISIS_NODE, &amp;no_lsp_refresh_interval_l2_arg_cmd);</a>
<a name="ln2422"> </a>
<a name="ln2423">  install_element (ISIS_NODE, &amp;area_passwd_md5_cmd);</a>
<a name="ln2424">  install_element (ISIS_NODE, &amp;area_passwd_md5_snpauth_cmd);</a>
<a name="ln2425">  install_element (ISIS_NODE, &amp;area_passwd_clear_cmd);</a>
<a name="ln2426">  install_element (ISIS_NODE, &amp;area_passwd_clear_snpauth_cmd);</a>
<a name="ln2427">  install_element (ISIS_NODE, &amp;no_area_passwd_cmd);</a>
<a name="ln2428">}</a>

</code></pre>
<div class="balloon" rel="16"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v1042/" target="_blank">V1042</a> This file is marked with copyleft license, which requires you to open the derived source code.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
