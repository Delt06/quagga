
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>bgp_vty.c</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">/* BGP VTY interface.</a>
<a name="ln2">   Copyright (C) 1996, 97, 98, 99, 2000 Kunihiro Ishiguro</a>
<a name="ln3"> </a>
<a name="ln4">This file is part of GNU Zebra.</a>
<a name="ln5"> </a>
<a name="ln6">GNU Zebra is free software; you can redistribute it and/or modify it</a>
<a name="ln7">under the terms of the GNU General Public License as published by the</a>
<a name="ln8">Free Software Foundation; either version 2, or (at your option) any</a>
<a name="ln9">later version.</a>
<a name="ln10"> </a>
<a name="ln11">GNU Zebra is distributed in the hope that it will be useful, but</a>
<a name="ln12">WITHOUT ANY WARRANTY; without even the implied warranty of</a>
<a name="ln13">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</a>
<a name="ln14">General Public License for more details.</a>
<a name="ln15"> </a>
<a name="ln16">You should have received a copy of the GNU General Public License</a>
<a name="ln17">along with GNU Zebra; see the file COPYING.  If not, write to the Free</a>
<a name="ln18">Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA</a>
<a name="ln19">02111-1307, USA.  */</a>
<a name="ln20"> </a>
<a name="ln21">#include &lt;zebra.h&gt;</a>
<a name="ln22"> </a>
<a name="ln23">#include &quot;command.h&quot;</a>
<a name="ln24">#include &quot;prefix.h&quot;</a>
<a name="ln25">#include &quot;plist.h&quot;</a>
<a name="ln26">#include &quot;buffer.h&quot;</a>
<a name="ln27">#include &quot;linklist.h&quot;</a>
<a name="ln28">#include &quot;stream.h&quot;</a>
<a name="ln29">#include &quot;thread.h&quot;</a>
<a name="ln30">#include &quot;log.h&quot;</a>
<a name="ln31">#include &quot;memory.h&quot;</a>
<a name="ln32">#include &quot;hash.h&quot;</a>
<a name="ln33">#include &quot;filter.h&quot;</a>
<a name="ln34"> </a>
<a name="ln35">#include &quot;bgpd/bgpd.h&quot;</a>
<a name="ln36">#include &quot;bgpd/bgp_advertise.h&quot;</a>
<a name="ln37">#include &quot;bgpd/bgp_attr.h&quot;</a>
<a name="ln38">#include &quot;bgpd/bgp_aspath.h&quot;</a>
<a name="ln39">#include &quot;bgpd/bgp_community.h&quot;</a>
<a name="ln40">#include &quot;bgpd/bgp_ecommunity.h&quot;</a>
<a name="ln41">#include &quot;bgpd/bgp_lcommunity.h&quot;</a>
<a name="ln42">#include &quot;bgpd/bgp_damp.h&quot;</a>
<a name="ln43">#include &quot;bgpd/bgp_debug.h&quot;</a>
<a name="ln44">#include &quot;bgpd/bgp_fsm.h&quot;</a>
<a name="ln45">#include &quot;bgpd/bgp_mplsvpn.h&quot;</a>
<a name="ln46">#include &quot;bgpd/bgp_nexthop.h&quot;</a>
<a name="ln47">#include &quot;bgpd/bgp_open.h&quot;</a>
<a name="ln48">#include &quot;bgpd/bgp_regex.h&quot;</a>
<a name="ln49">#include &quot;bgpd/bgp_route.h&quot;</a>
<a name="ln50">#include &quot;bgpd/bgp_zebra.h&quot;</a>
<a name="ln51">#include &quot;bgpd/bgp_table.h&quot;</a>
<a name="ln52">#include &quot;bgpd/bgp_vty.h&quot;</a>
<a name="ln53">#include &quot;bgpd/bgp_mpath.h&quot;</a>
<a name="ln54"> </a>
<a name="ln55">/* Utility function to get address family from current node.  */</a>
<a name="ln56">afi_t</a>
<a name="ln57">bgp_node_afi (struct vty *vty)</a>
<a name="ln58">{</a>
<a name="ln59">  afi_t afi;</a>
<a name="ln60">  switch (vty-&gt;node)</a>
<a name="ln61">    {</a>
<a name="ln62">    case BGP_IPV6_NODE:</a>
<a name="ln63">    case BGP_IPV6M_NODE:</a>
<a name="ln64">    case BGP_VPNV6_NODE:</a>
<a name="ln65">    case BGP_ENCAPV6_NODE:</a>
<a name="ln66">      afi = AFI_IP6;</a>
<a name="ln67">      break;</a>
<a name="ln68">    default:</a>
<a name="ln69">      afi = AFI_IP;</a>
<a name="ln70">      break;</a>
<a name="ln71">    }</a>
<a name="ln72">  return afi;</a>
<a name="ln73">}</a>
<a name="ln74"> </a>
<a name="ln75">/* Utility function to get subsequent address family from current</a>
<a name="ln76">   node.  */</a>
<a name="ln77">safi_t</a>
<a name="ln78">bgp_node_safi (struct vty *vty)</a>
<a name="ln79">{</a>
<a name="ln80">  safi_t safi;</a>
<a name="ln81">  switch (vty-&gt;node)</a>
<a name="ln82">    {</a>
<a name="ln83">    case BGP_ENCAP_NODE:</a>
<a name="ln84">    case BGP_ENCAPV6_NODE:</a>
<a name="ln85">      safi = SAFI_ENCAP;</a>
<a name="ln86">      break;</a>
<a name="ln87">    case BGP_VPNV4_NODE:</a>
<a name="ln88">    case BGP_VPNV6_NODE:</a>
<a name="ln89">      safi = SAFI_MPLS_VPN;</a>
<a name="ln90">      break;</a>
<a name="ln91">    case BGP_IPV4M_NODE:</a>
<a name="ln92">    case BGP_IPV6M_NODE:</a>
<a name="ln93">      safi = SAFI_MULTICAST;</a>
<a name="ln94">      break;</a>
<a name="ln95">    default:</a>
<a name="ln96">      safi = SAFI_UNICAST;</a>
<a name="ln97">      break;</a>
<a name="ln98">  }</a>
<a name="ln99">  return safi;</a>
<a name="ln100">}</a>
<a name="ln101"> </a>
<a name="ln102">int</a>
<a name="ln103">bgp_parse_afi(const char *str, afi_t *afi)</a>
<a name="ln104">{</a>
<a name="ln105">    if (!strcmp(str, &quot;ipv4&quot;)) {</a>
<a name="ln106">	*afi = AFI_IP;</a>
<a name="ln107">	return 0;</a>
<a name="ln108">    }</a>
<a name="ln109">    if (!strcmp(str, &quot;ipv6&quot;)) {</a>
<a name="ln110">	*afi = AFI_IP6;</a>
<a name="ln111">	return 0;</a>
<a name="ln112">    }</a>
<a name="ln113">    return -1;</a>
<a name="ln114">}</a>
<a name="ln115"> </a>
<a name="ln116">int</a>
<a name="ln117">bgp_parse_safi(const char *str, safi_t *safi)</a>
<a name="ln118">{</a>
<a name="ln119">    if (!strcmp(str, &quot;encap&quot;)) {</a>
<a name="ln120">	*safi = SAFI_ENCAP;</a>
<a name="ln121">	return 0;</a>
<a name="ln122">    }</a>
<a name="ln123">    if (!strcmp(str, &quot;multicast&quot;)) {</a>
<a name="ln124">	*safi =  SAFI_MULTICAST;</a>
<a name="ln125">	return 0;</a>
<a name="ln126">    }</a>
<a name="ln127">    if (!strcmp(str, &quot;unicast&quot;)) {</a>
<a name="ln128">	*safi =  SAFI_UNICAST;</a>
<a name="ln129">	return 0;</a>
<a name="ln130">    }</a>
<a name="ln131">    if (!strcmp(str, &quot;vpn&quot;)) {</a>
<a name="ln132">	*safi =  SAFI_MPLS_VPN;</a>
<a name="ln133">	return 0;</a>
<a name="ln134">    }</a>
<a name="ln135">    return -1;</a>
<a name="ln136">}</a>
<a name="ln137"> </a>
<a name="ln138">static int</a>
<a name="ln139">peer_address_self_check (union sockunion *su)</a>
<a name="ln140">{</a>
<a name="ln141">  struct interface *ifp = NULL;</a>
<a name="ln142"> </a>
<a name="ln143">  if (su-&gt;sa.sa_family == AF_INET)</a>
<a name="ln144">    ifp = if_lookup_by_ipv4_exact (&amp;su-&gt;sin.sin_addr);</a>
<a name="ln145">  else if (su-&gt;sa.sa_family == AF_INET6)</a>
<a name="ln146">    ifp = if_lookup_by_ipv6_exact (&amp;su-&gt;sin6.sin6_addr);</a>
<a name="ln147"> </a>
<a name="ln148">  if (ifp)</a>
<a name="ln149">    return 1;</a>
<a name="ln150"> </a>
<a name="ln151">  return 0;</a>
<a name="ln152">}</a>
<a name="ln153"> </a>
<a name="ln154">/* Utility function for looking up peer from VTY.  */</a>
<a name="ln155">static struct peer *</a>
<a name="ln156">peer_lookup_vty (struct vty *vty, const char *ip_str)</a>
<a name="ln157">{</a>
<a name="ln158">  int ret;</a>
<a name="ln159">  struct bgp *bgp;</a>
<a name="ln160">  union sockunion su;</a>
<a name="ln161">  struct peer *peer;</a>
<a name="ln162"> </a>
<a name="ln163">  bgp = vty-&gt;index;</a>
<a name="ln164"> </a>
<a name="ln165">  ret = str2sockunion (ip_str, &amp;su);</a>
<a name="ln166">  if (ret &lt; 0)</a>
<a name="ln167">    {</a>
<a name="ln168">      vty_out (vty, &quot;%% Malformed address: %s%s&quot;, ip_str, VTY_NEWLINE);</a>
<a name="ln169">      return NULL;</a>
<a name="ln170">    }</a>
<a name="ln171"> </a>
<a name="ln172">  peer = peer_lookup (bgp, &amp;su);</a>
<a name="ln173">  if (! peer)</a>
<a name="ln174">    {</a>
<a name="ln175">      vty_out (vty, &quot;%% Specify remote-as or peer-group commands first%s&quot;, VTY_NEWLINE);</a>
<a name="ln176">      return NULL;</a>
<a name="ln177">    }</a>
<a name="ln178">  return peer;</a>
<a name="ln179">}</a>
<a name="ln180"> </a>
<a name="ln181">/* Utility function for looking up peer or peer group.  */</a>
<a name="ln182">static struct peer *</a>
<a name="ln183">peer_and_group_lookup_vty (struct vty *vty, const char *peer_str)</a>
<a name="ln184">{</a>
<a name="ln185">  int ret;</a>
<a name="ln186">  struct bgp *bgp;</a>
<a name="ln187">  union sockunion su;</a>
<a name="ln188">  struct peer *peer;</a>
<a name="ln189">  struct peer_group *group;</a>
<a name="ln190"> </a>
<a name="ln191">  bgp = vty-&gt;index;</a>
<a name="ln192"> </a>
<a name="ln193">  ret = str2sockunion (peer_str, &amp;su);</a>
<a name="ln194">  if (ret == 0)</a>
<a name="ln195">    {</a>
<a name="ln196">      peer = peer_lookup (bgp, &amp;su);</a>
<a name="ln197">      if (peer)</a>
<a name="ln198">	return peer;</a>
<a name="ln199">    }</a>
<a name="ln200">  else</a>
<a name="ln201">    {</a>
<a name="ln202">      group = peer_group_lookup (bgp, peer_str);</a>
<a name="ln203">      if (group)</a>
<a name="ln204">	return group-&gt;conf;</a>
<a name="ln205">    }</a>
<a name="ln206"> </a>
<a name="ln207">  vty_out (vty, &quot;%% Specify remote-as or peer-group commands first%s&quot;,</a>
<a name="ln208">	   VTY_NEWLINE);</a>
<a name="ln209"> </a>
<a name="ln210">  return NULL;</a>
<a name="ln211">}</a>
<a name="ln212"> </a>
<a name="ln213">static int</a>
<a name="ln214">bgp_vty_return (struct vty *vty, int ret)</a>
<a name="ln215">{</a>
<a name="ln216">  const char *str = NULL;</a>
<a name="ln217"> </a>
<a name="ln218">  switch (ret)</a>
<a name="ln219">    {</a>
<a name="ln220">    case BGP_ERR_INVALID_VALUE:</a>
<a name="ln221">      str = &quot;Invalid value&quot;;</a>
<a name="ln222">      break;</a>
<a name="ln223">    case BGP_ERR_INVALID_FLAG:</a>
<a name="ln224">      str = &quot;Invalid flag&quot;;</a>
<a name="ln225">      break;</a>
<a name="ln226">    case BGP_ERR_PEER_INACTIVE:</a>
<a name="ln227">      str = &quot;Activate the neighbor for the address family first&quot;;</a>
<a name="ln228">      break;</a>
<a name="ln229">    case BGP_ERR_INVALID_FOR_PEER_GROUP_MEMBER:</a>
<a name="ln230">      str = &quot;Invalid command for a peer-group member&quot;;</a>
<a name="ln231">      break;</a>
<a name="ln232">    case BGP_ERR_PEER_GROUP_SHUTDOWN:</a>
<a name="ln233">      str = &quot;Peer-group has been shutdown. Activate the peer-group first&quot;;</a>
<a name="ln234">      break;</a>
<a name="ln235">    case BGP_ERR_PEER_GROUP_HAS_THE_FLAG:</a>
<a name="ln236">      str = &quot;This peer is a peer-group member.  Please change peer-group configuration&quot;;</a>
<a name="ln237">      break;</a>
<a name="ln238">    case BGP_ERR_PEER_FLAG_CONFLICT:</a>
<a name="ln239">      str = &quot;Can't set override-capability and strict-capability-match at the same time&quot;;</a>
<a name="ln240">      break;</a>
<a name="ln241">    case BGP_ERR_PEER_GROUP_MEMBER_EXISTS:</a>
<a name="ln242">      str = &quot;No activate for peergroup can be given only if peer-group has no members&quot;;</a>
<a name="ln243">      break;</a>
<a name="ln244">    case BGP_ERR_PEER_BELONGS_TO_GROUP:</a>
<a name="ln245">      str = &quot;No activate for an individual peer-group member is invalid&quot;;</a>
<a name="ln246">      break;</a>
<a name="ln247">    case BGP_ERR_PEER_GROUP_AF_UNCONFIGURED:</a>
<a name="ln248">      str = &quot;Activate the peer-group for the address family first&quot;;</a>
<a name="ln249">      break;</a>
<a name="ln250">    case BGP_ERR_PEER_GROUP_NO_REMOTE_AS:</a>
<a name="ln251">      str = &quot;Specify remote-as or peer-group remote AS first&quot;;</a>
<a name="ln252">      break;</a>
<a name="ln253">    case BGP_ERR_PEER_GROUP_CANT_CHANGE:</a>
<a name="ln254">      str = &quot;Cannot change the peer-group. Deconfigure first&quot;;</a>
<a name="ln255">      break;</a>
<a name="ln256">    case BGP_ERR_PEER_GROUP_MISMATCH:</a>
<a name="ln257">      str = &quot;Cannot have different peer-group for the neighbor&quot;;</a>
<a name="ln258">      break;</a>
<a name="ln259">    case BGP_ERR_PEER_FILTER_CONFLICT:</a>
<a name="ln260">      str = &quot;Prefix/distribute list can not co-exist&quot;;</a>
<a name="ln261">      break;</a>
<a name="ln262">    case BGP_ERR_NOT_INTERNAL_PEER:</a>
<a name="ln263">      str = &quot;Invalid command. Not an internal neighbor&quot;;</a>
<a name="ln264">      break;</a>
<a name="ln265">    case BGP_ERR_REMOVE_PRIVATE_AS:</a>
<a name="ln266">      str = &quot;Private AS cannot be removed for IBGP peers&quot;;</a>
<a name="ln267">      break;</a>
<a name="ln268">    case BGP_ERR_LOCAL_AS_ALLOWED_ONLY_FOR_EBGP:</a>
<a name="ln269">      str = &quot;Local-AS allowed only for EBGP peers&quot;;</a>
<a name="ln270">      break;</a>
<a name="ln271">    case BGP_ERR_CANNOT_HAVE_LOCAL_AS_SAME_AS:</a>
<a name="ln272">      str = &quot;Cannot have local-as same as BGP AS number&quot;;</a>
<a name="ln273">      break;</a>
<a name="ln274">    case BGP_ERR_TCPSIG_FAILED:</a>
<a name="ln275">      str = &quot;Error while applying TCP-Sig to session(s)&quot;;</a>
<a name="ln276">      break;</a>
<a name="ln277">    case BGP_ERR_NO_EBGP_MULTIHOP_WITH_TTLHACK:</a>
<a name="ln278">      str = &quot;ebgp-multihop and ttl-security cannot be configured together&quot;;</a>
<a name="ln279">      break;</a>
<a name="ln280">    case BGP_ERR_NO_IBGP_WITH_TTLHACK:</a>
<a name="ln281">      str = &quot;ttl-security only allowed for EBGP peers&quot;;</a>
<a name="ln282">      break;</a>
<a name="ln283">    }</a>
<a name="ln284">  if (str)</a>
<a name="ln285">    {</a>
<a name="ln286">      vty_out (vty, &quot;%% %s%s&quot;, str, VTY_NEWLINE);</a>
<a name="ln287">      return CMD_WARNING;</a>
<a name="ln288">    }</a>
<a name="ln289">  return CMD_SUCCESS;</a>
<a name="ln290">}</a>
<a name="ln291"> </a>
<a name="ln292">/* BGP global configuration.  */</a>
<a name="ln293"> </a>
<a name="ln294">DEFUN (bgp_multiple_instance_func,</a>
<a name="ln295">       bgp_multiple_instance_cmd,</a>
<a name="ln296">       &quot;bgp multiple-instance&quot;,</a>
<a name="ln297">       BGP_STR</a>
<a name="ln298">       &quot;Enable bgp multiple instance\n&quot;)</a>
<a name="ln299">{</a>
<a name="ln300">  bgp_option_set (BGP_OPT_MULTIPLE_INSTANCE);</a>
<a name="ln301">  return CMD_SUCCESS;</a>
<a name="ln302">}</a>
<a name="ln303"> </a>
<a name="ln304">DEFUN (no_bgp_multiple_instance,</a>
<a name="ln305">       no_bgp_multiple_instance_cmd,</a>
<a name="ln306">       &quot;no bgp multiple-instance&quot;,</a>
<a name="ln307">       NO_STR</a>
<a name="ln308">       BGP_STR</a>
<a name="ln309">       &quot;BGP multiple instance\n&quot;)</a>
<a name="ln310">{</a>
<a name="ln311">  int ret;</a>
<a name="ln312"> </a>
<a name="ln313">  ret = bgp_option_unset (BGP_OPT_MULTIPLE_INSTANCE);</a>
<a name="ln314">  if (ret &lt; 0)</a>
<a name="ln315">    {</a>
<a name="ln316">      vty_out (vty, &quot;%% There are more than two BGP instances%s&quot;, VTY_NEWLINE);</a>
<a name="ln317">      return CMD_WARNING;</a>
<a name="ln318">    }</a>
<a name="ln319">  return CMD_SUCCESS;</a>
<a name="ln320">}</a>
<a name="ln321"> </a>
<a name="ln322">DEFUN (bgp_config_type,</a>
<a name="ln323">       bgp_config_type_cmd,</a>
<a name="ln324">       &quot;bgp config-type (cisco|zebra)&quot;,</a>
<a name="ln325">       BGP_STR</a>
<a name="ln326">       &quot;Configuration type\n&quot;</a>
<a name="ln327">       &quot;cisco\n&quot;</a>
<a name="ln328">       &quot;zebra\n&quot;)</a>
<a name="ln329">{</a>
<a name="ln330">  if (strncmp (argv[0], &quot;c&quot;, 1) == 0)</a>
<a name="ln331">    bgp_option_set (BGP_OPT_CONFIG_CISCO);</a>
<a name="ln332">  else</a>
<a name="ln333">    bgp_option_unset (BGP_OPT_CONFIG_CISCO);</a>
<a name="ln334"> </a>
<a name="ln335">  return CMD_SUCCESS;</a>
<a name="ln336">}</a>
<a name="ln337"> </a>
<a name="ln338">DEFUN (no_bgp_config_type,</a>
<a name="ln339">       no_bgp_config_type_cmd,</a>
<a name="ln340">       &quot;no bgp config-type&quot;,</a>
<a name="ln341">       NO_STR</a>
<a name="ln342">       BGP_STR</a>
<a name="ln343">       &quot;Display configuration type\n&quot;)</a>
<a name="ln344">{</a>
<a name="ln345">  bgp_option_unset (BGP_OPT_CONFIG_CISCO);</a>
<a name="ln346">  return CMD_SUCCESS;</a>
<a name="ln347">}</a>
<a name="ln348"> </a>
<a name="ln349">DEFUN (no_synchronization,</a>
<a name="ln350">       no_synchronization_cmd,</a>
<a name="ln351">       &quot;no synchronization&quot;,</a>
<a name="ln352">       NO_STR</a>
<a name="ln353">       &quot;Perform IGP synchronization\n&quot;)</a>
<a name="ln354">{</a>
<a name="ln355">  return CMD_SUCCESS;</a>
<a name="ln356">}</a>
<a name="ln357"> </a>
<a name="ln358">DEFUN (no_auto_summary,</a>
<a name="ln359">       no_auto_summary_cmd,</a>
<a name="ln360">       &quot;no auto-summary&quot;,</a>
<a name="ln361">       NO_STR</a>
<a name="ln362">       &quot;Enable automatic network number summarization\n&quot;)</a>
<a name="ln363">{</a>
<a name="ln364">  return CMD_SUCCESS;</a>
<a name="ln365">}</a>
<a name="ln366"> </a>
<a name="ln367">DEFUN_DEPRECATED (neighbor_version,</a>
<a name="ln368">		  neighbor_version_cmd,</a>
<a name="ln369">		  NEIGHBOR_CMD &quot;version (4|4-)&quot;,</a>
<a name="ln370">		  NEIGHBOR_STR</a>
<a name="ln371">		  NEIGHBOR_ADDR_STR</a>
<a name="ln372">		  &quot;Set the BGP version to match a neighbor\n&quot;</a>
<a name="ln373">		  &quot;Neighbor's BGP version\n&quot;)</a>
<a name="ln374">{</a>
<a name="ln375">  return CMD_SUCCESS;</a>
<a name="ln376">}</a>
<a name="ln377"> </a>
<a name="ln378">/* &quot;router bgp&quot; commands. */</a>
<a name="ln379">DEFUN (router_bgp, </a>
<a name="ln380">       router_bgp_cmd, </a>
<a name="ln381">       &quot;router bgp &quot; CMD_AS_RANGE,</a>
<a name="ln382">       ROUTER_STR</a>
<a name="ln383">       BGP_STR</a>
<a name="ln384">       AS_STR)</a>
<a name="ln385">{</a>
<a name="ln386">  int ret;</a>
<a name="ln387">  as_t as;</a>
<a name="ln388">  struct bgp *bgp;</a>
<a name="ln389">  const char *name = NULL;</a>
<a name="ln390"> </a>
<a name="ln391">  VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, argv[0], 1, BGP_AS4_MAX);</a>
<a name="ln392"> </a>
<a name="ln393">  if (argc == 2)</a>
<a name="ln394">    name = argv[1];</a>
<a name="ln395"> </a>
<a name="ln396">  ret = bgp_get (&amp;bgp, &amp;as, name);</a>
<a name="ln397">  switch (ret)</a>
<a name="ln398">    {</a>
<a name="ln399">    case BGP_ERR_MULTIPLE_INSTANCE_NOT_SET:</a>
<a name="ln400">      vty_out (vty, &quot;Please specify 'bgp multiple-instance' first%s&quot;, </a>
<a name="ln401">	       VTY_NEWLINE);</a>
<a name="ln402">      return CMD_WARNING;</a>
<a name="ln403">    case BGP_ERR_AS_MISMATCH:</a>
<a name="ln404">      vty_out (vty, &quot;BGP is already running; AS is %u%s&quot;, as, VTY_NEWLINE);</a>
<a name="ln405">      return CMD_WARNING;</a>
<a name="ln406">    case BGP_ERR_INSTANCE_MISMATCH:</a>
<a name="ln407">      vty_out (vty, &quot;BGP view name and AS number mismatch%s&quot;, VTY_NEWLINE);</a>
<a name="ln408">      vty_out (vty, &quot;BGP instance is already running; AS is %u%s&quot;,</a>
<a name="ln409">	       as, VTY_NEWLINE);</a>
<a name="ln410">      return CMD_WARNING;</a>
<a name="ln411">    }</a>
<a name="ln412"> </a>
<a name="ln413">  vty-&gt;node = BGP_NODE;</a>
<a name="ln414">  vty-&gt;index = bgp;</a>
<a name="ln415"> </a>
<a name="ln416">  return CMD_SUCCESS;</a>
<a name="ln417">}</a>
<a name="ln418"> </a>
<a name="ln419">ALIAS (router_bgp,</a>
<a name="ln420">       router_bgp_view_cmd,</a>
<a name="ln421">       &quot;router bgp &quot; CMD_AS_RANGE &quot; view WORD&quot;,</a>
<a name="ln422">       ROUTER_STR</a>
<a name="ln423">       BGP_STR</a>
<a name="ln424">       AS_STR</a>
<a name="ln425">       &quot;BGP view\n&quot;</a>
<a name="ln426">       &quot;view name\n&quot;)</a>
<a name="ln427"> </a>
<a name="ln428">/* &quot;no router bgp&quot; commands. */</a>
<a name="ln429">DEFUN (no_router_bgp,</a>
<a name="ln430">       no_router_bgp_cmd,</a>
<a name="ln431">       &quot;no router bgp &quot; CMD_AS_RANGE,</a>
<a name="ln432">       NO_STR</a>
<a name="ln433">       ROUTER_STR</a>
<a name="ln434">       BGP_STR</a>
<a name="ln435">       AS_STR)</a>
<a name="ln436">{</a>
<a name="ln437">  as_t as;</a>
<a name="ln438">  struct bgp *bgp;</a>
<a name="ln439">  const char *name = NULL;</a>
<a name="ln440"> </a>
<a name="ln441">  VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, argv[0], 1, BGP_AS4_MAX);</a>
<a name="ln442"> </a>
<a name="ln443">  if (argc == 2)</a>
<a name="ln444">    name = argv[1];</a>
<a name="ln445"> </a>
<a name="ln446">  /* Lookup bgp structure. */</a>
<a name="ln447">  bgp = bgp_lookup (as, name);</a>
<a name="ln448">  if (! bgp)</a>
<a name="ln449">    {</a>
<a name="ln450">      vty_out (vty, &quot;%% Can't find BGP instance%s&quot;, VTY_NEWLINE);</a>
<a name="ln451">      return CMD_WARNING;</a>
<a name="ln452">    }</a>
<a name="ln453"> </a>
<a name="ln454">  bgp_delete (bgp);</a>
<a name="ln455"> </a>
<a name="ln456">  return CMD_SUCCESS;</a>
<a name="ln457">}</a>
<a name="ln458"> </a>
<a name="ln459">ALIAS (no_router_bgp,</a>
<a name="ln460">       no_router_bgp_view_cmd,</a>
<a name="ln461">       &quot;no router bgp &quot; CMD_AS_RANGE &quot; view WORD&quot;,</a>
<a name="ln462">       NO_STR</a>
<a name="ln463">       ROUTER_STR</a>
<a name="ln464">       BGP_STR</a>
<a name="ln465">       AS_STR</a>
<a name="ln466">       &quot;BGP view\n&quot;</a>
<a name="ln467">       &quot;view name\n&quot;)</a>
<a name="ln468"> </a>
<a name="ln469">/* BGP router-id.  */</a>
<a name="ln470"> </a>
<a name="ln471">DEFUN (bgp_router_id,</a>
<a name="ln472">       bgp_router_id_cmd,</a>
<a name="ln473">       &quot;bgp router-id A.B.C.D&quot;,</a>
<a name="ln474">       BGP_STR</a>
<a name="ln475">       &quot;Override configured router identifier\n&quot;</a>
<a name="ln476">       &quot;Manually configured router identifier\n&quot;)</a>
<a name="ln477">{</a>
<a name="ln478">  int ret;</a>
<a name="ln479">  struct in_addr id;</a>
<a name="ln480">  struct bgp *bgp;</a>
<a name="ln481"> </a>
<a name="ln482">  bgp = vty-&gt;index;</a>
<a name="ln483"> </a>
<a name="ln484">  ret = inet_aton (argv[0], &amp;id);</a>
<a name="ln485">  if (! ret)</a>
<a name="ln486">    {</a>
<a name="ln487">      vty_out (vty, &quot;%% Malformed bgp router identifier%s&quot;, VTY_NEWLINE);</a>
<a name="ln488">      return CMD_WARNING;</a>
<a name="ln489">    }</a>
<a name="ln490"> </a>
<a name="ln491">  bgp_router_id_static_set (bgp, id);</a>
<a name="ln492"> </a>
<a name="ln493">  return CMD_SUCCESS;</a>
<a name="ln494">}</a>
<a name="ln495"> </a>
<a name="ln496">DEFUN (no_bgp_router_id,</a>
<a name="ln497">       no_bgp_router_id_cmd,</a>
<a name="ln498">       &quot;no bgp router-id&quot;,</a>
<a name="ln499">       NO_STR</a>
<a name="ln500">       BGP_STR</a>
<a name="ln501">       &quot;Override configured router identifier\n&quot;)</a>
<a name="ln502">{</a>
<a name="ln503">  int ret;</a>
<a name="ln504">  struct in_addr id;</a>
<a name="ln505">  struct bgp *bgp;</a>
<a name="ln506"> </a>
<a name="ln507">  bgp = vty-&gt;index;</a>
<a name="ln508"> </a>
<a name="ln509">  if (argc == 1)</a>
<a name="ln510">    {</a>
<a name="ln511">      ret = inet_aton (argv[0], &amp;id);</a>
<a name="ln512">      if (! ret)</a>
<a name="ln513">	{</a>
<a name="ln514">	  vty_out (vty, &quot;%% Malformed BGP router identifier%s&quot;, VTY_NEWLINE);</a>
<a name="ln515">	  return CMD_WARNING;</a>
<a name="ln516">	}</a>
<a name="ln517"> </a>
<a name="ln518">      if (! IPV4_ADDR_SAME (&amp;bgp-&gt;router_id_static, &amp;id))</a>
<a name="ln519">	{</a>
<a name="ln520">	  vty_out (vty, &quot;%% BGP router-id doesn't match%s&quot;, VTY_NEWLINE);</a>
<a name="ln521">	  return CMD_WARNING;</a>
<a name="ln522">	}</a>
<a name="ln523">    }</a>
<a name="ln524"> </a>
<a name="ln525">  id.s_addr = 0;</a>
<a name="ln526">  bgp_router_id_static_set (bgp, id);</a>
<a name="ln527"> </a>
<a name="ln528">  return CMD_SUCCESS;</a>
<a name="ln529">}</a>
<a name="ln530"> </a>
<a name="ln531">ALIAS (no_bgp_router_id,</a>
<a name="ln532">       no_bgp_router_id_val_cmd,</a>
<a name="ln533">       &quot;no bgp router-id A.B.C.D&quot;,</a>
<a name="ln534">       NO_STR</a>
<a name="ln535">       BGP_STR</a>
<a name="ln536">       &quot;Override configured router identifier\n&quot;</a>
<a name="ln537">       &quot;Manually configured router identifier\n&quot;)</a>
<a name="ln538"> </a>
<a name="ln539">/* BGP Cluster ID.  */</a>
<a name="ln540"> </a>
<a name="ln541">DEFUN (bgp_cluster_id,</a>
<a name="ln542">       bgp_cluster_id_cmd,</a>
<a name="ln543">       &quot;bgp cluster-id A.B.C.D&quot;,</a>
<a name="ln544">       BGP_STR</a>
<a name="ln545">       &quot;Configure Route-Reflector Cluster-id\n&quot;</a>
<a name="ln546">       &quot;Route-Reflector Cluster-id in IP address format\n&quot;)</a>
<a name="ln547">{</a>
<a name="ln548">  int ret;</a>
<a name="ln549">  struct bgp *bgp;</a>
<a name="ln550">  struct in_addr cluster;</a>
<a name="ln551"> </a>
<a name="ln552">  bgp = vty-&gt;index;</a>
<a name="ln553"> </a>
<a name="ln554">  ret = inet_aton (argv[0], &amp;cluster);</a>
<a name="ln555">  if (! ret)</a>
<a name="ln556">    {</a>
<a name="ln557">      vty_out (vty, &quot;%% Malformed bgp cluster identifier%s&quot;, VTY_NEWLINE);</a>
<a name="ln558">      return CMD_WARNING;</a>
<a name="ln559">    }</a>
<a name="ln560"> </a>
<a name="ln561">  bgp_cluster_id_set (bgp, &amp;cluster);</a>
<a name="ln562"> </a>
<a name="ln563">  return CMD_SUCCESS;</a>
<a name="ln564">}</a>
<a name="ln565"> </a>
<a name="ln566">ALIAS (bgp_cluster_id,</a>
<a name="ln567">       bgp_cluster_id32_cmd,</a>
<a name="ln568">       &quot;bgp cluster-id &lt;1-4294967295&gt;&quot;,</a>
<a name="ln569">       BGP_STR</a>
<a name="ln570">       &quot;Configure Route-Reflector Cluster-id\n&quot;</a>
<a name="ln571">       &quot;Route-Reflector Cluster-id as 32 bit quantity\n&quot;)</a>
<a name="ln572"> </a>
<a name="ln573">DEFUN (no_bgp_cluster_id,</a>
<a name="ln574">       no_bgp_cluster_id_cmd,</a>
<a name="ln575">       &quot;no bgp cluster-id&quot;,</a>
<a name="ln576">       NO_STR</a>
<a name="ln577">       BGP_STR</a>
<a name="ln578">       &quot;Configure Route-Reflector Cluster-id\n&quot;)</a>
<a name="ln579">{</a>
<a name="ln580">  int ret;</a>
<a name="ln581">  struct bgp *bgp;</a>
<a name="ln582">  struct in_addr cluster;</a>
<a name="ln583"> </a>
<a name="ln584">  bgp = vty-&gt;index;</a>
<a name="ln585"> </a>
<a name="ln586">  if (argc == 1)</a>
<a name="ln587">    {</a>
<a name="ln588">      ret = inet_aton (argv[0], &amp;cluster);</a>
<a name="ln589">      if (! ret)</a>
<a name="ln590">	{</a>
<a name="ln591">	  vty_out (vty, &quot;%% Malformed bgp cluster identifier%s&quot;, VTY_NEWLINE);</a>
<a name="ln592">	  return CMD_WARNING;</a>
<a name="ln593">	}</a>
<a name="ln594">    }</a>
<a name="ln595"> </a>
<a name="ln596">  bgp_cluster_id_unset (bgp);</a>
<a name="ln597"> </a>
<a name="ln598">  return CMD_SUCCESS;</a>
<a name="ln599">}</a>
<a name="ln600"> </a>
<a name="ln601">ALIAS (no_bgp_cluster_id,</a>
<a name="ln602">       no_bgp_cluster_id_arg_cmd,</a>
<a name="ln603">       &quot;no bgp cluster-id A.B.C.D&quot;,</a>
<a name="ln604">       NO_STR</a>
<a name="ln605">       BGP_STR</a>
<a name="ln606">       &quot;Configure Route-Reflector Cluster-id\n&quot;</a>
<a name="ln607">       &quot;Route-Reflector Cluster-id in IP address format\n&quot;)</a>
<a name="ln608"> </a>
<a name="ln609">DEFUN (bgp_confederation_identifier,</a>
<a name="ln610">       bgp_confederation_identifier_cmd,</a>
<a name="ln611">       &quot;bgp confederation identifier &quot; CMD_AS_RANGE,</a>
<a name="ln612">       &quot;BGP specific commands\n&quot;</a>
<a name="ln613">       &quot;AS confederation parameters\n&quot;</a>
<a name="ln614">       &quot;AS number\n&quot;</a>
<a name="ln615">       &quot;Set routing domain confederation AS\n&quot;)</a>
<a name="ln616">{</a>
<a name="ln617">  struct bgp *bgp;</a>
<a name="ln618">  as_t as;</a>
<a name="ln619"> </a>
<a name="ln620">  bgp = vty-&gt;index;</a>
<a name="ln621"> </a>
<a name="ln622">  VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, argv[0], 1, BGP_AS4_MAX);</a>
<a name="ln623"> </a>
<a name="ln624">  bgp_confederation_id_set (bgp, as);</a>
<a name="ln625"> </a>
<a name="ln626">  return CMD_SUCCESS;</a>
<a name="ln627">}</a>
<a name="ln628"> </a>
<a name="ln629">DEFUN (no_bgp_confederation_identifier,</a>
<a name="ln630">       no_bgp_confederation_identifier_cmd,</a>
<a name="ln631">       &quot;no bgp confederation identifier&quot;,</a>
<a name="ln632">       NO_STR</a>
<a name="ln633">       &quot;BGP specific commands\n&quot;</a>
<a name="ln634">       &quot;AS confederation parameters\n&quot;</a>
<a name="ln635">       &quot;AS number\n&quot;)</a>
<a name="ln636">{</a>
<a name="ln637">  struct bgp *bgp;</a>
<a name="ln638">  as_t as __attribute__((unused)); /* Dummy for VTY_GET_INTEGER_RANGE */</a>
<a name="ln639"> </a>
<a name="ln640">  bgp = vty-&gt;index;</a>
<a name="ln641"> </a>
<a name="ln642">  if (argc == 1)</a>
<a name="ln643">    VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, argv[0], 1, BGP_AS4_MAX);</a>
<a name="ln644"> </a>
<a name="ln645">  bgp_confederation_id_unset (bgp);</a>
<a name="ln646"> </a>
<a name="ln647">  return CMD_SUCCESS;</a>
<a name="ln648">}</a>
<a name="ln649"> </a>
<a name="ln650">ALIAS (no_bgp_confederation_identifier,</a>
<a name="ln651">       no_bgp_confederation_identifier_arg_cmd,</a>
<a name="ln652">       &quot;no bgp confederation identifier &quot; CMD_AS_RANGE,</a>
<a name="ln653">       NO_STR</a>
<a name="ln654">       &quot;BGP specific commands\n&quot;</a>
<a name="ln655">       &quot;AS confederation parameters\n&quot;</a>
<a name="ln656">       &quot;AS number\n&quot;</a>
<a name="ln657">       &quot;Set routing domain confederation AS\n&quot;)</a>
<a name="ln658"> </a>
<a name="ln659">DEFUN (bgp_confederation_peers,</a>
<a name="ln660">       bgp_confederation_peers_cmd,</a>
<a name="ln661">       &quot;bgp confederation peers .&quot; CMD_AS_RANGE,</a>
<a name="ln662">       &quot;BGP specific commands\n&quot;</a>
<a name="ln663">       &quot;AS confederation parameters\n&quot;</a>
<a name="ln664">       &quot;Peer ASs in BGP confederation\n&quot;</a>
<a name="ln665">       AS_STR)</a>
<a name="ln666">{</a>
<a name="ln667">  struct bgp *bgp;</a>
<a name="ln668">  as_t as;</a>
<a name="ln669">  int i;</a>
<a name="ln670"> </a>
<a name="ln671">  bgp = vty-&gt;index;</a>
<a name="ln672"> </a>
<a name="ln673">  for (i = 0; i &lt; argc; i++)</a>
<a name="ln674">    {</a>
<a name="ln675">      VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, argv[i], 1, BGP_AS4_MAX);</a>
<a name="ln676"> </a>
<a name="ln677">      if (bgp-&gt;as == as)</a>
<a name="ln678">	{</a>
<a name="ln679">	  vty_out (vty, &quot;%% Local member-AS not allowed in confed peer list%s&quot;,</a>
<a name="ln680">		   VTY_NEWLINE);</a>
<a name="ln681">	  continue;</a>
<a name="ln682">	}</a>
<a name="ln683"> </a>
<a name="ln684">      bgp_confederation_peers_add (bgp, as);</a>
<a name="ln685">    }</a>
<a name="ln686">  return CMD_SUCCESS;</a>
<a name="ln687">}</a>
<a name="ln688"> </a>
<a name="ln689">DEFUN (no_bgp_confederation_peers,</a>
<a name="ln690">       no_bgp_confederation_peers_cmd,</a>
<a name="ln691">       &quot;no bgp confederation peers .&quot; CMD_AS_RANGE,</a>
<a name="ln692">       NO_STR</a>
<a name="ln693">       &quot;BGP specific commands\n&quot;</a>
<a name="ln694">       &quot;AS confederation parameters\n&quot;</a>
<a name="ln695">       &quot;Peer ASs in BGP confederation\n&quot;</a>
<a name="ln696">       AS_STR)</a>
<a name="ln697">{</a>
<a name="ln698">  struct bgp *bgp;</a>
<a name="ln699">  as_t as;</a>
<a name="ln700">  int i;</a>
<a name="ln701"> </a>
<a name="ln702">  bgp = vty-&gt;index;</a>
<a name="ln703"> </a>
<a name="ln704">  for (i = 0; i &lt; argc; i++)</a>
<a name="ln705">    {</a>
<a name="ln706">      VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, argv[i], 1, BGP_AS4_MAX);</a>
<a name="ln707"> </a>
<a name="ln708">      bgp_confederation_peers_remove (bgp, as);</a>
<a name="ln709">    }</a>
<a name="ln710">  return CMD_SUCCESS;</a>
<a name="ln711">}</a>
<a name="ln712"> </a>
<a name="ln713">/* Maximum-paths configuration */</a>
<a name="ln714">DEFUN (bgp_maxpaths,</a>
<a name="ln715">       bgp_maxpaths_cmd,</a>
<a name="ln716">       &quot;maximum-paths &quot; CMD_RANGE_STR(1, MULTIPATH_NUM),</a>
<a name="ln717">       &quot;Forward packets over multiple paths\n&quot;</a>
<a name="ln718">       &quot;Number of paths\n&quot;)</a>
<a name="ln719">{</a>
<a name="ln720">  struct bgp *bgp;</a>
<a name="ln721">  u_int16_t maxpaths;</a>
<a name="ln722">  int ret;</a>
<a name="ln723"> </a>
<a name="ln724">  bgp = vty-&gt;index;</a>
<a name="ln725"> </a>
<a name="ln726">  VTY_GET_INTEGER_RANGE (&quot;maximum-paths&quot;, maxpaths, argv[0], 1, 255);</a>
<a name="ln727"> </a>
<a name="ln728">  ret = bgp_maximum_paths_set (bgp, bgp_node_afi (vty), bgp_node_safi(vty),</a>
<a name="ln729">			       BGP_PEER_EBGP, maxpaths);</a>
<a name="ln730">  if (ret &lt; 0)</a>
<a name="ln731">    {</a>
<a name="ln732">      vty_out (vty,</a>
<a name="ln733">	       &quot;%% Failed to set maximum-paths %u for afi %u, safi %u%s&quot;,</a>
<a name="ln734">	       maxpaths, bgp_node_afi (vty), bgp_node_safi(vty), VTY_NEWLINE);</a>
<a name="ln735">      return CMD_WARNING;</a>
<a name="ln736">    }</a>
<a name="ln737"> </a>
<a name="ln738">  return CMD_SUCCESS;</a>
<a name="ln739">}</a>
<a name="ln740"> </a>
<a name="ln741">DEFUN (bgp_maxpaths_ibgp,</a>
<a name="ln742">       bgp_maxpaths_ibgp_cmd,</a>
<a name="ln743">       &quot;maximum-paths ibgp &quot; CMD_RANGE_STR(1, MULTIPATH_NUM),</a>
<a name="ln744">       &quot;Forward packets over multiple paths\n&quot;</a>
<a name="ln745">       &quot;iBGP-multipath\n&quot;</a>
<a name="ln746">       &quot;Number of paths\n&quot;)</a>
<a name="ln747">{</a>
<a name="ln748">  struct bgp *bgp;</a>
<a name="ln749">  u_int16_t maxpaths;</a>
<a name="ln750">  int ret;</a>
<a name="ln751"> </a>
<a name="ln752">  bgp = vty-&gt;index;</a>
<a name="ln753"> </a>
<a name="ln754">  VTY_GET_INTEGER_RANGE (&quot;maximum-paths&quot;, maxpaths, argv[0], 1, 255);</a>
<a name="ln755"> </a>
<a name="ln756">  ret = bgp_maximum_paths_set (bgp, bgp_node_afi (vty), bgp_node_safi(vty),</a>
<a name="ln757">			       BGP_PEER_IBGP, maxpaths);</a>
<a name="ln758">  if (ret &lt; 0)</a>
<a name="ln759">    {</a>
<a name="ln760">      vty_out (vty,</a>
<a name="ln761">	       &quot;%% Failed to set maximum-paths ibgp %u for afi %u, safi %u%s&quot;,</a>
<a name="ln762">	       maxpaths, bgp_node_afi (vty), bgp_node_safi(vty), VTY_NEWLINE);</a>
<a name="ln763">      return CMD_WARNING;</a>
<a name="ln764">    }</a>
<a name="ln765"> </a>
<a name="ln766">  return CMD_SUCCESS;</a>
<a name="ln767">}</a>
<a name="ln768"> </a>
<a name="ln769">DEFUN (no_bgp_maxpaths,</a>
<a name="ln770">       no_bgp_maxpaths_cmd,</a>
<a name="ln771">       &quot;no maximum-paths&quot;,</a>
<a name="ln772">       NO_STR</a>
<a name="ln773">       &quot;Forward packets over multiple paths\n&quot;</a>
<a name="ln774">       &quot;Number of paths\n&quot;)</a>
<a name="ln775">{</a>
<a name="ln776">  struct bgp *bgp;</a>
<a name="ln777">  int ret;</a>
<a name="ln778"> </a>
<a name="ln779">  bgp = vty-&gt;index;</a>
<a name="ln780"> </a>
<a name="ln781">  ret = bgp_maximum_paths_unset (bgp, bgp_node_afi (vty), bgp_node_safi(vty),</a>
<a name="ln782">				 BGP_PEER_EBGP);</a>
<a name="ln783">  if (ret &lt; 0)</a>
<a name="ln784">    {</a>
<a name="ln785">      vty_out (vty,</a>
<a name="ln786">	       &quot;%% Failed to unset maximum-paths for afi %u, safi %u%s&quot;,</a>
<a name="ln787">	       bgp_node_afi (vty), bgp_node_safi(vty), VTY_NEWLINE);</a>
<a name="ln788">      return CMD_WARNING;</a>
<a name="ln789">    }</a>
<a name="ln790"> </a>
<a name="ln791">  return CMD_SUCCESS;</a>
<a name="ln792">}</a>
<a name="ln793"> </a>
<a name="ln794">ALIAS (no_bgp_maxpaths,</a>
<a name="ln795">       no_bgp_maxpaths_arg_cmd,</a>
<a name="ln796">       &quot;no maximum-paths &quot; CMD_RANGE_STR(1, MULTIPATH_NUM),</a>
<a name="ln797">       NO_STR</a>
<a name="ln798">       &quot;Forward packets over multiple paths\n&quot;</a>
<a name="ln799">       &quot;Number of paths\n&quot;)</a>
<a name="ln800"> </a>
<a name="ln801">DEFUN (no_bgp_maxpaths_ibgp,</a>
<a name="ln802">       no_bgp_maxpaths_ibgp_cmd,</a>
<a name="ln803">       &quot;no maximum-paths ibgp&quot;,</a>
<a name="ln804">       NO_STR</a>
<a name="ln805">       &quot;Forward packets over multiple paths\n&quot;</a>
<a name="ln806">       &quot;iBGP-multipath\n&quot;</a>
<a name="ln807">       &quot;Number of paths\n&quot;)</a>
<a name="ln808">{</a>
<a name="ln809">  struct bgp *bgp;</a>
<a name="ln810">  int ret;</a>
<a name="ln811"> </a>
<a name="ln812">  bgp = vty-&gt;index;</a>
<a name="ln813"> </a>
<a name="ln814">  ret = bgp_maximum_paths_unset (bgp, bgp_node_afi (vty), bgp_node_safi(vty),</a>
<a name="ln815">				 BGP_PEER_IBGP);</a>
<a name="ln816">  if (ret &lt; 0)</a>
<a name="ln817">    {</a>
<a name="ln818">      vty_out (vty,</a>
<a name="ln819">	       &quot;%% Failed to unset maximum-paths ibgp for afi %u, safi %u%s&quot;,</a>
<a name="ln820">	       bgp_node_afi (vty), bgp_node_safi(vty), VTY_NEWLINE);</a>
<a name="ln821">      return CMD_WARNING;</a>
<a name="ln822">    }</a>
<a name="ln823"> </a>
<a name="ln824">  return CMD_SUCCESS;</a>
<a name="ln825">}</a>
<a name="ln826"> </a>
<a name="ln827">ALIAS (no_bgp_maxpaths_ibgp,</a>
<a name="ln828">       no_bgp_maxpaths_ibgp_arg_cmd,</a>
<a name="ln829">       &quot;no maximum-paths ibgp &quot; CMD_RANGE_STR(1, MULTIPATH_NUM),</a>
<a name="ln830">       NO_STR</a>
<a name="ln831">       &quot;Forward packets over multiple paths\n&quot;</a>
<a name="ln832">       &quot;iBGP-multipath\n&quot;</a>
<a name="ln833">       &quot;Number of paths\n&quot;)</a>
<a name="ln834"> </a>
<a name="ln835">int</a>
<a name="ln836">bgp_config_write_maxpaths (struct vty *vty, struct bgp *bgp, afi_t afi,</a>
<a name="ln837">			   safi_t safi, int *write)</a>
<a name="ln838">{</a>
<a name="ln839">  if (bgp-&gt;maxpaths[afi][safi].maxpaths_ebgp != BGP_DEFAULT_MAXPATHS)</a>
<a name="ln840">    {</a>
<a name="ln841">      bgp_config_write_family_header (vty, afi, safi, write);</a>
<a name="ln842">      vty_out (vty, &quot; maximum-paths %d%s&quot;,</a>
<a name="ln843">	       bgp-&gt;maxpaths[afi][safi].maxpaths_ebgp, VTY_NEWLINE);</a>
<a name="ln844">    }</a>
<a name="ln845"> </a>
<a name="ln846">  if (bgp-&gt;maxpaths[afi][safi].maxpaths_ibgp != BGP_DEFAULT_MAXPATHS)</a>
<a name="ln847">    {</a>
<a name="ln848">      bgp_config_write_family_header (vty, afi, safi, write);</a>
<a name="ln849">      vty_out (vty, &quot; maximum-paths ibgp %d%s&quot;,</a>
<a name="ln850">	       bgp-&gt;maxpaths[afi][safi].maxpaths_ibgp, VTY_NEWLINE);</a>
<a name="ln851">    }</a>
<a name="ln852"> </a>
<a name="ln853">  return 0;</a>
<a name="ln854">}</a>
<a name="ln855"> </a>
<a name="ln856">/* BGP timers.  */</a>
<a name="ln857"> </a>
<a name="ln858">DEFUN (bgp_timers,</a>
<a name="ln859">       bgp_timers_cmd,</a>
<a name="ln860">       &quot;timers bgp &lt;0-65535&gt; &lt;0-65535&gt;&quot;,</a>
<a name="ln861">       &quot;Adjust routing timers\n&quot;</a>
<a name="ln862">       &quot;BGP timers\n&quot;</a>
<a name="ln863">       &quot;Keepalive interval\n&quot;</a>
<a name="ln864">       &quot;Holdtime\n&quot;)</a>
<a name="ln865">{</a>
<a name="ln866">  struct bgp *bgp;</a>
<a name="ln867">  unsigned long keepalive = 0;</a>
<a name="ln868">  unsigned long holdtime = 0;</a>
<a name="ln869"> </a>
<a name="ln870">  bgp = vty-&gt;index;</a>
<a name="ln871"> </a>
<a name="ln872">  VTY_GET_INTEGER (&quot;keepalive&quot;, keepalive, argv[0]);</a>
<a name="ln873">  VTY_GET_INTEGER (&quot;holdtime&quot;, holdtime, argv[1]);</a>
<a name="ln874"> </a>
<a name="ln875">  /* Holdtime value check. */</a>
<a name="ln876">  if (holdtime &lt; 3 &amp;&amp; holdtime != 0)</a>
<a name="ln877">    {</a>
<a name="ln878">      vty_out (vty, &quot;%% hold time value must be either 0 or greater than 3%s&quot;,</a>
<a name="ln879">	       VTY_NEWLINE);</a>
<a name="ln880">      return CMD_WARNING;</a>
<a name="ln881">    }</a>
<a name="ln882"> </a>
<a name="ln883">  bgp_timers_set (bgp, keepalive, holdtime);</a>
<a name="ln884"> </a>
<a name="ln885">  return CMD_SUCCESS;</a>
<a name="ln886">}</a>
<a name="ln887"> </a>
<a name="ln888">DEFUN (no_bgp_timers,</a>
<a name="ln889">       no_bgp_timers_cmd,</a>
<a name="ln890">       &quot;no timers bgp&quot;,</a>
<a name="ln891">       NO_STR</a>
<a name="ln892">       &quot;Adjust routing timers\n&quot;</a>
<a name="ln893">       &quot;BGP timers\n&quot;)</a>
<a name="ln894">{</a>
<a name="ln895">  struct bgp *bgp;</a>
<a name="ln896"> </a>
<a name="ln897">  bgp = vty-&gt;index;</a>
<a name="ln898">  bgp_timers_unset (bgp);</a>
<a name="ln899"> </a>
<a name="ln900">  return CMD_SUCCESS;</a>
<a name="ln901">}</a>
<a name="ln902"> </a>
<a name="ln903">ALIAS (no_bgp_timers,</a>
<a name="ln904">       no_bgp_timers_arg_cmd,</a>
<a name="ln905">       &quot;no timers bgp &lt;0-65535&gt; &lt;0-65535&gt;&quot;,</a>
<a name="ln906">       NO_STR</a>
<a name="ln907">       &quot;Adjust routing timers\n&quot;</a>
<a name="ln908">       &quot;BGP timers\n&quot;</a>
<a name="ln909">       &quot;Keepalive interval\n&quot;</a>
<a name="ln910">       &quot;Holdtime\n&quot;)</a>
<a name="ln911"> </a>
<a name="ln912">DEFUN (bgp_client_to_client_reflection,</a>
<a name="ln913">       bgp_client_to_client_reflection_cmd,</a>
<a name="ln914">       &quot;bgp client-to-client reflection&quot;,</a>
<a name="ln915">       &quot;BGP specific commands\n&quot;</a>
<a name="ln916">       &quot;Configure client to client route reflection\n&quot;</a>
<a name="ln917">       &quot;reflection of routes allowed\n&quot;)</a>
<a name="ln918">{</a>
<a name="ln919">  struct bgp *bgp;</a>
<a name="ln920"> </a>
<a name="ln921">  bgp = vty-&gt;index;</a>
<a name="ln922">  bgp_flag_unset (bgp, BGP_FLAG_NO_CLIENT_TO_CLIENT);</a>
<a name="ln923">  return CMD_SUCCESS;</a>
<a name="ln924">}</a>
<a name="ln925"> </a>
<a name="ln926">DEFUN (no_bgp_client_to_client_reflection,</a>
<a name="ln927">       no_bgp_client_to_client_reflection_cmd,</a>
<a name="ln928">       &quot;no bgp client-to-client reflection&quot;,</a>
<a name="ln929">       NO_STR</a>
<a name="ln930">       &quot;BGP specific commands\n&quot;</a>
<a name="ln931">       &quot;Configure client to client route reflection\n&quot;</a>
<a name="ln932">       &quot;reflection of routes allowed\n&quot;)</a>
<a name="ln933">{</a>
<a name="ln934">  struct bgp *bgp;</a>
<a name="ln935"> </a>
<a name="ln936">  bgp = vty-&gt;index;</a>
<a name="ln937">  bgp_flag_set (bgp, BGP_FLAG_NO_CLIENT_TO_CLIENT);</a>
<a name="ln938">  return CMD_SUCCESS;</a>
<a name="ln939">}</a>
<a name="ln940"> </a>
<a name="ln941">/* &quot;bgp always-compare-med&quot; configuration. */</a>
<a name="ln942">DEFUN (bgp_always_compare_med,</a>
<a name="ln943">       bgp_always_compare_med_cmd,</a>
<a name="ln944">       &quot;bgp always-compare-med&quot;,</a>
<a name="ln945">       &quot;BGP specific commands\n&quot;</a>
<a name="ln946">       &quot;Allow comparing MED from different neighbors\n&quot;)</a>
<a name="ln947">{</a>
<a name="ln948">  struct bgp *bgp;</a>
<a name="ln949"> </a>
<a name="ln950">  bgp = vty-&gt;index;</a>
<a name="ln951">  bgp_flag_set (bgp, BGP_FLAG_ALWAYS_COMPARE_MED);</a>
<a name="ln952">  return CMD_SUCCESS;</a>
<a name="ln953">}</a>
<a name="ln954"> </a>
<a name="ln955">DEFUN (no_bgp_always_compare_med,</a>
<a name="ln956">       no_bgp_always_compare_med_cmd,</a>
<a name="ln957">       &quot;no bgp always-compare-med&quot;,</a>
<a name="ln958">       NO_STR</a>
<a name="ln959">       &quot;BGP specific commands\n&quot;</a>
<a name="ln960">       &quot;Allow comparing MED from different neighbors\n&quot;)</a>
<a name="ln961">{</a>
<a name="ln962">  struct bgp *bgp;</a>
<a name="ln963"> </a>
<a name="ln964">  bgp = vty-&gt;index;</a>
<a name="ln965">  bgp_flag_unset (bgp, BGP_FLAG_ALWAYS_COMPARE_MED);</a>
<a name="ln966">  return CMD_SUCCESS;</a>
<a name="ln967">}</a>
<a name="ln968"> </a>
<a name="ln969">/* &quot;bgp deterministic-med&quot; configuration. */</a>
<a name="ln970">DEFUN (bgp_deterministic_med,</a>
<a name="ln971">       bgp_deterministic_med_cmd,</a>
<a name="ln972">       &quot;bgp deterministic-med&quot;,</a>
<a name="ln973">       &quot;BGP specific commands\n&quot;</a>
<a name="ln974">       &quot;Pick the best-MED path among paths advertised from the neighboring AS\n&quot;)</a>
<a name="ln975">{</a>
<a name="ln976">  struct bgp *bgp;</a>
<a name="ln977"> </a>
<a name="ln978">  bgp = vty-&gt;index;</a>
<a name="ln979">  bgp_flag_set (bgp, BGP_FLAG_DETERMINISTIC_MED);</a>
<a name="ln980">  return CMD_SUCCESS;</a>
<a name="ln981">}</a>
<a name="ln982"> </a>
<a name="ln983">DEFUN (no_bgp_deterministic_med,</a>
<a name="ln984">       no_bgp_deterministic_med_cmd,</a>
<a name="ln985">       &quot;no bgp deterministic-med&quot;,</a>
<a name="ln986">       NO_STR</a>
<a name="ln987">       &quot;BGP specific commands\n&quot;</a>
<a name="ln988">       &quot;Pick the best-MED path among paths advertised from the neighboring AS\n&quot;)</a>
<a name="ln989">{</a>
<a name="ln990">  struct bgp *bgp;</a>
<a name="ln991"> </a>
<a name="ln992">  bgp = vty-&gt;index;</a>
<a name="ln993">  bgp_flag_unset (bgp, BGP_FLAG_DETERMINISTIC_MED);</a>
<a name="ln994">  return CMD_SUCCESS;</a>
<a name="ln995">}</a>
<a name="ln996"> </a>
<a name="ln997">/* &quot;bgp graceful-restart&quot; configuration. */</a>
<a name="ln998">DEFUN (bgp_graceful_restart,</a>
<a name="ln999">       bgp_graceful_restart_cmd,</a>
<a name="ln1000">       &quot;bgp graceful-restart&quot;,</a>
<a name="ln1001">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1002">       &quot;Graceful restart capability parameters\n&quot;)</a>
<a name="ln1003">{</a>
<a name="ln1004">  struct bgp *bgp;</a>
<a name="ln1005"> </a>
<a name="ln1006">  bgp = vty-&gt;index;</a>
<a name="ln1007">  bgp_flag_set (bgp, BGP_FLAG_GRACEFUL_RESTART);</a>
<a name="ln1008">  return CMD_SUCCESS;</a>
<a name="ln1009">}</a>
<a name="ln1010"> </a>
<a name="ln1011">DEFUN (no_bgp_graceful_restart,</a>
<a name="ln1012">       no_bgp_graceful_restart_cmd,</a>
<a name="ln1013">       &quot;no bgp graceful-restart&quot;,</a>
<a name="ln1014">       NO_STR</a>
<a name="ln1015">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1016">       &quot;Graceful restart capability parameters\n&quot;)</a>
<a name="ln1017">{</a>
<a name="ln1018">  struct bgp *bgp;</a>
<a name="ln1019"> </a>
<a name="ln1020">  bgp = vty-&gt;index;</a>
<a name="ln1021">  bgp_flag_unset (bgp, BGP_FLAG_GRACEFUL_RESTART);</a>
<a name="ln1022">  return CMD_SUCCESS;</a>
<a name="ln1023">}</a>
<a name="ln1024"> </a>
<a name="ln1025">DEFUN (bgp_graceful_restart_stalepath_time,</a>
<a name="ln1026">       bgp_graceful_restart_stalepath_time_cmd,</a>
<a name="ln1027">       &quot;bgp graceful-restart stalepath-time &lt;1-3600&gt;&quot;,</a>
<a name="ln1028">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1029">       &quot;Graceful restart capability parameters\n&quot;</a>
<a name="ln1030">       &quot;Set the max time to hold onto restarting peer's stale paths\n&quot;</a>
<a name="ln1031">       &quot;Delay value (seconds)\n&quot;)</a>
<a name="ln1032">{</a>
<a name="ln1033">  struct bgp *bgp;</a>
<a name="ln1034">  u_int32_t stalepath;</a>
<a name="ln1035"> </a>
<a name="ln1036">  bgp = vty-&gt;index;</a>
<a name="ln1037">  if (! bgp)</a>
<a name="ln1038">    return CMD_WARNING;</a>
<a name="ln1039"> </a>
<a name="ln1040">  VTY_GET_INTEGER_RANGE (&quot;stalepath-time&quot;, stalepath, argv[0], 1, 3600);</a>
<a name="ln1041">  bgp-&gt;stalepath_time = stalepath;</a>
<a name="ln1042">  return CMD_SUCCESS;</a>
<a name="ln1043">}</a>
<a name="ln1044"> </a>
<a name="ln1045">DEFUN (bgp_graceful_restart_restart_time,</a>
<a name="ln1046">       bgp_graceful_restart_restart_time_cmd,</a>
<a name="ln1047">       &quot;bgp graceful-restart restart-time &lt;1-3600&gt;&quot;,</a>
<a name="ln1048">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1049">       &quot;Graceful restart capability parameters\n&quot;</a>
<a name="ln1050">       &quot;Set the time to wait to delete stale routes before a BGP open message is received\n&quot;</a>
<a name="ln1051">       &quot;Delay value (seconds)\n&quot;)</a>
<a name="ln1052">{</a>
<a name="ln1053">  struct bgp *bgp;</a>
<a name="ln1054">  u_int32_t restart;</a>
<a name="ln1055"> </a>
<a name="ln1056">  bgp = vty-&gt;index;</a>
<a name="ln1057">  if (! bgp)</a>
<a name="ln1058">    return CMD_WARNING;</a>
<a name="ln1059"> </a>
<a name="ln1060">  VTY_GET_INTEGER_RANGE (&quot;restart-time&quot;, restart, argv[0], 1, 3600);</a>
<a name="ln1061">  bgp-&gt;restart_time = restart;</a>
<a name="ln1062">  return CMD_SUCCESS;</a>
<a name="ln1063">}</a>
<a name="ln1064"> </a>
<a name="ln1065">DEFUN (no_bgp_graceful_restart_stalepath_time,</a>
<a name="ln1066">       no_bgp_graceful_restart_stalepath_time_cmd,</a>
<a name="ln1067">       &quot;no bgp graceful-restart stalepath-time&quot;,</a>
<a name="ln1068">       NO_STR</a>
<a name="ln1069">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1070">       &quot;Graceful restart capability parameters\n&quot;</a>
<a name="ln1071">       &quot;Set the max time to hold onto restarting peer's stale paths\n&quot;)</a>
<a name="ln1072">{</a>
<a name="ln1073">  struct bgp *bgp;</a>
<a name="ln1074"> </a>
<a name="ln1075">  bgp = vty-&gt;index;</a>
<a name="ln1076">  if (! bgp)</a>
<a name="ln1077">    return CMD_WARNING;</a>
<a name="ln1078"> </a>
<a name="ln1079">  bgp-&gt;stalepath_time = BGP_DEFAULT_STALEPATH_TIME;</a>
<a name="ln1080">  return CMD_SUCCESS;</a>
<a name="ln1081">}</a>
<a name="ln1082"> </a>
<a name="ln1083">DEFUN (no_bgp_graceful_restart_restart_time,</a>
<a name="ln1084">       no_bgp_graceful_restart_restart_time_cmd,</a>
<a name="ln1085">       &quot;no bgp graceful-restart restart-time&quot;,</a>
<a name="ln1086">       NO_STR</a>
<a name="ln1087">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1088">       &quot;Graceful restart capability parameters\n&quot;</a>
<a name="ln1089">       &quot;Set the time to wait to delete stale routes before a BGP open message is received\n&quot;)</a>
<a name="ln1090">{</a>
<a name="ln1091">  struct bgp *bgp;</a>
<a name="ln1092"> </a>
<a name="ln1093">  bgp = vty-&gt;index;</a>
<a name="ln1094">  if (! bgp)</a>
<a name="ln1095">    return CMD_WARNING;</a>
<a name="ln1096"> </a>
<a name="ln1097">  bgp-&gt;restart_time = BGP_DEFAULT_RESTART_TIME;</a>
<a name="ln1098">  return CMD_SUCCESS;</a>
<a name="ln1099">}</a>
<a name="ln1100"> </a>
<a name="ln1101">ALIAS (no_bgp_graceful_restart_stalepath_time,</a>
<a name="ln1102">       no_bgp_graceful_restart_stalepath_time_val_cmd,</a>
<a name="ln1103">       &quot;no bgp graceful-restart stalepath-time &lt;1-3600&gt;&quot;,</a>
<a name="ln1104">       NO_STR</a>
<a name="ln1105">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1106">       &quot;Graceful restart capability parameters\n&quot;</a>
<a name="ln1107">       &quot;Set the max time to hold onto restarting peer's stale paths\n&quot;</a>
<a name="ln1108">       &quot;Delay value (seconds)\n&quot;)</a>
<a name="ln1109"> </a>
<a name="ln1110">ALIAS (no_bgp_graceful_restart_restart_time,</a>
<a name="ln1111">       no_bgp_graceful_restart_restart_time_val_cmd,</a>
<a name="ln1112">       &quot;no bgp graceful-restart restart-time &lt;1-3600&gt;&quot;,</a>
<a name="ln1113">       NO_STR</a>
<a name="ln1114">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1115">       &quot;Graceful restart capability parameters\n&quot;</a>
<a name="ln1116">       &quot;Set the time to wait to delete stale routes before a BGP open message is received\n&quot;</a>
<a name="ln1117">       &quot;Delay value (seconds)\n&quot;)</a>
<a name="ln1118"> </a>
<a name="ln1119">/* &quot;bgp fast-external-failover&quot; configuration. */</a>
<a name="ln1120">DEFUN (bgp_fast_external_failover,</a>
<a name="ln1121">       bgp_fast_external_failover_cmd,</a>
<a name="ln1122">       &quot;bgp fast-external-failover&quot;,</a>
<a name="ln1123">       BGP_STR</a>
<a name="ln1124">       &quot;Immediately reset session if a link to a directly connected external peer goes down\n&quot;)</a>
<a name="ln1125">{</a>
<a name="ln1126">  struct bgp *bgp;</a>
<a name="ln1127"> </a>
<a name="ln1128">  bgp = vty-&gt;index;</a>
<a name="ln1129">  bgp_flag_unset (bgp, BGP_FLAG_NO_FAST_EXT_FAILOVER);</a>
<a name="ln1130">  return CMD_SUCCESS;</a>
<a name="ln1131">}</a>
<a name="ln1132"> </a>
<a name="ln1133">DEFUN (no_bgp_fast_external_failover,</a>
<a name="ln1134">       no_bgp_fast_external_failover_cmd,</a>
<a name="ln1135">       &quot;no bgp fast-external-failover&quot;,</a>
<a name="ln1136">       NO_STR</a>
<a name="ln1137">       BGP_STR</a>
<a name="ln1138">       &quot;Immediately reset session if a link to a directly connected external peer goes down\n&quot;)</a>
<a name="ln1139">{</a>
<a name="ln1140">  struct bgp *bgp;</a>
<a name="ln1141"> </a>
<a name="ln1142">  bgp = vty-&gt;index;</a>
<a name="ln1143">  bgp_flag_set (bgp, BGP_FLAG_NO_FAST_EXT_FAILOVER);</a>
<a name="ln1144">  return CMD_SUCCESS;</a>
<a name="ln1145">}</a>
<a name="ln1146"> </a>
<a name="ln1147">/* &quot;bgp enforce-first-as&quot; configuration. */</a>
<a name="ln1148">DEFUN (bgp_enforce_first_as,</a>
<a name="ln1149">       bgp_enforce_first_as_cmd,</a>
<a name="ln1150">       &quot;bgp enforce-first-as&quot;,</a>
<a name="ln1151">       BGP_STR</a>
<a name="ln1152">       &quot;Enforce the first AS for EBGP routes\n&quot;)</a>
<a name="ln1153">{</a>
<a name="ln1154">  struct bgp *bgp;</a>
<a name="ln1155"> </a>
<a name="ln1156">  bgp = vty-&gt;index;</a>
<a name="ln1157">  bgp_flag_set (bgp, BGP_FLAG_ENFORCE_FIRST_AS);</a>
<a name="ln1158">  return CMD_SUCCESS;</a>
<a name="ln1159">}</a>
<a name="ln1160"> </a>
<a name="ln1161">DEFUN (no_bgp_enforce_first_as,</a>
<a name="ln1162">       no_bgp_enforce_first_as_cmd,</a>
<a name="ln1163">       &quot;no bgp enforce-first-as&quot;,</a>
<a name="ln1164">       NO_STR</a>
<a name="ln1165">       BGP_STR</a>
<a name="ln1166">       &quot;Enforce the first AS for EBGP routes\n&quot;)</a>
<a name="ln1167">{</a>
<a name="ln1168">  struct bgp *bgp;</a>
<a name="ln1169"> </a>
<a name="ln1170">  bgp = vty-&gt;index;</a>
<a name="ln1171">  bgp_flag_unset (bgp, BGP_FLAG_ENFORCE_FIRST_AS);</a>
<a name="ln1172">  return CMD_SUCCESS;</a>
<a name="ln1173">}</a>
<a name="ln1174"> </a>
<a name="ln1175">/* &quot;bgp bestpath compare-routerid&quot; configuration.  */</a>
<a name="ln1176">DEFUN (bgp_bestpath_compare_router_id,</a>
<a name="ln1177">       bgp_bestpath_compare_router_id_cmd,</a>
<a name="ln1178">       &quot;bgp bestpath compare-routerid&quot;,</a>
<a name="ln1179">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1180">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1181">       &quot;Compare router-id for identical EBGP paths\n&quot;)</a>
<a name="ln1182">{</a>
<a name="ln1183">  struct bgp *bgp;</a>
<a name="ln1184"> </a>
<a name="ln1185">  bgp = vty-&gt;index;</a>
<a name="ln1186">  bgp_flag_set (bgp, BGP_FLAG_COMPARE_ROUTER_ID);</a>
<a name="ln1187">  return CMD_SUCCESS;</a>
<a name="ln1188">}</a>
<a name="ln1189"> </a>
<a name="ln1190">DEFUN (no_bgp_bestpath_compare_router_id,</a>
<a name="ln1191">       no_bgp_bestpath_compare_router_id_cmd,</a>
<a name="ln1192">       &quot;no bgp bestpath compare-routerid&quot;,</a>
<a name="ln1193">       NO_STR</a>
<a name="ln1194">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1195">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1196">       &quot;Compare router-id for identical EBGP paths\n&quot;)</a>
<a name="ln1197">{</a>
<a name="ln1198">  struct bgp *bgp;</a>
<a name="ln1199"> </a>
<a name="ln1200">  bgp = vty-&gt;index;</a>
<a name="ln1201">  bgp_flag_unset (bgp, BGP_FLAG_COMPARE_ROUTER_ID);</a>
<a name="ln1202">  return CMD_SUCCESS;</a>
<a name="ln1203">}</a>
<a name="ln1204"> </a>
<a name="ln1205">/* &quot;bgp bestpath as-path ignore&quot; configuration.  */</a>
<a name="ln1206">DEFUN (bgp_bestpath_aspath_ignore,</a>
<a name="ln1207">       bgp_bestpath_aspath_ignore_cmd,</a>
<a name="ln1208">       &quot;bgp bestpath as-path ignore&quot;,</a>
<a name="ln1209">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1210">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1211">       &quot;AS-path attribute\n&quot;</a>
<a name="ln1212">       &quot;Ignore as-path length in selecting a route\n&quot;)</a>
<a name="ln1213">{</a>
<a name="ln1214">  struct bgp *bgp;</a>
<a name="ln1215"> </a>
<a name="ln1216">  bgp = vty-&gt;index;</a>
<a name="ln1217">  bgp_flag_set (bgp, BGP_FLAG_ASPATH_IGNORE);</a>
<a name="ln1218">  return CMD_SUCCESS;</a>
<a name="ln1219">}</a>
<a name="ln1220"> </a>
<a name="ln1221">DEFUN (no_bgp_bestpath_aspath_ignore,</a>
<a name="ln1222">       no_bgp_bestpath_aspath_ignore_cmd,</a>
<a name="ln1223">       &quot;no bgp bestpath as-path ignore&quot;,</a>
<a name="ln1224">       NO_STR</a>
<a name="ln1225">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1226">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1227">       &quot;AS-path attribute\n&quot;</a>
<a name="ln1228">       &quot;Ignore as-path length in selecting a route\n&quot;)</a>
<a name="ln1229">{</a>
<a name="ln1230">  struct bgp *bgp;</a>
<a name="ln1231"> </a>
<a name="ln1232">  bgp = vty-&gt;index;</a>
<a name="ln1233">  bgp_flag_unset (bgp, BGP_FLAG_ASPATH_IGNORE);</a>
<a name="ln1234">  return CMD_SUCCESS;</a>
<a name="ln1235">}</a>
<a name="ln1236"> </a>
<a name="ln1237">/* &quot;bgp bestpath as-path confed&quot; configuration.  */</a>
<a name="ln1238">DEFUN (bgp_bestpath_aspath_confed,</a>
<a name="ln1239">       bgp_bestpath_aspath_confed_cmd,</a>
<a name="ln1240">       &quot;bgp bestpath as-path confed&quot;,</a>
<a name="ln1241">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1242">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1243">       &quot;AS-path attribute\n&quot;</a>
<a name="ln1244">       &quot;Compare path lengths including confederation sets &amp; sequences in selecting a route\n&quot;)</a>
<a name="ln1245">{</a>
<a name="ln1246">  struct bgp *bgp;</a>
<a name="ln1247"> </a>
<a name="ln1248">  bgp = vty-&gt;index;</a>
<a name="ln1249">  bgp_flag_set (bgp, BGP_FLAG_ASPATH_CONFED);</a>
<a name="ln1250">  return CMD_SUCCESS;</a>
<a name="ln1251">}</a>
<a name="ln1252"> </a>
<a name="ln1253">DEFUN (no_bgp_bestpath_aspath_confed,</a>
<a name="ln1254">       no_bgp_bestpath_aspath_confed_cmd,</a>
<a name="ln1255">       &quot;no bgp bestpath as-path confed&quot;,</a>
<a name="ln1256">       NO_STR</a>
<a name="ln1257">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1258">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1259">       &quot;AS-path attribute\n&quot;</a>
<a name="ln1260">       &quot;Compare path lengths including confederation sets &amp; sequences in selecting a route\n&quot;)</a>
<a name="ln1261">{</a>
<a name="ln1262">  struct bgp *bgp;</a>
<a name="ln1263"> </a>
<a name="ln1264">  bgp = vty-&gt;index;</a>
<a name="ln1265">  bgp_flag_unset (bgp, BGP_FLAG_ASPATH_CONFED);</a>
<a name="ln1266">  return CMD_SUCCESS;</a>
<a name="ln1267">}</a>
<a name="ln1268"> </a>
<a name="ln1269">/* &quot;bgp bestpath as-path multipath-relax&quot; configuration.  */</a>
<a name="ln1270">DEFUN (bgp_bestpath_aspath_multipath_relax,</a>
<a name="ln1271">       bgp_bestpath_aspath_multipath_relax_cmd,</a>
<a name="ln1272">       &quot;bgp bestpath as-path multipath-relax&quot;,</a>
<a name="ln1273">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1274">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1275">       &quot;AS-path attribute\n&quot;</a>
<a name="ln1276">       &quot;Allow load sharing across routes that have different AS paths (but same length)\n&quot;)</a>
<a name="ln1277">{</a>
<a name="ln1278">  struct bgp *bgp;</a>
<a name="ln1279"> </a>
<a name="ln1280">  bgp = vty-&gt;index;</a>
<a name="ln1281">  bgp_flag_set (bgp, BGP_FLAG_ASPATH_MULTIPATH_RELAX);</a>
<a name="ln1282">  return CMD_SUCCESS;</a>
<a name="ln1283">}</a>
<a name="ln1284"> </a>
<a name="ln1285">DEFUN (no_bgp_bestpath_aspath_multipath_relax,</a>
<a name="ln1286">       no_bgp_bestpath_aspath_multipath_relax_cmd,</a>
<a name="ln1287">       &quot;no bgp bestpath as-path multipath-relax&quot;,</a>
<a name="ln1288">       NO_STR</a>
<a name="ln1289">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1290">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1291">       &quot;AS-path attribute\n&quot;</a>
<a name="ln1292">       &quot;Allow load sharing across routes that have different AS paths (but same length)\n&quot;)</a>
<a name="ln1293">{</a>
<a name="ln1294">  struct bgp *bgp;</a>
<a name="ln1295"> </a>
<a name="ln1296">  bgp = vty-&gt;index;</a>
<a name="ln1297">  bgp_flag_unset (bgp, BGP_FLAG_ASPATH_MULTIPATH_RELAX);</a>
<a name="ln1298">  return CMD_SUCCESS;</a>
<a name="ln1299">}</a>
<a name="ln1300"> </a>
<a name="ln1301">/* &quot;bgp log-neighbor-changes&quot; configuration.  */</a>
<a name="ln1302">DEFUN (bgp_log_neighbor_changes,</a>
<a name="ln1303">       bgp_log_neighbor_changes_cmd,</a>
<a name="ln1304">       &quot;bgp log-neighbor-changes&quot;,</a>
<a name="ln1305">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1306">       &quot;Log neighbor up/down and reset reason\n&quot;)</a>
<a name="ln1307">{</a>
<a name="ln1308">  struct bgp *bgp;</a>
<a name="ln1309"> </a>
<a name="ln1310">  bgp = vty-&gt;index;</a>
<a name="ln1311">  bgp_flag_set (bgp, BGP_FLAG_LOG_NEIGHBOR_CHANGES);</a>
<a name="ln1312">  return CMD_SUCCESS;</a>
<a name="ln1313">}</a>
<a name="ln1314"> </a>
<a name="ln1315">DEFUN (no_bgp_log_neighbor_changes,</a>
<a name="ln1316">       no_bgp_log_neighbor_changes_cmd,</a>
<a name="ln1317">       &quot;no bgp log-neighbor-changes&quot;,</a>
<a name="ln1318">       NO_STR</a>
<a name="ln1319">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1320">       &quot;Log neighbor up/down and reset reason\n&quot;)</a>
<a name="ln1321">{</a>
<a name="ln1322">  struct bgp *bgp;</a>
<a name="ln1323"> </a>
<a name="ln1324">  bgp = vty-&gt;index;</a>
<a name="ln1325">  bgp_flag_unset (bgp, BGP_FLAG_LOG_NEIGHBOR_CHANGES);</a>
<a name="ln1326">  return CMD_SUCCESS;</a>
<a name="ln1327">}</a>
<a name="ln1328"> </a>
<a name="ln1329">/* &quot;bgp bestpath med&quot; configuration. */</a>
<a name="ln1330">DEFUN (bgp_bestpath_med,</a>
<a name="ln1331">       bgp_bestpath_med_cmd,</a>
<a name="ln1332">       &quot;bgp bestpath med (confed|missing-as-worst)&quot;,</a>
<a name="ln1333">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1334">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1335">       &quot;MED attribute\n&quot;</a>
<a name="ln1336">       &quot;Compare MED among confederation paths\n&quot;</a>
<a name="ln1337">       &quot;Treat missing MED as the least preferred one\n&quot;)</a>
<a name="ln1338">{</a>
<a name="ln1339">  struct bgp *bgp;</a>
<a name="ln1340">  </a>
<a name="ln1341">  bgp = vty-&gt;index;</a>
<a name="ln1342"> </a>
<a name="ln1343">  if (strncmp (argv[0], &quot;confed&quot;, 1) == 0)</a>
<a name="ln1344">    bgp_flag_set (bgp, BGP_FLAG_MED_CONFED);</a>
<a name="ln1345">  else</a>
<a name="ln1346">    bgp_flag_set (bgp, BGP_FLAG_MED_MISSING_AS_WORST);</a>
<a name="ln1347"> </a>
<a name="ln1348">  return CMD_SUCCESS;</a>
<a name="ln1349">}</a>
<a name="ln1350"> </a>
<a name="ln1351">DEFUN (bgp_bestpath_med2,</a>
<a name="ln1352">       bgp_bestpath_med2_cmd,</a>
<a name="ln1353">       &quot;bgp bestpath med confed missing-as-worst&quot;,</a>
<a name="ln1354">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1355">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1356">       &quot;MED attribute\n&quot;</a>
<a name="ln1357">       &quot;Compare MED among confederation paths\n&quot;</a>
<a name="ln1358">       &quot;Treat missing MED as the least preferred one\n&quot;)</a>
<a name="ln1359">{</a>
<a name="ln1360">  struct bgp *bgp;</a>
<a name="ln1361">  </a>
<a name="ln1362">  bgp = vty-&gt;index;</a>
<a name="ln1363">  bgp_flag_set (bgp, BGP_FLAG_MED_CONFED);</a>
<a name="ln1364">  bgp_flag_set (bgp, BGP_FLAG_MED_MISSING_AS_WORST);</a>
<a name="ln1365">  return CMD_SUCCESS;</a>
<a name="ln1366">}</a>
<a name="ln1367"> </a>
<a name="ln1368">ALIAS (bgp_bestpath_med2,</a>
<a name="ln1369">       bgp_bestpath_med3_cmd,</a>
<a name="ln1370">       &quot;bgp bestpath med missing-as-worst confed&quot;,</a>
<a name="ln1371">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1372">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1373">       &quot;MED attribute\n&quot;</a>
<a name="ln1374">       &quot;Treat missing MED as the least preferred one\n&quot;</a>
<a name="ln1375">       &quot;Compare MED among confederation paths\n&quot;)</a>
<a name="ln1376"> </a>
<a name="ln1377">DEFUN (no_bgp_bestpath_med,</a>
<a name="ln1378">       no_bgp_bestpath_med_cmd,</a>
<a name="ln1379">       &quot;no bgp bestpath med (confed|missing-as-worst)&quot;,</a>
<a name="ln1380">       NO_STR</a>
<a name="ln1381">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1382">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1383">       &quot;MED attribute\n&quot;</a>
<a name="ln1384">       &quot;Compare MED among confederation paths\n&quot;</a>
<a name="ln1385">       &quot;Treat missing MED as the least preferred one\n&quot;)</a>
<a name="ln1386">{</a>
<a name="ln1387">  struct bgp *bgp;</a>
<a name="ln1388"> </a>
<a name="ln1389">  bgp = vty-&gt;index;</a>
<a name="ln1390">  </a>
<a name="ln1391">  if (strncmp (argv[0], &quot;confed&quot;, 1) == 0)</a>
<a name="ln1392">    bgp_flag_unset (bgp, BGP_FLAG_MED_CONFED);</a>
<a name="ln1393">  else</a>
<a name="ln1394">    bgp_flag_unset (bgp, BGP_FLAG_MED_MISSING_AS_WORST);</a>
<a name="ln1395"> </a>
<a name="ln1396">  return CMD_SUCCESS;</a>
<a name="ln1397">}</a>
<a name="ln1398"> </a>
<a name="ln1399">DEFUN (no_bgp_bestpath_med2,</a>
<a name="ln1400">       no_bgp_bestpath_med2_cmd,</a>
<a name="ln1401">       &quot;no bgp bestpath med confed missing-as-worst&quot;,</a>
<a name="ln1402">       NO_STR</a>
<a name="ln1403">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1404">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1405">       &quot;MED attribute\n&quot;</a>
<a name="ln1406">       &quot;Compare MED among confederation paths\n&quot;</a>
<a name="ln1407">       &quot;Treat missing MED as the least preferred one\n&quot;)</a>
<a name="ln1408">{</a>
<a name="ln1409">  struct bgp *bgp;</a>
<a name="ln1410">  </a>
<a name="ln1411">  bgp = vty-&gt;index;</a>
<a name="ln1412">  bgp_flag_unset (bgp, BGP_FLAG_MED_CONFED);</a>
<a name="ln1413">  bgp_flag_unset (bgp, BGP_FLAG_MED_MISSING_AS_WORST);</a>
<a name="ln1414">  return CMD_SUCCESS;</a>
<a name="ln1415">}</a>
<a name="ln1416"> </a>
<a name="ln1417">ALIAS (no_bgp_bestpath_med2,</a>
<a name="ln1418">       no_bgp_bestpath_med3_cmd,</a>
<a name="ln1419">       &quot;no bgp bestpath med missing-as-worst confed&quot;,</a>
<a name="ln1420">       NO_STR</a>
<a name="ln1421">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1422">       &quot;Change the default bestpath selection\n&quot;</a>
<a name="ln1423">       &quot;MED attribute\n&quot;</a>
<a name="ln1424">       &quot;Treat missing MED as the least preferred one\n&quot;</a>
<a name="ln1425">       &quot;Compare MED among confederation paths\n&quot;)</a>
<a name="ln1426"> </a>
<a name="ln1427">/* &quot;no bgp default ipv4-unicast&quot;. */</a>
<a name="ln1428">DEFUN (no_bgp_default_ipv4_unicast,</a>
<a name="ln1429">       no_bgp_default_ipv4_unicast_cmd,</a>
<a name="ln1430">       &quot;no bgp default ipv4-unicast&quot;,</a>
<a name="ln1431">       NO_STR</a>
<a name="ln1432">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1433">       &quot;Configure BGP defaults\n&quot;</a>
<a name="ln1434">       &quot;Activate ipv4-unicast for a peer by default\n&quot;)</a>
<a name="ln1435">{</a>
<a name="ln1436">  struct bgp *bgp;</a>
<a name="ln1437"> </a>
<a name="ln1438">  bgp = vty-&gt;index;</a>
<a name="ln1439">  bgp_flag_set (bgp, BGP_FLAG_NO_DEFAULT_IPV4);</a>
<a name="ln1440">  return CMD_SUCCESS;</a>
<a name="ln1441">}</a>
<a name="ln1442"> </a>
<a name="ln1443">DEFUN (bgp_default_ipv4_unicast,</a>
<a name="ln1444">       bgp_default_ipv4_unicast_cmd,</a>
<a name="ln1445">       &quot;bgp default ipv4-unicast&quot;,</a>
<a name="ln1446">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1447">       &quot;Configure BGP defaults\n&quot;</a>
<a name="ln1448">       &quot;Activate ipv4-unicast for a peer by default\n&quot;)</a>
<a name="ln1449">{</a>
<a name="ln1450">  struct bgp *bgp;</a>
<a name="ln1451"> </a>
<a name="ln1452">  bgp = vty-&gt;index;</a>
<a name="ln1453">  bgp_flag_unset (bgp, BGP_FLAG_NO_DEFAULT_IPV4);</a>
<a name="ln1454">  return CMD_SUCCESS;</a>
<a name="ln1455">}</a>
<a name="ln1456"> </a>
<a name="ln1457">/* &quot;bgp import-check&quot; configuration.  */</a>
<a name="ln1458">DEFUN (bgp_network_import_check,</a>
<a name="ln1459">       bgp_network_import_check_cmd,</a>
<a name="ln1460">       &quot;bgp network import-check&quot;,</a>
<a name="ln1461">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1462">       &quot;BGP network command\n&quot;</a>
<a name="ln1463">       &quot;Check BGP network route exists in IGP\n&quot;)</a>
<a name="ln1464">{</a>
<a name="ln1465">  struct bgp *bgp;</a>
<a name="ln1466"> </a>
<a name="ln1467">  bgp = vty-&gt;index;</a>
<a name="ln1468">  bgp_flag_set (bgp, BGP_FLAG_IMPORT_CHECK);</a>
<a name="ln1469">  return CMD_SUCCESS;</a>
<a name="ln1470">}</a>
<a name="ln1471"> </a>
<a name="ln1472">DEFUN (no_bgp_network_import_check,</a>
<a name="ln1473">       no_bgp_network_import_check_cmd,</a>
<a name="ln1474">       &quot;no bgp network import-check&quot;,</a>
<a name="ln1475">       NO_STR</a>
<a name="ln1476">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1477">       &quot;BGP network command\n&quot;</a>
<a name="ln1478">       &quot;Check BGP network route exists in IGP\n&quot;)</a>
<a name="ln1479">{</a>
<a name="ln1480">  struct bgp *bgp;</a>
<a name="ln1481"> </a>
<a name="ln1482">  bgp = vty-&gt;index;</a>
<a name="ln1483">  bgp_flag_unset (bgp, BGP_FLAG_IMPORT_CHECK);</a>
<a name="ln1484">  return CMD_SUCCESS;</a>
<a name="ln1485">}</a>
<a name="ln1486"> </a>
<a name="ln1487">DEFUN (bgp_default_local_preference,</a>
<a name="ln1488">       bgp_default_local_preference_cmd,</a>
<a name="ln1489">       &quot;bgp default local-preference &lt;0-4294967295&gt;&quot;,</a>
<a name="ln1490">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1491">       &quot;Configure BGP defaults\n&quot;</a>
<a name="ln1492">       &quot;local preference (higher=more preferred)\n&quot;</a>
<a name="ln1493">       &quot;Configure default local preference value\n&quot;)</a>
<a name="ln1494">{</a>
<a name="ln1495">  struct bgp *bgp;</a>
<a name="ln1496">  u_int32_t local_pref;</a>
<a name="ln1497"> </a>
<a name="ln1498">  bgp = vty-&gt;index;</a>
<a name="ln1499"> </a>
<a name="ln1500">  VTY_GET_INTEGER (&quot;local preference&quot;, local_pref, argv[0]);</a>
<a name="ln1501"> </a>
<a name="ln1502">  bgp_default_local_preference_set (bgp, local_pref);</a>
<a name="ln1503"> </a>
<a name="ln1504">  return CMD_SUCCESS;</a>
<a name="ln1505">}</a>
<a name="ln1506"> </a>
<a name="ln1507">DEFUN (no_bgp_default_local_preference,</a>
<a name="ln1508">       no_bgp_default_local_preference_cmd,</a>
<a name="ln1509">       &quot;no bgp default local-preference&quot;,</a>
<a name="ln1510">       NO_STR</a>
<a name="ln1511">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1512">       &quot;Configure BGP defaults\n&quot;</a>
<a name="ln1513">       &quot;local preference (higher=more preferred)\n&quot;)</a>
<a name="ln1514">{</a>
<a name="ln1515">  struct bgp *bgp;</a>
<a name="ln1516"> </a>
<a name="ln1517">  bgp = vty-&gt;index;</a>
<a name="ln1518">  bgp_default_local_preference_unset (bgp);</a>
<a name="ln1519">  return CMD_SUCCESS;</a>
<a name="ln1520">}</a>
<a name="ln1521"> </a>
<a name="ln1522">ALIAS (no_bgp_default_local_preference,</a>
<a name="ln1523">       no_bgp_default_local_preference_val_cmd,</a>
<a name="ln1524">       &quot;no bgp default local-preference &lt;0-4294967295&gt;&quot;,</a>
<a name="ln1525">       NO_STR</a>
<a name="ln1526">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1527">       &quot;Configure BGP defaults\n&quot;</a>
<a name="ln1528">       &quot;local preference (higher=more preferred)\n&quot;</a>
<a name="ln1529">       &quot;Configure default local preference value\n&quot;)</a>
<a name="ln1530"> </a>
<a name="ln1531">static void</a>
<a name="ln1532">peer_announce_routes_if_rmap_out (struct bgp *bgp)</a>
<a name="ln1533">{</a>
<a name="ln1534">  struct peer *peer;</a>
<a name="ln1535">  struct listnode *node, *nnode;</a>
<a name="ln1536">  struct bgp_filter *filter;</a>
<a name="ln1537">  afi_t afi;</a>
<a name="ln1538">  safi_t safi;</a>
<a name="ln1539"> </a>
<a name="ln1540">  /* Reannounce all routes to appropriate neighbors */</a>
<a name="ln1541">  for (ALL_LIST_ELEMENTS (bgp-&gt;peer, node, nnode, peer))</a>
<a name="ln1542">    {</a>
<a name="ln1543">      for (afi = AFI_IP; afi &lt; AFI_MAX; afi++)</a>
<a name="ln1544">	for (safi = SAFI_UNICAST; safi &lt; SAFI_MAX; safi++)</a>
<a name="ln1545">	  {</a>
<a name="ln1546">	    if (CHECK_FLAG(peer-&gt;af_flags[afi][safi], PEER_FLAG_REFLECTOR_CLIENT))</a>
<a name="ln1547">	      {</a>
<a name="ln1548">		/* check if there's an out route-map on this client */</a>
<a name="ln1549">		filter = &amp;peer-&gt;filter[afi][safi];</a>
<a name="ln1550">		if (ROUTE_MAP_OUT_NAME(filter))</a>
<a name="ln1551">		  {</a>
<a name="ln1552">		    if (BGP_DEBUG(update, UPDATE_OUT))</a>
<a name="ln1553">		      zlog_debug(&quot;%s: Announcing routes again for peer %s&quot;</a>
<a name="ln1554">				 &quot;(afi=%d, safi=%d&quot;, __func__, peer-&gt;host, afi,</a>
<a name="ln1555">				 safi);</a>
<a name="ln1556"> </a>
<a name="ln1557">		    bgp_announce_route_all(peer);</a>
<a name="ln1558">		  }</a>
<a name="ln1559">	      }</a>
<a name="ln1560">	}</a>
<a name="ln1561">    }</a>
<a name="ln1562">}</a>
<a name="ln1563"> </a>
<a name="ln1564">DEFUN (bgp_rr_allow_outbound_policy,</a>
<a name="ln1565">       bgp_rr_allow_outbound_policy_cmd,</a>
<a name="ln1566">       &quot;bgp route-reflector allow-outbound-policy&quot;,</a>
<a name="ln1567">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1568">       &quot;Allow modifications made by out route-map\n&quot;</a>
<a name="ln1569">       &quot;on ibgp neighbors\n&quot;)</a>
<a name="ln1570">{</a>
<a name="ln1571">  struct bgp *bgp;</a>
<a name="ln1572"> </a>
<a name="ln1573">  bgp = vty-&gt;index;</a>
<a name="ln1574"> </a>
<a name="ln1575">  if (!bgp_flag_check(bgp, BGP_FLAG_RR_ALLOW_OUTBOUND_POLICY))</a>
<a name="ln1576">    {</a>
<a name="ln1577">      bgp_flag_set(bgp, BGP_FLAG_RR_ALLOW_OUTBOUND_POLICY);</a>
<a name="ln1578">      peer_announce_routes_if_rmap_out(bgp);</a>
<a name="ln1579">    }</a>
<a name="ln1580"> </a>
<a name="ln1581">  return CMD_SUCCESS;</a>
<a name="ln1582">}</a>
<a name="ln1583"> </a>
<a name="ln1584">DEFUN (no_bgp_rr_allow_outbound_policy,</a>
<a name="ln1585">       no_bgp_rr_allow_outbound_policy_cmd,</a>
<a name="ln1586">       &quot;no bgp route-reflector allow-outbound-policy&quot;,</a>
<a name="ln1587">       NO_STR</a>
<a name="ln1588">       &quot;BGP specific commands\n&quot;</a>
<a name="ln1589">       &quot;Allow modifications made by out route-map\n&quot;</a>
<a name="ln1590">       &quot;on ibgp neighbors\n&quot;)</a>
<a name="ln1591">{</a>
<a name="ln1592">  struct bgp *bgp;</a>
<a name="ln1593"> </a>
<a name="ln1594">  bgp = vty-&gt;index;</a>
<a name="ln1595"> </a>
<a name="ln1596">  if (bgp_flag_check(bgp, BGP_FLAG_RR_ALLOW_OUTBOUND_POLICY))</a>
<a name="ln1597">    {</a>
<a name="ln1598">      bgp_flag_unset(bgp, BGP_FLAG_RR_ALLOW_OUTBOUND_POLICY);</a>
<a name="ln1599">      peer_announce_routes_if_rmap_out(bgp);</a>
<a name="ln1600">    }</a>
<a name="ln1601"> </a>
<a name="ln1602">  return CMD_SUCCESS;</a>
<a name="ln1603">}</a>
<a name="ln1604"> </a>
<a name="ln1605">static int</a>
<a name="ln1606">peer_remote_as_vty (struct vty *vty, const char *peer_str, </a>
<a name="ln1607">                    const char *as_str, afi_t afi, safi_t safi)</a>
<a name="ln1608">{</a>
<a name="ln1609">  int ret;</a>
<a name="ln1610">  struct bgp *bgp;</a>
<a name="ln1611">  as_t as;</a>
<a name="ln1612">  union sockunion su;</a>
<a name="ln1613"> </a>
<a name="ln1614">  bgp = vty-&gt;index;</a>
<a name="ln1615"> </a>
<a name="ln1616">  /* Get AS number.  */</a>
<a name="ln1617">  VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, as_str, 1, BGP_AS4_MAX);</a>
<a name="ln1618"> </a>
<a name="ln1619">  /* If peer is peer group, call proper function.  */</a>
<a name="ln1620">  ret = str2sockunion (peer_str, &amp;su);</a>
<a name="ln1621">  if (ret &lt; 0)</a>
<a name="ln1622">    {</a>
<a name="ln1623">      ret = peer_group_remote_as (bgp, peer_str, &amp;as);</a>
<a name="ln1624">      if (ret &lt; 0)</a>
<a name="ln1625">	{</a>
<a name="ln1626">	  vty_out (vty, &quot;%% Create the peer-group first%s&quot;, VTY_NEWLINE);</a>
<a name="ln1627">	  return CMD_WARNING;</a>
<a name="ln1628">	}</a>
<a name="ln1629">      return CMD_SUCCESS;</a>
<a name="ln1630">    }</a>
<a name="ln1631"> </a>
<a name="ln1632">  if (peer_address_self_check (&amp;su))</a>
<a name="ln1633">    {</a>
<a name="ln1634">      vty_out (vty, &quot;%% Can not configure the local system as neighbor%s&quot;,</a>
<a name="ln1635">	       VTY_NEWLINE);</a>
<a name="ln1636">      return CMD_WARNING;</a>
<a name="ln1637">    }</a>
<a name="ln1638"> </a>
<a name="ln1639">  ret = peer_remote_as (bgp, &amp;su, &amp;as, afi, safi);</a>
<a name="ln1640"> </a>
<a name="ln1641">  /* This peer belongs to peer group.  */</a>
<a name="ln1642">  switch (ret)</a>
<a name="ln1643">    {</a>
<a name="ln1644">    case BGP_ERR_PEER_GROUP_MEMBER:</a>
<a name="ln1645">      vty_out (vty, &quot;%% Peer-group AS %u. Cannot configure remote-as for member%s&quot;, as, VTY_NEWLINE);</a>
<a name="ln1646">      return CMD_WARNING;</a>
<a name="ln1647">    case BGP_ERR_PEER_GROUP_PEER_TYPE_DIFFERENT:</a>
<a name="ln1648">      vty_out (vty, &quot;%% The AS# can not be changed from %u to %s, peer-group members must be all internal or all external%s&quot;, as, as_str, VTY_NEWLINE);</a>
<a name="ln1649">      return CMD_WARNING;</a>
<a name="ln1650">    }</a>
<a name="ln1651">  return bgp_vty_return (vty, ret);</a>
<a name="ln1652">}</a>
<a name="ln1653"> </a>
<a name="ln1654">DEFUN (neighbor_remote_as,</a>
<a name="ln1655">       neighbor_remote_as_cmd,</a>
<a name="ln1656">       NEIGHBOR_CMD2 &quot;remote-as &quot; CMD_AS_RANGE,</a>
<a name="ln1657">       NEIGHBOR_STR</a>
<a name="ln1658">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1659">       &quot;Specify a BGP neighbor\n&quot;</a>
<a name="ln1660">       AS_STR)</a>
<a name="ln1661">{</a>
<a name="ln1662">  return peer_remote_as_vty (vty, argv[0], argv[1], AFI_IP, SAFI_UNICAST);</a>
<a name="ln1663">}</a>
<a name="ln1664"> </a>
<a name="ln1665">DEFUN (neighbor_peer_group,</a>
<a name="ln1666">       neighbor_peer_group_cmd,</a>
<a name="ln1667">       &quot;neighbor WORD peer-group&quot;,</a>
<a name="ln1668">       NEIGHBOR_STR</a>
<a name="ln1669">       &quot;Neighbor tag\n&quot;</a>
<a name="ln1670">       &quot;Configure peer-group\n&quot;)</a>
<a name="ln1671">{</a>
<a name="ln1672">  struct bgp *bgp;</a>
<a name="ln1673">  struct peer_group *group;</a>
<a name="ln1674"> </a>
<a name="ln1675">  bgp = vty-&gt;index;</a>
<a name="ln1676"> </a>
<a name="ln1677">  group = peer_group_get (bgp, argv[0]);</a>
<a name="ln1678">  if (! group)</a>
<a name="ln1679">    return CMD_WARNING;</a>
<a name="ln1680"> </a>
<a name="ln1681">  return CMD_SUCCESS;</a>
<a name="ln1682">}</a>
<a name="ln1683"> </a>
<a name="ln1684">DEFUN (no_neighbor,</a>
<a name="ln1685">       no_neighbor_cmd,</a>
<a name="ln1686">       NO_NEIGHBOR_CMD2,</a>
<a name="ln1687">       NO_STR</a>
<a name="ln1688">       NEIGHBOR_STR</a>
<a name="ln1689">       NEIGHBOR_ADDR_STR2)</a>
<a name="ln1690">{</a>
<a name="ln1691">  int ret;</a>
<a name="ln1692">  union sockunion su;</a>
<a name="ln1693">  struct peer_group *group;</a>
<a name="ln1694">  struct peer *peer;</a>
<a name="ln1695"> </a>
<a name="ln1696">  ret = str2sockunion (argv[0], &amp;su);</a>
<a name="ln1697">  if (ret &lt; 0)</a>
<a name="ln1698">    {</a>
<a name="ln1699">      group = peer_group_lookup (vty-&gt;index, argv[0]);</a>
<a name="ln1700">      if (group)</a>
<a name="ln1701">	peer_group_delete (group);</a>
<a name="ln1702">      else</a>
<a name="ln1703">	{</a>
<a name="ln1704">	  vty_out (vty, &quot;%% Create the peer-group first%s&quot;, VTY_NEWLINE);</a>
<a name="ln1705">	  return CMD_WARNING;</a>
<a name="ln1706">	}</a>
<a name="ln1707">    }</a>
<a name="ln1708">  else</a>
<a name="ln1709">    {</a>
<a name="ln1710">      peer = peer_lookup (vty-&gt;index, &amp;su);</a>
<a name="ln1711">      if (peer)</a>
<a name="ln1712">        peer_delete (peer);</a>
<a name="ln1713">    }</a>
<a name="ln1714"> </a>
<a name="ln1715">  return CMD_SUCCESS;</a>
<a name="ln1716">}</a>
<a name="ln1717"> </a>
<a name="ln1718">ALIAS (no_neighbor,</a>
<a name="ln1719">       no_neighbor_remote_as_cmd,</a>
<a name="ln1720">       NO_NEIGHBOR_CMD &quot;remote-as &quot; CMD_AS_RANGE,</a>
<a name="ln1721">       NO_STR</a>
<a name="ln1722">       NEIGHBOR_STR</a>
<a name="ln1723">       NEIGHBOR_ADDR_STR</a>
<a name="ln1724">       &quot;Specify a BGP neighbor\n&quot;</a>
<a name="ln1725">       AS_STR)</a>
<a name="ln1726"> </a>
<a name="ln1727">DEFUN (no_neighbor_peer_group,</a>
<a name="ln1728">       no_neighbor_peer_group_cmd,</a>
<a name="ln1729">       &quot;no neighbor WORD peer-group&quot;,</a>
<a name="ln1730">       NO_STR</a>
<a name="ln1731">       NEIGHBOR_STR</a>
<a name="ln1732">       &quot;Neighbor tag\n&quot;</a>
<a name="ln1733">       &quot;Configure peer-group\n&quot;)</a>
<a name="ln1734">{</a>
<a name="ln1735">  struct peer_group *group;</a>
<a name="ln1736"> </a>
<a name="ln1737">  group = peer_group_lookup (vty-&gt;index, argv[0]);</a>
<a name="ln1738">  if (group)</a>
<a name="ln1739">    peer_group_delete (group);</a>
<a name="ln1740">  else</a>
<a name="ln1741">    {</a>
<a name="ln1742">      vty_out (vty, &quot;%% Create the peer-group first%s&quot;, VTY_NEWLINE);</a>
<a name="ln1743">      return CMD_WARNING;</a>
<a name="ln1744">    }</a>
<a name="ln1745">  return CMD_SUCCESS;</a>
<a name="ln1746">}</a>
<a name="ln1747"> </a>
<a name="ln1748">DEFUN (no_neighbor_peer_group_remote_as,</a>
<a name="ln1749">       no_neighbor_peer_group_remote_as_cmd,</a>
<a name="ln1750">       &quot;no neighbor WORD remote-as &quot; CMD_AS_RANGE,</a>
<a name="ln1751">       NO_STR</a>
<a name="ln1752">       NEIGHBOR_STR</a>
<a name="ln1753">       &quot;Neighbor tag\n&quot;</a>
<a name="ln1754">       &quot;Specify a BGP neighbor\n&quot;</a>
<a name="ln1755">       AS_STR)</a>
<a name="ln1756">{</a>
<a name="ln1757">  struct peer_group *group;</a>
<a name="ln1758"> </a>
<a name="ln1759">  group = peer_group_lookup (vty-&gt;index, argv[0]);</a>
<a name="ln1760">  if (group)</a>
<a name="ln1761">    peer_group_remote_as_delete (group);</a>
<a name="ln1762">  else</a>
<a name="ln1763">    {</a>
<a name="ln1764">      vty_out (vty, &quot;%% Create the peer-group first%s&quot;, VTY_NEWLINE);</a>
<a name="ln1765">      return CMD_WARNING;</a>
<a name="ln1766">    }</a>
<a name="ln1767">  return CMD_SUCCESS;</a>
<a name="ln1768">}</a>
<a name="ln1769"> </a>
<a name="ln1770">DEFUN (neighbor_local_as,</a>
<a name="ln1771">       neighbor_local_as_cmd,</a>
<a name="ln1772">       NEIGHBOR_CMD2 &quot;local-as &quot; CMD_AS_RANGE,</a>
<a name="ln1773">       NEIGHBOR_STR</a>
<a name="ln1774">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1775">       &quot;Specify a local-as number\n&quot;</a>
<a name="ln1776">       &quot;AS number used as local AS\n&quot;)</a>
<a name="ln1777">{</a>
<a name="ln1778">  struct peer *peer;</a>
<a name="ln1779">  int ret;</a>
<a name="ln1780"> </a>
<a name="ln1781">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1782">  if (! peer)</a>
<a name="ln1783">    return CMD_WARNING;</a>
<a name="ln1784"> </a>
<a name="ln1785">  ret = peer_local_as_set (peer, atoi (argv[1]), 0, 0);</a>
<a name="ln1786">  return bgp_vty_return (vty, ret);</a>
<a name="ln1787">}</a>
<a name="ln1788"> </a>
<a name="ln1789">DEFUN (neighbor_local_as_no_prepend,</a>
<a name="ln1790">       neighbor_local_as_no_prepend_cmd,</a>
<a name="ln1791">       NEIGHBOR_CMD2 &quot;local-as &quot; CMD_AS_RANGE &quot; no-prepend&quot;,</a>
<a name="ln1792">       NEIGHBOR_STR</a>
<a name="ln1793">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1794">       &quot;Specify a local-as number\n&quot;</a>
<a name="ln1795">       &quot;AS number used as local AS\n&quot;</a>
<a name="ln1796">       &quot;Do not prepend local-as to updates from ebgp peers\n&quot;)</a>
<a name="ln1797">{</a>
<a name="ln1798">  struct peer *peer;</a>
<a name="ln1799">  int ret;</a>
<a name="ln1800"> </a>
<a name="ln1801">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1802">  if (! peer)</a>
<a name="ln1803">    return CMD_WARNING;</a>
<a name="ln1804"> </a>
<a name="ln1805">  ret = peer_local_as_set (peer, atoi (argv[1]), 1, 0);</a>
<a name="ln1806">  return bgp_vty_return (vty, ret);</a>
<a name="ln1807">}</a>
<a name="ln1808"> </a>
<a name="ln1809">DEFUN (neighbor_local_as_no_prepend_replace_as,</a>
<a name="ln1810">       neighbor_local_as_no_prepend_replace_as_cmd,</a>
<a name="ln1811">       NEIGHBOR_CMD2 &quot;local-as &quot; CMD_AS_RANGE &quot; no-prepend replace-as&quot;,</a>
<a name="ln1812">       NEIGHBOR_STR</a>
<a name="ln1813">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1814">       &quot;Specify a local-as number\n&quot;</a>
<a name="ln1815">       &quot;AS number used as local AS\n&quot;</a>
<a name="ln1816">       &quot;Do not prepend local-as to updates from ebgp peers\n&quot;</a>
<a name="ln1817">       &quot;Do not prepend local-as to updates from ibgp peers\n&quot;)</a>
<a name="ln1818">{</a>
<a name="ln1819">  struct peer *peer;</a>
<a name="ln1820">  int ret;</a>
<a name="ln1821"> </a>
<a name="ln1822">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1823">  if (! peer)</a>
<a name="ln1824">    return CMD_WARNING;</a>
<a name="ln1825"> </a>
<a name="ln1826">  ret = peer_local_as_set (peer, atoi (argv[1]), 1, 1);</a>
<a name="ln1827">  return bgp_vty_return (vty, ret);</a>
<a name="ln1828">}</a>
<a name="ln1829"> </a>
<a name="ln1830"> </a>
<a name="ln1831">DEFUN (no_neighbor_local_as,</a>
<a name="ln1832">       no_neighbor_local_as_cmd,</a>
<a name="ln1833">       NO_NEIGHBOR_CMD2 &quot;local-as&quot;,</a>
<a name="ln1834">       NO_STR</a>
<a name="ln1835">       NEIGHBOR_STR</a>
<a name="ln1836">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1837">       &quot;Specify a local-as number\n&quot;)</a>
<a name="ln1838">{</a>
<a name="ln1839">  struct peer *peer;</a>
<a name="ln1840">  int ret;</a>
<a name="ln1841"> </a>
<a name="ln1842">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1843">  if (! peer)</a>
<a name="ln1844">    return CMD_WARNING;</a>
<a name="ln1845"> </a>
<a name="ln1846">  ret = peer_local_as_unset (peer);</a>
<a name="ln1847">  return bgp_vty_return (vty, ret);</a>
<a name="ln1848">}</a>
<a name="ln1849"> </a>
<a name="ln1850">ALIAS (no_neighbor_local_as,</a>
<a name="ln1851">       no_neighbor_local_as_val_cmd,</a>
<a name="ln1852">       NO_NEIGHBOR_CMD2 &quot;local-as &quot; CMD_AS_RANGE,</a>
<a name="ln1853">       NO_STR</a>
<a name="ln1854">       NEIGHBOR_STR</a>
<a name="ln1855">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1856">       &quot;Specify a local-as number\n&quot;</a>
<a name="ln1857">       &quot;AS number used as local AS\n&quot;)</a>
<a name="ln1858"> </a>
<a name="ln1859">ALIAS (no_neighbor_local_as,</a>
<a name="ln1860">       no_neighbor_local_as_val2_cmd,</a>
<a name="ln1861">       NO_NEIGHBOR_CMD2 &quot;local-as &quot; CMD_AS_RANGE &quot; no-prepend&quot;,</a>
<a name="ln1862">       NO_STR</a>
<a name="ln1863">       NEIGHBOR_STR</a>
<a name="ln1864">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1865">       &quot;Specify a local-as number\n&quot;</a>
<a name="ln1866">       &quot;AS number used as local AS\n&quot;</a>
<a name="ln1867">       &quot;Do not prepend local-as to updates from ebgp peers\n&quot;)</a>
<a name="ln1868"> </a>
<a name="ln1869">ALIAS (no_neighbor_local_as,</a>
<a name="ln1870">       no_neighbor_local_as_val3_cmd,</a>
<a name="ln1871">       NO_NEIGHBOR_CMD2 &quot;local-as &quot; CMD_AS_RANGE &quot; no-prepend replace-as&quot;,</a>
<a name="ln1872">       NO_STR</a>
<a name="ln1873">       NEIGHBOR_STR</a>
<a name="ln1874">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1875">       &quot;Specify a local-as number\n&quot;</a>
<a name="ln1876">       &quot;AS number used as local AS\n&quot;</a>
<a name="ln1877">       &quot;Do not prepend local-as to updates from ebgp peers\n&quot;</a>
<a name="ln1878">       &quot;Do not prepend local-as to updates from ibgp peers\n&quot;)</a>
<a name="ln1879"> </a>
<a name="ln1880">DEFUN (neighbor_password,</a>
<a name="ln1881">       neighbor_password_cmd,</a>
<a name="ln1882">       NEIGHBOR_CMD2 &quot;password LINE&quot;,</a>
<a name="ln1883">       NEIGHBOR_STR</a>
<a name="ln1884">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1885">       &quot;Set a password\n&quot;</a>
<a name="ln1886">       &quot;The password\n&quot;)</a>
<a name="ln1887">{</a>
<a name="ln1888">  struct peer *peer;</a>
<a name="ln1889">  int ret;</a>
<a name="ln1890"> </a>
<a name="ln1891">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1892">  if (! peer)</a>
<a name="ln1893">    return CMD_WARNING;</a>
<a name="ln1894"> </a>
<a name="ln1895">  ret = peer_password_set (peer, argv[1]);</a>
<a name="ln1896">  return bgp_vty_return (vty, ret);</a>
<a name="ln1897">}</a>
<a name="ln1898"> </a>
<a name="ln1899">DEFUN (no_neighbor_password,</a>
<a name="ln1900">       no_neighbor_password_cmd,</a>
<a name="ln1901">       NO_NEIGHBOR_CMD2 &quot;password&quot;,</a>
<a name="ln1902">       NO_STR</a>
<a name="ln1903">       NEIGHBOR_STR</a>
<a name="ln1904">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1905">       &quot;Set a password\n&quot;)</a>
<a name="ln1906">{</a>
<a name="ln1907">  struct peer *peer;</a>
<a name="ln1908">  int ret;</a>
<a name="ln1909"> </a>
<a name="ln1910">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1911">  if (! peer)</a>
<a name="ln1912">    return CMD_WARNING;</a>
<a name="ln1913"> </a>
<a name="ln1914">  ret = peer_password_unset (peer);</a>
<a name="ln1915">  return bgp_vty_return (vty, ret);</a>
<a name="ln1916">}</a>
<a name="ln1917"> </a>
<a name="ln1918">DEFUN (neighbor_activate,</a>
<a name="ln1919">       neighbor_activate_cmd,</a>
<a name="ln1920">       NEIGHBOR_CMD2 &quot;activate&quot;,</a>
<a name="ln1921">       NEIGHBOR_STR</a>
<a name="ln1922">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1923">       &quot;Enable the Address Family for this Neighbor\n&quot;)</a>
<a name="ln1924">{</a>
<a name="ln1925">  struct peer *peer;</a>
<a name="ln1926"> </a>
<a name="ln1927">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1928">  if (! peer)</a>
<a name="ln1929">    return CMD_WARNING;</a>
<a name="ln1930"> </a>
<a name="ln1931">  peer_activate (peer, bgp_node_afi (vty), bgp_node_safi (vty));</a>
<a name="ln1932"> </a>
<a name="ln1933">  return CMD_SUCCESS;</a>
<a name="ln1934">}</a>
<a name="ln1935"> </a>
<a name="ln1936">DEFUN (no_neighbor_activate,</a>
<a name="ln1937">       no_neighbor_activate_cmd,</a>
<a name="ln1938">       NO_NEIGHBOR_CMD2 &quot;activate&quot;,</a>
<a name="ln1939">       NO_STR</a>
<a name="ln1940">       NEIGHBOR_STR</a>
<a name="ln1941">       NEIGHBOR_ADDR_STR2</a>
<a name="ln1942">       &quot;Enable the Address Family for this Neighbor\n&quot;)</a>
<a name="ln1943">{</a>
<a name="ln1944">  int ret;</a>
<a name="ln1945">  struct peer *peer;</a>
<a name="ln1946"> </a>
<a name="ln1947">  /* Lookup peer. */</a>
<a name="ln1948">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln1949">  if (! peer)</a>
<a name="ln1950">    return CMD_WARNING;</a>
<a name="ln1951"> </a>
<a name="ln1952">  ret = peer_deactivate (peer, bgp_node_afi (vty), bgp_node_safi (vty));</a>
<a name="ln1953"> </a>
<a name="ln1954">  return bgp_vty_return (vty, ret);</a>
<a name="ln1955">}</a>
<a name="ln1956"> </a>
<a name="ln1957">DEFUN (neighbor_set_peer_group,</a>
<a name="ln1958">       neighbor_set_peer_group_cmd,</a>
<a name="ln1959">       NEIGHBOR_CMD &quot;peer-group WORD&quot;,</a>
<a name="ln1960">       NEIGHBOR_STR</a>
<a name="ln1961">       NEIGHBOR_ADDR_STR</a>
<a name="ln1962">       &quot;Member of the peer-group\n&quot;</a>
<a name="ln1963">       &quot;peer-group name\n&quot;)</a>
<a name="ln1964">{</a>
<a name="ln1965">  int ret;</a>
<a name="ln1966">  as_t as;</a>
<a name="ln1967">  union sockunion su;</a>
<a name="ln1968">  struct bgp *bgp;</a>
<a name="ln1969">  struct peer_group *group;</a>
<a name="ln1970"> </a>
<a name="ln1971">  bgp = vty-&gt;index;</a>
<a name="ln1972"> </a>
<a name="ln1973">  ret = str2sockunion (argv[0], &amp;su);</a>
<a name="ln1974">  if (ret &lt; 0)</a>
<a name="ln1975">    {</a>
<a name="ln1976">      vty_out (vty, &quot;%% Malformed address: %s%s&quot;, argv[0], VTY_NEWLINE);</a>
<a name="ln1977">      return CMD_WARNING;</a>
<a name="ln1978">    }</a>
<a name="ln1979"> </a>
<a name="ln1980">  group = peer_group_lookup (bgp, argv[1]);</a>
<a name="ln1981">  if (! group)</a>
<a name="ln1982">    {</a>
<a name="ln1983">      vty_out (vty, &quot;%% Configure the peer-group first%s&quot;, VTY_NEWLINE);</a>
<a name="ln1984">      return CMD_WARNING;</a>
<a name="ln1985">    }</a>
<a name="ln1986"> </a>
<a name="ln1987">  if (peer_address_self_check (&amp;su))</a>
<a name="ln1988">    {</a>
<a name="ln1989">      vty_out (vty, &quot;%% Can not configure the local system as neighbor%s&quot;,</a>
<a name="ln1990">	       VTY_NEWLINE);</a>
<a name="ln1991">      return CMD_WARNING;</a>
<a name="ln1992">    }</a>
<a name="ln1993"> </a>
<a name="ln1994">  ret = peer_group_bind (bgp, &amp;su, group, bgp_node_afi (vty), </a>
<a name="ln1995">			 bgp_node_safi (vty), &amp;as);</a>
<a name="ln1996"> </a>
<a name="ln1997">  if (ret == BGP_ERR_PEER_GROUP_PEER_TYPE_DIFFERENT)</a>
<a name="ln1998">    {</a>
<a name="ln1999">      vty_out (vty, &quot;%% Peer with AS %u cannot be in this peer-group, members must be all internal or all external%s&quot;, as, VTY_NEWLINE);</a>
<a name="ln2000">      return CMD_WARNING;</a>
<a name="ln2001">    }</a>
<a name="ln2002"> </a>
<a name="ln2003">  return bgp_vty_return (vty, ret);</a>
<a name="ln2004">}</a>
<a name="ln2005"> </a>
<a name="ln2006">DEFUN (no_neighbor_set_peer_group,</a>
<a name="ln2007">       no_neighbor_set_peer_group_cmd,</a>
<a name="ln2008">       NO_NEIGHBOR_CMD &quot;peer-group WORD&quot;,</a>
<a name="ln2009">       NO_STR</a>
<a name="ln2010">       NEIGHBOR_STR</a>
<a name="ln2011">       NEIGHBOR_ADDR_STR</a>
<a name="ln2012">       &quot;Member of the peer-group\n&quot;</a>
<a name="ln2013">       &quot;peer-group name\n&quot;)</a>
<a name="ln2014">{</a>
<a name="ln2015">  int ret;</a>
<a name="ln2016">  struct bgp *bgp;</a>
<a name="ln2017">  struct peer *peer;</a>
<a name="ln2018">  struct peer_group *group;</a>
<a name="ln2019"> </a>
<a name="ln2020">  bgp = vty-&gt;index;</a>
<a name="ln2021"> </a>
<a name="ln2022">  peer = peer_lookup_vty (vty, argv[0]);</a>
<a name="ln2023">  if (! peer)</a>
<a name="ln2024">    return CMD_WARNING;</a>
<a name="ln2025"> </a>
<a name="ln2026">  group = peer_group_lookup (bgp, argv[1]);</a>
<a name="ln2027">  if (! group)</a>
<a name="ln2028">    {</a>
<a name="ln2029">      vty_out (vty, &quot;%% Configure the peer-group first%s&quot;, VTY_NEWLINE);</a>
<a name="ln2030">      return CMD_WARNING;</a>
<a name="ln2031">    }</a>
<a name="ln2032"> </a>
<a name="ln2033">  ret = peer_group_unbind (bgp, peer, group, bgp_node_afi (vty),</a>
<a name="ln2034">			   bgp_node_safi (vty));</a>
<a name="ln2035"> </a>
<a name="ln2036">  return bgp_vty_return (vty, ret);</a>
<a name="ln2037">}</a>
<a name="ln2038"> </a>
<a name="ln2039">static int</a>
<a name="ln2040">peer_flag_modify_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln2041">                      u_int16_t flag, int set)</a>
<a name="ln2042">{</a>
<a name="ln2043">  int ret;</a>
<a name="ln2044">  struct peer *peer;</a>
<a name="ln2045"> </a>
<a name="ln2046">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln2047">  if (! peer)</a>
<a name="ln2048">    return CMD_WARNING;</a>
<a name="ln2049"> </a>
<a name="ln2050">  if (set)</a>
<a name="ln2051">    ret = peer_flag_set (peer, flag);</a>
<a name="ln2052">  else</a>
<a name="ln2053">    ret = peer_flag_unset (peer, flag);</a>
<a name="ln2054"> </a>
<a name="ln2055">  return bgp_vty_return (vty, ret);</a>
<a name="ln2056">}</a>
<a name="ln2057"> </a>
<a name="ln2058">static int</a>
<a name="ln2059">peer_flag_set_vty (struct vty *vty, const char *ip_str, u_int16_t flag)</a>
<a name="ln2060">{</a>
<a name="ln2061">  return peer_flag_modify_vty (vty, ip_str, flag, 1);</a>
<a name="ln2062">}</a>
<a name="ln2063"> </a>
<a name="ln2064">static int</a>
<a name="ln2065">peer_flag_unset_vty (struct vty *vty, const char *ip_str, u_int16_t flag)</a>
<a name="ln2066">{</a>
<a name="ln2067">  return peer_flag_modify_vty (vty, ip_str, flag, 0);</a>
<a name="ln2068">}</a>
<a name="ln2069"> </a>
<a name="ln2070">/* neighbor passive. */</a>
<a name="ln2071">DEFUN (neighbor_passive,</a>
<a name="ln2072">       neighbor_passive_cmd,</a>
<a name="ln2073">       NEIGHBOR_CMD2 &quot;passive&quot;,</a>
<a name="ln2074">       NEIGHBOR_STR</a>
<a name="ln2075">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2076">       &quot;Don't send open messages to this neighbor\n&quot;)</a>
<a name="ln2077">{</a>
<a name="ln2078">  return peer_flag_set_vty (vty, argv[0], PEER_FLAG_PASSIVE);</a>
<a name="ln2079">}</a>
<a name="ln2080"> </a>
<a name="ln2081">DEFUN (no_neighbor_passive,</a>
<a name="ln2082">       no_neighbor_passive_cmd,</a>
<a name="ln2083">       NO_NEIGHBOR_CMD2 &quot;passive&quot;,</a>
<a name="ln2084">       NO_STR</a>
<a name="ln2085">       NEIGHBOR_STR</a>
<a name="ln2086">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2087">       &quot;Don't send open messages to this neighbor\n&quot;)</a>
<a name="ln2088">{</a>
<a name="ln2089">  return peer_flag_unset_vty (vty, argv[0], PEER_FLAG_PASSIVE);</a>
<a name="ln2090">}</a>
<a name="ln2091"> </a>
<a name="ln2092">/* neighbor shutdown. */</a>
<a name="ln2093">DEFUN (neighbor_shutdown,</a>
<a name="ln2094">       neighbor_shutdown_cmd,</a>
<a name="ln2095">       NEIGHBOR_CMD2 &quot;shutdown&quot;,</a>
<a name="ln2096">       NEIGHBOR_STR</a>
<a name="ln2097">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2098">       &quot;Administratively shut down this neighbor\n&quot;)</a>
<a name="ln2099">{</a>
<a name="ln2100">  return peer_flag_set_vty (vty, argv[0], PEER_FLAG_SHUTDOWN);</a>
<a name="ln2101">}</a>
<a name="ln2102"> </a>
<a name="ln2103">DEFUN (no_neighbor_shutdown,</a>
<a name="ln2104">       no_neighbor_shutdown_cmd,</a>
<a name="ln2105">       NO_NEIGHBOR_CMD2 &quot;shutdown&quot;,</a>
<a name="ln2106">       NO_STR</a>
<a name="ln2107">       NEIGHBOR_STR</a>
<a name="ln2108">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2109">       &quot;Administratively shut down this neighbor\n&quot;)</a>
<a name="ln2110">{</a>
<a name="ln2111">  return peer_flag_unset_vty (vty, argv[0], PEER_FLAG_SHUTDOWN);</a>
<a name="ln2112">}</a>
<a name="ln2113"> </a>
<a name="ln2114">/* Deprecated neighbor capability route-refresh. */</a>
<a name="ln2115">DEFUN_DEPRECATED (neighbor_capability_route_refresh,</a>
<a name="ln2116">		  neighbor_capability_route_refresh_cmd,</a>
<a name="ln2117">		  NEIGHBOR_CMD2 &quot;capability route-refresh&quot;,</a>
<a name="ln2118">		  NEIGHBOR_STR</a>
<a name="ln2119">		  NEIGHBOR_ADDR_STR2</a>
<a name="ln2120">		  &quot;Advertise capability to the peer\n&quot;</a>
<a name="ln2121">		  &quot;Advertise route-refresh capability to this neighbor\n&quot;)</a>
<a name="ln2122">{</a>
<a name="ln2123">  return CMD_SUCCESS;</a>
<a name="ln2124">}</a>
<a name="ln2125"> </a>
<a name="ln2126">DEFUN_DEPRECATED (no_neighbor_capability_route_refresh,</a>
<a name="ln2127">		  no_neighbor_capability_route_refresh_cmd,</a>
<a name="ln2128">		  NO_NEIGHBOR_CMD2 &quot;capability route-refresh&quot;,</a>
<a name="ln2129">		  NO_STR</a>
<a name="ln2130">		  NEIGHBOR_STR</a>
<a name="ln2131">		  NEIGHBOR_ADDR_STR2</a>
<a name="ln2132">		  &quot;Advertise capability to the peer\n&quot;</a>
<a name="ln2133">		  &quot;Advertise route-refresh capability to this neighbor\n&quot;)</a>
<a name="ln2134">{</a>
<a name="ln2135">  return CMD_SUCCESS;</a>
<a name="ln2136">}</a>
<a name="ln2137"> </a>
<a name="ln2138">/* neighbor capability dynamic. */</a>
<a name="ln2139">DEFUN (neighbor_capability_dynamic,</a>
<a name="ln2140">       neighbor_capability_dynamic_cmd,</a>
<a name="ln2141">       NEIGHBOR_CMD2 &quot;capability dynamic&quot;,</a>
<a name="ln2142">       NEIGHBOR_STR</a>
<a name="ln2143">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2144">       &quot;Advertise capability to the peer\n&quot;</a>
<a name="ln2145">       &quot;Advertise dynamic capability to this neighbor\n&quot;)</a>
<a name="ln2146">{</a>
<a name="ln2147">  return peer_flag_set_vty (vty, argv[0], PEER_FLAG_DYNAMIC_CAPABILITY);</a>
<a name="ln2148">}</a>
<a name="ln2149"> </a>
<a name="ln2150">DEFUN (no_neighbor_capability_dynamic,</a>
<a name="ln2151">       no_neighbor_capability_dynamic_cmd,</a>
<a name="ln2152">       NO_NEIGHBOR_CMD2 &quot;capability dynamic&quot;,</a>
<a name="ln2153">       NO_STR</a>
<a name="ln2154">       NEIGHBOR_STR</a>
<a name="ln2155">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2156">       &quot;Advertise capability to the peer\n&quot;</a>
<a name="ln2157">       &quot;Advertise dynamic capability to this neighbor\n&quot;)</a>
<a name="ln2158">{</a>
<a name="ln2159">  return peer_flag_unset_vty (vty, argv[0], PEER_FLAG_DYNAMIC_CAPABILITY);</a>
<a name="ln2160">}</a>
<a name="ln2161"> </a>
<a name="ln2162">/* neighbor dont-capability-negotiate */</a>
<a name="ln2163">DEFUN (neighbor_dont_capability_negotiate,</a>
<a name="ln2164">       neighbor_dont_capability_negotiate_cmd,</a>
<a name="ln2165">       NEIGHBOR_CMD2 &quot;dont-capability-negotiate&quot;,</a>
<a name="ln2166">       NEIGHBOR_STR</a>
<a name="ln2167">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2168">       &quot;Do not perform capability negotiation\n&quot;)</a>
<a name="ln2169">{</a>
<a name="ln2170">  return peer_flag_set_vty (vty, argv[0], PEER_FLAG_DONT_CAPABILITY);</a>
<a name="ln2171">}</a>
<a name="ln2172"> </a>
<a name="ln2173">DEFUN (no_neighbor_dont_capability_negotiate,</a>
<a name="ln2174">       no_neighbor_dont_capability_negotiate_cmd,</a>
<a name="ln2175">       NO_NEIGHBOR_CMD2 &quot;dont-capability-negotiate&quot;,</a>
<a name="ln2176">       NO_STR</a>
<a name="ln2177">       NEIGHBOR_STR</a>
<a name="ln2178">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2179">       &quot;Do not perform capability negotiation\n&quot;)</a>
<a name="ln2180">{</a>
<a name="ln2181">  return peer_flag_unset_vty (vty, argv[0], PEER_FLAG_DONT_CAPABILITY);</a>
<a name="ln2182">}</a>
<a name="ln2183"> </a>
<a name="ln2184">static int</a>
<a name="ln2185">peer_af_flag_modify_vty (struct vty *vty, const char *peer_str, afi_t afi,</a>
<a name="ln2186">			 safi_t safi, u_int32_t flag, int set)</a>
<a name="ln2187">{</a>
<a name="ln2188">  int ret;</a>
<a name="ln2189">  struct peer *peer;</a>
<a name="ln2190"> </a>
<a name="ln2191">  peer = peer_and_group_lookup_vty (vty, peer_str);</a>
<a name="ln2192">  if (! peer)</a>
<a name="ln2193">    return CMD_WARNING;</a>
<a name="ln2194"> </a>
<a name="ln2195">  if (set)</a>
<a name="ln2196">    ret = peer_af_flag_set (peer, afi, safi, flag);</a>
<a name="ln2197">  else</a>
<a name="ln2198">    ret = peer_af_flag_unset (peer, afi, safi, flag);</a>
<a name="ln2199"> </a>
<a name="ln2200">  return bgp_vty_return (vty, ret);</a>
<a name="ln2201">}</a>
<a name="ln2202"> </a>
<a name="ln2203">static int</a>
<a name="ln2204">peer_af_flag_set_vty (struct vty *vty, const char *peer_str, afi_t afi,</a>
<a name="ln2205">		      safi_t safi, u_int32_t flag)</a>
<a name="ln2206">{</a>
<a name="ln2207">  return peer_af_flag_modify_vty (vty, peer_str, afi, safi, flag, 1);</a>
<a name="ln2208">}</a>
<a name="ln2209"> </a>
<a name="ln2210">static int</a>
<a name="ln2211">peer_af_flag_unset_vty (struct vty *vty, const char *peer_str, afi_t afi,</a>
<a name="ln2212">			safi_t safi, u_int32_t flag)</a>
<a name="ln2213">{</a>
<a name="ln2214">  return peer_af_flag_modify_vty (vty, peer_str, afi, safi, flag, 0);</a>
<a name="ln2215">}</a>
<a name="ln2216"> </a>
<a name="ln2217">/* neighbor capability orf prefix-list. */</a>
<a name="ln2218">DEFUN (neighbor_capability_orf_prefix,</a>
<a name="ln2219">       neighbor_capability_orf_prefix_cmd,</a>
<a name="ln2220">       NEIGHBOR_CMD2 &quot;capability orf prefix-list (both|send|receive)&quot;,</a>
<a name="ln2221">       NEIGHBOR_STR</a>
<a name="ln2222">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2223">       &quot;Advertise capability to the peer\n&quot;</a>
<a name="ln2224">       &quot;Advertise ORF capability to the peer\n&quot;</a>
<a name="ln2225">       &quot;Advertise prefixlist ORF capability to this neighbor\n&quot;</a>
<a name="ln2226">       &quot;Capability to SEND and RECEIVE the ORF to/from this neighbor\n&quot;</a>
<a name="ln2227">       &quot;Capability to RECEIVE the ORF from this neighbor\n&quot;</a>
<a name="ln2228">       &quot;Capability to SEND the ORF to this neighbor\n&quot;)</a>
<a name="ln2229">{</a>
<a name="ln2230">  u_int16_t flag = 0;</a>
<a name="ln2231"> </a>
<a name="ln2232">  if (strncmp (argv[1], &quot;s&quot;, 1) == 0)</a>
<a name="ln2233">    flag = PEER_FLAG_ORF_PREFIX_SM;</a>
<a name="ln2234">  else if (strncmp (argv[1], &quot;r&quot;, 1) == 0)</a>
<a name="ln2235">    flag = PEER_FLAG_ORF_PREFIX_RM;</a>
<a name="ln2236">  else if (strncmp (argv[1], &quot;b&quot;, 1) == 0)</a>
<a name="ln2237">    flag = PEER_FLAG_ORF_PREFIX_SM|PEER_FLAG_ORF_PREFIX_RM;</a>
<a name="ln2238">  else</a>
<a name="ln2239">    return CMD_WARNING;</a>
<a name="ln2240"> </a>
<a name="ln2241">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2242">			       bgp_node_safi (vty), flag);</a>
<a name="ln2243">}</a>
<a name="ln2244"> </a>
<a name="ln2245">DEFUN (no_neighbor_capability_orf_prefix,</a>
<a name="ln2246">       no_neighbor_capability_orf_prefix_cmd,</a>
<a name="ln2247">       NO_NEIGHBOR_CMD2 &quot;capability orf prefix-list (both|send|receive)&quot;,</a>
<a name="ln2248">       NO_STR</a>
<a name="ln2249">       NEIGHBOR_STR</a>
<a name="ln2250">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2251">       &quot;Advertise capability to the peer\n&quot;</a>
<a name="ln2252">       &quot;Advertise ORF capability to the peer\n&quot;</a>
<a name="ln2253">       &quot;Advertise prefixlist ORF capability to this neighbor\n&quot;</a>
<a name="ln2254">       &quot;Capability to SEND and RECEIVE the ORF to/from this neighbor\n&quot;</a>
<a name="ln2255">       &quot;Capability to RECEIVE the ORF from this neighbor\n&quot;</a>
<a name="ln2256">       &quot;Capability to SEND the ORF to this neighbor\n&quot;)</a>
<a name="ln2257">{</a>
<a name="ln2258">  u_int16_t flag = 0;</a>
<a name="ln2259"> </a>
<a name="ln2260">  if (strncmp (argv[1], &quot;s&quot;, 1) == 0)</a>
<a name="ln2261">    flag = PEER_FLAG_ORF_PREFIX_SM;</a>
<a name="ln2262">  else if (strncmp (argv[1], &quot;r&quot;, 1) == 0)</a>
<a name="ln2263">    flag = PEER_FLAG_ORF_PREFIX_RM;</a>
<a name="ln2264">  else if (strncmp (argv[1], &quot;b&quot;, 1) == 0)</a>
<a name="ln2265">    flag = PEER_FLAG_ORF_PREFIX_SM|PEER_FLAG_ORF_PREFIX_RM;</a>
<a name="ln2266">  else</a>
<a name="ln2267">    return CMD_WARNING;</a>
<a name="ln2268"> </a>
<a name="ln2269">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2270">				 bgp_node_safi (vty), flag);</a>
<a name="ln2271">}</a>
<a name="ln2272"> </a>
<a name="ln2273">/* neighbor next-hop-self. */</a>
<a name="ln2274">DEFUN (neighbor_nexthop_self,</a>
<a name="ln2275">       neighbor_nexthop_self_cmd,</a>
<a name="ln2276">       NEIGHBOR_CMD2 &quot;next-hop-self {all}&quot;,</a>
<a name="ln2277">       NEIGHBOR_STR</a>
<a name="ln2278">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2279">       &quot;Disable the next hop calculation for this neighbor\n&quot;</a>
<a name="ln2280">       &quot;Apply also to ibgp-learned routes when acting as a route reflector\n&quot;)</a>
<a name="ln2281">{</a>
<a name="ln2282">  u_int32_t flags = PEER_FLAG_NEXTHOP_SELF, unset = 0;</a>
<a name="ln2283">  int rc;</a>
<a name="ln2284"> </a>
<a name="ln2285">  /* Check if &quot;all&quot; is specified */</a>
<a name="ln2286">  if (argv[1] != NULL)</a>
<a name="ln2287">    flags |= PEER_FLAG_NEXTHOP_SELF_ALL;</a>
<a name="ln2288">  else</a>
<a name="ln2289">    unset |= PEER_FLAG_NEXTHOP_SELF_ALL;</a>
<a name="ln2290"> </a>
<a name="ln2291">  rc = peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2292">			     bgp_node_safi (vty), flags);</a>
<a name="ln2293">  if ( rc == CMD_SUCCESS &amp;&amp; unset )</a>
<a name="ln2294">    rc = peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2295">				 bgp_node_safi (vty), unset);</a>
<a name="ln2296">  return rc;</a>
<a name="ln2297">}</a>
<a name="ln2298"> </a>
<a name="ln2299">DEFUN (no_neighbor_nexthop_self,</a>
<a name="ln2300">       no_neighbor_nexthop_self_cmd,</a>
<a name="ln2301">       NO_NEIGHBOR_CMD2 &quot;next-hop-self {all}&quot;,</a>
<a name="ln2302">       NO_STR</a>
<a name="ln2303">       NEIGHBOR_STR</a>
<a name="ln2304">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2305">       &quot;Disable the next hop calculation for this neighbor\n&quot;</a>
<a name="ln2306">       &quot;Apply also to ibgp-learned routes when acting as a route reflector\n&quot;)</a>
<a name="ln2307">{</a>
<a name="ln2308">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2309">				 bgp_node_safi (vty),</a>
<a name="ln2310">				 PEER_FLAG_NEXTHOP_SELF|PEER_FLAG_NEXTHOP_SELF_ALL);</a>
<a name="ln2311">}</a>
<a name="ln2312"> </a>
<a name="ln2313">/* neighbor remove-private-AS. */</a>
<a name="ln2314">DEFUN (neighbor_remove_private_as,</a>
<a name="ln2315">       neighbor_remove_private_as_cmd,</a>
<a name="ln2316">       NEIGHBOR_CMD2 &quot;remove-private-AS&quot;,</a>
<a name="ln2317">       NEIGHBOR_STR</a>
<a name="ln2318">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2319">       &quot;Remove private AS number from outbound updates\n&quot;)</a>
<a name="ln2320">{</a>
<a name="ln2321">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2322">			       bgp_node_safi (vty),</a>
<a name="ln2323">			       PEER_FLAG_REMOVE_PRIVATE_AS);</a>
<a name="ln2324">}</a>
<a name="ln2325"> </a>
<a name="ln2326">DEFUN (no_neighbor_remove_private_as,</a>
<a name="ln2327">       no_neighbor_remove_private_as_cmd,</a>
<a name="ln2328">       NO_NEIGHBOR_CMD2 &quot;remove-private-AS&quot;,</a>
<a name="ln2329">       NO_STR</a>
<a name="ln2330">       NEIGHBOR_STR</a>
<a name="ln2331">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2332">       &quot;Remove private AS number from outbound updates\n&quot;)</a>
<a name="ln2333">{</a>
<a name="ln2334">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2335">				 bgp_node_safi (vty),</a>
<a name="ln2336">				 PEER_FLAG_REMOVE_PRIVATE_AS);</a>
<a name="ln2337">}</a>
<a name="ln2338"> </a>
<a name="ln2339">/* neighbor send-community. */</a>
<a name="ln2340">DEFUN (neighbor_send_community,</a>
<a name="ln2341">       neighbor_send_community_cmd,</a>
<a name="ln2342">       NEIGHBOR_CMD2 &quot;send-community&quot;,</a>
<a name="ln2343">       NEIGHBOR_STR</a>
<a name="ln2344">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2345">       &quot;Send Community attribute to this neighbor\n&quot;)</a>
<a name="ln2346">{</a>
<a name="ln2347">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2348">			       bgp_node_safi (vty),</a>
<a name="ln2349">			       PEER_FLAG_SEND_COMMUNITY);</a>
<a name="ln2350">}</a>
<a name="ln2351"> </a>
<a name="ln2352">DEFUN (no_neighbor_send_community,</a>
<a name="ln2353">       no_neighbor_send_community_cmd,</a>
<a name="ln2354">       NO_NEIGHBOR_CMD2 &quot;send-community&quot;,</a>
<a name="ln2355">       NO_STR</a>
<a name="ln2356">       NEIGHBOR_STR</a>
<a name="ln2357">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2358">       &quot;Send Community attribute to this neighbor\n&quot;)</a>
<a name="ln2359">{</a>
<a name="ln2360">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2361">				 bgp_node_safi (vty),</a>
<a name="ln2362">				 PEER_FLAG_SEND_COMMUNITY);</a>
<a name="ln2363">}</a>
<a name="ln2364"> </a>
<a name="ln2365">/* neighbor send-community extended. */</a>
<a name="ln2366">DEFUN (neighbor_send_community_type,</a>
<a name="ln2367">       neighbor_send_community_type_cmd,</a>
<a name="ln2368">       NEIGHBOR_CMD2 &quot;send-community (both|all|extended|standard|large)&quot;,</a>
<a name="ln2369">       NEIGHBOR_STR</a>
<a name="ln2370">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2371">       &quot;Send Community attribute to this neighbor\n&quot;</a>
<a name="ln2372">       &quot;Send Standard, Large and Extended Community attributes\n&quot;</a>
<a name="ln2373">       &quot;Send Standard, Large and Extended Community attributes\n&quot;</a>
<a name="ln2374">       &quot;Send Extended Community attributes\n&quot;</a>
<a name="ln2375">       &quot;Send Standard Community attributes\n&quot;</a>
<a name="ln2376">       &quot;Send Large Community attributes\n&quot;)</a>
<a name="ln2377">{</a>
<a name="ln2378">  if (strncmp (argv[1], &quot;s&quot;, 1) == 0)</a>
<a name="ln2379">    return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2380">				 bgp_node_safi (vty),</a>
<a name="ln2381">				 PEER_FLAG_SEND_COMMUNITY);</a>
<a name="ln2382">  if (strncmp (argv[1], &quot;e&quot;, 1) == 0)</a>
<a name="ln2383">    return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2384">				 bgp_node_safi (vty),</a>
<a name="ln2385">				 PEER_FLAG_SEND_EXT_COMMUNITY);</a>
<a name="ln2386">  if (strncmp (argv[1], &quot;l&quot;, 1) == 0)</a>
<a name="ln2387">    return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2388">				 bgp_node_safi (vty),</a>
<a name="ln2389">				 PEER_FLAG_SEND_LARGE_COMMUNITY);</a>
<a name="ln2390"> </a>
<a name="ln2391">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2392">			       bgp_node_safi (vty),</a>
<a name="ln2393">			       (PEER_FLAG_SEND_COMMUNITY|</a>
<a name="ln2394">				PEER_FLAG_SEND_EXT_COMMUNITY|</a>
<a name="ln2395">				PEER_FLAG_SEND_LARGE_COMMUNITY));</a>
<a name="ln2396">}</a>
<a name="ln2397"> </a>
<a name="ln2398">DEFUN (no_neighbor_send_community_type,</a>
<a name="ln2399">       no_neighbor_send_community_type_cmd,</a>
<a name="ln2400">       NO_NEIGHBOR_CMD2 &quot;send-community (both|all|extended|standard|large)&quot;,</a>
<a name="ln2401">       NO_STR</a>
<a name="ln2402">       NEIGHBOR_STR</a>
<a name="ln2403">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2404">       &quot;Send Community attribute to this neighbor\n&quot;</a>
<a name="ln2405">       &quot;Send Standard, Large and Extended Community attributes\n&quot;</a>
<a name="ln2406">       &quot;Send Standard, Large and Extended Community attributes\n&quot;</a>
<a name="ln2407">       &quot;Send Extended Community attributes\n&quot;</a>
<a name="ln2408">       &quot;Send Standard Community attributes\n&quot;</a>
<a name="ln2409">       &quot;Send Large Community attributes\n&quot;)</a>
<a name="ln2410">{</a>
<a name="ln2411">  if (strncmp (argv[1], &quot;s&quot;, 1) == 0)</a>
<a name="ln2412">    return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2413">				   bgp_node_safi (vty),</a>
<a name="ln2414">				   PEER_FLAG_SEND_COMMUNITY);</a>
<a name="ln2415">  if (strncmp (argv[1], &quot;e&quot;, 1) == 0)</a>
<a name="ln2416">    return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2417">				   bgp_node_safi (vty),</a>
<a name="ln2418">				   PEER_FLAG_SEND_EXT_COMMUNITY);</a>
<a name="ln2419">  if (strncmp (argv[1], &quot;l&quot;, 1) == 0)</a>
<a name="ln2420">    return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2421">				   bgp_node_safi (vty),</a>
<a name="ln2422">				   PEER_FLAG_SEND_LARGE_COMMUNITY);</a>
<a name="ln2423"> </a>
<a name="ln2424">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2425">				 bgp_node_safi (vty),</a>
<a name="ln2426">				 (PEER_FLAG_SEND_COMMUNITY |</a>
<a name="ln2427">				  PEER_FLAG_SEND_EXT_COMMUNITY|</a>
<a name="ln2428">				  PEER_FLAG_SEND_LARGE_COMMUNITY));</a>
<a name="ln2429">}</a>
<a name="ln2430"> </a>
<a name="ln2431">/* neighbor soft-reconfig. */</a>
<a name="ln2432">DEFUN (neighbor_soft_reconfiguration,</a>
<a name="ln2433">       neighbor_soft_reconfiguration_cmd,</a>
<a name="ln2434">       NEIGHBOR_CMD2 &quot;soft-reconfiguration inbound&quot;,</a>
<a name="ln2435">       NEIGHBOR_STR</a>
<a name="ln2436">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2437">       &quot;Per neighbor soft reconfiguration\n&quot;</a>
<a name="ln2438">       &quot;Allow inbound soft reconfiguration for this neighbor\n&quot;)</a>
<a name="ln2439">{</a>
<a name="ln2440">  return peer_af_flag_set_vty (vty, argv[0],</a>
<a name="ln2441">			       bgp_node_afi (vty), bgp_node_safi (vty),</a>
<a name="ln2442">			       PEER_FLAG_SOFT_RECONFIG);</a>
<a name="ln2443">}</a>
<a name="ln2444"> </a>
<a name="ln2445">DEFUN (no_neighbor_soft_reconfiguration,</a>
<a name="ln2446">       no_neighbor_soft_reconfiguration_cmd,</a>
<a name="ln2447">       NO_NEIGHBOR_CMD2 &quot;soft-reconfiguration inbound&quot;,</a>
<a name="ln2448">       NO_STR</a>
<a name="ln2449">       NEIGHBOR_STR</a>
<a name="ln2450">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2451">       &quot;Per neighbor soft reconfiguration\n&quot;</a>
<a name="ln2452">       &quot;Allow inbound soft reconfiguration for this neighbor\n&quot;)</a>
<a name="ln2453">{</a>
<a name="ln2454">  return peer_af_flag_unset_vty (vty, argv[0],</a>
<a name="ln2455">				 bgp_node_afi (vty), bgp_node_safi (vty),</a>
<a name="ln2456">				 PEER_FLAG_SOFT_RECONFIG);</a>
<a name="ln2457">}</a>
<a name="ln2458"> </a>
<a name="ln2459">DEFUN (neighbor_route_reflector_client,</a>
<a name="ln2460">       neighbor_route_reflector_client_cmd,</a>
<a name="ln2461">       NEIGHBOR_CMD2 &quot;route-reflector-client&quot;,</a>
<a name="ln2462">       NEIGHBOR_STR</a>
<a name="ln2463">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2464">       &quot;Configure a neighbor as Route Reflector client\n&quot;)</a>
<a name="ln2465">{</a>
<a name="ln2466">  struct peer *peer;</a>
<a name="ln2467"> </a>
<a name="ln2468"> </a>
<a name="ln2469">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln2470">  if (! peer)</a>
<a name="ln2471">    return CMD_WARNING;</a>
<a name="ln2472"> </a>
<a name="ln2473">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2474">			       bgp_node_safi (vty),</a>
<a name="ln2475">			       PEER_FLAG_REFLECTOR_CLIENT);</a>
<a name="ln2476">}</a>
<a name="ln2477"> </a>
<a name="ln2478">DEFUN (no_neighbor_route_reflector_client,</a>
<a name="ln2479">       no_neighbor_route_reflector_client_cmd,</a>
<a name="ln2480">       NO_NEIGHBOR_CMD2 &quot;route-reflector-client&quot;,</a>
<a name="ln2481">       NO_STR</a>
<a name="ln2482">       NEIGHBOR_STR</a>
<a name="ln2483">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2484">       &quot;Configure a neighbor as Route Reflector client\n&quot;)</a>
<a name="ln2485">{</a>
<a name="ln2486">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2487">				 bgp_node_safi (vty),</a>
<a name="ln2488">				 PEER_FLAG_REFLECTOR_CLIENT);</a>
<a name="ln2489">}</a>
<a name="ln2490"> </a>
<a name="ln2491">static int</a>
<a name="ln2492">peer_rsclient_set_vty (struct vty *vty, const char *peer_str, </a>
<a name="ln2493">                       int afi, int safi)</a>
<a name="ln2494">{</a>
<a name="ln2495">  int ret;</a>
<a name="ln2496">  struct bgp *bgp;</a>
<a name="ln2497">  struct peer *peer;</a>
<a name="ln2498">  struct peer_group *group;</a>
<a name="ln2499">  struct listnode *node, *nnode;</a>
<a name="ln2500">  struct bgp_filter *pfilter;</a>
<a name="ln2501">  struct bgp_filter *gfilter;</a>
<a name="ln2502">  int locked_and_added = 0;</a>
<a name="ln2503"> </a>
<a name="ln2504">  bgp = vty-&gt;index;</a>
<a name="ln2505"> </a>
<a name="ln2506">  peer = peer_and_group_lookup_vty (vty, peer_str);</a>
<a name="ln2507">  if ( ! peer )</a>
<a name="ln2508">    return CMD_WARNING;</a>
<a name="ln2509"> </a>
<a name="ln2510">  /* If it is already a RS-Client, don't do anything. */</a>
<a name="ln2511">  if ( CHECK_FLAG (peer-&gt;af_flags[afi][safi], PEER_FLAG_RSERVER_CLIENT) )</a>
<a name="ln2512">    return CMD_SUCCESS;</a>
<a name="ln2513"> </a>
<a name="ln2514">  if ( ! peer_rsclient_active (peer) )</a>
<a name="ln2515">    {</a>
<a name="ln2516">      peer = peer_lock (peer); /* rsclient peer list reference */</a>
<a name="ln2517">      listnode_add_sort (bgp-&gt;rsclient, peer);</a>
<a name="ln2518">      locked_and_added = 1;</a>
<a name="ln2519">    }</a>
<a name="ln2520"> </a>
<a name="ln2521">  ret = peer_af_flag_set (peer, afi, safi, PEER_FLAG_RSERVER_CLIENT);</a>
<a name="ln2522">  if (ret &lt; 0)</a>
<a name="ln2523">    {</a>
<a name="ln2524">      if (locked_and_added)</a>
<a name="ln2525">        {</a>
<a name="ln2526">          listnode_delete (bgp-&gt;rsclient, peer);</a>
<a name="ln2527">          peer_unlock (peer); /* rsclient peer list reference */</a>
<a name="ln2528">        }</a>
<a name="ln2529"> </a>
<a name="ln2530">      return bgp_vty_return (vty, ret);</a>
<a name="ln2531">    }</a>
<a name="ln2532"> </a>
<a name="ln2533">  peer-&gt;rib[afi][safi] = bgp_table_init (afi, safi);</a>
<a name="ln2534">  peer-&gt;rib[afi][safi]-&gt;type = BGP_TABLE_RSCLIENT;</a>
<a name="ln2535">  /* RIB peer reference.  Released when table is free'd in bgp_table_free. */</a>
<a name="ln2536">  peer-&gt;rib[afi][safi]-&gt;owner = peer_lock (peer);</a>
<a name="ln2537"> </a>
<a name="ln2538">  /* Check for existing 'network' and 'redistribute' routes. */</a>
<a name="ln2539">  bgp_check_local_routes_rsclient (peer, afi, safi);</a>
<a name="ln2540"> </a>
<a name="ln2541">  /* Check for routes for peers configured with 'soft-reconfiguration'. */</a>
<a name="ln2542">  bgp_soft_reconfig_rsclient (peer, afi, safi);</a>
<a name="ln2543"> </a>
<a name="ln2544">  if (CHECK_FLAG(peer-&gt;sflags, PEER_STATUS_GROUP))</a>
<a name="ln2545">    {</a>
<a name="ln2546">      group = peer-&gt;group;</a>
<a name="ln2547">      gfilter = &amp;peer-&gt;filter[afi][safi];</a>
<a name="ln2548"> </a>
<a name="ln2549">      for (ALL_LIST_ELEMENTS (group-&gt;peer, node, nnode, peer))</a>
<a name="ln2550">        {</a>
<a name="ln2551">          pfilter = &amp;peer-&gt;filter[afi][safi];</a>
<a name="ln2552"> </a>
<a name="ln2553">          /* Members of a non-RS-Client group should not be RS-Clients, as that </a>
<a name="ln2554">             is checked when the become part of the peer-group */</a>
<a name="ln2555">          ret = peer_af_flag_set (peer, afi, safi, PEER_FLAG_RSERVER_CLIENT);</a>
<a name="ln2556">          if (ret &lt; 0)</a>
<a name="ln2557">            return bgp_vty_return (vty, ret);</a>
<a name="ln2558"> </a>
<a name="ln2559">          /* Make peer's RIB point to group's RIB. */</a>
<a name="ln2560">          peer-&gt;rib[afi][safi] = group-&gt;conf-&gt;rib[afi][safi];</a>
<a name="ln2561"> </a>
<a name="ln2562">          /* Import policy. */</a>
<a name="ln2563">          if (pfilter-&gt;map[RMAP_IMPORT].name)</a>
<a name="ln2564">            free (pfilter-&gt;map[RMAP_IMPORT].name);</a>
<a name="ln2565">          if (gfilter-&gt;map[RMAP_IMPORT].name)</a>
<a name="ln2566">            {</a>
<a name="ln2567">              pfilter-&gt;map[RMAP_IMPORT].name = strdup (gfilter-&gt;map[RMAP_IMPORT].name);</a>
<a name="ln2568">              pfilter-&gt;map[RMAP_IMPORT].map = gfilter-&gt;map[RMAP_IMPORT].map;</a>
<a name="ln2569">            }</a>
<a name="ln2570">          else</a>
<a name="ln2571">            {</a>
<a name="ln2572">              pfilter-&gt;map[RMAP_IMPORT].name = NULL;</a>
<a name="ln2573">              pfilter-&gt;map[RMAP_IMPORT].map =NULL;</a>
<a name="ln2574">            }</a>
<a name="ln2575"> </a>
<a name="ln2576">          /* Export policy. */</a>
<a name="ln2577">          if (gfilter-&gt;map[RMAP_EXPORT].name &amp;&amp; ! pfilter-&gt;map[RMAP_EXPORT].name)</a>
<a name="ln2578">            {</a>
<a name="ln2579">              pfilter-&gt;map[RMAP_EXPORT].name = strdup (gfilter-&gt;map[RMAP_EXPORT].name);</a>
<a name="ln2580">              pfilter-&gt;map[RMAP_EXPORT].map = gfilter-&gt;map[RMAP_EXPORT].map;</a>
<a name="ln2581">            }</a>
<a name="ln2582">        }</a>
<a name="ln2583">    }</a>
<a name="ln2584">  return CMD_SUCCESS;</a>
<a name="ln2585">}</a>
<a name="ln2586"> </a>
<a name="ln2587">static int</a>
<a name="ln2588">peer_rsclient_unset_vty (struct vty *vty, const char *peer_str, </a>
<a name="ln2589">                         int afi, int safi)</a>
<a name="ln2590">{</a>
<a name="ln2591">  int ret;</a>
<a name="ln2592">  struct bgp *bgp;</a>
<a name="ln2593">  struct peer *peer;</a>
<a name="ln2594">  struct peer_group *group;</a>
<a name="ln2595">  struct listnode *node, *nnode;</a>
<a name="ln2596"> </a>
<a name="ln2597">  bgp = vty-&gt;index;</a>
<a name="ln2598"> </a>
<a name="ln2599">  peer = peer_and_group_lookup_vty (vty, peer_str);</a>
<a name="ln2600">  if ( ! peer )</a>
<a name="ln2601">    return CMD_WARNING;</a>
<a name="ln2602"> </a>
<a name="ln2603">  /* If it is not a RS-Client, don't do anything. */</a>
<a name="ln2604">  if ( ! CHECK_FLAG (peer-&gt;af_flags[afi][safi], PEER_FLAG_RSERVER_CLIENT) )</a>
<a name="ln2605">    return CMD_SUCCESS;</a>
<a name="ln2606"> </a>
<a name="ln2607">  if (CHECK_FLAG(peer-&gt;sflags, PEER_STATUS_GROUP))</a>
<a name="ln2608">    {</a>
<a name="ln2609">      group = peer-&gt;group;</a>
<a name="ln2610"> </a>
<a name="ln2611">      for (ALL_LIST_ELEMENTS (group-&gt;peer, node, nnode, peer))</a>
<a name="ln2612">        {</a>
<a name="ln2613">          ret = peer_af_flag_unset (peer, afi, safi, PEER_FLAG_RSERVER_CLIENT);</a>
<a name="ln2614">          if (ret &lt; 0)</a>
<a name="ln2615">            return bgp_vty_return (vty, ret);</a>
<a name="ln2616"> </a>
<a name="ln2617">          peer-&gt;rib[afi][safi] = NULL;</a>
<a name="ln2618">        }</a>
<a name="ln2619"> </a>
<a name="ln2620">        peer = group-&gt;conf;</a>
<a name="ln2621">    }</a>
<a name="ln2622"> </a>
<a name="ln2623">  ret = peer_af_flag_unset (peer, afi, safi, PEER_FLAG_RSERVER_CLIENT);</a>
<a name="ln2624">  if (ret &lt; 0)</a>
<a name="ln2625">    return bgp_vty_return (vty, ret);</a>
<a name="ln2626"> </a>
<a name="ln2627">  if ( ! peer_rsclient_active (peer) )</a>
<a name="ln2628">    {</a>
<a name="ln2629">      bgp_clear_route (peer, afi, safi, BGP_CLEAR_ROUTE_MY_RSCLIENT);</a>
<a name="ln2630">      listnode_delete (bgp-&gt;rsclient, peer);</a>
<a name="ln2631">      peer_unlock (peer); /* peer bgp rsclient reference */</a>
<a name="ln2632">    }</a>
<a name="ln2633"> </a>
<a name="ln2634">  bgp_table_finish (&amp;peer-&gt;rib[bgp_node_afi(vty)][bgp_node_safi(vty)]);</a>
<a name="ln2635"> </a>
<a name="ln2636">  return CMD_SUCCESS;</a>
<a name="ln2637">}</a>
<a name="ln2638"> </a>
<a name="ln2639">/* neighbor route-server-client. */</a>
<a name="ln2640">DEFUN (neighbor_route_server_client,</a>
<a name="ln2641">       neighbor_route_server_client_cmd,</a>
<a name="ln2642">       NEIGHBOR_CMD2 &quot;route-server-client&quot;,</a>
<a name="ln2643">       NEIGHBOR_STR</a>
<a name="ln2644">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2645">       &quot;Configure a neighbor as Route Server client\n&quot;)</a>
<a name="ln2646">{</a>
<a name="ln2647">  return peer_rsclient_set_vty (vty, argv[0], bgp_node_afi(vty),</a>
<a name="ln2648">                  bgp_node_safi(vty));</a>
<a name="ln2649">}</a>
<a name="ln2650"> </a>
<a name="ln2651">DEFUN (no_neighbor_route_server_client,</a>
<a name="ln2652">       no_neighbor_route_server_client_cmd,</a>
<a name="ln2653">       NO_NEIGHBOR_CMD2 &quot;route-server-client&quot;,</a>
<a name="ln2654">       NO_STR</a>
<a name="ln2655">       NEIGHBOR_STR</a>
<a name="ln2656">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2657">       &quot;Configure a neighbor as Route Server client\n&quot;)</a>
<a name="ln2658">{</a>
<a name="ln2659">  return peer_rsclient_unset_vty (vty, argv[0], bgp_node_afi(vty),</a>
<a name="ln2660">                  bgp_node_safi(vty));</a>
<a name="ln2661">}</a>
<a name="ln2662"> </a>
<a name="ln2663">DEFUN (neighbor_nexthop_local_unchanged,</a>
<a name="ln2664">       neighbor_nexthop_local_unchanged_cmd,</a>
<a name="ln2665">       NEIGHBOR_CMD2 &quot;nexthop-local unchanged&quot;,</a>
<a name="ln2666">       NEIGHBOR_STR</a>
<a name="ln2667">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2668">       &quot;Configure treatment of outgoing link-local nexthop attribute\n&quot;</a>
<a name="ln2669">       &quot;Leave link-local nexthop unchanged for this peer\n&quot;)</a>
<a name="ln2670">{</a>
<a name="ln2671">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2672">                                bgp_node_safi (vty),</a>
<a name="ln2673">                                PEER_FLAG_NEXTHOP_LOCAL_UNCHANGED );</a>
<a name="ln2674">}</a>
<a name="ln2675"> </a>
<a name="ln2676">DEFUN (no_neighbor_nexthop_local_unchanged,</a>
<a name="ln2677">       no_neighbor_nexthop_local_unchanged_cmd,</a>
<a name="ln2678">       NO_NEIGHBOR_CMD2 &quot;nexthop-local unchanged&quot;,</a>
<a name="ln2679">       NO_STR</a>
<a name="ln2680">       NEIGHBOR_STR</a>
<a name="ln2681">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2682">       &quot;Configure treatment of outgoing link-local-nexthop attribute\n&quot;</a>
<a name="ln2683">       &quot;Leave link-local nexthop unchanged for this peer\n&quot;)</a>
<a name="ln2684">{</a>
<a name="ln2685">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2686">				 bgp_node_safi (vty),</a>
<a name="ln2687">                                PEER_FLAG_NEXTHOP_LOCAL_UNCHANGED );</a>
<a name="ln2688">}</a>
<a name="ln2689"> </a>
<a name="ln2690">DEFUN (neighbor_attr_unchanged,</a>
<a name="ln2691">       neighbor_attr_unchanged_cmd,</a>
<a name="ln2692">       NEIGHBOR_CMD2 &quot;attribute-unchanged&quot;,</a>
<a name="ln2693">       NEIGHBOR_STR</a>
<a name="ln2694">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2695">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;)</a>
<a name="ln2696">{</a>
<a name="ln2697">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2698">			       bgp_node_safi (vty),</a>
<a name="ln2699">			       (PEER_FLAG_AS_PATH_UNCHANGED |</a>
<a name="ln2700">				PEER_FLAG_NEXTHOP_UNCHANGED |</a>
<a name="ln2701">				PEER_FLAG_MED_UNCHANGED));</a>
<a name="ln2702">}</a>
<a name="ln2703"> </a>
<a name="ln2704">DEFUN (neighbor_attr_unchanged1,</a>
<a name="ln2705">       neighbor_attr_unchanged1_cmd,</a>
<a name="ln2706">       NEIGHBOR_CMD2 &quot;attribute-unchanged (as-path|next-hop|med)&quot;,</a>
<a name="ln2707">       NEIGHBOR_STR</a>
<a name="ln2708">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2709">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2710">       &quot;As-path attribute\n&quot;</a>
<a name="ln2711">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2712">       &quot;Med attribute\n&quot;)</a>
<a name="ln2713">{</a>
<a name="ln2714">  u_int16_t flags = 0;</a>
<a name="ln2715"> </a>
<a name="ln2716">  if (strncmp (argv[1], &quot;as-path&quot;, 1) == 0)</a>
<a name="ln2717">    SET_FLAG (flags, PEER_FLAG_AS_PATH_UNCHANGED);</a>
<a name="ln2718">  else if (strncmp (argv[1], &quot;next-hop&quot;, 1) == 0)</a>
<a name="ln2719">    SET_FLAG (flags, PEER_FLAG_NEXTHOP_UNCHANGED);</a>
<a name="ln2720">  else if (strncmp (argv[1], &quot;med&quot;, 1) == 0)</a>
<a name="ln2721">    SET_FLAG (flags, PEER_FLAG_MED_UNCHANGED);</a>
<a name="ln2722"> </a>
<a name="ln2723">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2724">			       bgp_node_safi (vty), flags);</a>
<a name="ln2725">}</a>
<a name="ln2726"> </a>
<a name="ln2727">DEFUN (neighbor_attr_unchanged2,</a>
<a name="ln2728">       neighbor_attr_unchanged2_cmd,</a>
<a name="ln2729">       NEIGHBOR_CMD2 &quot;attribute-unchanged as-path (next-hop|med)&quot;,</a>
<a name="ln2730">       NEIGHBOR_STR</a>
<a name="ln2731">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2732">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2733">       &quot;As-path attribute\n&quot;</a>
<a name="ln2734">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2735">       &quot;Med attribute\n&quot;)</a>
<a name="ln2736">{</a>
<a name="ln2737">  u_int16_t flags = PEER_FLAG_AS_PATH_UNCHANGED;</a>
<a name="ln2738"> </a>
<a name="ln2739">  if (strncmp (argv[1], &quot;next-hop&quot;, 1) == 0)</a>
<a name="ln2740">    SET_FLAG (flags, PEER_FLAG_NEXTHOP_UNCHANGED);</a>
<a name="ln2741">  else if (strncmp (argv[1], &quot;med&quot;, 1) == 0)</a>
<a name="ln2742">    SET_FLAG (flags, PEER_FLAG_MED_UNCHANGED);</a>
<a name="ln2743"> </a>
<a name="ln2744">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2745">			       bgp_node_safi (vty), flags);</a>
<a name="ln2746"> </a>
<a name="ln2747">}</a>
<a name="ln2748"> </a>
<a name="ln2749">DEFUN (neighbor_attr_unchanged3,</a>
<a name="ln2750">       neighbor_attr_unchanged3_cmd,</a>
<a name="ln2751">       NEIGHBOR_CMD2 &quot;attribute-unchanged next-hop (as-path|med)&quot;,</a>
<a name="ln2752">       NEIGHBOR_STR</a>
<a name="ln2753">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2754">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2755">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2756">       &quot;As-path attribute\n&quot;</a>
<a name="ln2757">       &quot;Med attribute\n&quot;)</a>
<a name="ln2758">{</a>
<a name="ln2759">  u_int16_t flags = PEER_FLAG_NEXTHOP_UNCHANGED;</a>
<a name="ln2760"> </a>
<a name="ln2761">  if (strncmp (argv[1], &quot;as-path&quot;, 1) == 0)</a>
<a name="ln2762">    SET_FLAG (flags, PEER_FLAG_AS_PATH_UNCHANGED);</a>
<a name="ln2763">  else if (strncmp (argv[1], &quot;med&quot;, 1) == 0)</a>
<a name="ln2764">    SET_FLAG (flags, PEER_FLAG_MED_UNCHANGED);</a>
<a name="ln2765"> </a>
<a name="ln2766">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2767">			       bgp_node_safi (vty), flags);</a>
<a name="ln2768">}</a>
<a name="ln2769"> </a>
<a name="ln2770">DEFUN (neighbor_attr_unchanged4,</a>
<a name="ln2771">       neighbor_attr_unchanged4_cmd,</a>
<a name="ln2772">       NEIGHBOR_CMD2 &quot;attribute-unchanged med (as-path|next-hop)&quot;,</a>
<a name="ln2773">       NEIGHBOR_STR</a>
<a name="ln2774">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2775">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2776">       &quot;Med attribute\n&quot;</a>
<a name="ln2777">       &quot;As-path attribute\n&quot;</a>
<a name="ln2778">       &quot;Nexthop attribute\n&quot;)</a>
<a name="ln2779">{</a>
<a name="ln2780">  u_int16_t flags = PEER_FLAG_MED_UNCHANGED;</a>
<a name="ln2781"> </a>
<a name="ln2782">  if (strncmp (argv[1], &quot;as-path&quot;, 1) == 0)</a>
<a name="ln2783">    SET_FLAG (flags, PEER_FLAG_AS_PATH_UNCHANGED);</a>
<a name="ln2784">  else if (strncmp (argv[1], &quot;next-hop&quot;, 1) == 0)</a>
<a name="ln2785">    SET_FLAG (flags, PEER_FLAG_NEXTHOP_UNCHANGED);</a>
<a name="ln2786"> </a>
<a name="ln2787">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2788">			       bgp_node_safi (vty), flags);</a>
<a name="ln2789">}</a>
<a name="ln2790"> </a>
<a name="ln2791">ALIAS (neighbor_attr_unchanged,</a>
<a name="ln2792">       neighbor_attr_unchanged5_cmd,</a>
<a name="ln2793">       NEIGHBOR_CMD2 &quot;attribute-unchanged as-path next-hop med&quot;,</a>
<a name="ln2794">       NEIGHBOR_STR</a>
<a name="ln2795">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2796">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2797">       &quot;As-path attribute\n&quot;</a>
<a name="ln2798">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2799">       &quot;Med attribute\n&quot;)</a>
<a name="ln2800"> </a>
<a name="ln2801">ALIAS (neighbor_attr_unchanged,</a>
<a name="ln2802">       neighbor_attr_unchanged6_cmd,</a>
<a name="ln2803">       NEIGHBOR_CMD2 &quot;attribute-unchanged as-path med next-hop&quot;,</a>
<a name="ln2804">       NEIGHBOR_STR</a>
<a name="ln2805">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2806">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2807">       &quot;As-path attribute\n&quot;</a>
<a name="ln2808">       &quot;Med attribute\n&quot;</a>
<a name="ln2809">       &quot;Nexthop attribute\n&quot;)</a>
<a name="ln2810"> </a>
<a name="ln2811">ALIAS (neighbor_attr_unchanged,</a>
<a name="ln2812">       neighbor_attr_unchanged7_cmd,</a>
<a name="ln2813">       NEIGHBOR_CMD2 &quot;attribute-unchanged next-hop med as-path&quot;,</a>
<a name="ln2814">       NEIGHBOR_STR</a>
<a name="ln2815">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2816">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2817">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2818">       &quot;Med attribute\n&quot;</a>
<a name="ln2819">       &quot;As-path attribute\n&quot;)</a>
<a name="ln2820"> </a>
<a name="ln2821">ALIAS (neighbor_attr_unchanged,</a>
<a name="ln2822">       neighbor_attr_unchanged8_cmd,</a>
<a name="ln2823">       NEIGHBOR_CMD2 &quot;attribute-unchanged next-hop as-path med&quot;,</a>
<a name="ln2824">       NEIGHBOR_STR</a>
<a name="ln2825">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2826">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2827">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2828">       &quot;As-path attribute\n&quot;</a>
<a name="ln2829">       &quot;Med attribute\n&quot;)</a>
<a name="ln2830"> </a>
<a name="ln2831">ALIAS (neighbor_attr_unchanged,</a>
<a name="ln2832">       neighbor_attr_unchanged9_cmd,</a>
<a name="ln2833">       NEIGHBOR_CMD2 &quot;attribute-unchanged med next-hop as-path&quot;,</a>
<a name="ln2834">       NEIGHBOR_STR</a>
<a name="ln2835">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2836">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2837">       &quot;Med attribute\n&quot;</a>
<a name="ln2838">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2839">       &quot;As-path attribute\n&quot;)</a>
<a name="ln2840"> </a>
<a name="ln2841">ALIAS (neighbor_attr_unchanged,</a>
<a name="ln2842">       neighbor_attr_unchanged10_cmd,</a>
<a name="ln2843">       NEIGHBOR_CMD2 &quot;attribute-unchanged med as-path next-hop&quot;,</a>
<a name="ln2844">       NEIGHBOR_STR</a>
<a name="ln2845">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2846">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2847">       &quot;Med attribute\n&quot;</a>
<a name="ln2848">       &quot;As-path attribute\n&quot;</a>
<a name="ln2849">       &quot;Nexthop attribute\n&quot;)</a>
<a name="ln2850"> </a>
<a name="ln2851">DEFUN (no_neighbor_attr_unchanged,</a>
<a name="ln2852">       no_neighbor_attr_unchanged_cmd,</a>
<a name="ln2853">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged&quot;,</a>
<a name="ln2854">       NO_STR	 </a>
<a name="ln2855">       NEIGHBOR_STR</a>
<a name="ln2856">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2857">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;)</a>
<a name="ln2858">{</a>
<a name="ln2859">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2860">				 bgp_node_safi (vty),</a>
<a name="ln2861">				 (PEER_FLAG_AS_PATH_UNCHANGED |</a>
<a name="ln2862">				  PEER_FLAG_NEXTHOP_UNCHANGED |</a>
<a name="ln2863">				  PEER_FLAG_MED_UNCHANGED));</a>
<a name="ln2864">}</a>
<a name="ln2865"> </a>
<a name="ln2866">DEFUN (no_neighbor_attr_unchanged1,</a>
<a name="ln2867">       no_neighbor_attr_unchanged1_cmd,</a>
<a name="ln2868">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged (as-path|next-hop|med)&quot;,</a>
<a name="ln2869">       NO_STR</a>
<a name="ln2870">       NEIGHBOR_STR</a>
<a name="ln2871">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2872">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2873">       &quot;As-path attribute\n&quot;</a>
<a name="ln2874">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2875">       &quot;Med attribute\n&quot;)</a>
<a name="ln2876">{</a>
<a name="ln2877">  u_int16_t flags = 0;</a>
<a name="ln2878"> </a>
<a name="ln2879">  if (strncmp (argv[1], &quot;as-path&quot;, 1) == 0)</a>
<a name="ln2880">    SET_FLAG (flags, PEER_FLAG_AS_PATH_UNCHANGED);</a>
<a name="ln2881">  else if (strncmp (argv[1], &quot;next-hop&quot;, 1) == 0)</a>
<a name="ln2882">    SET_FLAG (flags, PEER_FLAG_NEXTHOP_UNCHANGED);</a>
<a name="ln2883">  else if (strncmp (argv[1], &quot;med&quot;, 1) == 0)</a>
<a name="ln2884">    SET_FLAG (flags, PEER_FLAG_MED_UNCHANGED);</a>
<a name="ln2885"> </a>
<a name="ln2886">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2887">				 bgp_node_safi (vty), flags);</a>
<a name="ln2888">}</a>
<a name="ln2889"> </a>
<a name="ln2890">DEFUN (no_neighbor_attr_unchanged2,</a>
<a name="ln2891">       no_neighbor_attr_unchanged2_cmd,</a>
<a name="ln2892">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged as-path (next-hop|med)&quot;,</a>
<a name="ln2893">       NO_STR</a>
<a name="ln2894">       NEIGHBOR_STR</a>
<a name="ln2895">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2896">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2897">       &quot;As-path attribute\n&quot;</a>
<a name="ln2898">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2899">       &quot;Med attribute\n&quot;)</a>
<a name="ln2900">{</a>
<a name="ln2901">  u_int16_t flags = PEER_FLAG_AS_PATH_UNCHANGED;</a>
<a name="ln2902"> </a>
<a name="ln2903">  if (strncmp (argv[1], &quot;next-hop&quot;, 1) == 0)</a>
<a name="ln2904">    SET_FLAG (flags, PEER_FLAG_NEXTHOP_UNCHANGED);</a>
<a name="ln2905">  else if (strncmp (argv[1], &quot;med&quot;, 1) == 0)</a>
<a name="ln2906">    SET_FLAG (flags, PEER_FLAG_MED_UNCHANGED);</a>
<a name="ln2907"> </a>
<a name="ln2908">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2909">			       bgp_node_safi (vty), flags);</a>
<a name="ln2910">}</a>
<a name="ln2911"> </a>
<a name="ln2912">DEFUN (no_neighbor_attr_unchanged3,</a>
<a name="ln2913">       no_neighbor_attr_unchanged3_cmd,</a>
<a name="ln2914">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged next-hop (as-path|med)&quot;,</a>
<a name="ln2915">       NO_STR</a>
<a name="ln2916">       NEIGHBOR_STR</a>
<a name="ln2917">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2918">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2919">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2920">       &quot;As-path attribute\n&quot;</a>
<a name="ln2921">       &quot;Med attribute\n&quot;)</a>
<a name="ln2922">{</a>
<a name="ln2923">  u_int16_t flags = PEER_FLAG_NEXTHOP_UNCHANGED;</a>
<a name="ln2924"> </a>
<a name="ln2925">  if (strncmp (argv[1], &quot;as-path&quot;, 1) == 0)</a>
<a name="ln2926">    SET_FLAG (flags, PEER_FLAG_AS_PATH_UNCHANGED);</a>
<a name="ln2927">  else if (strncmp (argv[1], &quot;med&quot;, 1) == 0)</a>
<a name="ln2928">    SET_FLAG (flags, PEER_FLAG_MED_UNCHANGED);</a>
<a name="ln2929"> </a>
<a name="ln2930">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2931">				 bgp_node_safi (vty), flags);</a>
<a name="ln2932">}</a>
<a name="ln2933"> </a>
<a name="ln2934">DEFUN (no_neighbor_attr_unchanged4,</a>
<a name="ln2935">       no_neighbor_attr_unchanged4_cmd,</a>
<a name="ln2936">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged med (as-path|next-hop)&quot;,</a>
<a name="ln2937">       NO_STR</a>
<a name="ln2938">       NEIGHBOR_STR</a>
<a name="ln2939">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2940">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2941">       &quot;Med attribute\n&quot;</a>
<a name="ln2942">       &quot;As-path attribute\n&quot;</a>
<a name="ln2943">       &quot;Nexthop attribute\n&quot;)</a>
<a name="ln2944">{</a>
<a name="ln2945">  u_int16_t flags = PEER_FLAG_MED_UNCHANGED;</a>
<a name="ln2946"> </a>
<a name="ln2947">  if (strncmp (argv[1], &quot;as-path&quot;, 1) == 0)</a>
<a name="ln2948">    SET_FLAG (flags, PEER_FLAG_AS_PATH_UNCHANGED);</a>
<a name="ln2949">  else if (strncmp (argv[1], &quot;next-hop&quot;, 1) == 0)</a>
<a name="ln2950">    SET_FLAG (flags, PEER_FLAG_NEXTHOP_UNCHANGED);</a>
<a name="ln2951"> </a>
<a name="ln2952">  return peer_af_flag_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln2953">			       bgp_node_safi (vty), flags);</a>
<a name="ln2954">}</a>
<a name="ln2955"> </a>
<a name="ln2956">ALIAS (no_neighbor_attr_unchanged,</a>
<a name="ln2957">       no_neighbor_attr_unchanged5_cmd,</a>
<a name="ln2958">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged as-path next-hop med&quot;,</a>
<a name="ln2959">       NO_STR</a>
<a name="ln2960">       NEIGHBOR_STR</a>
<a name="ln2961">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2962">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2963">       &quot;As-path attribute\n&quot;</a>
<a name="ln2964">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2965">       &quot;Med attribute\n&quot;)</a>
<a name="ln2966"> </a>
<a name="ln2967">ALIAS (no_neighbor_attr_unchanged,</a>
<a name="ln2968">       no_neighbor_attr_unchanged6_cmd,</a>
<a name="ln2969">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged as-path med next-hop&quot;,</a>
<a name="ln2970">       NO_STR</a>
<a name="ln2971">       NEIGHBOR_STR</a>
<a name="ln2972">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2973">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2974">       &quot;As-path attribute\n&quot;</a>
<a name="ln2975">       &quot;Med attribute\n&quot;</a>
<a name="ln2976">       &quot;Nexthop attribute\n&quot;)</a>
<a name="ln2977"> </a>
<a name="ln2978">ALIAS (no_neighbor_attr_unchanged,</a>
<a name="ln2979">       no_neighbor_attr_unchanged7_cmd,</a>
<a name="ln2980">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged next-hop med as-path&quot;,</a>
<a name="ln2981">       NO_STR</a>
<a name="ln2982">       NEIGHBOR_STR</a>
<a name="ln2983">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2984">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2985">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2986">       &quot;Med attribute\n&quot;</a>
<a name="ln2987">       &quot;As-path attribute\n&quot;)</a>
<a name="ln2988"> </a>
<a name="ln2989">ALIAS (no_neighbor_attr_unchanged,</a>
<a name="ln2990">       no_neighbor_attr_unchanged8_cmd,</a>
<a name="ln2991">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged next-hop as-path med&quot;,</a>
<a name="ln2992">       NO_STR</a>
<a name="ln2993">       NEIGHBOR_STR</a>
<a name="ln2994">       NEIGHBOR_ADDR_STR2</a>
<a name="ln2995">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln2996">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln2997">       &quot;As-path attribute\n&quot;</a>
<a name="ln2998">       &quot;Med attribute\n&quot;)</a>
<a name="ln2999"> </a>
<a name="ln3000">ALIAS (no_neighbor_attr_unchanged,</a>
<a name="ln3001">       no_neighbor_attr_unchanged9_cmd,</a>
<a name="ln3002">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged med next-hop as-path&quot;,</a>
<a name="ln3003">       NO_STR</a>
<a name="ln3004">       NEIGHBOR_STR</a>
<a name="ln3005">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3006">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln3007">       &quot;Med attribute\n&quot;</a>
<a name="ln3008">       &quot;Nexthop attribute\n&quot;</a>
<a name="ln3009">       &quot;As-path attribute\n&quot;)</a>
<a name="ln3010"> </a>
<a name="ln3011">ALIAS (no_neighbor_attr_unchanged,</a>
<a name="ln3012">       no_neighbor_attr_unchanged10_cmd,</a>
<a name="ln3013">       NO_NEIGHBOR_CMD2 &quot;attribute-unchanged med as-path next-hop&quot;,</a>
<a name="ln3014">       NO_STR</a>
<a name="ln3015">       NEIGHBOR_STR</a>
<a name="ln3016">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3017">       &quot;BGP attribute is propagated unchanged to this neighbor\n&quot;</a>
<a name="ln3018">       &quot;Med attribute\n&quot;</a>
<a name="ln3019">       &quot;As-path attribute\n&quot;</a>
<a name="ln3020">       &quot;Nexthop attribute\n&quot;)</a>
<a name="ln3021"> </a>
<a name="ln3022">/* For old version Zebra compatibility.  */</a>
<a name="ln3023">DEFUN_DEPRECATED (neighbor_transparent_as,</a>
<a name="ln3024">		  neighbor_transparent_as_cmd,</a>
<a name="ln3025">		  NEIGHBOR_CMD &quot;transparent-as&quot;,</a>
<a name="ln3026">		  NEIGHBOR_STR</a>
<a name="ln3027">		  NEIGHBOR_ADDR_STR</a>
<a name="ln3028">		  &quot;Do not append my AS number even peer is EBGP peer\n&quot;)</a>
<a name="ln3029">{</a>
<a name="ln3030">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3031">			       bgp_node_safi (vty),</a>
<a name="ln3032">			       PEER_FLAG_AS_PATH_UNCHANGED);</a>
<a name="ln3033">}</a>
<a name="ln3034"> </a>
<a name="ln3035">DEFUN_DEPRECATED (neighbor_transparent_nexthop,</a>
<a name="ln3036">		  neighbor_transparent_nexthop_cmd,</a>
<a name="ln3037">		  NEIGHBOR_CMD &quot;transparent-nexthop&quot;,</a>
<a name="ln3038">		  NEIGHBOR_STR</a>
<a name="ln3039">		  NEIGHBOR_ADDR_STR</a>
<a name="ln3040">		  &quot;Do not change nexthop even peer is EBGP peer\n&quot;)</a>
<a name="ln3041">{</a>
<a name="ln3042">  return peer_af_flag_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3043">			       bgp_node_safi (vty),</a>
<a name="ln3044">			       PEER_FLAG_NEXTHOP_UNCHANGED);</a>
<a name="ln3045">}</a>
<a name="ln3046"> </a>
<a name="ln3047">/* EBGP multihop configuration. */</a>
<a name="ln3048">static int</a>
<a name="ln3049">peer_ebgp_multihop_set_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3050">                            const char *ttl_str)</a>
<a name="ln3051">{</a>
<a name="ln3052">  struct peer *peer;</a>
<a name="ln3053">  unsigned int ttl;</a>
<a name="ln3054"> </a>
<a name="ln3055">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3056">  if (! peer)</a>
<a name="ln3057">    return CMD_WARNING;</a>
<a name="ln3058"> </a>
<a name="ln3059">  if (! ttl_str)</a>
<a name="ln3060">    ttl = TTL_MAX;</a>
<a name="ln3061">  else</a>
<a name="ln3062">    VTY_GET_INTEGER_RANGE (&quot;TTL&quot;, ttl, ttl_str, 1, 255);</a>
<a name="ln3063"> </a>
<a name="ln3064">  return bgp_vty_return (vty,  peer_ebgp_multihop_set (peer, ttl));</a>
<a name="ln3065">}</a>
<a name="ln3066"> </a>
<a name="ln3067">static int</a>
<a name="ln3068">peer_ebgp_multihop_unset_vty (struct vty *vty, const char *ip_str) </a>
<a name="ln3069">{</a>
<a name="ln3070">  struct peer *peer;</a>
<a name="ln3071"> </a>
<a name="ln3072">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3073">  if (! peer)</a>
<a name="ln3074">    return CMD_WARNING;</a>
<a name="ln3075"> </a>
<a name="ln3076">  return bgp_vty_return (vty, peer_ebgp_multihop_set (peer, 0));</a>
<a name="ln3077">}</a>
<a name="ln3078"> </a>
<a name="ln3079">/* neighbor ebgp-multihop. */</a>
<a name="ln3080">DEFUN (neighbor_ebgp_multihop,</a>
<a name="ln3081">       neighbor_ebgp_multihop_cmd,</a>
<a name="ln3082">       NEIGHBOR_CMD2 &quot;ebgp-multihop&quot;,</a>
<a name="ln3083">       NEIGHBOR_STR</a>
<a name="ln3084">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3085">       &quot;Allow EBGP neighbors not on directly connected networks\n&quot;)</a>
<a name="ln3086">{</a>
<a name="ln3087">  return peer_ebgp_multihop_set_vty (vty, argv[0], NULL);</a>
<a name="ln3088">}</a>
<a name="ln3089"> </a>
<a name="ln3090">DEFUN (neighbor_ebgp_multihop_ttl,</a>
<a name="ln3091">       neighbor_ebgp_multihop_ttl_cmd,</a>
<a name="ln3092">       NEIGHBOR_CMD2 &quot;ebgp-multihop &lt;1-255&gt;&quot;,</a>
<a name="ln3093">       NEIGHBOR_STR</a>
<a name="ln3094">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3095">       &quot;Allow EBGP neighbors not on directly connected networks\n&quot;</a>
<a name="ln3096">       &quot;maximum hop count\n&quot;)</a>
<a name="ln3097">{</a>
<a name="ln3098">  return peer_ebgp_multihop_set_vty (vty, argv[0], argv[1]);</a>
<a name="ln3099">}</a>
<a name="ln3100"> </a>
<a name="ln3101">DEFUN (no_neighbor_ebgp_multihop,</a>
<a name="ln3102">       no_neighbor_ebgp_multihop_cmd,</a>
<a name="ln3103">       NO_NEIGHBOR_CMD2 &quot;ebgp-multihop&quot;,</a>
<a name="ln3104">       NO_STR</a>
<a name="ln3105">       NEIGHBOR_STR</a>
<a name="ln3106">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3107">       &quot;Allow EBGP neighbors not on directly connected networks\n&quot;)</a>
<a name="ln3108">{</a>
<a name="ln3109">  return peer_ebgp_multihop_unset_vty (vty, argv[0]);</a>
<a name="ln3110">}</a>
<a name="ln3111"> </a>
<a name="ln3112">ALIAS (no_neighbor_ebgp_multihop,</a>
<a name="ln3113">       no_neighbor_ebgp_multihop_ttl_cmd,</a>
<a name="ln3114">       NO_NEIGHBOR_CMD2 &quot;ebgp-multihop &lt;1-255&gt;&quot;,</a>
<a name="ln3115">       NO_STR</a>
<a name="ln3116">       NEIGHBOR_STR</a>
<a name="ln3117">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3118">       &quot;Allow EBGP neighbors not on directly connected networks\n&quot;</a>
<a name="ln3119">       &quot;maximum hop count\n&quot;)</a>
<a name="ln3120"> </a>
<a name="ln3121">/* disable-connected-check */</a>
<a name="ln3122">DEFUN (neighbor_disable_connected_check,</a>
<a name="ln3123">       neighbor_disable_connected_check_cmd,</a>
<a name="ln3124">       NEIGHBOR_CMD2 &quot;disable-connected-check&quot;,</a>
<a name="ln3125">       NEIGHBOR_STR</a>
<a name="ln3126">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3127">       &quot;one-hop away EBGP peer using loopback address\n&quot;)</a>
<a name="ln3128">{</a>
<a name="ln3129">  return peer_flag_set_vty (vty, argv[0], PEER_FLAG_DISABLE_CONNECTED_CHECK);</a>
<a name="ln3130">}</a>
<a name="ln3131"> </a>
<a name="ln3132">DEFUN (no_neighbor_disable_connected_check,</a>
<a name="ln3133">       no_neighbor_disable_connected_check_cmd,</a>
<a name="ln3134">       NO_NEIGHBOR_CMD2 &quot;disable-connected-check&quot;,</a>
<a name="ln3135">       NO_STR</a>
<a name="ln3136">       NEIGHBOR_STR</a>
<a name="ln3137">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3138">       &quot;one-hop away EBGP peer using loopback address\n&quot;)</a>
<a name="ln3139">{</a>
<a name="ln3140">  return peer_flag_unset_vty (vty, argv[0], PEER_FLAG_DISABLE_CONNECTED_CHECK);</a>
<a name="ln3141">}</a>
<a name="ln3142"> </a>
<a name="ln3143">/* Enforce multihop.  */</a>
<a name="ln3144">ALIAS (neighbor_disable_connected_check,</a>
<a name="ln3145">       neighbor_enforce_multihop_cmd,</a>
<a name="ln3146">       NEIGHBOR_CMD2 &quot;enforce-multihop&quot;,</a>
<a name="ln3147">       NEIGHBOR_STR</a>
<a name="ln3148">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3149">       &quot;Enforce EBGP neighbors perform multihop\n&quot;)</a>
<a name="ln3150"> </a>
<a name="ln3151">/* Enforce multihop.  */</a>
<a name="ln3152">ALIAS (no_neighbor_disable_connected_check,</a>
<a name="ln3153">       no_neighbor_enforce_multihop_cmd,</a>
<a name="ln3154">       NO_NEIGHBOR_CMD2 &quot;enforce-multihop&quot;,</a>
<a name="ln3155">       NO_STR</a>
<a name="ln3156">       NEIGHBOR_STR</a>
<a name="ln3157">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3158">       &quot;Enforce EBGP neighbors perform multihop\n&quot;)</a>
<a name="ln3159"> </a>
<a name="ln3160">DEFUN (neighbor_description,</a>
<a name="ln3161">       neighbor_description_cmd,</a>
<a name="ln3162">       NEIGHBOR_CMD2 &quot;description .LINE&quot;,</a>
<a name="ln3163">       NEIGHBOR_STR</a>
<a name="ln3164">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3165">       &quot;Neighbor specific description\n&quot;</a>
<a name="ln3166">       &quot;Up to 80 characters describing this neighbor\n&quot;)</a>
<a name="ln3167">{</a>
<a name="ln3168">  struct peer *peer;</a>
<a name="ln3169">  char *str;</a>
<a name="ln3170"> </a>
<a name="ln3171">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln3172">  if (! peer)</a>
<a name="ln3173">    return CMD_WARNING;</a>
<a name="ln3174"> </a>
<a name="ln3175">  if (argc == 1)</a>
<a name="ln3176">    return CMD_SUCCESS;</a>
<a name="ln3177"> </a>
<a name="ln3178">  str = argv_concat(argv, argc, 1);</a>
<a name="ln3179"> </a>
<a name="ln3180">  peer_description_set (peer, str);</a>
<a name="ln3181"> </a>
<a name="ln3182">  XFREE (MTYPE_TMP, str);</a>
<a name="ln3183"> </a>
<a name="ln3184">  return CMD_SUCCESS;</a>
<a name="ln3185">}</a>
<a name="ln3186"> </a>
<a name="ln3187">DEFUN (no_neighbor_description,</a>
<a name="ln3188">       no_neighbor_description_cmd,</a>
<a name="ln3189">       NO_NEIGHBOR_CMD2 &quot;description&quot;,</a>
<a name="ln3190">       NO_STR</a>
<a name="ln3191">       NEIGHBOR_STR</a>
<a name="ln3192">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3193">       &quot;Neighbor specific description\n&quot;)</a>
<a name="ln3194">{</a>
<a name="ln3195">  struct peer *peer;</a>
<a name="ln3196"> </a>
<a name="ln3197">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln3198">  if (! peer)</a>
<a name="ln3199">    return CMD_WARNING;</a>
<a name="ln3200"> </a>
<a name="ln3201">  peer_description_unset (peer);</a>
<a name="ln3202"> </a>
<a name="ln3203">  return CMD_SUCCESS;</a>
<a name="ln3204">}</a>
<a name="ln3205"> </a>
<a name="ln3206">ALIAS (no_neighbor_description,</a>
<a name="ln3207">       no_neighbor_description_val_cmd,</a>
<a name="ln3208">       NO_NEIGHBOR_CMD2 &quot;description .LINE&quot;,</a>
<a name="ln3209">       NO_STR</a>
<a name="ln3210">       NEIGHBOR_STR</a>
<a name="ln3211">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3212">       &quot;Neighbor specific description\n&quot;</a>
<a name="ln3213">       &quot;Up to 80 characters describing this neighbor\n&quot;)</a>
<a name="ln3214"> </a>
<a name="ln3215">/* Neighbor update-source. */</a>
<a name="ln3216">static int</a>
<a name="ln3217">peer_update_source_vty (struct vty *vty, const char *peer_str, </a>
<a name="ln3218">                        const char *source_str)</a>
<a name="ln3219">{</a>
<a name="ln3220">  struct peer *peer;</a>
<a name="ln3221"> </a>
<a name="ln3222">  peer = peer_and_group_lookup_vty (vty, peer_str);</a>
<a name="ln3223">  if (! peer)</a>
<a name="ln3224">    return CMD_WARNING;</a>
<a name="ln3225"> </a>
<a name="ln3226">  if (source_str)</a>
<a name="ln3227">    {</a>
<a name="ln3228">      union sockunion su;</a>
<a name="ln3229">      int ret = str2sockunion (source_str, &amp;su);</a>
<a name="ln3230"> </a>
<a name="ln3231">      if (ret == 0)</a>
<a name="ln3232">	peer_update_source_addr_set (peer, &amp;su);</a>
<a name="ln3233">      else</a>
<a name="ln3234">	peer_update_source_if_set (peer, source_str);</a>
<a name="ln3235">    }</a>
<a name="ln3236">  else</a>
<a name="ln3237">    peer_update_source_unset (peer);</a>
<a name="ln3238"> </a>
<a name="ln3239">  return CMD_SUCCESS;</a>
<a name="ln3240">}</a>
<a name="ln3241"> </a>
<a name="ln3242">#define BGP_UPDATE_SOURCE_STR &quot;(A.B.C.D|X:X::X:X|WORD)&quot;</a>
<a name="ln3243">#define BGP_UPDATE_SOURCE_HELP_STR \</a>
<a name="ln3244">  &quot;IPv4 address\n&quot; \</a>
<a name="ln3245">  &quot;IPv6 address\n&quot; \</a>
<a name="ln3246">  &quot;Interface name (requires zebra to be running)\n&quot;</a>
<a name="ln3247"> </a>
<a name="ln3248">DEFUN (neighbor_update_source,</a>
<a name="ln3249">       neighbor_update_source_cmd,</a>
<a name="ln3250">       NEIGHBOR_CMD2 &quot;update-source &quot; BGP_UPDATE_SOURCE_STR,</a>
<a name="ln3251">       NEIGHBOR_STR</a>
<a name="ln3252">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3253">       &quot;Source of routing updates\n&quot;</a>
<a name="ln3254">       BGP_UPDATE_SOURCE_HELP_STR)</a>
<a name="ln3255">{</a>
<a name="ln3256">  return peer_update_source_vty (vty, argv[0], argv[1]);</a>
<a name="ln3257">}</a>
<a name="ln3258"> </a>
<a name="ln3259">DEFUN (no_neighbor_update_source,</a>
<a name="ln3260">       no_neighbor_update_source_cmd,</a>
<a name="ln3261">       NO_NEIGHBOR_CMD2 &quot;update-source&quot;,</a>
<a name="ln3262">       NO_STR</a>
<a name="ln3263">       NEIGHBOR_STR</a>
<a name="ln3264">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3265">       &quot;Source of routing updates\n&quot;)</a>
<a name="ln3266">{</a>
<a name="ln3267">  return peer_update_source_vty (vty, argv[0], NULL);</a>
<a name="ln3268">}</a>
<a name="ln3269"> </a>
<a name="ln3270">static int</a>
<a name="ln3271">peer_default_originate_set_vty (struct vty *vty, const char *peer_str, </a>
<a name="ln3272">                                afi_t afi, safi_t safi, </a>
<a name="ln3273">                                const char *rmap, int set)</a>
<a name="ln3274">{</a>
<a name="ln3275">  int ret;</a>
<a name="ln3276">  struct peer *peer;</a>
<a name="ln3277"> </a>
<a name="ln3278">  peer = peer_and_group_lookup_vty (vty, peer_str);</a>
<a name="ln3279">  if (! peer)</a>
<a name="ln3280">    return CMD_WARNING;</a>
<a name="ln3281"> </a>
<a name="ln3282">  if (set)</a>
<a name="ln3283">    ret = peer_default_originate_set (peer, afi, safi, rmap);</a>
<a name="ln3284">  else</a>
<a name="ln3285">    ret = peer_default_originate_unset (peer, afi, safi);</a>
<a name="ln3286"> </a>
<a name="ln3287">  return bgp_vty_return (vty, ret);</a>
<a name="ln3288">}</a>
<a name="ln3289"> </a>
<a name="ln3290">/* neighbor default-originate. */</a>
<a name="ln3291">DEFUN (neighbor_default_originate,</a>
<a name="ln3292">       neighbor_default_originate_cmd,</a>
<a name="ln3293">       NEIGHBOR_CMD2 &quot;default-originate&quot;,</a>
<a name="ln3294">       NEIGHBOR_STR</a>
<a name="ln3295">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3296">       &quot;Originate default route to this neighbor\n&quot;)</a>
<a name="ln3297">{</a>
<a name="ln3298">  return peer_default_originate_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3299">					 bgp_node_safi (vty), NULL, 1);</a>
<a name="ln3300">}</a>
<a name="ln3301"> </a>
<a name="ln3302">DEFUN (neighbor_default_originate_rmap,</a>
<a name="ln3303">       neighbor_default_originate_rmap_cmd,</a>
<a name="ln3304">       NEIGHBOR_CMD2 &quot;default-originate route-map WORD&quot;,</a>
<a name="ln3305">       NEIGHBOR_STR</a>
<a name="ln3306">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3307">       &quot;Originate default route to this neighbor\n&quot;</a>
<a name="ln3308">       &quot;Route-map to specify criteria to originate default\n&quot;</a>
<a name="ln3309">       &quot;route-map name\n&quot;)</a>
<a name="ln3310">{</a>
<a name="ln3311">  return peer_default_originate_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3312">					 bgp_node_safi (vty), argv[1], 1);</a>
<a name="ln3313">}</a>
<a name="ln3314"> </a>
<a name="ln3315">DEFUN (no_neighbor_default_originate,</a>
<a name="ln3316">       no_neighbor_default_originate_cmd,</a>
<a name="ln3317">       NO_NEIGHBOR_CMD2 &quot;default-originate&quot;,</a>
<a name="ln3318">       NO_STR</a>
<a name="ln3319">       NEIGHBOR_STR</a>
<a name="ln3320">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3321">       &quot;Originate default route to this neighbor\n&quot;)</a>
<a name="ln3322">{</a>
<a name="ln3323">  return peer_default_originate_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3324">					 bgp_node_safi (vty), NULL, 0);</a>
<a name="ln3325">}</a>
<a name="ln3326"> </a>
<a name="ln3327">ALIAS (no_neighbor_default_originate,</a>
<a name="ln3328">       no_neighbor_default_originate_rmap_cmd,</a>
<a name="ln3329">       NO_NEIGHBOR_CMD2 &quot;default-originate route-map WORD&quot;,</a>
<a name="ln3330">       NO_STR</a>
<a name="ln3331">       NEIGHBOR_STR</a>
<a name="ln3332">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3333">       &quot;Originate default route to this neighbor\n&quot;</a>
<a name="ln3334">       &quot;Route-map to specify criteria to originate default\n&quot;</a>
<a name="ln3335">       &quot;route-map name\n&quot;)</a>
<a name="ln3336"> </a>
<a name="ln3337">/* Set neighbor's BGP port.  */</a>
<a name="ln3338">static int</a>
<a name="ln3339">peer_port_vty (struct vty *vty, const char *ip_str, int afi, </a>
<a name="ln3340">               const char *port_str)</a>
<a name="ln3341">{</a>
<a name="ln3342">  struct peer *peer;</a>
<a name="ln3343">  u_int16_t port;</a>
<a name="ln3344">  struct servent *sp;</a>
<a name="ln3345"> </a>
<a name="ln3346">  peer = peer_lookup_vty (vty, ip_str);</a>
<a name="ln3347">  if (! peer)</a>
<a name="ln3348">    return CMD_WARNING;</a>
<a name="ln3349"> </a>
<a name="ln3350">  if (! port_str)</a>
<a name="ln3351">    { </a>
<a name="ln3352">      sp = getservbyname (&quot;bgp&quot;, &quot;tcp&quot;);</a>
<a name="ln3353">      port = (sp == NULL) ? BGP_PORT_DEFAULT : ntohs (sp-&gt;s_port);</a>
<a name="ln3354">    }</a>
<a name="ln3355">  else</a>
<a name="ln3356">    {</a>
<a name="ln3357">      VTY_GET_INTEGER(&quot;port&quot;, port, port_str);</a>
<a name="ln3358">    }</a>
<a name="ln3359"> </a>
<a name="ln3360">  peer_port_set (peer, port);</a>
<a name="ln3361"> </a>
<a name="ln3362">  return CMD_SUCCESS;</a>
<a name="ln3363">}</a>
<a name="ln3364"> </a>
<a name="ln3365">/* Set specified peer's BGP port.  */</a>
<a name="ln3366">DEFUN (neighbor_port,</a>
<a name="ln3367">       neighbor_port_cmd,</a>
<a name="ln3368">       NEIGHBOR_CMD &quot;port &lt;0-65535&gt;&quot;,</a>
<a name="ln3369">       NEIGHBOR_STR</a>
<a name="ln3370">       NEIGHBOR_ADDR_STR</a>
<a name="ln3371">       &quot;Neighbor's BGP port\n&quot;</a>
<a name="ln3372">       &quot;TCP port number\n&quot;)</a>
<a name="ln3373">{</a>
<a name="ln3374">  return peer_port_vty (vty, argv[0], AFI_IP, argv[1]);</a>
<a name="ln3375">}</a>
<a name="ln3376"> </a>
<a name="ln3377">DEFUN (no_neighbor_port,</a>
<a name="ln3378">       no_neighbor_port_cmd,</a>
<a name="ln3379">       NO_NEIGHBOR_CMD &quot;port&quot;,</a>
<a name="ln3380">       NO_STR</a>
<a name="ln3381">       NEIGHBOR_STR</a>
<a name="ln3382">       NEIGHBOR_ADDR_STR</a>
<a name="ln3383">       &quot;Neighbor's BGP port\n&quot;)</a>
<a name="ln3384">{</a>
<a name="ln3385">  return peer_port_vty (vty, argv[0], AFI_IP, NULL);</a>
<a name="ln3386">}</a>
<a name="ln3387"> </a>
<a name="ln3388">ALIAS (no_neighbor_port,</a>
<a name="ln3389">       no_neighbor_port_val_cmd,</a>
<a name="ln3390">       NO_NEIGHBOR_CMD &quot;port &lt;0-65535&gt;&quot;,</a>
<a name="ln3391">       NO_STR</a>
<a name="ln3392">       NEIGHBOR_STR</a>
<a name="ln3393">       NEIGHBOR_ADDR_STR</a>
<a name="ln3394">       &quot;Neighbor's BGP port\n&quot;</a>
<a name="ln3395">       &quot;TCP port number\n&quot;)</a>
<a name="ln3396"> </a>
<a name="ln3397">/* neighbor weight. */</a>
<a name="ln3398">static int</a>
<a name="ln3399">peer_weight_set_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3400">                     const char *weight_str)</a>
<a name="ln3401">{</a>
<a name="ln3402">  struct peer *peer;</a>
<a name="ln3403">  unsigned long weight;</a>
<a name="ln3404"> </a>
<a name="ln3405">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3406">  if (! peer)</a>
<a name="ln3407">    return CMD_WARNING;</a>
<a name="ln3408"> </a>
<a name="ln3409">  VTY_GET_INTEGER_RANGE(&quot;weight&quot;, weight, weight_str, 0, 65535);</a>
<a name="ln3410"> </a>
<a name="ln3411">  return bgp_vty_return (vty, peer_weight_set (peer, weight));</a>
<a name="ln3412">}</a>
<a name="ln3413"> </a>
<a name="ln3414">static int</a>
<a name="ln3415">peer_weight_unset_vty (struct vty *vty, const char *ip_str)</a>
<a name="ln3416">{</a>
<a name="ln3417">  struct peer *peer;</a>
<a name="ln3418"> </a>
<a name="ln3419">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3420">  if (! peer)</a>
<a name="ln3421">    return CMD_WARNING;</a>
<a name="ln3422"> </a>
<a name="ln3423">  return bgp_vty_return (vty, peer_weight_unset (peer));</a>
<a name="ln3424">}</a>
<a name="ln3425"> </a>
<a name="ln3426">DEFUN (neighbor_weight,</a>
<a name="ln3427">       neighbor_weight_cmd,</a>
<a name="ln3428">       NEIGHBOR_CMD2 &quot;weight &lt;0-65535&gt;&quot;,</a>
<a name="ln3429">       NEIGHBOR_STR</a>
<a name="ln3430">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3431">       &quot;Set default weight for routes from this neighbor\n&quot;</a>
<a name="ln3432">       &quot;default weight\n&quot;)</a>
<a name="ln3433">{</a>
<a name="ln3434">  return peer_weight_set_vty (vty, argv[0], argv[1]);</a>
<a name="ln3435">}</a>
<a name="ln3436"> </a>
<a name="ln3437">DEFUN (no_neighbor_weight,</a>
<a name="ln3438">       no_neighbor_weight_cmd,</a>
<a name="ln3439">       NO_NEIGHBOR_CMD2 &quot;weight&quot;,</a>
<a name="ln3440">       NO_STR</a>
<a name="ln3441">       NEIGHBOR_STR</a>
<a name="ln3442">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3443">       &quot;Set default weight for routes from this neighbor\n&quot;)</a>
<a name="ln3444">{</a>
<a name="ln3445">  return peer_weight_unset_vty (vty, argv[0]);</a>
<a name="ln3446">}</a>
<a name="ln3447"> </a>
<a name="ln3448">ALIAS (no_neighbor_weight,</a>
<a name="ln3449">       no_neighbor_weight_val_cmd,</a>
<a name="ln3450">       NO_NEIGHBOR_CMD2 &quot;weight &lt;0-65535&gt;&quot;,</a>
<a name="ln3451">       NO_STR</a>
<a name="ln3452">       NEIGHBOR_STR</a>
<a name="ln3453">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3454">       &quot;Set default weight for routes from this neighbor\n&quot;</a>
<a name="ln3455">       &quot;default weight\n&quot;)</a>
<a name="ln3456"> </a>
<a name="ln3457">/* Override capability negotiation. */</a>
<a name="ln3458">DEFUN (neighbor_override_capability,</a>
<a name="ln3459">       neighbor_override_capability_cmd,</a>
<a name="ln3460">       NEIGHBOR_CMD2 &quot;override-capability&quot;,</a>
<a name="ln3461">       NEIGHBOR_STR</a>
<a name="ln3462">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3463">       &quot;Override capability negotiation result\n&quot;)</a>
<a name="ln3464">{</a>
<a name="ln3465">  return peer_flag_set_vty (vty, argv[0], PEER_FLAG_OVERRIDE_CAPABILITY);</a>
<a name="ln3466">}</a>
<a name="ln3467"> </a>
<a name="ln3468">DEFUN (no_neighbor_override_capability,</a>
<a name="ln3469">       no_neighbor_override_capability_cmd,</a>
<a name="ln3470">       NO_NEIGHBOR_CMD2 &quot;override-capability&quot;,</a>
<a name="ln3471">       NO_STR</a>
<a name="ln3472">       NEIGHBOR_STR</a>
<a name="ln3473">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3474">       &quot;Override capability negotiation result\n&quot;)</a>
<a name="ln3475">{</a>
<a name="ln3476">  return peer_flag_unset_vty (vty, argv[0], PEER_FLAG_OVERRIDE_CAPABILITY);</a>
<a name="ln3477">}</a>
<a name="ln3478"> </a>
<a name="ln3479">DEFUN (neighbor_strict_capability,</a>
<a name="ln3480">       neighbor_strict_capability_cmd,</a>
<a name="ln3481">       NEIGHBOR_CMD &quot;strict-capability-match&quot;,</a>
<a name="ln3482">       NEIGHBOR_STR</a>
<a name="ln3483">       NEIGHBOR_ADDR_STR</a>
<a name="ln3484">       &quot;Strict capability negotiation match\n&quot;)</a>
<a name="ln3485">{</a>
<a name="ln3486">  return peer_flag_set_vty (vty, argv[0], PEER_FLAG_STRICT_CAP_MATCH);</a>
<a name="ln3487">}</a>
<a name="ln3488"> </a>
<a name="ln3489">DEFUN (no_neighbor_strict_capability,</a>
<a name="ln3490">       no_neighbor_strict_capability_cmd,</a>
<a name="ln3491">       NO_NEIGHBOR_CMD &quot;strict-capability-match&quot;,</a>
<a name="ln3492">       NO_STR</a>
<a name="ln3493">       NEIGHBOR_STR</a>
<a name="ln3494">       NEIGHBOR_ADDR_STR</a>
<a name="ln3495">       &quot;Strict capability negotiation match\n&quot;)</a>
<a name="ln3496">{</a>
<a name="ln3497">  return peer_flag_unset_vty (vty, argv[0], PEER_FLAG_STRICT_CAP_MATCH);</a>
<a name="ln3498">}</a>
<a name="ln3499"> </a>
<a name="ln3500">static int</a>
<a name="ln3501">peer_timers_set_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3502">                     const char *keep_str, const char *hold_str)</a>
<a name="ln3503">{</a>
<a name="ln3504">  int ret;</a>
<a name="ln3505">  struct peer *peer;</a>
<a name="ln3506">  u_int32_t keepalive;</a>
<a name="ln3507">  u_int32_t holdtime;</a>
<a name="ln3508"> </a>
<a name="ln3509">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3510">  if (! peer)</a>
<a name="ln3511">    return CMD_WARNING;</a>
<a name="ln3512"> </a>
<a name="ln3513">  VTY_GET_INTEGER_RANGE (&quot;Keepalive&quot;, keepalive, keep_str, 0, 65535);</a>
<a name="ln3514">  VTY_GET_INTEGER_RANGE (&quot;Holdtime&quot;, holdtime, hold_str, 0, 65535);</a>
<a name="ln3515"> </a>
<a name="ln3516">  ret = peer_timers_set (peer, keepalive, holdtime);</a>
<a name="ln3517"> </a>
<a name="ln3518">  return bgp_vty_return (vty, ret);</a>
<a name="ln3519">}</a>
<a name="ln3520"> </a>
<a name="ln3521">static int</a>
<a name="ln3522">peer_timers_unset_vty (struct vty *vty, const char *ip_str)</a>
<a name="ln3523">{</a>
<a name="ln3524">  int ret;</a>
<a name="ln3525">  struct peer *peer;</a>
<a name="ln3526"> </a>
<a name="ln3527">  peer = peer_lookup_vty (vty, ip_str);</a>
<a name="ln3528">  if (! peer)</a>
<a name="ln3529">    return CMD_WARNING;</a>
<a name="ln3530"> </a>
<a name="ln3531">  ret = peer_timers_unset (peer);</a>
<a name="ln3532"> </a>
<a name="ln3533">  return bgp_vty_return (vty, ret);</a>
<a name="ln3534">}</a>
<a name="ln3535"> </a>
<a name="ln3536">DEFUN (neighbor_timers,</a>
<a name="ln3537">       neighbor_timers_cmd,</a>
<a name="ln3538">       NEIGHBOR_CMD2 &quot;timers &lt;0-65535&gt; &lt;0-65535&gt;&quot;,</a>
<a name="ln3539">       NEIGHBOR_STR</a>
<a name="ln3540">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3541">       &quot;BGP per neighbor timers\n&quot;</a>
<a name="ln3542">       &quot;Keepalive interval\n&quot;</a>
<a name="ln3543">       &quot;Holdtime\n&quot;)</a>
<a name="ln3544">{</a>
<a name="ln3545">  return peer_timers_set_vty (vty, argv[0], argv[1], argv[2]);</a>
<a name="ln3546">}</a>
<a name="ln3547"> </a>
<a name="ln3548">DEFUN (no_neighbor_timers,</a>
<a name="ln3549">       no_neighbor_timers_cmd,</a>
<a name="ln3550">       NO_NEIGHBOR_CMD2 &quot;timers&quot;,</a>
<a name="ln3551">       NO_STR</a>
<a name="ln3552">       NEIGHBOR_STR</a>
<a name="ln3553">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3554">       &quot;BGP per neighbor timers\n&quot;)</a>
<a name="ln3555">{</a>
<a name="ln3556">  return peer_timers_unset_vty (vty, argv[0]);</a>
<a name="ln3557">}</a>
<a name="ln3558"> </a>
<a name="ln3559">static int</a>
<a name="ln3560">peer_timers_connect_set_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3561">                             const char *time_str)</a>
<a name="ln3562">{</a>
<a name="ln3563">  struct peer *peer;</a>
<a name="ln3564">  u_int32_t connect;</a>
<a name="ln3565"> </a>
<a name="ln3566">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3567">  if (! peer)</a>
<a name="ln3568">    return CMD_WARNING;</a>
<a name="ln3569"> </a>
<a name="ln3570">  VTY_GET_INTEGER_RANGE (&quot;Connect time&quot;, connect, time_str, 0, 65535);</a>
<a name="ln3571"> </a>
<a name="ln3572">  return bgp_vty_return (vty, peer_timers_connect_set (peer, connect));</a>
<a name="ln3573">}</a>
<a name="ln3574"> </a>
<a name="ln3575">static int</a>
<a name="ln3576">peer_timers_connect_unset_vty (struct vty *vty, const char *ip_str)</a>
<a name="ln3577">{</a>
<a name="ln3578">  struct peer *peer;</a>
<a name="ln3579"> </a>
<a name="ln3580">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3581">  if (! peer)</a>
<a name="ln3582">    return CMD_WARNING;</a>
<a name="ln3583"> </a>
<a name="ln3584">  return bgp_vty_return (vty, peer_timers_connect_unset (peer));</a>
<a name="ln3585">}</a>
<a name="ln3586"> </a>
<a name="ln3587">DEFUN (neighbor_timers_connect,</a>
<a name="ln3588">       neighbor_timers_connect_cmd,</a>
<a name="ln3589">       NEIGHBOR_CMD2 &quot;timers connect &lt;1-65535&gt;&quot;,</a>
<a name="ln3590">       NEIGHBOR_STR</a>
<a name="ln3591">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3592">       &quot;BGP per neighbor timers\n&quot;</a>
<a name="ln3593">       &quot;BGP connect timer\n&quot;</a>
<a name="ln3594">       &quot;Connect timer\n&quot;)</a>
<a name="ln3595">{</a>
<a name="ln3596">  return peer_timers_connect_set_vty (vty, argv[0], argv[1]);</a>
<a name="ln3597">}</a>
<a name="ln3598"> </a>
<a name="ln3599">DEFUN (no_neighbor_timers_connect,</a>
<a name="ln3600">       no_neighbor_timers_connect_cmd,</a>
<a name="ln3601">       NO_NEIGHBOR_CMD2 &quot;timers connect&quot;,</a>
<a name="ln3602">       NO_STR</a>
<a name="ln3603">       NEIGHBOR_STR</a>
<a name="ln3604">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3605">       &quot;BGP per neighbor timers\n&quot;</a>
<a name="ln3606">       &quot;BGP connect timer\n&quot;)</a>
<a name="ln3607">{</a>
<a name="ln3608">  return peer_timers_connect_unset_vty (vty, argv[0]);</a>
<a name="ln3609">}</a>
<a name="ln3610"> </a>
<a name="ln3611">ALIAS (no_neighbor_timers_connect,</a>
<a name="ln3612">       no_neighbor_timers_connect_val_cmd,</a>
<a name="ln3613">       NO_NEIGHBOR_CMD2 &quot;timers connect &lt;1-65535&gt;&quot;,</a>
<a name="ln3614">       NO_STR</a>
<a name="ln3615">       NEIGHBOR_STR</a>
<a name="ln3616">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3617">       &quot;BGP per neighbor timers\n&quot;</a>
<a name="ln3618">       &quot;BGP connect timer\n&quot;</a>
<a name="ln3619">       &quot;Connect timer\n&quot;)</a>
<a name="ln3620"> </a>
<a name="ln3621">static int</a>
<a name="ln3622">peer_advertise_interval_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3623">                             const char *time_str, int set)  </a>
<a name="ln3624">{</a>
<a name="ln3625">  int ret;</a>
<a name="ln3626">  struct peer *peer;</a>
<a name="ln3627">  u_int32_t routeadv = 0;</a>
<a name="ln3628"> </a>
<a name="ln3629">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3630">  if (! peer)</a>
<a name="ln3631">    return CMD_WARNING;</a>
<a name="ln3632"> </a>
<a name="ln3633">  if (time_str)</a>
<a name="ln3634">    VTY_GET_INTEGER_RANGE (&quot;advertise interval&quot;, routeadv, time_str, 0, 600);</a>
<a name="ln3635"> </a>
<a name="ln3636">  if (set)</a>
<a name="ln3637">    ret = peer_advertise_interval_set (peer, routeadv);</a>
<a name="ln3638">  else</a>
<a name="ln3639">    ret = peer_advertise_interval_unset (peer);</a>
<a name="ln3640"> </a>
<a name="ln3641">  return bgp_vty_return (vty, ret);</a>
<a name="ln3642">}</a>
<a name="ln3643"> </a>
<a name="ln3644">DEFUN (neighbor_advertise_interval,</a>
<a name="ln3645">       neighbor_advertise_interval_cmd,</a>
<a name="ln3646">       NEIGHBOR_CMD2 &quot;advertisement-interval &lt;0-600&gt;&quot;,</a>
<a name="ln3647">       NEIGHBOR_STR</a>
<a name="ln3648">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3649">       &quot;Minimum interval between sending BGP routing updates\n&quot;</a>
<a name="ln3650">       &quot;time in seconds\n&quot;)</a>
<a name="ln3651">{</a>
<a name="ln3652">  return peer_advertise_interval_vty (vty, argv[0], argv[1], 1);</a>
<a name="ln3653">}</a>
<a name="ln3654"> </a>
<a name="ln3655">DEFUN (no_neighbor_advertise_interval,</a>
<a name="ln3656">       no_neighbor_advertise_interval_cmd,</a>
<a name="ln3657">       NO_NEIGHBOR_CMD2 &quot;advertisement-interval&quot;,</a>
<a name="ln3658">       NO_STR</a>
<a name="ln3659">       NEIGHBOR_STR</a>
<a name="ln3660">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3661">       &quot;Minimum interval between sending BGP routing updates\n&quot;)</a>
<a name="ln3662">{</a>
<a name="ln3663">  return peer_advertise_interval_vty (vty, argv[0], NULL, 0);</a>
<a name="ln3664">}</a>
<a name="ln3665"> </a>
<a name="ln3666">ALIAS (no_neighbor_advertise_interval,</a>
<a name="ln3667">       no_neighbor_advertise_interval_val_cmd,</a>
<a name="ln3668">       NO_NEIGHBOR_CMD2 &quot;advertisement-interval &lt;0-600&gt;&quot;,</a>
<a name="ln3669">       NO_STR</a>
<a name="ln3670">       NEIGHBOR_STR</a>
<a name="ln3671">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3672">       &quot;Minimum interval between sending BGP routing updates\n&quot;</a>
<a name="ln3673">       &quot;time in seconds\n&quot;)</a>
<a name="ln3674"> </a>
<a name="ln3675">/* neighbor interface */</a>
<a name="ln3676">static int</a>
<a name="ln3677">peer_interface_vty (struct vty *vty, const char *ip_str, const char *str)</a>
<a name="ln3678">{</a>
<a name="ln3679">  int ret;</a>
<a name="ln3680">  struct peer *peer;</a>
<a name="ln3681"> </a>
<a name="ln3682">  peer = peer_lookup_vty (vty, ip_str);</a>
<a name="ln3683">  if (! peer)</a>
<a name="ln3684">    return CMD_WARNING;</a>
<a name="ln3685"> </a>
<a name="ln3686">  if (str)</a>
<a name="ln3687">    ret = peer_interface_set (peer, str);</a>
<a name="ln3688">  else</a>
<a name="ln3689">    ret = peer_interface_unset (peer);</a>
<a name="ln3690"> </a>
<a name="ln3691">  return bgp_vty_return (vty, ret);</a>
<a name="ln3692">}</a>
<a name="ln3693"> </a>
<a name="ln3694">DEFUN (neighbor_interface,</a>
<a name="ln3695">       neighbor_interface_cmd,</a>
<a name="ln3696">       NEIGHBOR_CMD &quot;interface WORD&quot;,</a>
<a name="ln3697">       NEIGHBOR_STR</a>
<a name="ln3698">       NEIGHBOR_ADDR_STR</a>
<a name="ln3699">       &quot;Interface\n&quot;</a>
<a name="ln3700">       &quot;Interface name\n&quot;)</a>
<a name="ln3701">{</a>
<a name="ln3702">  return peer_interface_vty (vty, argv[0], argv[1]);</a>
<a name="ln3703">}</a>
<a name="ln3704"> </a>
<a name="ln3705">DEFUN (no_neighbor_interface,</a>
<a name="ln3706">       no_neighbor_interface_cmd,</a>
<a name="ln3707">       NO_NEIGHBOR_CMD &quot;interface WORD&quot;,</a>
<a name="ln3708">       NO_STR</a>
<a name="ln3709">       NEIGHBOR_STR</a>
<a name="ln3710">       NEIGHBOR_ADDR_STR</a>
<a name="ln3711">       &quot;Interface\n&quot;</a>
<a name="ln3712">       &quot;Interface name\n&quot;)</a>
<a name="ln3713">{</a>
<a name="ln3714">  return peer_interface_vty (vty, argv[0], NULL);</a>
<a name="ln3715">}</a>
<a name="ln3716"> </a>
<a name="ln3717">/* Set distribute list to the peer. */</a>
<a name="ln3718">static int</a>
<a name="ln3719">peer_distribute_set_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3720">                         afi_t afi, safi_t safi,</a>
<a name="ln3721">			 const char *name_str, const char *direct_str)</a>
<a name="ln3722">{</a>
<a name="ln3723">  int ret;</a>
<a name="ln3724">  struct peer *peer;</a>
<a name="ln3725">  int direct = FILTER_IN;</a>
<a name="ln3726"> </a>
<a name="ln3727">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3728">  if (! peer)</a>
<a name="ln3729">    return CMD_WARNING;</a>
<a name="ln3730"> </a>
<a name="ln3731">  /* Check filter direction. */</a>
<a name="ln3732">  if (strncmp (direct_str, &quot;i&quot;, 1) == 0)</a>
<a name="ln3733">    direct = FILTER_IN;</a>
<a name="ln3734">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3735">    direct = FILTER_OUT;</a>
<a name="ln3736"> </a>
<a name="ln3737">  ret = peer_distribute_set (peer, afi, safi, direct, name_str);</a>
<a name="ln3738"> </a>
<a name="ln3739">  return bgp_vty_return (vty, ret);</a>
<a name="ln3740">}</a>
<a name="ln3741"> </a>
<a name="ln3742">static int</a>
<a name="ln3743">peer_distribute_unset_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln3744">			   safi_t safi, const char *direct_str)</a>
<a name="ln3745">{</a>
<a name="ln3746">  int ret;</a>
<a name="ln3747">  struct peer *peer;</a>
<a name="ln3748">  int direct = FILTER_IN;</a>
<a name="ln3749"> </a>
<a name="ln3750">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3751">  if (! peer)</a>
<a name="ln3752">    return CMD_WARNING;</a>
<a name="ln3753"> </a>
<a name="ln3754">  /* Check filter direction. */</a>
<a name="ln3755">  if (strncmp (direct_str, &quot;i&quot;, 1) == 0)</a>
<a name="ln3756">    direct = FILTER_IN;</a>
<a name="ln3757">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3758">    direct = FILTER_OUT;</a>
<a name="ln3759"> </a>
<a name="ln3760">  ret = peer_distribute_unset (peer, afi, safi, direct);</a>
<a name="ln3761"> </a>
<a name="ln3762">  return bgp_vty_return (vty, ret);</a>
<a name="ln3763">}</a>
<a name="ln3764"> </a>
<a name="ln3765">DEFUN (neighbor_distribute_list,</a>
<a name="ln3766">       neighbor_distribute_list_cmd,</a>
<a name="ln3767">       NEIGHBOR_CMD2 &quot;distribute-list (&lt;1-199&gt;|&lt;1300-2699&gt;|WORD) (in|out)&quot;,</a>
<a name="ln3768">       NEIGHBOR_STR</a>
<a name="ln3769">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3770">       &quot;Filter updates to/from this neighbor\n&quot;</a>
<a name="ln3771">       &quot;IP access-list number\n&quot;</a>
<a name="ln3772">       &quot;IP access-list number (expanded range)\n&quot;</a>
<a name="ln3773">       &quot;IP Access-list name\n&quot;</a>
<a name="ln3774">       &quot;Filter incoming updates\n&quot;</a>
<a name="ln3775">       &quot;Filter outgoing updates\n&quot;)</a>
<a name="ln3776">{</a>
<a name="ln3777">  return peer_distribute_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3778">				  bgp_node_safi (vty), argv[1], argv[2]);</a>
<a name="ln3779">}</a>
<a name="ln3780"> </a>
<a name="ln3781">DEFUN (no_neighbor_distribute_list,</a>
<a name="ln3782">       no_neighbor_distribute_list_cmd,</a>
<a name="ln3783">       NO_NEIGHBOR_CMD2 &quot;distribute-list (&lt;1-199&gt;|&lt;1300-2699&gt;|WORD) (in|out)&quot;,</a>
<a name="ln3784">       NO_STR</a>
<a name="ln3785">       NEIGHBOR_STR</a>
<a name="ln3786">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3787">       &quot;Filter updates to/from this neighbor\n&quot;</a>
<a name="ln3788">       &quot;IP access-list number\n&quot;</a>
<a name="ln3789">       &quot;IP access-list number (expanded range)\n&quot;</a>
<a name="ln3790">       &quot;IP Access-list name\n&quot;</a>
<a name="ln3791">       &quot;Filter incoming updates\n&quot;</a>
<a name="ln3792">       &quot;Filter outgoing updates\n&quot;)</a>
<a name="ln3793">{</a>
<a name="ln3794">  return peer_distribute_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3795">				    bgp_node_safi (vty), argv[2]);</a>
<a name="ln3796">}</a>
<a name="ln3797"> </a>
<a name="ln3798">/* Set prefix list to the peer. */</a>
<a name="ln3799">static int</a>
<a name="ln3800">peer_prefix_list_set_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln3801">			  safi_t safi, const char *name_str, </a>
<a name="ln3802">                          const char *direct_str)</a>
<a name="ln3803">{</a>
<a name="ln3804">  int ret;</a>
<a name="ln3805">  struct peer *peer;</a>
<a name="ln3806">  int direct = FILTER_IN;</a>
<a name="ln3807"> </a>
<a name="ln3808">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3809">  if (! peer)</a>
<a name="ln3810">    return CMD_WARNING;</a>
<a name="ln3811"> </a>
<a name="ln3812">  /* Check filter direction. */</a>
<a name="ln3813">  if (strncmp (direct_str, &quot;i&quot;, 1) == 0)</a>
<a name="ln3814">    direct = FILTER_IN;</a>
<a name="ln3815">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3816">    direct = FILTER_OUT;</a>
<a name="ln3817"> </a>
<a name="ln3818">  ret = peer_prefix_list_set (peer, afi, safi, direct, name_str);</a>
<a name="ln3819"> </a>
<a name="ln3820">  return bgp_vty_return (vty, ret);</a>
<a name="ln3821">}</a>
<a name="ln3822"> </a>
<a name="ln3823">static int</a>
<a name="ln3824">peer_prefix_list_unset_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln3825">			    safi_t safi, const char *direct_str)</a>
<a name="ln3826">{</a>
<a name="ln3827">  int ret;</a>
<a name="ln3828">  struct peer *peer;</a>
<a name="ln3829">  int direct = FILTER_IN;</a>
<a name="ln3830"> </a>
<a name="ln3831">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3832">  if (! peer)</a>
<a name="ln3833">    return CMD_WARNING;</a>
<a name="ln3834">  </a>
<a name="ln3835">  /* Check filter direction. */</a>
<a name="ln3836">  if (strncmp (direct_str, &quot;i&quot;, 1) == 0)</a>
<a name="ln3837">    direct = FILTER_IN;</a>
<a name="ln3838">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3839">    direct = FILTER_OUT;</a>
<a name="ln3840"> </a>
<a name="ln3841">  ret = peer_prefix_list_unset (peer, afi, safi, direct);</a>
<a name="ln3842"> </a>
<a name="ln3843">  return bgp_vty_return (vty, ret);</a>
<a name="ln3844">}</a>
<a name="ln3845"> </a>
<a name="ln3846">DEFUN (neighbor_prefix_list,</a>
<a name="ln3847">       neighbor_prefix_list_cmd,</a>
<a name="ln3848">       NEIGHBOR_CMD2 &quot;prefix-list WORD (in|out)&quot;,</a>
<a name="ln3849">       NEIGHBOR_STR</a>
<a name="ln3850">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3851">       &quot;Filter updates to/from this neighbor\n&quot;</a>
<a name="ln3852">       &quot;Name of a prefix list\n&quot;</a>
<a name="ln3853">       &quot;Filter incoming updates\n&quot;</a>
<a name="ln3854">       &quot;Filter outgoing updates\n&quot;)</a>
<a name="ln3855">{</a>
<a name="ln3856">  return peer_prefix_list_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3857">				   bgp_node_safi (vty), argv[1], argv[2]);</a>
<a name="ln3858">}</a>
<a name="ln3859"> </a>
<a name="ln3860">DEFUN (no_neighbor_prefix_list,</a>
<a name="ln3861">       no_neighbor_prefix_list_cmd,</a>
<a name="ln3862">       NO_NEIGHBOR_CMD2 &quot;prefix-list WORD (in|out)&quot;,</a>
<a name="ln3863">       NO_STR</a>
<a name="ln3864">       NEIGHBOR_STR</a>
<a name="ln3865">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3866">       &quot;Filter updates to/from this neighbor\n&quot;</a>
<a name="ln3867">       &quot;Name of a prefix list\n&quot;</a>
<a name="ln3868">       &quot;Filter incoming updates\n&quot;</a>
<a name="ln3869">       &quot;Filter outgoing updates\n&quot;)</a>
<a name="ln3870">{</a>
<a name="ln3871">  return peer_prefix_list_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3872">				     bgp_node_safi (vty), argv[2]);</a>
<a name="ln3873">}</a>
<a name="ln3874"> </a>
<a name="ln3875">static int</a>
<a name="ln3876">peer_aslist_set_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3877">                     afi_t afi, safi_t safi,</a>
<a name="ln3878">		     const char *name_str, const char *direct_str)</a>
<a name="ln3879">{</a>
<a name="ln3880">  int ret;</a>
<a name="ln3881">  struct peer *peer;</a>
<a name="ln3882">  int direct = FILTER_IN;</a>
<a name="ln3883"> </a>
<a name="ln3884">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3885">  if (! peer)</a>
<a name="ln3886">    return CMD_WARNING;</a>
<a name="ln3887"> </a>
<a name="ln3888">  /* Check filter direction. */</a>
<a name="ln3889">  if (strncmp (direct_str, &quot;i&quot;, 1) == 0)</a>
<a name="ln3890">    direct = FILTER_IN;</a>
<a name="ln3891">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3892">    direct = FILTER_OUT;</a>
<a name="ln3893"> </a>
<a name="ln3894">  ret = peer_aslist_set (peer, afi, safi, direct, name_str);</a>
<a name="ln3895"> </a>
<a name="ln3896">  return bgp_vty_return (vty, ret);</a>
<a name="ln3897">}</a>
<a name="ln3898"> </a>
<a name="ln3899">static int</a>
<a name="ln3900">peer_aslist_unset_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3901">                       afi_t afi, safi_t safi,</a>
<a name="ln3902">		       const char *direct_str)</a>
<a name="ln3903">{</a>
<a name="ln3904">  int ret;</a>
<a name="ln3905">  struct peer *peer;</a>
<a name="ln3906">  int direct = FILTER_IN;</a>
<a name="ln3907"> </a>
<a name="ln3908">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3909">  if (! peer)</a>
<a name="ln3910">    return CMD_WARNING;</a>
<a name="ln3911"> </a>
<a name="ln3912">  /* Check filter direction. */</a>
<a name="ln3913">  if (strncmp (direct_str, &quot;i&quot;, 1) == 0)</a>
<a name="ln3914">    direct = FILTER_IN;</a>
<a name="ln3915">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3916">    direct = FILTER_OUT;</a>
<a name="ln3917"> </a>
<a name="ln3918">  ret = peer_aslist_unset (peer, afi, safi, direct);</a>
<a name="ln3919"> </a>
<a name="ln3920">  return bgp_vty_return (vty, ret);</a>
<a name="ln3921">}</a>
<a name="ln3922"> </a>
<a name="ln3923">DEFUN (neighbor_filter_list,</a>
<a name="ln3924">       neighbor_filter_list_cmd,</a>
<a name="ln3925">       NEIGHBOR_CMD2 &quot;filter-list WORD (in|out)&quot;,</a>
<a name="ln3926">       NEIGHBOR_STR</a>
<a name="ln3927">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3928">       &quot;Establish BGP filters\n&quot;</a>
<a name="ln3929">       &quot;AS path access-list name\n&quot;</a>
<a name="ln3930">       &quot;Filter incoming routes\n&quot;</a>
<a name="ln3931">       &quot;Filter outgoing routes\n&quot;)</a>
<a name="ln3932">{</a>
<a name="ln3933">  return peer_aslist_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3934">			      bgp_node_safi (vty), argv[1], argv[2]);</a>
<a name="ln3935">}</a>
<a name="ln3936"> </a>
<a name="ln3937">DEFUN (no_neighbor_filter_list,</a>
<a name="ln3938">       no_neighbor_filter_list_cmd,</a>
<a name="ln3939">       NO_NEIGHBOR_CMD2 &quot;filter-list WORD (in|out)&quot;,</a>
<a name="ln3940">       NO_STR</a>
<a name="ln3941">       NEIGHBOR_STR</a>
<a name="ln3942">       NEIGHBOR_ADDR_STR2</a>
<a name="ln3943">       &quot;Establish BGP filters\n&quot;</a>
<a name="ln3944">       &quot;AS path access-list name\n&quot;</a>
<a name="ln3945">       &quot;Filter incoming routes\n&quot;</a>
<a name="ln3946">       &quot;Filter outgoing routes\n&quot;)</a>
<a name="ln3947">{</a>
<a name="ln3948">  return peer_aslist_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln3949">				bgp_node_safi (vty), argv[2]);</a>
<a name="ln3950">}</a>
<a name="ln3951"> </a>
<a name="ln3952">/* Set route-map to the peer. */</a>
<a name="ln3953">static int</a>
<a name="ln3954">peer_route_map_set_vty (struct vty *vty, const char *ip_str, </a>
<a name="ln3955">                        afi_t afi, safi_t safi,</a>
<a name="ln3956">			const char *name_str, const char *direct_str)</a>
<a name="ln3957">{</a>
<a name="ln3958">  int ret;</a>
<a name="ln3959">  struct peer *peer;</a>
<a name="ln3960">  int direct = RMAP_IN;</a>
<a name="ln3961"> </a>
<a name="ln3962">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3963">  if (! peer)</a>
<a name="ln3964">    return CMD_WARNING;</a>
<a name="ln3965"> </a>
<a name="ln3966">  /* Check filter direction. */</a>
<a name="ln3967">  if (strncmp (direct_str, &quot;in&quot;, 2) == 0)</a>
<a name="ln3968">    direct = RMAP_IN;</a>
<a name="ln3969">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3970">    direct = RMAP_OUT;</a>
<a name="ln3971">  else if (strncmp (direct_str, &quot;im&quot;, 2) == 0)</a>
<a name="ln3972">    direct = RMAP_IMPORT;</a>
<a name="ln3973">  else if (strncmp (direct_str, &quot;e&quot;, 1) == 0)</a>
<a name="ln3974">    direct = RMAP_EXPORT;</a>
<a name="ln3975"> </a>
<a name="ln3976">  ret = peer_route_map_set (peer, afi, safi, direct, name_str);</a>
<a name="ln3977"> </a>
<a name="ln3978">  return bgp_vty_return (vty, ret);</a>
<a name="ln3979">}</a>
<a name="ln3980"> </a>
<a name="ln3981">static int</a>
<a name="ln3982">peer_route_map_unset_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln3983">			  safi_t safi, const char *direct_str)</a>
<a name="ln3984">{</a>
<a name="ln3985">  int ret;</a>
<a name="ln3986">  struct peer *peer;</a>
<a name="ln3987">  int direct = RMAP_IN;</a>
<a name="ln3988"> </a>
<a name="ln3989">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln3990">  if (! peer)</a>
<a name="ln3991">    return CMD_WARNING;</a>
<a name="ln3992"> </a>
<a name="ln3993">  /* Check filter direction. */</a>
<a name="ln3994">  if (strncmp (direct_str, &quot;in&quot;, 2) == 0)</a>
<a name="ln3995">    direct = RMAP_IN;</a>
<a name="ln3996">  else if (strncmp (direct_str, &quot;o&quot;, 1) == 0)</a>
<a name="ln3997">    direct = RMAP_OUT;</a>
<a name="ln3998">  else if (strncmp (direct_str, &quot;im&quot;, 2) == 0)</a>
<a name="ln3999">    direct = RMAP_IMPORT;</a>
<a name="ln4000">  else if (strncmp (direct_str, &quot;e&quot;, 1) == 0)</a>
<a name="ln4001">    direct = RMAP_EXPORT;</a>
<a name="ln4002"> </a>
<a name="ln4003">  ret = peer_route_map_unset (peer, afi, safi, direct);</a>
<a name="ln4004"> </a>
<a name="ln4005">  return bgp_vty_return (vty, ret);</a>
<a name="ln4006">}</a>
<a name="ln4007"> </a>
<a name="ln4008">DEFUN (neighbor_route_map,</a>
<a name="ln4009">       neighbor_route_map_cmd,</a>
<a name="ln4010">       NEIGHBOR_CMD2 &quot;route-map WORD (in|out|import|export)&quot;,</a>
<a name="ln4011">       NEIGHBOR_STR</a>
<a name="ln4012">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4013">       &quot;Apply route map to neighbor\n&quot;</a>
<a name="ln4014">       &quot;Name of route map\n&quot;</a>
<a name="ln4015">       &quot;Apply map to incoming routes\n&quot;</a>
<a name="ln4016">       &quot;Apply map to outbound routes\n&quot;</a>
<a name="ln4017">       &quot;Apply map to routes going into a Route-Server client's table\n&quot;</a>
<a name="ln4018">       &quot;Apply map to routes coming from a Route-Server client&quot;)</a>
<a name="ln4019">{</a>
<a name="ln4020">  return peer_route_map_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4021">				 bgp_node_safi (vty), argv[1], argv[2]);</a>
<a name="ln4022">}</a>
<a name="ln4023"> </a>
<a name="ln4024">DEFUN (no_neighbor_route_map,</a>
<a name="ln4025">       no_neighbor_route_map_cmd,</a>
<a name="ln4026">       NO_NEIGHBOR_CMD2 &quot;route-map WORD (in|out|import|export)&quot;,</a>
<a name="ln4027">       NO_STR</a>
<a name="ln4028">       NEIGHBOR_STR</a>
<a name="ln4029">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4030">       &quot;Apply route map to neighbor\n&quot;</a>
<a name="ln4031">       &quot;Name of route map\n&quot;</a>
<a name="ln4032">       &quot;Apply map to incoming routes\n&quot;</a>
<a name="ln4033">       &quot;Apply map to outbound routes\n&quot;</a>
<a name="ln4034">       &quot;Apply map to routes going into a Route-Server client's table\n&quot;</a>
<a name="ln4035">       &quot;Apply map to routes coming from a Route-Server client&quot;)</a>
<a name="ln4036">{</a>
<a name="ln4037">  return peer_route_map_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4038">				   bgp_node_safi (vty), argv[2]);</a>
<a name="ln4039">}</a>
<a name="ln4040"> </a>
<a name="ln4041">/* Set unsuppress-map to the peer. */</a>
<a name="ln4042">static int</a>
<a name="ln4043">peer_unsuppress_map_set_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln4044">			     safi_t safi, const char *name_str)</a>
<a name="ln4045">{</a>
<a name="ln4046">  int ret;</a>
<a name="ln4047">  struct peer *peer;</a>
<a name="ln4048"> </a>
<a name="ln4049">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln4050">  if (! peer)</a>
<a name="ln4051">    return CMD_WARNING;</a>
<a name="ln4052"> </a>
<a name="ln4053">  ret = peer_unsuppress_map_set (peer, afi, safi, name_str);</a>
<a name="ln4054"> </a>
<a name="ln4055">  return bgp_vty_return (vty, ret);</a>
<a name="ln4056">}</a>
<a name="ln4057"> </a>
<a name="ln4058">/* Unset route-map from the peer. */</a>
<a name="ln4059">static int</a>
<a name="ln4060">peer_unsuppress_map_unset_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln4061">			       safi_t safi)</a>
<a name="ln4062">{</a>
<a name="ln4063">  int ret;</a>
<a name="ln4064">  struct peer *peer;</a>
<a name="ln4065"> </a>
<a name="ln4066">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln4067">  if (! peer)</a>
<a name="ln4068">    return CMD_WARNING;</a>
<a name="ln4069"> </a>
<a name="ln4070">  ret = peer_unsuppress_map_unset (peer, afi, safi);</a>
<a name="ln4071"> </a>
<a name="ln4072">  return bgp_vty_return (vty, ret);</a>
<a name="ln4073">}</a>
<a name="ln4074"> </a>
<a name="ln4075">DEFUN (neighbor_unsuppress_map,</a>
<a name="ln4076">       neighbor_unsuppress_map_cmd,</a>
<a name="ln4077">       NEIGHBOR_CMD2 &quot;unsuppress-map WORD&quot;,</a>
<a name="ln4078">       NEIGHBOR_STR</a>
<a name="ln4079">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4080">       &quot;Route-map to selectively unsuppress suppressed routes\n&quot;</a>
<a name="ln4081">       &quot;Name of route map\n&quot;)</a>
<a name="ln4082">{</a>
<a name="ln4083">  return peer_unsuppress_map_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4084">				      bgp_node_safi (vty), argv[1]);</a>
<a name="ln4085">}</a>
<a name="ln4086"> </a>
<a name="ln4087">DEFUN (no_neighbor_unsuppress_map,</a>
<a name="ln4088">       no_neighbor_unsuppress_map_cmd,</a>
<a name="ln4089">       NO_NEIGHBOR_CMD2 &quot;unsuppress-map WORD&quot;,</a>
<a name="ln4090">       NO_STR</a>
<a name="ln4091">       NEIGHBOR_STR</a>
<a name="ln4092">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4093">       &quot;Route-map to selectively unsuppress suppressed routes\n&quot;</a>
<a name="ln4094">       &quot;Name of route map\n&quot;)</a>
<a name="ln4095">{</a>
<a name="ln4096">  return peer_unsuppress_map_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4097">					bgp_node_safi (vty));</a>
<a name="ln4098">}</a>
<a name="ln4099"> </a>
<a name="ln4100">static int</a>
<a name="ln4101">peer_maximum_prefix_set_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln4102">			     safi_t safi, const char *num_str,  </a>
<a name="ln4103">			     const char *threshold_str, int warning,</a>
<a name="ln4104">			     const char *restart_str)</a>
<a name="ln4105">{</a>
<a name="ln4106">  int ret;</a>
<a name="ln4107">  struct peer *peer;</a>
<a name="ln4108">  u_int32_t max;</a>
<a name="ln4109">  u_char threshold;</a>
<a name="ln4110">  u_int16_t restart;</a>
<a name="ln4111"> </a>
<a name="ln4112">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln4113">  if (! peer)</a>
<a name="ln4114">    return CMD_WARNING;</a>
<a name="ln4115"> </a>
<a name="ln4116">  VTY_GET_INTEGER (&quot;maximum number&quot;, max, num_str);</a>
<a name="ln4117">  if (threshold_str)</a>
<a name="ln4118">    threshold = atoi (threshold_str);</a>
<a name="ln4119">  else</a>
<a name="ln4120">    threshold = MAXIMUM_PREFIX_THRESHOLD_DEFAULT;</a>
<a name="ln4121"> </a>
<a name="ln4122">  if (restart_str)</a>
<a name="ln4123">    restart = atoi (restart_str);</a>
<a name="ln4124">  else</a>
<a name="ln4125">    restart = 0;</a>
<a name="ln4126"> </a>
<a name="ln4127">  ret = peer_maximum_prefix_set (peer, afi, safi, max, threshold, warning, restart);</a>
<a name="ln4128"> </a>
<a name="ln4129">  return bgp_vty_return (vty, ret);</a>
<a name="ln4130">}</a>
<a name="ln4131"> </a>
<a name="ln4132">static int</a>
<a name="ln4133">peer_maximum_prefix_unset_vty (struct vty *vty, const char *ip_str, afi_t afi,</a>
<a name="ln4134">			       safi_t safi)</a>
<a name="ln4135">{</a>
<a name="ln4136">  int ret;</a>
<a name="ln4137">  struct peer *peer;</a>
<a name="ln4138"> </a>
<a name="ln4139">  peer = peer_and_group_lookup_vty (vty, ip_str);</a>
<a name="ln4140">  if (! peer)</a>
<a name="ln4141">    return CMD_WARNING;</a>
<a name="ln4142"> </a>
<a name="ln4143">  ret = peer_maximum_prefix_unset (peer, afi, safi);</a>
<a name="ln4144"> </a>
<a name="ln4145">  return bgp_vty_return (vty, ret);</a>
<a name="ln4146">}</a>
<a name="ln4147"> </a>
<a name="ln4148">/* Maximum number of prefix configuration.  prefix count is different</a>
<a name="ln4149">   for each peer configuration.  So this configuration can be set for</a>
<a name="ln4150">   each peer configuration. */</a>
<a name="ln4151">DEFUN (neighbor_maximum_prefix,</a>
<a name="ln4152">       neighbor_maximum_prefix_cmd,</a>
<a name="ln4153">       NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt;&quot;,</a>
<a name="ln4154">       NEIGHBOR_STR</a>
<a name="ln4155">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4156">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4157">       &quot;maximum no. of prefix limit\n&quot;)</a>
<a name="ln4158">{</a>
<a name="ln4159">  return peer_maximum_prefix_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4160">				      bgp_node_safi (vty), argv[1], NULL, 0,</a>
<a name="ln4161">				      NULL);</a>
<a name="ln4162">}</a>
<a name="ln4163"> </a>
<a name="ln4164">DEFUN (neighbor_maximum_prefix_threshold,</a>
<a name="ln4165">       neighbor_maximum_prefix_threshold_cmd,</a>
<a name="ln4166">       NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; &lt;1-100&gt;&quot;,</a>
<a name="ln4167">       NEIGHBOR_STR</a>
<a name="ln4168">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4169">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4170">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4171">       &quot;Threshold value (%) at which to generate a warning msg\n&quot;)</a>
<a name="ln4172">{</a>
<a name="ln4173">  return peer_maximum_prefix_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4174">				      bgp_node_safi (vty), argv[1], argv[2], 0,</a>
<a name="ln4175">				      NULL);</a>
<a name="ln4176">}</a>
<a name="ln4177"> </a>
<a name="ln4178">DEFUN (neighbor_maximum_prefix_warning,</a>
<a name="ln4179">       neighbor_maximum_prefix_warning_cmd,</a>
<a name="ln4180">       NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; warning-only&quot;,</a>
<a name="ln4181">       NEIGHBOR_STR</a>
<a name="ln4182">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4183">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4184">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4185">       &quot;Only give warning message when limit is exceeded\n&quot;)</a>
<a name="ln4186">{</a>
<a name="ln4187">  return peer_maximum_prefix_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4188">				      bgp_node_safi (vty), argv[1], NULL, 1,</a>
<a name="ln4189">				      NULL);</a>
<a name="ln4190">}</a>
<a name="ln4191"> </a>
<a name="ln4192">DEFUN (neighbor_maximum_prefix_threshold_warning,</a>
<a name="ln4193">       neighbor_maximum_prefix_threshold_warning_cmd,</a>
<a name="ln4194">       NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; &lt;1-100&gt; warning-only&quot;,</a>
<a name="ln4195">       NEIGHBOR_STR</a>
<a name="ln4196">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4197">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4198">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4199">       &quot;Threshold value (%) at which to generate a warning msg\n&quot;</a>
<a name="ln4200">       &quot;Only give warning message when limit is exceeded\n&quot;)</a>
<a name="ln4201">{</a>
<a name="ln4202">  return peer_maximum_prefix_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4203">				      bgp_node_safi (vty), argv[1], argv[2], 1, NULL);</a>
<a name="ln4204">}</a>
<a name="ln4205"> </a>
<a name="ln4206">DEFUN (neighbor_maximum_prefix_restart,</a>
<a name="ln4207">       neighbor_maximum_prefix_restart_cmd,</a>
<a name="ln4208">       NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; restart &lt;1-65535&gt;&quot;,</a>
<a name="ln4209">       NEIGHBOR_STR</a>
<a name="ln4210">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4211">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4212">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4213">       &quot;Restart bgp connection after limit is exceeded\n&quot;</a>
<a name="ln4214">       &quot;Restart interval in minutes&quot;)</a>
<a name="ln4215">{</a>
<a name="ln4216">  return peer_maximum_prefix_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4217">				      bgp_node_safi (vty), argv[1], NULL, 0, argv[2]);</a>
<a name="ln4218">}</a>
<a name="ln4219"> </a>
<a name="ln4220">DEFUN (neighbor_maximum_prefix_threshold_restart,</a>
<a name="ln4221">       neighbor_maximum_prefix_threshold_restart_cmd,</a>
<a name="ln4222">       NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; &lt;1-100&gt; restart &lt;1-65535&gt;&quot;,</a>
<a name="ln4223">       NEIGHBOR_STR</a>
<a name="ln4224">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4225">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4226">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4227">       &quot;Threshold value (%) at which to generate a warning msg\n&quot;</a>
<a name="ln4228">       &quot;Restart bgp connection after limit is exceeded\n&quot;</a>
<a name="ln4229">       &quot;Restart interval in minutes&quot;)</a>
<a name="ln4230">{</a>
<a name="ln4231">  return peer_maximum_prefix_set_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4232">				      bgp_node_safi (vty), argv[1], argv[2], 0, argv[3]);</a>
<a name="ln4233">}</a>
<a name="ln4234"> </a>
<a name="ln4235">DEFUN (no_neighbor_maximum_prefix,</a>
<a name="ln4236">       no_neighbor_maximum_prefix_cmd,</a>
<a name="ln4237">       NO_NEIGHBOR_CMD2 &quot;maximum-prefix&quot;,</a>
<a name="ln4238">       NO_STR</a>
<a name="ln4239">       NEIGHBOR_STR</a>
<a name="ln4240">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4241">       &quot;Maximum number of prefix accept from this peer\n&quot;)</a>
<a name="ln4242">{</a>
<a name="ln4243">  return peer_maximum_prefix_unset_vty (vty, argv[0], bgp_node_afi (vty),</a>
<a name="ln4244">					bgp_node_safi (vty));</a>
<a name="ln4245">}</a>
<a name="ln4246"> </a>
<a name="ln4247">ALIAS (no_neighbor_maximum_prefix,</a>
<a name="ln4248">       no_neighbor_maximum_prefix_val_cmd,</a>
<a name="ln4249">       NO_NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt;&quot;,</a>
<a name="ln4250">       NO_STR</a>
<a name="ln4251">       NEIGHBOR_STR</a>
<a name="ln4252">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4253">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4254">       &quot;maximum no. of prefix limit\n&quot;)</a>
<a name="ln4255"> </a>
<a name="ln4256">ALIAS (no_neighbor_maximum_prefix,</a>
<a name="ln4257">       no_neighbor_maximum_prefix_threshold_cmd,</a>
<a name="ln4258">       NO_NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; warning-only&quot;,</a>
<a name="ln4259">       NO_STR</a>
<a name="ln4260">       NEIGHBOR_STR</a>
<a name="ln4261">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4262">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4263">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4264">       &quot;Threshold value (%) at which to generate a warning msg\n&quot;)</a>
<a name="ln4265"> </a>
<a name="ln4266">ALIAS (no_neighbor_maximum_prefix,</a>
<a name="ln4267">       no_neighbor_maximum_prefix_warning_cmd,</a>
<a name="ln4268">       NO_NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; warning-only&quot;,</a>
<a name="ln4269">       NO_STR</a>
<a name="ln4270">       NEIGHBOR_STR</a>
<a name="ln4271">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4272">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4273">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4274">       &quot;Only give warning message when limit is exceeded\n&quot;)</a>
<a name="ln4275"> </a>
<a name="ln4276">ALIAS (no_neighbor_maximum_prefix,</a>
<a name="ln4277">       no_neighbor_maximum_prefix_threshold_warning_cmd,</a>
<a name="ln4278">       NO_NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; &lt;1-100&gt; warning-only&quot;,</a>
<a name="ln4279">       NO_STR</a>
<a name="ln4280">       NEIGHBOR_STR</a>
<a name="ln4281">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4282">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4283">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4284">       &quot;Threshold value (%) at which to generate a warning msg\n&quot;</a>
<a name="ln4285">       &quot;Only give warning message when limit is exceeded\n&quot;)</a>
<a name="ln4286"> </a>
<a name="ln4287">ALIAS (no_neighbor_maximum_prefix,</a>
<a name="ln4288">       no_neighbor_maximum_prefix_restart_cmd,</a>
<a name="ln4289">       NO_NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; restart &lt;1-65535&gt;&quot;,</a>
<a name="ln4290">       NO_STR</a>
<a name="ln4291">       NEIGHBOR_STR</a>
<a name="ln4292">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4293">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4294">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4295">       &quot;Restart bgp connection after limit is exceeded\n&quot;</a>
<a name="ln4296">       &quot;Restart interval in minutes&quot;)</a>
<a name="ln4297"> </a>
<a name="ln4298">ALIAS (no_neighbor_maximum_prefix,</a>
<a name="ln4299">       no_neighbor_maximum_prefix_threshold_restart_cmd,</a>
<a name="ln4300">       NO_NEIGHBOR_CMD2 &quot;maximum-prefix &lt;1-4294967295&gt; &lt;1-100&gt; restart &lt;1-65535&gt;&quot;,</a>
<a name="ln4301">       NO_STR</a>
<a name="ln4302">       NEIGHBOR_STR</a>
<a name="ln4303">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4304">       &quot;Maximum number of prefix accept from this peer\n&quot;</a>
<a name="ln4305">       &quot;maximum no. of prefix limit\n&quot;</a>
<a name="ln4306">       &quot;Threshold value (%) at which to generate a warning msg\n&quot;</a>
<a name="ln4307">       &quot;Restart bgp connection after limit is exceeded\n&quot;</a>
<a name="ln4308">       &quot;Restart interval in minutes&quot;)</a>
<a name="ln4309"> </a>
<a name="ln4310">/* &quot;neighbor allowas-in&quot; */</a>
<a name="ln4311">DEFUN (neighbor_allowas_in,</a>
<a name="ln4312">       neighbor_allowas_in_cmd,</a>
<a name="ln4313">       NEIGHBOR_CMD2 &quot;allowas-in&quot;,</a>
<a name="ln4314">       NEIGHBOR_STR</a>
<a name="ln4315">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4316">       &quot;Accept as-path with my AS present in it\n&quot;)</a>
<a name="ln4317">{</a>
<a name="ln4318">  int ret;</a>
<a name="ln4319">  struct peer *peer;</a>
<a name="ln4320">  unsigned int allow_num;</a>
<a name="ln4321"> </a>
<a name="ln4322">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln4323">  if (! peer)</a>
<a name="ln4324">    return CMD_WARNING;</a>
<a name="ln4325"> </a>
<a name="ln4326">  if (argc == 1)</a>
<a name="ln4327">    allow_num = 3;</a>
<a name="ln4328">  else</a>
<a name="ln4329">    VTY_GET_INTEGER_RANGE (&quot;AS number&quot;, allow_num, argv[1], 1, 10);</a>
<a name="ln4330"> </a>
<a name="ln4331">  ret = peer_allowas_in_set (peer, bgp_node_afi (vty), bgp_node_safi (vty),</a>
<a name="ln4332">			     allow_num);</a>
<a name="ln4333"> </a>
<a name="ln4334">  return bgp_vty_return (vty, ret);</a>
<a name="ln4335">}</a>
<a name="ln4336"> </a>
<a name="ln4337">ALIAS (neighbor_allowas_in,</a>
<a name="ln4338">       neighbor_allowas_in_arg_cmd,</a>
<a name="ln4339">       NEIGHBOR_CMD2 &quot;allowas-in &lt;1-10&gt;&quot;,</a>
<a name="ln4340">       NEIGHBOR_STR</a>
<a name="ln4341">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4342">       &quot;Accept as-path with my AS present in it\n&quot;</a>
<a name="ln4343">       &quot;Number of occurrences of AS number\n&quot;)</a>
<a name="ln4344"> </a>
<a name="ln4345">DEFUN (no_neighbor_allowas_in,</a>
<a name="ln4346">       no_neighbor_allowas_in_cmd,</a>
<a name="ln4347">       NO_NEIGHBOR_CMD2 &quot;allowas-in&quot;,</a>
<a name="ln4348">       NO_STR</a>
<a name="ln4349">       NEIGHBOR_STR</a>
<a name="ln4350">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4351">       &quot;allow local ASN appears in aspath attribute\n&quot;)</a>
<a name="ln4352">{</a>
<a name="ln4353">  int ret;</a>
<a name="ln4354">  struct peer *peer;</a>
<a name="ln4355"> </a>
<a name="ln4356">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln4357">  if (! peer)</a>
<a name="ln4358">    return CMD_WARNING;</a>
<a name="ln4359"> </a>
<a name="ln4360">  ret = peer_allowas_in_unset (peer, bgp_node_afi (vty), bgp_node_safi (vty));</a>
<a name="ln4361"> </a>
<a name="ln4362">  return bgp_vty_return (vty, ret);</a>
<a name="ln4363">}</a>
<a name="ln4364"> </a>
<a name="ln4365">DEFUN (neighbor_ttl_security,</a>
<a name="ln4366">       neighbor_ttl_security_cmd,</a>
<a name="ln4367">       NEIGHBOR_CMD2 &quot;ttl-security hops &lt;1-254&gt;&quot;,</a>
<a name="ln4368">       NEIGHBOR_STR</a>
<a name="ln4369">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4370">       &quot;Specify the maximum number of hops to the BGP peer\n&quot;)</a>
<a name="ln4371">{</a>
<a name="ln4372">  struct peer *peer;</a>
<a name="ln4373">  int gtsm_hops;</a>
<a name="ln4374"> </a>
<a name="ln4375">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln4376">  if (! peer)</a>
<a name="ln4377">    return CMD_WARNING;</a>
<a name="ln4378">    </a>
<a name="ln4379">  VTY_GET_INTEGER_RANGE (&quot;&quot;, gtsm_hops, argv[1], 1, 254);</a>
<a name="ln4380"> </a>
<a name="ln4381">  return bgp_vty_return (vty, peer_ttl_security_hops_set (peer, gtsm_hops));</a>
<a name="ln4382">}</a>
<a name="ln4383"> </a>
<a name="ln4384">DEFUN (no_neighbor_ttl_security,</a>
<a name="ln4385">       no_neighbor_ttl_security_cmd,</a>
<a name="ln4386">       NO_NEIGHBOR_CMD2 &quot;ttl-security hops &lt;1-254&gt;&quot;,</a>
<a name="ln4387">       NO_STR</a>
<a name="ln4388">       NEIGHBOR_STR</a>
<a name="ln4389">       NEIGHBOR_ADDR_STR2</a>
<a name="ln4390">       &quot;Specify the maximum number of hops to the BGP peer\n&quot;)</a>
<a name="ln4391">{</a>
<a name="ln4392">  struct peer *peer;</a>
<a name="ln4393"> </a>
<a name="ln4394">  peer = peer_and_group_lookup_vty (vty, argv[0]);</a>
<a name="ln4395">  if (! peer)</a>
<a name="ln4396">    return CMD_WARNING;</a>
<a name="ln4397"> </a>
<a name="ln4398">  return bgp_vty_return (vty, peer_ttl_security_hops_set (peer, 0));</a>
<a name="ln4399">}</a>
<a name="ln4400"> </a>
<a name="ln4401">/* Address family configuration.  */</a>
<a name="ln4402">DEFUN (address_family_ipv4,</a>
<a name="ln4403">       address_family_ipv4_cmd,</a>
<a name="ln4404">       &quot;address-family ipv4&quot;,</a>
<a name="ln4405">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4406">       &quot;Address family\n&quot;)</a>
<a name="ln4407">{</a>
<a name="ln4408">  vty-&gt;node = BGP_IPV4_NODE;</a>
<a name="ln4409">  return CMD_SUCCESS;</a>
<a name="ln4410">}</a>
<a name="ln4411"> </a>
<a name="ln4412">DEFUN (address_family_ipv4_safi,</a>
<a name="ln4413">       address_family_ipv4_safi_cmd,</a>
<a name="ln4414">       &quot;address-family ipv4 (unicast|multicast)&quot;,</a>
<a name="ln4415">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4416">       &quot;Address family\n&quot;</a>
<a name="ln4417">       &quot;Address Family modifier\n&quot;</a>
<a name="ln4418">       &quot;Address Family modifier\n&quot;)</a>
<a name="ln4419">{</a>
<a name="ln4420">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln4421">    vty-&gt;node = BGP_IPV4M_NODE;</a>
<a name="ln4422">  else</a>
<a name="ln4423">    vty-&gt;node = BGP_IPV4_NODE;</a>
<a name="ln4424"> </a>
<a name="ln4425">  return CMD_SUCCESS;</a>
<a name="ln4426">}</a>
<a name="ln4427"> </a>
<a name="ln4428">DEFUN (address_family_ipv6,</a>
<a name="ln4429">       address_family_ipv6_cmd,</a>
<a name="ln4430">       &quot;address-family ipv6&quot;,</a>
<a name="ln4431">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4432">       &quot;Address family\n&quot;)</a>
<a name="ln4433">{</a>
<a name="ln4434">  vty-&gt;node = BGP_IPV6_NODE;</a>
<a name="ln4435">  return CMD_SUCCESS;</a>
<a name="ln4436">}</a>
<a name="ln4437"> </a>
<a name="ln4438">DEFUN (address_family_ipv6_safi,</a>
<a name="ln4439">       address_family_ipv6_safi_cmd,</a>
<a name="ln4440">       &quot;address-family ipv6 (unicast|multicast)&quot;,</a>
<a name="ln4441">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4442">       &quot;Address family\n&quot;</a>
<a name="ln4443">       &quot;Address Family modifier\n&quot;</a>
<a name="ln4444">       &quot;Address Family modifier\n&quot;)</a>
<a name="ln4445">{</a>
<a name="ln4446">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln4447">    vty-&gt;node = BGP_IPV6M_NODE;</a>
<a name="ln4448">  else</a>
<a name="ln4449">    vty-&gt;node = BGP_IPV6_NODE;</a>
<a name="ln4450"> </a>
<a name="ln4451">  return CMD_SUCCESS;</a>
<a name="ln4452">}</a>
<a name="ln4453"> </a>
<a name="ln4454">DEFUN (address_family_vpnv4,</a>
<a name="ln4455">       address_family_vpnv4_cmd,</a>
<a name="ln4456">       &quot;address-family vpnv4&quot;,</a>
<a name="ln4457">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4458">       &quot;Address family\n&quot;)</a>
<a name="ln4459">{</a>
<a name="ln4460">  vty-&gt;node = BGP_VPNV4_NODE;</a>
<a name="ln4461">  return CMD_SUCCESS;</a>
<a name="ln4462">}</a>
<a name="ln4463"> </a>
<a name="ln4464">ALIAS (address_family_vpnv4,</a>
<a name="ln4465">       address_family_vpnv4_unicast_cmd,</a>
<a name="ln4466">       &quot;address-family vpnv4 unicast&quot;,</a>
<a name="ln4467">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4468">       &quot;Address family\n&quot;</a>
<a name="ln4469">       &quot;Address Family Modifier\n&quot;)</a>
<a name="ln4470"> </a>
<a name="ln4471">DEFUN (address_family_vpnv6,</a>
<a name="ln4472">       address_family_vpnv6_cmd,</a>
<a name="ln4473">       &quot;address-family vpnv6&quot;,</a>
<a name="ln4474">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4475">       &quot;Address family\n&quot;)</a>
<a name="ln4476">{</a>
<a name="ln4477">  vty-&gt;node = BGP_VPNV6_NODE;</a>
<a name="ln4478">  return CMD_SUCCESS;</a>
<a name="ln4479">}</a>
<a name="ln4480"> </a>
<a name="ln4481">ALIAS (address_family_vpnv6,</a>
<a name="ln4482">       address_family_vpnv6_unicast_cmd,</a>
<a name="ln4483">       &quot;address-family vpnv6 unicast&quot;,</a>
<a name="ln4484">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4485">       &quot;Address family\n&quot;</a>
<a name="ln4486">       &quot;Address Family Modifier\n&quot;)</a>
<a name="ln4487"> </a>
<a name="ln4488">DEFUN (address_family_encap,</a>
<a name="ln4489">       address_family_encap_cmd,</a>
<a name="ln4490">       &quot;address-family encap&quot;,</a>
<a name="ln4491">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4492">       &quot;Address family\n&quot;)</a>
<a name="ln4493">{</a>
<a name="ln4494">  vty-&gt;node = BGP_ENCAP_NODE;</a>
<a name="ln4495">  return CMD_SUCCESS;</a>
<a name="ln4496">}</a>
<a name="ln4497"> </a>
<a name="ln4498">ALIAS (address_family_encap,</a>
<a name="ln4499">       address_family_encapv4_cmd,</a>
<a name="ln4500">       &quot;address-family encapv4&quot;,</a>
<a name="ln4501">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4502">       &quot;Address family\n&quot;)</a>
<a name="ln4503"> </a>
<a name="ln4504">DEFUN (address_family_encapv6,</a>
<a name="ln4505">       address_family_encapv6_cmd,</a>
<a name="ln4506">       &quot;address-family encapv6&quot;,</a>
<a name="ln4507">       &quot;Enter Address Family command mode\n&quot;</a>
<a name="ln4508">       &quot;Address family\n&quot;)</a>
<a name="ln4509">{</a>
<a name="ln4510">  vty-&gt;node = BGP_ENCAPV6_NODE;</a>
<a name="ln4511">  return CMD_SUCCESS;</a>
<a name="ln4512">}</a>
<a name="ln4513"> </a>
<a name="ln4514">DEFUN (exit_address_family,</a>
<a name="ln4515">       exit_address_family_cmd,</a>
<a name="ln4516">       &quot;exit-address-family&quot;,</a>
<a name="ln4517">       &quot;Exit from Address Family configuration mode\n&quot;)</a>
<a name="ln4518">{</a>
<a name="ln4519">  /* should match list in command.c:config_exit */</a>
<a name="ln4520">  if (vty-&gt;node == BGP_IPV4_NODE</a>
<a name="ln4521">      || vty-&gt;node == BGP_ENCAP_NODE</a>
<a name="ln4522">      || vty-&gt;node == BGP_ENCAPV6_NODE</a>
<a name="ln4523">      || vty-&gt;node == BGP_IPV4M_NODE</a>
<a name="ln4524">      || vty-&gt;node == BGP_VPNV4_NODE</a>
<a name="ln4525">      || vty-&gt;node == BGP_VPNV6_NODE</a>
<a name="ln4526">      || vty-&gt;node == BGP_IPV6_NODE</a>
<a name="ln4527">      || vty-&gt;node == BGP_IPV6M_NODE)</a>
<a name="ln4528">    vty-&gt;node = BGP_NODE;</a>
<a name="ln4529">  return CMD_SUCCESS;</a>
<a name="ln4530">}</a>
<a name="ln4531"> </a>
<a name="ln4532">/* BGP clear sort. */</a>
<a name="ln4533">enum clear_sort</a>
<a name="ln4534">{</a>
<a name="ln4535">  clear_all,</a>
<a name="ln4536">  clear_peer,</a>
<a name="ln4537">  clear_group,</a>
<a name="ln4538">  clear_external,</a>
<a name="ln4539">  clear_as</a>
<a name="ln4540">};</a>
<a name="ln4541"> </a>
<a name="ln4542">static void</a>
<a name="ln4543">bgp_clear_vty_error (struct vty *vty, struct peer *peer, afi_t afi,</a>
<a name="ln4544">		     safi_t safi, int error)</a>
<a name="ln4545">{</a>
<a name="ln4546">  switch (error)</a>
<a name="ln4547">    {</a>
<a name="ln4548">    case BGP_ERR_AF_UNCONFIGURED:</a>
<a name="ln4549">      vty_out (vty,</a>
<a name="ln4550">	       &quot;%%BGP: Enable %s %s address family for the neighbor %s%s&quot;,</a>
<a name="ln4551">	       afi == AFI_IP6 ? &quot;IPv6&quot; : safi == SAFI_MPLS_VPN ? &quot;VPNv4&quot; : &quot;IPv4&quot;,</a>
<a name="ln4552">	       safi == SAFI_MULTICAST ? &quot;Multicast&quot; : &quot;Unicast&quot;,</a>
<a name="ln4553">	       peer-&gt;host, VTY_NEWLINE);</a>
<a name="ln4554">      break;</a>
<a name="ln4555">    case BGP_ERR_SOFT_RECONFIG_UNCONFIGURED:</a>
<a name="ln4556">      vty_out (vty, &quot;%%BGP: Inbound soft reconfig for %s not possible as it%s      has neither refresh capability, nor inbound soft reconfig%s&quot;, peer-&gt;host, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln4557">      break;</a>
<a name="ln4558">    default:</a>
<a name="ln4559">      break;</a>
<a name="ln4560">    }</a>
<a name="ln4561">}</a>
<a name="ln4562"> </a>
<a name="ln4563">/* `clear ip bgp' functions. */</a>
<a name="ln4564">static int</a>
<a name="ln4565">bgp_clear (struct vty *vty, struct bgp *bgp,  afi_t afi, safi_t safi,</a>
<a name="ln4566">           enum clear_sort sort,enum bgp_clear_type stype, const char *arg)</a>
<a name="ln4567">{</a>
<a name="ln4568">  int ret;</a>
<a name="ln4569">  struct peer *peer;</a>
<a name="ln4570">  struct listnode *node, *nnode;</a>
<a name="ln4571"> </a>
<a name="ln4572">  /* Clear all neighbors. */</a>
<a name="ln4573">  if (sort == clear_all)</a>
<a name="ln4574">    {</a>
<a name="ln4575">      for (ALL_LIST_ELEMENTS (bgp-&gt;peer, node, nnode, peer))</a>
<a name="ln4576">	{</a>
<a name="ln4577">	  if (stype == BGP_CLEAR_SOFT_NONE)</a>
<a name="ln4578">	    ret = peer_clear (peer);</a>
<a name="ln4579">	  else</a>
<a name="ln4580">	    ret = peer_clear_soft (peer, afi, safi, stype);</a>
<a name="ln4581"> </a>
<a name="ln4582">	  if (ret &lt; 0)</a>
<a name="ln4583">	    bgp_clear_vty_error (vty, peer, afi, safi, ret);</a>
<a name="ln4584">	}</a>
<a name="ln4585">      return CMD_SUCCESS;</a>
<a name="ln4586">    }</a>
<a name="ln4587"> </a>
<a name="ln4588">  /* Clear specified neighbors. */</a>
<a name="ln4589">  if (sort == clear_peer)</a>
<a name="ln4590">    {</a>
<a name="ln4591">      union sockunion su;</a>
<a name="ln4592">      int ret;</a>
<a name="ln4593"> </a>
<a name="ln4594">      /* Make sockunion for lookup. */</a>
<a name="ln4595">      ret = str2sockunion (arg, &amp;su);</a>
<a name="ln4596">      if (ret &lt; 0)</a>
<a name="ln4597">	{</a>
<a name="ln4598">	  vty_out (vty, &quot;Malformed address: %s%s&quot;, arg, VTY_NEWLINE);</a>
<a name="ln4599">	  return CMD_WARNING;</a>
<a name="ln4600">	}</a>
<a name="ln4601">      peer = peer_lookup (bgp, &amp;su);</a>
<a name="ln4602">      if (! peer)</a>
<a name="ln4603">	{</a>
<a name="ln4604">	  vty_out (vty, &quot;%%BGP: Unknown neighbor - \&quot;%s\&quot;%s&quot;, arg, VTY_NEWLINE);</a>
<a name="ln4605">	  return CMD_WARNING;</a>
<a name="ln4606">	}</a>
<a name="ln4607"> </a>
<a name="ln4608">      if (stype == BGP_CLEAR_SOFT_NONE)</a>
<a name="ln4609">	ret = peer_clear (peer);</a>
<a name="ln4610">      else</a>
<a name="ln4611">	ret = peer_clear_soft (peer, afi, safi, stype);</a>
<a name="ln4612"> </a>
<a name="ln4613">      if (ret &lt; 0)</a>
<a name="ln4614">	bgp_clear_vty_error (vty, peer, afi, safi, ret);</a>
<a name="ln4615"> </a>
<a name="ln4616">      return CMD_SUCCESS;</a>
<a name="ln4617">    }</a>
<a name="ln4618"> </a>
<a name="ln4619">  /* Clear all peer-group members. */</a>
<a name="ln4620">  if (sort == clear_group)</a>
<a name="ln4621">    {</a>
<a name="ln4622">      struct peer_group *group;</a>
<a name="ln4623"> </a>
<a name="ln4624">      group = peer_group_lookup (bgp, arg);</a>
<a name="ln4625">      if (! group)</a>
<a name="ln4626">	{</a>
<a name="ln4627">	  vty_out (vty, &quot;%%BGP: No such peer-group %s%s&quot;, arg, VTY_NEWLINE);</a>
<a name="ln4628">	  return CMD_WARNING; </a>
<a name="ln4629">	}</a>
<a name="ln4630"> </a>
<a name="ln4631">      for (ALL_LIST_ELEMENTS (group-&gt;peer, node, nnode, peer))</a>
<a name="ln4632">	{</a>
<a name="ln4633">	  if (stype == BGP_CLEAR_SOFT_NONE)</a>
<a name="ln4634">	    {</a>
<a name="ln4635">	      ret = peer_clear (peer);</a>
<a name="ln4636">	      continue;</a>
<a name="ln4637">	    }</a>
<a name="ln4638"> </a>
<a name="ln4639">	  if (! peer-&gt;af_group[afi][safi])</a>
<a name="ln4640">	    continue;</a>
<a name="ln4641"> </a>
<a name="ln4642">	  ret = peer_clear_soft (peer, afi, safi, stype);</a>
<a name="ln4643"> </a>
<a name="ln4644">	  if (ret &lt; 0)</a>
<a name="ln4645">	    bgp_clear_vty_error (vty, peer, afi, safi, ret);</a>
<a name="ln4646">	}</a>
<a name="ln4647">      return CMD_SUCCESS;</a>
<a name="ln4648">    }</a>
<a name="ln4649"> </a>
<a name="ln4650">  if (sort == clear_external)</a>
<a name="ln4651">    {</a>
<a name="ln4652">      for (ALL_LIST_ELEMENTS (bgp-&gt;peer, node, nnode, peer))</a>
<a name="ln4653">	{</a>
<a name="ln4654">	  if (peer-&gt;sort == BGP_PEER_IBGP)</a>
<a name="ln4655">	    continue;</a>
<a name="ln4656"> </a>
<a name="ln4657">	  if (stype == BGP_CLEAR_SOFT_NONE)</a>
<a name="ln4658">	    ret = peer_clear (peer);</a>
<a name="ln4659">	  else</a>
<a name="ln4660">	    ret = peer_clear_soft (peer, afi, safi, stype);</a>
<a name="ln4661"> </a>
<a name="ln4662">	  if (ret &lt; 0)</a>
<a name="ln4663">	    bgp_clear_vty_error (vty, peer, afi, safi, ret);</a>
<a name="ln4664">	}</a>
<a name="ln4665">      return CMD_SUCCESS;</a>
<a name="ln4666">    }</a>
<a name="ln4667"> </a>
<a name="ln4668">  if (sort == clear_as)</a>
<a name="ln4669">    {</a>
<a name="ln4670">      as_t as;</a>
<a name="ln4671">      int find = 0;</a>
<a name="ln4672"> </a>
<a name="ln4673">      VTY_GET_INTEGER_RANGE (&quot;AS&quot;, as, arg, 1, BGP_AS4_MAX);</a>
<a name="ln4674">      </a>
<a name="ln4675">      for (ALL_LIST_ELEMENTS (bgp-&gt;peer, node, nnode, peer))</a>
<a name="ln4676">	{</a>
<a name="ln4677">	  if (peer-&gt;as != as) </a>
<a name="ln4678">	    continue;</a>
<a name="ln4679"> </a>
<a name="ln4680">	  find = 1;</a>
<a name="ln4681">	  if (stype == BGP_CLEAR_SOFT_NONE)</a>
<a name="ln4682">	    ret = peer_clear (peer);</a>
<a name="ln4683">	  else</a>
<a name="ln4684">	    ret = peer_clear_soft (peer, afi, safi, stype);</a>
<a name="ln4685"> </a>
<a name="ln4686">	  if (ret &lt; 0)</a>
<a name="ln4687">	    bgp_clear_vty_error (vty, peer, afi, safi, ret);</a>
<a name="ln4688">	}</a>
<a name="ln4689">      if (! find)</a>
<a name="ln4690">	vty_out (vty, &quot;%%BGP: No peer is configured with AS %s%s&quot;, arg,</a>
<a name="ln4691">		 VTY_NEWLINE);</a>
<a name="ln4692">      return CMD_SUCCESS;</a>
<a name="ln4693">    }</a>
<a name="ln4694"> </a>
<a name="ln4695">  return CMD_SUCCESS;</a>
<a name="ln4696">}</a>
<a name="ln4697"> </a>
<a name="ln4698">/* Recalculate bestpath and re-advertise a prefix */</a>
<a name="ln4699">static int</a>
<a name="ln4700">bgp_clear_prefix (struct vty *vty, char *view_name, const char *ip_str,</a>
<a name="ln4701">                  afi_t afi, safi_t safi, struct prefix_rd *prd)</a>
<a name="ln4702">{</a>
<a name="ln4703">  int ret;</a>
<a name="ln4704">  struct prefix match;</a>
<a name="ln4705">  struct bgp_node *rn;</a>
<a name="ln4706">  struct bgp_node *rm;</a>
<a name="ln4707">  struct bgp *bgp;</a>
<a name="ln4708">  struct bgp_table *table;</a>
<a name="ln4709">  struct bgp_table *rib;</a>
<a name="ln4710"> </a>
<a name="ln4711">  /* BGP structure lookup. */</a>
<a name="ln4712">  if (view_name)</a>
<a name="ln4713">    {</a>
<a name="ln4714">      bgp = bgp_lookup_by_name (view_name);</a>
<a name="ln4715">      if (bgp == NULL)</a>
<a name="ln4716">        {</a>
<a name="ln4717">          vty_out (vty, &quot;%% Can't find BGP view %s%s&quot;, view_name, VTY_NEWLINE);</a>
<a name="ln4718">          return CMD_WARNING;</a>
<a name="ln4719">        }</a>
<a name="ln4720">    }</a>
<a name="ln4721">  else</a>
<a name="ln4722">    {</a>
<a name="ln4723">      bgp = bgp_get_default ();</a>
<a name="ln4724">      if (bgp == NULL)</a>
<a name="ln4725">        {</a>
<a name="ln4726">          vty_out (vty, &quot;%% No BGP process is configured%s&quot;, VTY_NEWLINE);</a>
<a name="ln4727">          return CMD_WARNING;</a>
<a name="ln4728">        }</a>
<a name="ln4729">    }</a>
<a name="ln4730"> </a>
<a name="ln4731">  /* Check IP address argument. */</a>
<a name="ln4732">  ret = str2prefix (ip_str, &amp;match);</a>
<a name="ln4733">  if (! ret)</a>
<a name="ln4734">    {</a>
<a name="ln4735">      vty_out (vty, &quot;%% address is malformed%s&quot;, VTY_NEWLINE);</a>
<a name="ln4736">      return CMD_WARNING;</a>
<a name="ln4737">    }</a>
<a name="ln4738"> </a>
<a name="ln4739">  match.family = afi2family (afi);</a>
<a name="ln4740">  rib = bgp-&gt;rib[afi][safi];</a>
<a name="ln4741"> </a>
<a name="ln4742">  if (safi == SAFI_MPLS_VPN)</a>
<a name="ln4743">    {</a>
<a name="ln4744">      for (rn = bgp_table_top (rib); rn; rn = bgp_route_next (rn))</a>
<a name="ln4745">        {</a>
<a name="ln4746">          if (prd &amp;&amp; memcmp (rn-&gt;p.u.val, prd-&gt;val, 8) != 0)</a>
<a name="ln4747">            continue;</a>
<a name="ln4748"> </a>
<a name="ln4749">          if ((table = rn-&gt;info) != NULL)</a>
<a name="ln4750">            {</a>
<a name="ln4751">              if ((rm = bgp_node_match (table, &amp;match)) != NULL)</a>
<a name="ln4752">                {</a>
<a name="ln4753">                  if (rm-&gt;p.prefixlen == match.prefixlen)</a>
<a name="ln4754">                    {</a>
<a name="ln4755">                      SET_FLAG (rn-&gt;flags, BGP_NODE_USER_CLEAR);</a>
<a name="ln4756">                      bgp_process (bgp, rm, afi, safi);</a>
<a name="ln4757">                    }</a>
<a name="ln4758">                  bgp_unlock_node (rm);</a>
<a name="ln4759">                }</a>
<a name="ln4760">            }</a>
<a name="ln4761">        }</a>
<a name="ln4762">    }</a>
<a name="ln4763">  else</a>
<a name="ln4764">    {</a>
<a name="ln4765">      if ((rn = bgp_node_match (rib, &amp;match)) != NULL)</a>
<a name="ln4766">        {</a>
<a name="ln4767">          if (rn-&gt;p.prefixlen == match.prefixlen)</a>
<a name="ln4768">            {</a>
<a name="ln4769">              SET_FLAG (rn-&gt;flags, BGP_NODE_USER_CLEAR);</a>
<a name="ln4770">              bgp_process (bgp, rn, afi, safi);</a>
<a name="ln4771">            }</a>
<a name="ln4772">          bgp_unlock_node (rn);</a>
<a name="ln4773">        }</a>
<a name="ln4774">    }</a>
<a name="ln4775"> </a>
<a name="ln4776">  return CMD_SUCCESS;</a>
<a name="ln4777">}</a>
<a name="ln4778"> </a>
<a name="ln4779">static int</a>
<a name="ln4780">bgp_clear_vty (struct vty *vty, const char *name, afi_t afi, safi_t safi,</a>
<a name="ln4781">               enum clear_sort sort, enum bgp_clear_type stype, </a>
<a name="ln4782">               const char *arg)</a>
<a name="ln4783">{</a>
<a name="ln4784">  struct bgp *bgp;</a>
<a name="ln4785"> </a>
<a name="ln4786">  /* BGP structure lookup. */</a>
<a name="ln4787">  if (name)</a>
<a name="ln4788">    {</a>
<a name="ln4789">      bgp = bgp_lookup_by_name (name);</a>
<a name="ln4790">      if (bgp == NULL)</a>
<a name="ln4791">        {</a>
<a name="ln4792">          vty_out (vty, &quot;Can't find BGP view %s%s&quot;, name, VTY_NEWLINE);</a>
<a name="ln4793">          return CMD_WARNING;</a>
<a name="ln4794">        }</a>
<a name="ln4795">    }</a>
<a name="ln4796">  else</a>
<a name="ln4797">    {</a>
<a name="ln4798">      bgp = bgp_get_default ();</a>
<a name="ln4799">      if (bgp == NULL)</a>
<a name="ln4800">        {</a>
<a name="ln4801">          vty_out (vty, &quot;No BGP process is configured%s&quot;, VTY_NEWLINE);</a>
<a name="ln4802">          return CMD_WARNING;</a>
<a name="ln4803">        }</a>
<a name="ln4804">    }</a>
<a name="ln4805"> </a>
<a name="ln4806">  return bgp_clear (vty, bgp, afi, safi, sort, stype, arg);</a>
<a name="ln4807">}</a>
<a name="ln4808">  </a>
<a name="ln4809">DEFUN (clear_ip_bgp_all,</a>
<a name="ln4810">       clear_ip_bgp_all_cmd,</a>
<a name="ln4811">       &quot;clear ip bgp *&quot;,</a>
<a name="ln4812">       CLEAR_STR</a>
<a name="ln4813">       IP_STR</a>
<a name="ln4814">       BGP_STR</a>
<a name="ln4815">       &quot;Clear all peers\n&quot;)</a>
<a name="ln4816">{</a>
<a name="ln4817">  if (argc == 1)</a>
<a name="ln4818">    return bgp_clear_vty (vty, argv[0], 0, 0, clear_all, BGP_CLEAR_SOFT_NONE, NULL);    </a>
<a name="ln4819"> </a>
<a name="ln4820">  return bgp_clear_vty (vty, NULL, 0, 0, clear_all, BGP_CLEAR_SOFT_NONE, NULL);</a>
<a name="ln4821">}</a>
<a name="ln4822"> </a>
<a name="ln4823">ALIAS (clear_ip_bgp_all,</a>
<a name="ln4824">       clear_bgp_all_cmd,</a>
<a name="ln4825">       &quot;clear bgp *&quot;,</a>
<a name="ln4826">       CLEAR_STR</a>
<a name="ln4827">       BGP_STR</a>
<a name="ln4828">       &quot;Clear all peers\n&quot;)</a>
<a name="ln4829"> </a>
<a name="ln4830">ALIAS (clear_ip_bgp_all,</a>
<a name="ln4831">       clear_bgp_ipv6_all_cmd,</a>
<a name="ln4832">       &quot;clear bgp ipv6 *&quot;,</a>
<a name="ln4833">       CLEAR_STR</a>
<a name="ln4834">       BGP_STR</a>
<a name="ln4835">       &quot;Address family\n&quot;</a>
<a name="ln4836">       &quot;Clear all peers\n&quot;)</a>
<a name="ln4837"> </a>
<a name="ln4838">ALIAS (clear_ip_bgp_all,</a>
<a name="ln4839">       clear_ip_bgp_instance_all_cmd,</a>
<a name="ln4840">       &quot;clear ip bgp view WORD *&quot;,</a>
<a name="ln4841">       CLEAR_STR</a>
<a name="ln4842">       IP_STR</a>
<a name="ln4843">       BGP_STR</a>
<a name="ln4844">       &quot;BGP view\n&quot;</a>
<a name="ln4845">       &quot;view name\n&quot;</a>
<a name="ln4846">       &quot;Clear all peers\n&quot;)</a>
<a name="ln4847"> </a>
<a name="ln4848">ALIAS (clear_ip_bgp_all,</a>
<a name="ln4849">       clear_bgp_instance_all_cmd,</a>
<a name="ln4850">       &quot;clear bgp view WORD *&quot;,</a>
<a name="ln4851">       CLEAR_STR</a>
<a name="ln4852">       BGP_STR</a>
<a name="ln4853">       &quot;BGP view\n&quot;</a>
<a name="ln4854">       &quot;view name\n&quot;</a>
<a name="ln4855">       &quot;Clear all peers\n&quot;)</a>
<a name="ln4856"> </a>
<a name="ln4857">DEFUN (clear_ip_bgp_peer,</a>
<a name="ln4858">       clear_ip_bgp_peer_cmd, </a>
<a name="ln4859">       &quot;clear ip bgp (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln4860">       CLEAR_STR</a>
<a name="ln4861">       IP_STR</a>
<a name="ln4862">       BGP_STR</a>
<a name="ln4863">       &quot;BGP neighbor IP address to clear\n&quot;</a>
<a name="ln4864">       &quot;BGP IPv6 neighbor to clear\n&quot;)</a>
<a name="ln4865">{</a>
<a name="ln4866">  return bgp_clear_vty (vty, NULL, 0, 0, clear_peer, BGP_CLEAR_SOFT_NONE, argv[0]);</a>
<a name="ln4867">}</a>
<a name="ln4868"> </a>
<a name="ln4869">ALIAS (clear_ip_bgp_peer,</a>
<a name="ln4870">       clear_bgp_peer_cmd, </a>
<a name="ln4871">       &quot;clear bgp (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln4872">       CLEAR_STR</a>
<a name="ln4873">       BGP_STR</a>
<a name="ln4874">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln4875">       &quot;BGP IPv6 neighbor to clear\n&quot;)</a>
<a name="ln4876"> </a>
<a name="ln4877">ALIAS (clear_ip_bgp_peer,</a>
<a name="ln4878">       clear_bgp_ipv6_peer_cmd, </a>
<a name="ln4879">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln4880">       CLEAR_STR</a>
<a name="ln4881">       BGP_STR</a>
<a name="ln4882">       &quot;Address family\n&quot;</a>
<a name="ln4883">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln4884">       &quot;BGP IPv6 neighbor to clear\n&quot;)</a>
<a name="ln4885"> </a>
<a name="ln4886">DEFUN (clear_ip_bgp_peer_group,</a>
<a name="ln4887">       clear_ip_bgp_peer_group_cmd, </a>
<a name="ln4888">       &quot;clear ip bgp peer-group WORD&quot;,</a>
<a name="ln4889">       CLEAR_STR</a>
<a name="ln4890">       IP_STR</a>
<a name="ln4891">       BGP_STR</a>
<a name="ln4892">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln4893">       &quot;BGP peer-group name\n&quot;)</a>
<a name="ln4894">{</a>
<a name="ln4895">  return bgp_clear_vty (vty, NULL, 0, 0, clear_group, BGP_CLEAR_SOFT_NONE, argv[0]);</a>
<a name="ln4896">}</a>
<a name="ln4897"> </a>
<a name="ln4898">ALIAS (clear_ip_bgp_peer_group,</a>
<a name="ln4899">       clear_bgp_peer_group_cmd, </a>
<a name="ln4900">       &quot;clear bgp peer-group WORD&quot;,</a>
<a name="ln4901">       CLEAR_STR</a>
<a name="ln4902">       BGP_STR</a>
<a name="ln4903">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln4904">       &quot;BGP peer-group name\n&quot;)</a>
<a name="ln4905"> </a>
<a name="ln4906">ALIAS (clear_ip_bgp_peer_group,</a>
<a name="ln4907">       clear_bgp_ipv6_peer_group_cmd, </a>
<a name="ln4908">       &quot;clear bgp ipv6 peer-group WORD&quot;,</a>
<a name="ln4909">       CLEAR_STR</a>
<a name="ln4910">       BGP_STR</a>
<a name="ln4911">       &quot;Address family\n&quot;</a>
<a name="ln4912">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln4913">       &quot;BGP peer-group name\n&quot;)</a>
<a name="ln4914"> </a>
<a name="ln4915">DEFUN (clear_ip_bgp_external,</a>
<a name="ln4916">       clear_ip_bgp_external_cmd,</a>
<a name="ln4917">       &quot;clear ip bgp external&quot;,</a>
<a name="ln4918">       CLEAR_STR</a>
<a name="ln4919">       IP_STR</a>
<a name="ln4920">       BGP_STR</a>
<a name="ln4921">       &quot;Clear all external peers\n&quot;)</a>
<a name="ln4922">{</a>
<a name="ln4923">  return bgp_clear_vty (vty, NULL, 0, 0, clear_external, BGP_CLEAR_SOFT_NONE, NULL);</a>
<a name="ln4924">}</a>
<a name="ln4925"> </a>
<a name="ln4926">ALIAS (clear_ip_bgp_external,</a>
<a name="ln4927">       clear_bgp_external_cmd, </a>
<a name="ln4928">       &quot;clear bgp external&quot;,</a>
<a name="ln4929">       CLEAR_STR</a>
<a name="ln4930">       BGP_STR</a>
<a name="ln4931">       &quot;Clear all external peers\n&quot;)</a>
<a name="ln4932"> </a>
<a name="ln4933">ALIAS (clear_ip_bgp_external,</a>
<a name="ln4934">       clear_bgp_ipv6_external_cmd, </a>
<a name="ln4935">       &quot;clear bgp ipv6 external&quot;,</a>
<a name="ln4936">       CLEAR_STR</a>
<a name="ln4937">       BGP_STR</a>
<a name="ln4938">       &quot;Address family\n&quot;</a>
<a name="ln4939">       &quot;Clear all external peers\n&quot;)</a>
<a name="ln4940"> </a>
<a name="ln4941">DEFUN (clear_ip_bgp_prefix,</a>
<a name="ln4942">       clear_ip_bgp_prefix_cmd,</a>
<a name="ln4943">       &quot;clear ip bgp prefix A.B.C.D/M&quot;,</a>
<a name="ln4944">       CLEAR_STR</a>
<a name="ln4945">       IP_STR</a>
<a name="ln4946">       BGP_STR</a>
<a name="ln4947">       &quot;Clear bestpath and re-advertise\n&quot;</a>
<a name="ln4948">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;)</a>
<a name="ln4949">{</a>
<a name="ln4950">  return bgp_clear_prefix (vty, NULL, argv[0], AFI_IP, SAFI_UNICAST, NULL);</a>
<a name="ln4951">}</a>
<a name="ln4952"> </a>
<a name="ln4953">ALIAS (clear_ip_bgp_prefix,</a>
<a name="ln4954">       clear_bgp_prefix_cmd,</a>
<a name="ln4955">       &quot;clear bgp prefix A.B.C.D/M&quot;,</a>
<a name="ln4956">       CLEAR_STR</a>
<a name="ln4957">       BGP_STR</a>
<a name="ln4958">       &quot;Clear bestpath and re-advertise\n&quot;</a>
<a name="ln4959">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;)</a>
<a name="ln4960"> </a>
<a name="ln4961"> </a>
<a name="ln4962">DEFUN (clear_ip_bgp_as,</a>
<a name="ln4963">       clear_ip_bgp_as_cmd,</a>
<a name="ln4964">       &quot;clear ip bgp &quot; CMD_AS_RANGE,</a>
<a name="ln4965">       CLEAR_STR</a>
<a name="ln4966">       IP_STR</a>
<a name="ln4967">       BGP_STR</a>
<a name="ln4968">       &quot;Clear peers with the AS number\n&quot;)</a>
<a name="ln4969">{</a>
<a name="ln4970">  return bgp_clear_vty (vty, NULL, 0, 0, clear_as, BGP_CLEAR_SOFT_NONE, argv[0]);</a>
<a name="ln4971">}       </a>
<a name="ln4972"> </a>
<a name="ln4973">ALIAS (clear_ip_bgp_as,</a>
<a name="ln4974">       clear_bgp_as_cmd,</a>
<a name="ln4975">       &quot;clear bgp &quot; CMD_AS_RANGE,</a>
<a name="ln4976">       CLEAR_STR</a>
<a name="ln4977">       BGP_STR</a>
<a name="ln4978">       &quot;Clear peers with the AS number\n&quot;)</a>
<a name="ln4979"> </a>
<a name="ln4980">ALIAS (clear_ip_bgp_as,</a>
<a name="ln4981">       clear_bgp_ipv6_as_cmd,</a>
<a name="ln4982">       &quot;clear bgp ipv6 &quot; CMD_AS_RANGE,</a>
<a name="ln4983">       CLEAR_STR</a>
<a name="ln4984">       BGP_STR</a>
<a name="ln4985">       &quot;Address family\n&quot;</a>
<a name="ln4986">       &quot;Clear peers with the AS number\n&quot;)</a>
<a name="ln4987"> </a>
<a name="ln4988">/* Outbound soft-reconfiguration */</a>
<a name="ln4989">DEFUN (clear_ip_bgp_all_soft_out,</a>
<a name="ln4990">       clear_ip_bgp_all_soft_out_cmd,</a>
<a name="ln4991">       &quot;clear ip bgp * soft out&quot;,</a>
<a name="ln4992">       CLEAR_STR</a>
<a name="ln4993">       IP_STR</a>
<a name="ln4994">       BGP_STR</a>
<a name="ln4995">       &quot;Clear all peers\n&quot;</a>
<a name="ln4996">       BGP_SOFT_STR</a>
<a name="ln4997">       BGP_SOFT_OUT_STR)</a>
<a name="ln4998">{</a>
<a name="ln4999">  if (argc == 1)</a>
<a name="ln5000">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5001">                          BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5002"> </a>
<a name="ln5003">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5004">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5005">}</a>
<a name="ln5006"> </a>
<a name="ln5007">ALIAS (clear_ip_bgp_all_soft_out,</a>
<a name="ln5008">       clear_ip_bgp_all_out_cmd,</a>
<a name="ln5009">       &quot;clear ip bgp * out&quot;,</a>
<a name="ln5010">       CLEAR_STR</a>
<a name="ln5011">       IP_STR</a>
<a name="ln5012">       BGP_STR</a>
<a name="ln5013">       &quot;Clear all peers\n&quot;</a>
<a name="ln5014">       BGP_SOFT_OUT_STR)</a>
<a name="ln5015"> </a>
<a name="ln5016">ALIAS (clear_ip_bgp_all_soft_out,</a>
<a name="ln5017">       clear_ip_bgp_instance_all_soft_out_cmd,</a>
<a name="ln5018">       &quot;clear ip bgp view WORD * soft out&quot;,</a>
<a name="ln5019">       CLEAR_STR</a>
<a name="ln5020">       IP_STR</a>
<a name="ln5021">       BGP_STR</a>
<a name="ln5022">       &quot;BGP view\n&quot;</a>
<a name="ln5023">       &quot;view name\n&quot;</a>
<a name="ln5024">       &quot;Clear all peers\n&quot;</a>
<a name="ln5025">       BGP_SOFT_STR</a>
<a name="ln5026">       BGP_SOFT_OUT_STR)</a>
<a name="ln5027"> </a>
<a name="ln5028">DEFUN (clear_ip_bgp_all_ipv4_soft_out,</a>
<a name="ln5029">       clear_ip_bgp_all_ipv4_soft_out_cmd,</a>
<a name="ln5030">       &quot;clear ip bgp * ipv4 (unicast|multicast) soft out&quot;,</a>
<a name="ln5031">       CLEAR_STR</a>
<a name="ln5032">       IP_STR</a>
<a name="ln5033">       BGP_STR</a>
<a name="ln5034">       &quot;Clear all peers\n&quot;</a>
<a name="ln5035">       &quot;Address family\n&quot;</a>
<a name="ln5036">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5037">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5038">       BGP_SOFT_STR</a>
<a name="ln5039">       BGP_SOFT_OUT_STR)</a>
<a name="ln5040">{</a>
<a name="ln5041">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln5042">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln5043">			  BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5044"> </a>
<a name="ln5045">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5046">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5047">}</a>
<a name="ln5048"> </a>
<a name="ln5049">ALIAS (clear_ip_bgp_all_ipv4_soft_out,</a>
<a name="ln5050">       clear_ip_bgp_all_ipv4_out_cmd,</a>
<a name="ln5051">       &quot;clear ip bgp * ipv4 (unicast|multicast) out&quot;,</a>
<a name="ln5052">       CLEAR_STR</a>
<a name="ln5053">       IP_STR</a>
<a name="ln5054">       BGP_STR</a>
<a name="ln5055">       &quot;Clear all peers\n&quot;</a>
<a name="ln5056">       &quot;Address family\n&quot;</a>
<a name="ln5057">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5058">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5059">       BGP_SOFT_OUT_STR)</a>
<a name="ln5060"> </a>
<a name="ln5061">DEFUN (clear_ip_bgp_instance_all_ipv4_soft_out,</a>
<a name="ln5062">       clear_ip_bgp_instance_all_ipv4_soft_out_cmd,</a>
<a name="ln5063">       &quot;clear ip bgp view WORD * ipv4 (unicast|multicast) soft out&quot;,</a>
<a name="ln5064">       CLEAR_STR</a>
<a name="ln5065">       IP_STR</a>
<a name="ln5066">       BGP_STR</a>
<a name="ln5067">       &quot;BGP view\n&quot;</a>
<a name="ln5068">       &quot;view name\n&quot;</a>
<a name="ln5069">       &quot;Clear all peers\n&quot;</a>
<a name="ln5070">       &quot;Address family\n&quot;</a>
<a name="ln5071">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5072">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5073">       BGP_SOFT_OUT_STR)</a>
<a name="ln5074">{</a>
<a name="ln5075">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln5076">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln5077">                          BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5078"> </a>
<a name="ln5079">  return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5080">                        BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5081">}</a>
<a name="ln5082"> </a>
<a name="ln5083">DEFUN (clear_ip_bgp_all_vpnv4_soft_out,</a>
<a name="ln5084">       clear_ip_bgp_all_vpnv4_soft_out_cmd,</a>
<a name="ln5085">       &quot;clear ip bgp * vpnv4 unicast soft out&quot;,</a>
<a name="ln5086">       CLEAR_STR</a>
<a name="ln5087">       IP_STR</a>
<a name="ln5088">       BGP_STR</a>
<a name="ln5089">       &quot;Clear all peers\n&quot;</a>
<a name="ln5090">       &quot;Address family\n&quot;</a>
<a name="ln5091">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5092">       BGP_SOFT_STR</a>
<a name="ln5093">       BGP_SOFT_OUT_STR)</a>
<a name="ln5094">{</a>
<a name="ln5095">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_all,</a>
<a name="ln5096">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5097">}</a>
<a name="ln5098"> </a>
<a name="ln5099">ALIAS (clear_ip_bgp_all_vpnv4_soft_out,</a>
<a name="ln5100">       clear_ip_bgp_all_vpnv4_out_cmd,</a>
<a name="ln5101">       &quot;clear ip bgp * vpnv4 unicast out&quot;,</a>
<a name="ln5102">       CLEAR_STR</a>
<a name="ln5103">       IP_STR</a>
<a name="ln5104">       BGP_STR</a>
<a name="ln5105">       &quot;Clear all peers\n&quot;</a>
<a name="ln5106">       &quot;Address family\n&quot;</a>
<a name="ln5107">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5108">       BGP_SOFT_OUT_STR)</a>
<a name="ln5109"> </a>
<a name="ln5110">DEFUN (clear_ip_bgp_all_encap_soft_out,</a>
<a name="ln5111">       clear_ip_bgp_all_encap_soft_out_cmd,</a>
<a name="ln5112">       &quot;clear ip bgp * encap unicast soft out&quot;,</a>
<a name="ln5113">       CLEAR_STR</a>
<a name="ln5114">       IP_STR</a>
<a name="ln5115">       BGP_STR</a>
<a name="ln5116">       &quot;Clear all peers\n&quot;</a>
<a name="ln5117">       &quot;Address family\n&quot;</a>
<a name="ln5118">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5119">       &quot;Soft reconfig\n&quot;</a>
<a name="ln5120">       &quot;Soft reconfig outbound update\n&quot;)</a>
<a name="ln5121">{</a>
<a name="ln5122">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_all,</a>
<a name="ln5123">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5124">}</a>
<a name="ln5125"> </a>
<a name="ln5126">ALIAS (clear_ip_bgp_all_encap_soft_out,</a>
<a name="ln5127">       clear_ip_bgp_all_encap_out_cmd,</a>
<a name="ln5128">       &quot;clear ip bgp * encap unicast out&quot;,</a>
<a name="ln5129">       CLEAR_STR</a>
<a name="ln5130">       IP_STR</a>
<a name="ln5131">       BGP_STR</a>
<a name="ln5132">       &quot;Clear all peers\n&quot;</a>
<a name="ln5133">       &quot;Address family\n&quot;</a>
<a name="ln5134">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5135">       &quot;Soft reconfig outbound update\n&quot;)</a>
<a name="ln5136"> </a>
<a name="ln5137">DEFUN (clear_bgp_all_soft_out,</a>
<a name="ln5138">       clear_bgp_all_soft_out_cmd,</a>
<a name="ln5139">       &quot;clear bgp * soft out&quot;,</a>
<a name="ln5140">       CLEAR_STR</a>
<a name="ln5141">       BGP_STR</a>
<a name="ln5142">       &quot;Clear all peers\n&quot;</a>
<a name="ln5143">       BGP_SOFT_STR</a>
<a name="ln5144">       BGP_SOFT_OUT_STR)</a>
<a name="ln5145">{</a>
<a name="ln5146">  if (argc == 1)</a>
<a name="ln5147">    return bgp_clear_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln5148">                          BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5149"> </a>
<a name="ln5150">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln5151">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5152">}</a>
<a name="ln5153"> </a>
<a name="ln5154">ALIAS (clear_bgp_all_soft_out,</a>
<a name="ln5155">       clear_bgp_instance_all_soft_out_cmd,</a>
<a name="ln5156">       &quot;clear bgp view WORD * soft out&quot;,</a>
<a name="ln5157">       CLEAR_STR</a>
<a name="ln5158">       BGP_STR</a>
<a name="ln5159">       &quot;BGP view\n&quot;</a>
<a name="ln5160">       &quot;view name\n&quot;</a>
<a name="ln5161">       &quot;Clear all peers\n&quot;</a>
<a name="ln5162">       BGP_SOFT_STR</a>
<a name="ln5163">       BGP_SOFT_OUT_STR)</a>
<a name="ln5164"> </a>
<a name="ln5165">ALIAS (clear_bgp_all_soft_out,</a>
<a name="ln5166">       clear_bgp_all_out_cmd,</a>
<a name="ln5167">       &quot;clear bgp * out&quot;,</a>
<a name="ln5168">       CLEAR_STR</a>
<a name="ln5169">       BGP_STR</a>
<a name="ln5170">       &quot;Clear all peers\n&quot;</a>
<a name="ln5171">       BGP_SOFT_OUT_STR)</a>
<a name="ln5172"> </a>
<a name="ln5173">ALIAS (clear_bgp_all_soft_out,</a>
<a name="ln5174">       clear_bgp_ipv6_all_soft_out_cmd,</a>
<a name="ln5175">       &quot;clear bgp ipv6 * soft out&quot;,</a>
<a name="ln5176">       CLEAR_STR</a>
<a name="ln5177">       BGP_STR</a>
<a name="ln5178">       &quot;Address family\n&quot;</a>
<a name="ln5179">       &quot;Clear all peers\n&quot;</a>
<a name="ln5180">       BGP_SOFT_STR</a>
<a name="ln5181">       BGP_SOFT_OUT_STR)</a>
<a name="ln5182"> </a>
<a name="ln5183">ALIAS (clear_bgp_all_soft_out,</a>
<a name="ln5184">       clear_bgp_ipv6_all_out_cmd,</a>
<a name="ln5185">       &quot;clear bgp ipv6 * out&quot;,</a>
<a name="ln5186">       CLEAR_STR</a>
<a name="ln5187">       BGP_STR</a>
<a name="ln5188">       &quot;Address family\n&quot;</a>
<a name="ln5189">       &quot;Clear all peers\n&quot;</a>
<a name="ln5190">       BGP_SOFT_OUT_STR)</a>
<a name="ln5191"> </a>
<a name="ln5192">DEFUN (clear_bgp_ipv6_safi_prefix,</a>
<a name="ln5193">       clear_bgp_ipv6_safi_prefix_cmd,</a>
<a name="ln5194">       &quot;clear bgp ipv6 (unicast|multicast) prefix X:X::X:X/M&quot;,</a>
<a name="ln5195">       CLEAR_STR</a>
<a name="ln5196">       BGP_STR</a>
<a name="ln5197">       &quot;Address family\n&quot;</a>
<a name="ln5198">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5199">       &quot;Clear bestpath and re-advertise\n&quot;</a>
<a name="ln5200">       &quot;IPv6 prefix &lt;network&gt;/&lt;length&gt;,  e.g.,  3ffe::/16\n&quot;)</a>
<a name="ln5201">{</a>
<a name="ln5202">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln5203">    return bgp_clear_prefix (vty, NULL, argv[1], AFI_IP6, SAFI_MULTICAST, NULL);</a>
<a name="ln5204">  else</a>
<a name="ln5205">    return bgp_clear_prefix (vty, NULL, argv[1], AFI_IP6, SAFI_UNICAST, NULL);</a>
<a name="ln5206">}</a>
<a name="ln5207"> </a>
<a name="ln5208">DEFUN (clear_ip_bgp_peer_soft_out,</a>
<a name="ln5209">       clear_ip_bgp_peer_soft_out_cmd,</a>
<a name="ln5210">       &quot;clear ip bgp A.B.C.D soft out&quot;,</a>
<a name="ln5211">       CLEAR_STR</a>
<a name="ln5212">       IP_STR</a>
<a name="ln5213">       BGP_STR</a>
<a name="ln5214">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5215">       BGP_SOFT_STR</a>
<a name="ln5216">       BGP_SOFT_OUT_STR)</a>
<a name="ln5217">{</a>
<a name="ln5218">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln5219">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5220">}</a>
<a name="ln5221"> </a>
<a name="ln5222">ALIAS (clear_ip_bgp_peer_soft_out,</a>
<a name="ln5223">       clear_ip_bgp_peer_out_cmd,</a>
<a name="ln5224">       &quot;clear ip bgp A.B.C.D out&quot;,</a>
<a name="ln5225">       CLEAR_STR</a>
<a name="ln5226">       IP_STR</a>
<a name="ln5227">       BGP_STR</a>
<a name="ln5228">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5229">       BGP_SOFT_OUT_STR)</a>
<a name="ln5230"> </a>
<a name="ln5231">DEFUN (clear_ip_bgp_peer_ipv4_soft_out,</a>
<a name="ln5232">       clear_ip_bgp_peer_ipv4_soft_out_cmd,</a>
<a name="ln5233">       &quot;clear ip bgp A.B.C.D ipv4 (unicast|multicast) soft out&quot;,</a>
<a name="ln5234">       CLEAR_STR</a>
<a name="ln5235">       IP_STR</a>
<a name="ln5236">       BGP_STR</a>
<a name="ln5237">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5238">       &quot;Address family\n&quot;</a>
<a name="ln5239">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5240">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5241">       BGP_SOFT_STR</a>
<a name="ln5242">       BGP_SOFT_OUT_STR)</a>
<a name="ln5243">{</a>
<a name="ln5244">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln5245">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_peer,</a>
<a name="ln5246">			  BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5247"> </a>
<a name="ln5248">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln5249">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5250">}</a>
<a name="ln5251"> </a>
<a name="ln5252">ALIAS (clear_ip_bgp_peer_ipv4_soft_out,</a>
<a name="ln5253">       clear_ip_bgp_peer_ipv4_out_cmd,</a>
<a name="ln5254">       &quot;clear ip bgp A.B.C.D ipv4 (unicast|multicast) out&quot;,</a>
<a name="ln5255">       CLEAR_STR</a>
<a name="ln5256">       IP_STR</a>
<a name="ln5257">       BGP_STR</a>
<a name="ln5258">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5259">       &quot;Address family\n&quot;</a>
<a name="ln5260">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5261">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5262">       BGP_SOFT_OUT_STR)</a>
<a name="ln5263"> </a>
<a name="ln5264">DEFUN (clear_ip_bgp_peer_vpnv4_soft_out,</a>
<a name="ln5265">       clear_ip_bgp_peer_vpnv4_soft_out_cmd,</a>
<a name="ln5266">       &quot;clear ip bgp A.B.C.D vpnv4 unicast soft out&quot;,</a>
<a name="ln5267">       CLEAR_STR</a>
<a name="ln5268">       IP_STR</a>
<a name="ln5269">       BGP_STR</a>
<a name="ln5270">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5271">       &quot;Address family\n&quot;</a>
<a name="ln5272">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5273">       BGP_SOFT_STR</a>
<a name="ln5274">       BGP_SOFT_OUT_STR)</a>
<a name="ln5275">{</a>
<a name="ln5276">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_peer,</a>
<a name="ln5277">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5278">}</a>
<a name="ln5279"> </a>
<a name="ln5280">ALIAS (clear_ip_bgp_peer_vpnv4_soft_out,</a>
<a name="ln5281">       clear_ip_bgp_peer_vpnv4_out_cmd,</a>
<a name="ln5282">       &quot;clear ip bgp A.B.C.D vpnv4 unicast out&quot;,</a>
<a name="ln5283">       CLEAR_STR</a>
<a name="ln5284">       IP_STR</a>
<a name="ln5285">       BGP_STR</a>
<a name="ln5286">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5287">       &quot;Address family\n&quot;</a>
<a name="ln5288">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5289">       BGP_SOFT_OUT_STR)</a>
<a name="ln5290"> </a>
<a name="ln5291">DEFUN (clear_ip_bgp_peer_encap_soft_out,</a>
<a name="ln5292">       clear_ip_bgp_peer_encap_soft_out_cmd,</a>
<a name="ln5293">       &quot;clear ip bgp A.B.C.D encap unicast soft out&quot;,</a>
<a name="ln5294">       CLEAR_STR</a>
<a name="ln5295">       IP_STR</a>
<a name="ln5296">       BGP_STR</a>
<a name="ln5297">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5298">       &quot;Address family\n&quot;</a>
<a name="ln5299">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5300">       &quot;Soft reconfig\n&quot;</a>
<a name="ln5301">       &quot;Soft reconfig outbound update\n&quot;)</a>
<a name="ln5302">{</a>
<a name="ln5303">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_peer,</a>
<a name="ln5304">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5305">}</a>
<a name="ln5306"> </a>
<a name="ln5307">ALIAS (clear_ip_bgp_peer_encap_soft_out,</a>
<a name="ln5308">       clear_ip_bgp_peer_encap_out_cmd,</a>
<a name="ln5309">       &quot;clear ip bgp A.B.C.D encap unicast out&quot;,</a>
<a name="ln5310">       CLEAR_STR</a>
<a name="ln5311">       IP_STR</a>
<a name="ln5312">       BGP_STR</a>
<a name="ln5313">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5314">       &quot;Address family\n&quot;</a>
<a name="ln5315">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5316">       &quot;Soft reconfig outbound update\n&quot;)</a>
<a name="ln5317"> </a>
<a name="ln5318">DEFUN (clear_bgp_peer_soft_out,</a>
<a name="ln5319">       clear_bgp_peer_soft_out_cmd,</a>
<a name="ln5320">       &quot;clear bgp (A.B.C.D|X:X::X:X) soft out&quot;,</a>
<a name="ln5321">       CLEAR_STR</a>
<a name="ln5322">       BGP_STR</a>
<a name="ln5323">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5324">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln5325">       BGP_SOFT_STR</a>
<a name="ln5326">       BGP_SOFT_OUT_STR)</a>
<a name="ln5327">{</a>
<a name="ln5328">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_peer,</a>
<a name="ln5329">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5330">}</a>
<a name="ln5331"> </a>
<a name="ln5332">ALIAS (clear_bgp_peer_soft_out,</a>
<a name="ln5333">       clear_bgp_ipv6_peer_soft_out_cmd,</a>
<a name="ln5334">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X) soft out&quot;,</a>
<a name="ln5335">       CLEAR_STR</a>
<a name="ln5336">       BGP_STR</a>
<a name="ln5337">       &quot;Address family\n&quot;</a>
<a name="ln5338">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5339">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln5340">       BGP_SOFT_STR</a>
<a name="ln5341">       BGP_SOFT_OUT_STR)</a>
<a name="ln5342"> </a>
<a name="ln5343">ALIAS (clear_bgp_peer_soft_out,</a>
<a name="ln5344">       clear_bgp_peer_out_cmd,</a>
<a name="ln5345">       &quot;clear bgp (A.B.C.D|X:X::X:X) out&quot;,</a>
<a name="ln5346">       CLEAR_STR</a>
<a name="ln5347">       BGP_STR</a>
<a name="ln5348">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5349">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln5350">       BGP_SOFT_OUT_STR)</a>
<a name="ln5351"> </a>
<a name="ln5352">ALIAS (clear_bgp_peer_soft_out,</a>
<a name="ln5353">       clear_bgp_ipv6_peer_out_cmd,</a>
<a name="ln5354">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X) out&quot;,</a>
<a name="ln5355">       CLEAR_STR</a>
<a name="ln5356">       BGP_STR</a>
<a name="ln5357">       &quot;Address family\n&quot;</a>
<a name="ln5358">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln5359">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln5360">       BGP_SOFT_OUT_STR)</a>
<a name="ln5361"> </a>
<a name="ln5362">DEFUN (clear_ip_bgp_peer_group_soft_out,</a>
<a name="ln5363">       clear_ip_bgp_peer_group_soft_out_cmd, </a>
<a name="ln5364">       &quot;clear ip bgp peer-group WORD soft out&quot;,</a>
<a name="ln5365">       CLEAR_STR</a>
<a name="ln5366">       IP_STR</a>
<a name="ln5367">       BGP_STR</a>
<a name="ln5368">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5369">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5370">       BGP_SOFT_STR</a>
<a name="ln5371">       BGP_SOFT_OUT_STR)</a>
<a name="ln5372">{</a>
<a name="ln5373">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln5374">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5375">}</a>
<a name="ln5376"> </a>
<a name="ln5377">ALIAS (clear_ip_bgp_peer_group_soft_out,</a>
<a name="ln5378">       clear_ip_bgp_peer_group_out_cmd, </a>
<a name="ln5379">       &quot;clear ip bgp peer-group WORD out&quot;,</a>
<a name="ln5380">       CLEAR_STR</a>
<a name="ln5381">       IP_STR</a>
<a name="ln5382">       BGP_STR</a>
<a name="ln5383">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5384">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5385">       BGP_SOFT_OUT_STR)</a>
<a name="ln5386"> </a>
<a name="ln5387">DEFUN (clear_ip_bgp_peer_group_ipv4_soft_out,</a>
<a name="ln5388">       clear_ip_bgp_peer_group_ipv4_soft_out_cmd,</a>
<a name="ln5389">       &quot;clear ip bgp peer-group WORD ipv4 (unicast|multicast) soft out&quot;,</a>
<a name="ln5390">       CLEAR_STR</a>
<a name="ln5391">       IP_STR</a>
<a name="ln5392">       BGP_STR</a>
<a name="ln5393">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5394">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5395">       &quot;Address family\n&quot;</a>
<a name="ln5396">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5397">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5398">       BGP_SOFT_STR</a>
<a name="ln5399">       BGP_SOFT_OUT_STR)</a>
<a name="ln5400">{</a>
<a name="ln5401">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln5402">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_group,</a>
<a name="ln5403">			  BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5404"> </a>
<a name="ln5405">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln5406">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5407">}</a>
<a name="ln5408"> </a>
<a name="ln5409">ALIAS (clear_ip_bgp_peer_group_ipv4_soft_out,</a>
<a name="ln5410">       clear_ip_bgp_peer_group_ipv4_out_cmd,</a>
<a name="ln5411">       &quot;clear ip bgp peer-group WORD ipv4 (unicast|multicast) out&quot;,</a>
<a name="ln5412">       CLEAR_STR</a>
<a name="ln5413">       IP_STR</a>
<a name="ln5414">       BGP_STR</a>
<a name="ln5415">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5416">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5417">       &quot;Address family\n&quot;</a>
<a name="ln5418">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5419">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5420">       BGP_SOFT_OUT_STR)</a>
<a name="ln5421"> </a>
<a name="ln5422">DEFUN (clear_bgp_peer_group_soft_out,</a>
<a name="ln5423">       clear_bgp_peer_group_soft_out_cmd,</a>
<a name="ln5424">       &quot;clear bgp peer-group WORD soft out&quot;,</a>
<a name="ln5425">       CLEAR_STR</a>
<a name="ln5426">       BGP_STR</a>
<a name="ln5427">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5428">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5429">       BGP_SOFT_STR</a>
<a name="ln5430">       BGP_SOFT_OUT_STR)</a>
<a name="ln5431">{</a>
<a name="ln5432">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_group,</a>
<a name="ln5433">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5434">}</a>
<a name="ln5435"> </a>
<a name="ln5436">ALIAS (clear_bgp_peer_group_soft_out,</a>
<a name="ln5437">       clear_bgp_ipv6_peer_group_soft_out_cmd,</a>
<a name="ln5438">       &quot;clear bgp ipv6 peer-group WORD soft out&quot;,</a>
<a name="ln5439">       CLEAR_STR</a>
<a name="ln5440">       BGP_STR</a>
<a name="ln5441">       &quot;Address family\n&quot;</a>
<a name="ln5442">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5443">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5444">       BGP_SOFT_STR</a>
<a name="ln5445">       BGP_SOFT_OUT_STR)</a>
<a name="ln5446"> </a>
<a name="ln5447">ALIAS (clear_bgp_peer_group_soft_out,</a>
<a name="ln5448">       clear_bgp_peer_group_out_cmd,</a>
<a name="ln5449">       &quot;clear bgp peer-group WORD out&quot;,</a>
<a name="ln5450">       CLEAR_STR</a>
<a name="ln5451">       BGP_STR</a>
<a name="ln5452">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5453">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5454">       BGP_SOFT_OUT_STR)</a>
<a name="ln5455"> </a>
<a name="ln5456">ALIAS (clear_bgp_peer_group_soft_out,</a>
<a name="ln5457">       clear_bgp_ipv6_peer_group_out_cmd,</a>
<a name="ln5458">       &quot;clear bgp ipv6 peer-group WORD out&quot;,</a>
<a name="ln5459">       CLEAR_STR</a>
<a name="ln5460">       BGP_STR</a>
<a name="ln5461">       &quot;Address family\n&quot;</a>
<a name="ln5462">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln5463">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln5464">       BGP_SOFT_OUT_STR)</a>
<a name="ln5465"> </a>
<a name="ln5466">DEFUN (clear_ip_bgp_external_soft_out,</a>
<a name="ln5467">       clear_ip_bgp_external_soft_out_cmd, </a>
<a name="ln5468">       &quot;clear ip bgp external soft out&quot;,</a>
<a name="ln5469">       CLEAR_STR</a>
<a name="ln5470">       IP_STR</a>
<a name="ln5471">       BGP_STR</a>
<a name="ln5472">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5473">       BGP_SOFT_STR</a>
<a name="ln5474">       BGP_SOFT_OUT_STR)</a>
<a name="ln5475">{</a>
<a name="ln5476">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln5477">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5478">}</a>
<a name="ln5479"> </a>
<a name="ln5480">ALIAS (clear_ip_bgp_external_soft_out,</a>
<a name="ln5481">       clear_ip_bgp_external_out_cmd, </a>
<a name="ln5482">       &quot;clear ip bgp external out&quot;,</a>
<a name="ln5483">       CLEAR_STR</a>
<a name="ln5484">       IP_STR</a>
<a name="ln5485">       BGP_STR</a>
<a name="ln5486">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5487">       BGP_SOFT_OUT_STR)</a>
<a name="ln5488"> </a>
<a name="ln5489">DEFUN (clear_ip_bgp_external_ipv4_soft_out,</a>
<a name="ln5490">       clear_ip_bgp_external_ipv4_soft_out_cmd,</a>
<a name="ln5491">       &quot;clear ip bgp external ipv4 (unicast|multicast) soft out&quot;,</a>
<a name="ln5492">       CLEAR_STR</a>
<a name="ln5493">       IP_STR</a>
<a name="ln5494">       BGP_STR</a>
<a name="ln5495">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5496">       &quot;Address family\n&quot;</a>
<a name="ln5497">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5498">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5499">       BGP_SOFT_STR</a>
<a name="ln5500">       BGP_SOFT_OUT_STR)</a>
<a name="ln5501">{</a>
<a name="ln5502">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln5503">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_external,</a>
<a name="ln5504">			  BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5505"> </a>
<a name="ln5506">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln5507">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5508">}</a>
<a name="ln5509"> </a>
<a name="ln5510">ALIAS (clear_ip_bgp_external_ipv4_soft_out,</a>
<a name="ln5511">       clear_ip_bgp_external_ipv4_out_cmd,</a>
<a name="ln5512">       &quot;clear ip bgp external ipv4 (unicast|multicast) out&quot;,</a>
<a name="ln5513">       CLEAR_STR</a>
<a name="ln5514">       IP_STR</a>
<a name="ln5515">       BGP_STR</a>
<a name="ln5516">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5517">       &quot;Address family\n&quot;</a>
<a name="ln5518">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5519">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5520">       BGP_SOFT_OUT_STR)</a>
<a name="ln5521"> </a>
<a name="ln5522">DEFUN (clear_bgp_external_soft_out,</a>
<a name="ln5523">       clear_bgp_external_soft_out_cmd,</a>
<a name="ln5524">       &quot;clear bgp external soft out&quot;,</a>
<a name="ln5525">       CLEAR_STR</a>
<a name="ln5526">       BGP_STR</a>
<a name="ln5527">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5528">       BGP_SOFT_STR</a>
<a name="ln5529">       BGP_SOFT_OUT_STR)</a>
<a name="ln5530">{</a>
<a name="ln5531">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_external,</a>
<a name="ln5532">			BGP_CLEAR_SOFT_OUT, NULL);</a>
<a name="ln5533">}</a>
<a name="ln5534"> </a>
<a name="ln5535">ALIAS (clear_bgp_external_soft_out,</a>
<a name="ln5536">       clear_bgp_ipv6_external_soft_out_cmd,</a>
<a name="ln5537">       &quot;clear bgp ipv6 external soft out&quot;,</a>
<a name="ln5538">       CLEAR_STR</a>
<a name="ln5539">       BGP_STR</a>
<a name="ln5540">       &quot;Address family\n&quot;</a>
<a name="ln5541">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5542">       BGP_SOFT_STR</a>
<a name="ln5543">       BGP_SOFT_OUT_STR)</a>
<a name="ln5544"> </a>
<a name="ln5545">ALIAS (clear_bgp_external_soft_out,</a>
<a name="ln5546">       clear_bgp_external_out_cmd,</a>
<a name="ln5547">       &quot;clear bgp external out&quot;,</a>
<a name="ln5548">       CLEAR_STR</a>
<a name="ln5549">       BGP_STR</a>
<a name="ln5550">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5551">       BGP_SOFT_OUT_STR)</a>
<a name="ln5552"> </a>
<a name="ln5553">ALIAS (clear_bgp_external_soft_out,</a>
<a name="ln5554">       clear_bgp_ipv6_external_out_cmd,</a>
<a name="ln5555">       &quot;clear bgp ipv6 external WORD out&quot;,</a>
<a name="ln5556">       CLEAR_STR</a>
<a name="ln5557">       BGP_STR</a>
<a name="ln5558">       &quot;Address family\n&quot;</a>
<a name="ln5559">       &quot;Clear all external peers\n&quot;</a>
<a name="ln5560">       BGP_SOFT_OUT_STR)</a>
<a name="ln5561"> </a>
<a name="ln5562">DEFUN (clear_ip_bgp_as_soft_out,</a>
<a name="ln5563">       clear_ip_bgp_as_soft_out_cmd,</a>
<a name="ln5564">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; soft out&quot;,</a>
<a name="ln5565">       CLEAR_STR</a>
<a name="ln5566">       IP_STR</a>
<a name="ln5567">       BGP_STR</a>
<a name="ln5568">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5569">       BGP_SOFT_STR</a>
<a name="ln5570">       BGP_SOFT_OUT_STR)</a>
<a name="ln5571">{</a>
<a name="ln5572">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln5573">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5574">}</a>
<a name="ln5575"> </a>
<a name="ln5576">ALIAS (clear_ip_bgp_as_soft_out,</a>
<a name="ln5577">       clear_ip_bgp_as_out_cmd,</a>
<a name="ln5578">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; out&quot;,</a>
<a name="ln5579">       CLEAR_STR</a>
<a name="ln5580">       IP_STR</a>
<a name="ln5581">       BGP_STR</a>
<a name="ln5582">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5583">       BGP_SOFT_OUT_STR)</a>
<a name="ln5584"> </a>
<a name="ln5585">DEFUN (clear_ip_bgp_as_ipv4_soft_out,</a>
<a name="ln5586">       clear_ip_bgp_as_ipv4_soft_out_cmd,</a>
<a name="ln5587">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; ipv4 (unicast|multicast) soft out&quot;,</a>
<a name="ln5588">       CLEAR_STR</a>
<a name="ln5589">       IP_STR</a>
<a name="ln5590">       BGP_STR</a>
<a name="ln5591">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5592">       &quot;Address family\n&quot;</a>
<a name="ln5593">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5594">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5595">       BGP_SOFT_STR</a>
<a name="ln5596">       BGP_SOFT_OUT_STR)</a>
<a name="ln5597">{</a>
<a name="ln5598">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln5599">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_as,</a>
<a name="ln5600">			  BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5601"> </a>
<a name="ln5602">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln5603">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5604">}</a>
<a name="ln5605"> </a>
<a name="ln5606">ALIAS (clear_ip_bgp_as_ipv4_soft_out,</a>
<a name="ln5607">       clear_ip_bgp_as_ipv4_out_cmd,</a>
<a name="ln5608">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; ipv4 (unicast|multicast) out&quot;,</a>
<a name="ln5609">       CLEAR_STR</a>
<a name="ln5610">       IP_STR</a>
<a name="ln5611">       BGP_STR</a>
<a name="ln5612">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5613">       &quot;Address family\n&quot;</a>
<a name="ln5614">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5615">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5616">       BGP_SOFT_OUT_STR)</a>
<a name="ln5617"> </a>
<a name="ln5618">DEFUN (clear_ip_bgp_as_vpnv4_soft_out,</a>
<a name="ln5619">       clear_ip_bgp_as_vpnv4_soft_out_cmd,</a>
<a name="ln5620">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; vpnv4 unicast soft out&quot;,</a>
<a name="ln5621">       CLEAR_STR</a>
<a name="ln5622">       IP_STR</a>
<a name="ln5623">       BGP_STR</a>
<a name="ln5624">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5625">       &quot;Address family\n&quot;</a>
<a name="ln5626">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5627">       BGP_SOFT_STR</a>
<a name="ln5628">       BGP_SOFT_OUT_STR)</a>
<a name="ln5629">{</a>
<a name="ln5630">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_as,</a>
<a name="ln5631">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5632">}</a>
<a name="ln5633"> </a>
<a name="ln5634">ALIAS (clear_ip_bgp_as_vpnv4_soft_out,</a>
<a name="ln5635">       clear_ip_bgp_as_vpnv4_out_cmd,</a>
<a name="ln5636">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; vpnv4 unicast out&quot;,</a>
<a name="ln5637">       CLEAR_STR</a>
<a name="ln5638">       IP_STR</a>
<a name="ln5639">       BGP_STR</a>
<a name="ln5640">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5641">       &quot;Address family\n&quot;</a>
<a name="ln5642">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5643">       BGP_SOFT_OUT_STR)</a>
<a name="ln5644"> </a>
<a name="ln5645">DEFUN (clear_ip_bgp_as_encap_soft_out,</a>
<a name="ln5646">       clear_ip_bgp_as_encap_soft_out_cmd,</a>
<a name="ln5647">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; encap unicast soft out&quot;,</a>
<a name="ln5648">       CLEAR_STR</a>
<a name="ln5649">       IP_STR</a>
<a name="ln5650">       BGP_STR</a>
<a name="ln5651">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5652">       &quot;Address family\n&quot;</a>
<a name="ln5653">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5654">       &quot;Soft reconfig\n&quot;</a>
<a name="ln5655">       &quot;Soft reconfig outbound update\n&quot;)</a>
<a name="ln5656">{</a>
<a name="ln5657">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_as,</a>
<a name="ln5658">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5659">}</a>
<a name="ln5660"> </a>
<a name="ln5661">ALIAS (clear_ip_bgp_as_encap_soft_out,</a>
<a name="ln5662">       clear_ip_bgp_as_encap_out_cmd,</a>
<a name="ln5663">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; encap unicast out&quot;,</a>
<a name="ln5664">       CLEAR_STR</a>
<a name="ln5665">       IP_STR</a>
<a name="ln5666">       BGP_STR</a>
<a name="ln5667">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5668">       &quot;Address family\n&quot;</a>
<a name="ln5669">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5670">       &quot;Soft reconfig outbound update\n&quot;)</a>
<a name="ln5671"> </a>
<a name="ln5672">DEFUN (clear_bgp_as_soft_out,</a>
<a name="ln5673">       clear_bgp_as_soft_out_cmd,</a>
<a name="ln5674">       &quot;clear bgp &quot; CMD_AS_RANGE &quot; soft out&quot;,</a>
<a name="ln5675">       CLEAR_STR</a>
<a name="ln5676">       BGP_STR</a>
<a name="ln5677">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5678">       BGP_SOFT_STR</a>
<a name="ln5679">       BGP_SOFT_OUT_STR)</a>
<a name="ln5680">{</a>
<a name="ln5681">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_as,</a>
<a name="ln5682">			BGP_CLEAR_SOFT_OUT, argv[0]);</a>
<a name="ln5683">}</a>
<a name="ln5684"> </a>
<a name="ln5685">ALIAS (clear_bgp_as_soft_out,</a>
<a name="ln5686">       clear_bgp_ipv6_as_soft_out_cmd,</a>
<a name="ln5687">       &quot;clear bgp ipv6 &quot; CMD_AS_RANGE &quot; soft out&quot;,</a>
<a name="ln5688">       CLEAR_STR</a>
<a name="ln5689">       BGP_STR</a>
<a name="ln5690">       &quot;Address family\n&quot;</a>
<a name="ln5691">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5692">       BGP_SOFT_STR</a>
<a name="ln5693">       BGP_SOFT_OUT_STR)</a>
<a name="ln5694"> </a>
<a name="ln5695">ALIAS (clear_bgp_as_soft_out,</a>
<a name="ln5696">       clear_bgp_as_out_cmd,</a>
<a name="ln5697">       &quot;clear bgp &quot; CMD_AS_RANGE &quot; out&quot;,</a>
<a name="ln5698">       CLEAR_STR</a>
<a name="ln5699">       BGP_STR</a>
<a name="ln5700">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5701">       BGP_SOFT_OUT_STR)</a>
<a name="ln5702"> </a>
<a name="ln5703">ALIAS (clear_bgp_as_soft_out,</a>
<a name="ln5704">       clear_bgp_ipv6_as_out_cmd,</a>
<a name="ln5705">       &quot;clear bgp ipv6 &quot; CMD_AS_RANGE &quot; out&quot;,</a>
<a name="ln5706">       CLEAR_STR</a>
<a name="ln5707">       BGP_STR</a>
<a name="ln5708">       &quot;Address family\n&quot;</a>
<a name="ln5709">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln5710">       BGP_SOFT_OUT_STR)</a>
<a name="ln5711"> </a>
<a name="ln5712">/* Inbound soft-reconfiguration */</a>
<a name="ln5713">DEFUN (clear_ip_bgp_all_soft_in,</a>
<a name="ln5714">       clear_ip_bgp_all_soft_in_cmd,</a>
<a name="ln5715">       &quot;clear ip bgp * soft in&quot;,</a>
<a name="ln5716">       CLEAR_STR</a>
<a name="ln5717">       IP_STR</a>
<a name="ln5718">       BGP_STR</a>
<a name="ln5719">       &quot;Clear all peers\n&quot;</a>
<a name="ln5720">       BGP_SOFT_STR</a>
<a name="ln5721">       BGP_SOFT_IN_STR)</a>
<a name="ln5722">{</a>
<a name="ln5723">  if (argc == 1)</a>
<a name="ln5724">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5725">                          BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5726"> </a>
<a name="ln5727">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5728">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5729">}</a>
<a name="ln5730"> </a>
<a name="ln5731">ALIAS (clear_ip_bgp_all_soft_in,</a>
<a name="ln5732">       clear_ip_bgp_instance_all_soft_in_cmd,</a>
<a name="ln5733">       &quot;clear ip bgp view WORD * soft in&quot;,</a>
<a name="ln5734">       CLEAR_STR</a>
<a name="ln5735">       IP_STR</a>
<a name="ln5736">       BGP_STR</a>
<a name="ln5737">       &quot;BGP view\n&quot;</a>
<a name="ln5738">       &quot;view name\n&quot;</a>
<a name="ln5739">       &quot;Clear all peers\n&quot;</a>
<a name="ln5740">       BGP_SOFT_STR</a>
<a name="ln5741">       BGP_SOFT_IN_STR)</a>
<a name="ln5742"> </a>
<a name="ln5743">ALIAS (clear_ip_bgp_all_soft_in,</a>
<a name="ln5744">       clear_ip_bgp_all_in_cmd,</a>
<a name="ln5745">       &quot;clear ip bgp * in&quot;,</a>
<a name="ln5746">       CLEAR_STR</a>
<a name="ln5747">       IP_STR</a>
<a name="ln5748">       BGP_STR</a>
<a name="ln5749">       &quot;Clear all peers\n&quot;</a>
<a name="ln5750">       BGP_SOFT_IN_STR)</a>
<a name="ln5751"> </a>
<a name="ln5752">DEFUN (clear_ip_bgp_all_in_prefix_filter,</a>
<a name="ln5753">       clear_ip_bgp_all_in_prefix_filter_cmd,</a>
<a name="ln5754">       &quot;clear ip bgp * in prefix-filter&quot;,</a>
<a name="ln5755">       CLEAR_STR</a>
<a name="ln5756">       IP_STR</a>
<a name="ln5757">       BGP_STR</a>
<a name="ln5758">       &quot;Clear all peers\n&quot;</a>
<a name="ln5759">       BGP_SOFT_IN_STR</a>
<a name="ln5760">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln5761">{</a>
<a name="ln5762">  if (argc== 1)</a>
<a name="ln5763">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5764">                          BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln5765"> </a>
<a name="ln5766">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5767">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln5768">}</a>
<a name="ln5769"> </a>
<a name="ln5770">ALIAS (clear_ip_bgp_all_in_prefix_filter,</a>
<a name="ln5771">       clear_ip_bgp_instance_all_in_prefix_filter_cmd,</a>
<a name="ln5772">       &quot;clear ip bgp view WORD * in prefix-filter&quot;,</a>
<a name="ln5773">       CLEAR_STR</a>
<a name="ln5774">       IP_STR</a>
<a name="ln5775">       BGP_STR</a>
<a name="ln5776">       &quot;BGP view\n&quot;</a>
<a name="ln5777">       &quot;view name\n&quot;</a>
<a name="ln5778">       &quot;Clear all peers\n&quot;</a>
<a name="ln5779">       BGP_SOFT_IN_STR</a>
<a name="ln5780">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln5781"> </a>
<a name="ln5782"> </a>
<a name="ln5783">DEFUN (clear_ip_bgp_all_ipv4_soft_in,</a>
<a name="ln5784">       clear_ip_bgp_all_ipv4_soft_in_cmd,</a>
<a name="ln5785">       &quot;clear ip bgp * ipv4 (unicast|multicast) soft in&quot;,</a>
<a name="ln5786">       CLEAR_STR</a>
<a name="ln5787">       IP_STR</a>
<a name="ln5788">       BGP_STR</a>
<a name="ln5789">       &quot;Clear all peers\n&quot;</a>
<a name="ln5790">       &quot;Address family\n&quot;</a>
<a name="ln5791">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5792">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5793">       BGP_SOFT_STR</a>
<a name="ln5794">       BGP_SOFT_IN_STR)</a>
<a name="ln5795">{</a>
<a name="ln5796">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln5797">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln5798">			  BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5799"> </a>
<a name="ln5800">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5801">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5802">}</a>
<a name="ln5803"> </a>
<a name="ln5804">ALIAS (clear_ip_bgp_all_ipv4_soft_in,</a>
<a name="ln5805">       clear_ip_bgp_all_ipv4_in_cmd,</a>
<a name="ln5806">       &quot;clear ip bgp * ipv4 (unicast|multicast) in&quot;,</a>
<a name="ln5807">       CLEAR_STR</a>
<a name="ln5808">       IP_STR</a>
<a name="ln5809">       BGP_STR</a>
<a name="ln5810">       &quot;Clear all peers\n&quot;</a>
<a name="ln5811">       &quot;Address family\n&quot;</a>
<a name="ln5812">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5813">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5814">       BGP_SOFT_IN_STR)</a>
<a name="ln5815"> </a>
<a name="ln5816">DEFUN (clear_ip_bgp_instance_all_ipv4_soft_in,</a>
<a name="ln5817">       clear_ip_bgp_instance_all_ipv4_soft_in_cmd,</a>
<a name="ln5818">       &quot;clear ip bgp view WORD * ipv4 (unicast|multicast) soft in&quot;,</a>
<a name="ln5819">       CLEAR_STR</a>
<a name="ln5820">       IP_STR</a>
<a name="ln5821">       BGP_STR</a>
<a name="ln5822">       &quot;BGP view\n&quot;</a>
<a name="ln5823">       &quot;view name\n&quot;</a>
<a name="ln5824">       &quot;Clear all peers\n&quot;</a>
<a name="ln5825">       &quot;Address family\n&quot;</a>
<a name="ln5826">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5827">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5828">       BGP_SOFT_STR</a>
<a name="ln5829">       BGP_SOFT_IN_STR)</a>
<a name="ln5830">{</a>
<a name="ln5831">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln5832">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln5833">                          BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5834"> </a>
<a name="ln5835">  return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5836">                        BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5837">}</a>
<a name="ln5838"> </a>
<a name="ln5839">DEFUN (clear_ip_bgp_all_ipv4_in_prefix_filter,</a>
<a name="ln5840">       clear_ip_bgp_all_ipv4_in_prefix_filter_cmd,</a>
<a name="ln5841">       &quot;clear ip bgp * ipv4 (unicast|multicast) in prefix-filter&quot;,</a>
<a name="ln5842">       CLEAR_STR</a>
<a name="ln5843">       IP_STR</a>
<a name="ln5844">       BGP_STR</a>
<a name="ln5845">       &quot;Clear all peers\n&quot;</a>
<a name="ln5846">       &quot;Address family\n&quot;</a>
<a name="ln5847">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5848">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5849">       BGP_SOFT_IN_STR</a>
<a name="ln5850">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln5851">{</a>
<a name="ln5852">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln5853">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln5854">			  BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln5855"> </a>
<a name="ln5856">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5857">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln5858">}</a>
<a name="ln5859"> </a>
<a name="ln5860">DEFUN (clear_ip_bgp_instance_all_ipv4_in_prefix_filter,</a>
<a name="ln5861">       clear_ip_bgp_instance_all_ipv4_in_prefix_filter_cmd,</a>
<a name="ln5862">       &quot;clear ip bgp view WORD * ipv4 (unicast|multicast) in prefix-filter&quot;,</a>
<a name="ln5863">       CLEAR_STR</a>
<a name="ln5864">       IP_STR</a>
<a name="ln5865">       BGP_STR</a>
<a name="ln5866">       &quot;Clear all peers\n&quot;</a>
<a name="ln5867">       &quot;Address family\n&quot;</a>
<a name="ln5868">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5869">       &quot;Address Family modifier\n&quot;</a>
<a name="ln5870">       BGP_SOFT_IN_STR</a>
<a name="ln5871">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln5872">{</a>
<a name="ln5873">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln5874">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln5875">                          BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln5876"> </a>
<a name="ln5877">  return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln5878">                        BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln5879">}</a>
<a name="ln5880"> </a>
<a name="ln5881">DEFUN (clear_ip_bgp_all_vpnv4_soft_in,</a>
<a name="ln5882">       clear_ip_bgp_all_vpnv4_soft_in_cmd,</a>
<a name="ln5883">       &quot;clear ip bgp * vpnv4 unicast soft in&quot;,</a>
<a name="ln5884">       CLEAR_STR</a>
<a name="ln5885">       IP_STR</a>
<a name="ln5886">       BGP_STR</a>
<a name="ln5887">       &quot;Clear all peers\n&quot;</a>
<a name="ln5888">       &quot;Address family\n&quot;</a>
<a name="ln5889">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5890">       BGP_SOFT_STR</a>
<a name="ln5891">       BGP_SOFT_IN_STR)</a>
<a name="ln5892">{</a>
<a name="ln5893">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_all,</a>
<a name="ln5894">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5895">}</a>
<a name="ln5896"> </a>
<a name="ln5897">ALIAS (clear_ip_bgp_all_vpnv4_soft_in,</a>
<a name="ln5898">       clear_ip_bgp_all_vpnv4_in_cmd,</a>
<a name="ln5899">       &quot;clear ip bgp * vpnv4 unicast in&quot;,</a>
<a name="ln5900">       CLEAR_STR</a>
<a name="ln5901">       IP_STR</a>
<a name="ln5902">       BGP_STR</a>
<a name="ln5903">       &quot;Clear all peers\n&quot;</a>
<a name="ln5904">       &quot;Address family\n&quot;</a>
<a name="ln5905">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5906">       BGP_SOFT_IN_STR)</a>
<a name="ln5907"> </a>
<a name="ln5908">DEFUN (clear_ip_bgp_all_encap_soft_in,</a>
<a name="ln5909">       clear_ip_bgp_all_encap_soft_in_cmd,</a>
<a name="ln5910">       &quot;clear ip bgp * encap unicast soft in&quot;,</a>
<a name="ln5911">       CLEAR_STR</a>
<a name="ln5912">       IP_STR</a>
<a name="ln5913">       BGP_STR</a>
<a name="ln5914">       &quot;Clear all peers\n&quot;</a>
<a name="ln5915">       &quot;Address family\n&quot;</a>
<a name="ln5916">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5917">       &quot;Soft reconfig\n&quot;</a>
<a name="ln5918">       &quot;Soft reconfig inbound update\n&quot;)</a>
<a name="ln5919">{</a>
<a name="ln5920">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_all,</a>
<a name="ln5921">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5922">}</a>
<a name="ln5923"> </a>
<a name="ln5924">ALIAS (clear_ip_bgp_all_encap_soft_in,</a>
<a name="ln5925">       clear_ip_bgp_all_encap_in_cmd,</a>
<a name="ln5926">       &quot;clear ip bgp * encap unicast in&quot;,</a>
<a name="ln5927">       CLEAR_STR</a>
<a name="ln5928">       IP_STR</a>
<a name="ln5929">       BGP_STR</a>
<a name="ln5930">       &quot;Clear all peers\n&quot;</a>
<a name="ln5931">       &quot;Address family\n&quot;</a>
<a name="ln5932">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln5933">       &quot;Soft reconfig inbound update\n&quot;)</a>
<a name="ln5934"> </a>
<a name="ln5935">DEFUN (clear_bgp_all_soft_in,</a>
<a name="ln5936">       clear_bgp_all_soft_in_cmd,</a>
<a name="ln5937">       &quot;clear bgp * soft in&quot;,</a>
<a name="ln5938">       CLEAR_STR</a>
<a name="ln5939">       BGP_STR</a>
<a name="ln5940">       &quot;Clear all peers\n&quot;</a>
<a name="ln5941">       BGP_SOFT_STR</a>
<a name="ln5942">       BGP_SOFT_IN_STR)</a>
<a name="ln5943">{</a>
<a name="ln5944">  if (argc == 1)</a>
<a name="ln5945">    return bgp_clear_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln5946">                        BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5947"> </a>
<a name="ln5948">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln5949">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln5950">}</a>
<a name="ln5951"> </a>
<a name="ln5952">ALIAS (clear_bgp_all_soft_in,</a>
<a name="ln5953">       clear_bgp_instance_all_soft_in_cmd,</a>
<a name="ln5954">       &quot;clear bgp view WORD * soft in&quot;,</a>
<a name="ln5955">       CLEAR_STR</a>
<a name="ln5956">       BGP_STR</a>
<a name="ln5957">       &quot;BGP view\n&quot;</a>
<a name="ln5958">       &quot;view name\n&quot;</a>
<a name="ln5959">       &quot;Clear all peers\n&quot;</a>
<a name="ln5960">       BGP_SOFT_STR</a>
<a name="ln5961">       BGP_SOFT_IN_STR)</a>
<a name="ln5962"> </a>
<a name="ln5963">ALIAS (clear_bgp_all_soft_in,</a>
<a name="ln5964">       clear_bgp_ipv6_all_soft_in_cmd,</a>
<a name="ln5965">       &quot;clear bgp ipv6 * soft in&quot;,</a>
<a name="ln5966">       CLEAR_STR</a>
<a name="ln5967">       BGP_STR</a>
<a name="ln5968">       &quot;Address family\n&quot;</a>
<a name="ln5969">       &quot;Clear all peers\n&quot;</a>
<a name="ln5970">       BGP_SOFT_STR</a>
<a name="ln5971">       BGP_SOFT_IN_STR)</a>
<a name="ln5972"> </a>
<a name="ln5973">ALIAS (clear_bgp_all_soft_in,</a>
<a name="ln5974">       clear_bgp_all_in_cmd,</a>
<a name="ln5975">       &quot;clear bgp * in&quot;,</a>
<a name="ln5976">       CLEAR_STR</a>
<a name="ln5977">       BGP_STR</a>
<a name="ln5978">       &quot;Clear all peers\n&quot;</a>
<a name="ln5979">       BGP_SOFT_IN_STR)</a>
<a name="ln5980"> </a>
<a name="ln5981">ALIAS (clear_bgp_all_soft_in,</a>
<a name="ln5982">       clear_bgp_ipv6_all_in_cmd,</a>
<a name="ln5983">       &quot;clear bgp ipv6 * in&quot;,</a>
<a name="ln5984">       CLEAR_STR</a>
<a name="ln5985">       BGP_STR</a>
<a name="ln5986">       &quot;Address family\n&quot;</a>
<a name="ln5987">       &quot;Clear all peers\n&quot;</a>
<a name="ln5988">       BGP_SOFT_IN_STR)</a>
<a name="ln5989"> </a>
<a name="ln5990">DEFUN (clear_bgp_all_in_prefix_filter,</a>
<a name="ln5991">       clear_bgp_all_in_prefix_filter_cmd,</a>
<a name="ln5992">       &quot;clear bgp * in prefix-filter&quot;,</a>
<a name="ln5993">       CLEAR_STR</a>
<a name="ln5994">       BGP_STR</a>
<a name="ln5995">       &quot;Clear all peers\n&quot;</a>
<a name="ln5996">       BGP_SOFT_IN_STR</a>
<a name="ln5997">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln5998">{</a>
<a name="ln5999">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln6000">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln6001">}</a>
<a name="ln6002"> </a>
<a name="ln6003">ALIAS (clear_bgp_all_in_prefix_filter,</a>
<a name="ln6004">       clear_bgp_ipv6_all_in_prefix_filter_cmd,</a>
<a name="ln6005">       &quot;clear bgp ipv6 * in prefix-filter&quot;,</a>
<a name="ln6006">       CLEAR_STR</a>
<a name="ln6007">       BGP_STR</a>
<a name="ln6008">       &quot;Address family\n&quot;</a>
<a name="ln6009">       &quot;Clear all peers\n&quot;</a>
<a name="ln6010">       BGP_SOFT_IN_STR</a>
<a name="ln6011">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6012"> </a>
<a name="ln6013">DEFUN (clear_ip_bgp_peer_soft_in,</a>
<a name="ln6014">       clear_ip_bgp_peer_soft_in_cmd,</a>
<a name="ln6015">       &quot;clear ip bgp A.B.C.D soft in&quot;,</a>
<a name="ln6016">       CLEAR_STR</a>
<a name="ln6017">       IP_STR</a>
<a name="ln6018">       BGP_STR</a>
<a name="ln6019">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6020">       BGP_SOFT_STR</a>
<a name="ln6021">       BGP_SOFT_IN_STR)</a>
<a name="ln6022">{</a>
<a name="ln6023">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln6024">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6025">}</a>
<a name="ln6026"> </a>
<a name="ln6027">ALIAS (clear_ip_bgp_peer_soft_in,</a>
<a name="ln6028">       clear_ip_bgp_peer_in_cmd,</a>
<a name="ln6029">       &quot;clear ip bgp A.B.C.D in&quot;,</a>
<a name="ln6030">       CLEAR_STR</a>
<a name="ln6031">       IP_STR</a>
<a name="ln6032">       BGP_STR</a>
<a name="ln6033">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6034">       BGP_SOFT_IN_STR)</a>
<a name="ln6035">       </a>
<a name="ln6036">DEFUN (clear_ip_bgp_peer_in_prefix_filter,</a>
<a name="ln6037">       clear_ip_bgp_peer_in_prefix_filter_cmd,</a>
<a name="ln6038">       &quot;clear ip bgp A.B.C.D in prefix-filter&quot;,</a>
<a name="ln6039">       CLEAR_STR</a>
<a name="ln6040">       IP_STR</a>
<a name="ln6041">       BGP_STR</a>
<a name="ln6042">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6043">       BGP_SOFT_IN_STR</a>
<a name="ln6044">       &quot;Push out the existing ORF prefix-list\n&quot;)</a>
<a name="ln6045">{</a>
<a name="ln6046">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln6047">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6048">}</a>
<a name="ln6049"> </a>
<a name="ln6050">DEFUN (clear_ip_bgp_peer_ipv4_soft_in,</a>
<a name="ln6051">       clear_ip_bgp_peer_ipv4_soft_in_cmd,</a>
<a name="ln6052">       &quot;clear ip bgp A.B.C.D ipv4 (unicast|multicast) soft in&quot;,</a>
<a name="ln6053">       CLEAR_STR</a>
<a name="ln6054">       IP_STR</a>
<a name="ln6055">       BGP_STR</a>
<a name="ln6056">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6057">       &quot;Address family\n&quot;</a>
<a name="ln6058">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6059">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6060">       BGP_SOFT_STR</a>
<a name="ln6061">       BGP_SOFT_IN_STR)</a>
<a name="ln6062">{</a>
<a name="ln6063">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6064">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_peer,</a>
<a name="ln6065">			  BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6066"> </a>
<a name="ln6067">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln6068">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6069">}</a>
<a name="ln6070"> </a>
<a name="ln6071">ALIAS (clear_ip_bgp_peer_ipv4_soft_in,</a>
<a name="ln6072">       clear_ip_bgp_peer_ipv4_in_cmd,</a>
<a name="ln6073">       &quot;clear ip bgp A.B.C.D ipv4 (unicast|multicast) in&quot;,</a>
<a name="ln6074">       CLEAR_STR</a>
<a name="ln6075">       IP_STR</a>
<a name="ln6076">       BGP_STR</a>
<a name="ln6077">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6078">       &quot;Address family\n&quot;</a>
<a name="ln6079">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6080">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6081">       BGP_SOFT_IN_STR)</a>
<a name="ln6082"> </a>
<a name="ln6083">DEFUN (clear_ip_bgp_peer_ipv4_in_prefix_filter,</a>
<a name="ln6084">       clear_ip_bgp_peer_ipv4_in_prefix_filter_cmd,</a>
<a name="ln6085">       &quot;clear ip bgp A.B.C.D ipv4 (unicast|multicast) in prefix-filter&quot;,</a>
<a name="ln6086">       CLEAR_STR</a>
<a name="ln6087">       IP_STR</a>
<a name="ln6088">       BGP_STR</a>
<a name="ln6089">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6090">       &quot;Address family\n&quot;</a>
<a name="ln6091">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6092">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6093">       BGP_SOFT_IN_STR</a>
<a name="ln6094">       &quot;Push out the existing ORF prefix-list\n&quot;)</a>
<a name="ln6095">{</a>
<a name="ln6096">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6097">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_peer,</a>
<a name="ln6098">			  BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6099"> </a>
<a name="ln6100">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln6101">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6102">}</a>
<a name="ln6103"> </a>
<a name="ln6104">DEFUN (clear_ip_bgp_peer_vpnv4_soft_in,</a>
<a name="ln6105">       clear_ip_bgp_peer_vpnv4_soft_in_cmd,</a>
<a name="ln6106">       &quot;clear ip bgp A.B.C.D vpnv4 unicast soft in&quot;,</a>
<a name="ln6107">       CLEAR_STR</a>
<a name="ln6108">       IP_STR</a>
<a name="ln6109">       BGP_STR</a>
<a name="ln6110">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6111">       &quot;Address family\n&quot;</a>
<a name="ln6112">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6113">       BGP_SOFT_STR</a>
<a name="ln6114">       BGP_SOFT_IN_STR)</a>
<a name="ln6115">{</a>
<a name="ln6116">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_peer,</a>
<a name="ln6117">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6118">}</a>
<a name="ln6119"> </a>
<a name="ln6120">ALIAS (clear_ip_bgp_peer_vpnv4_soft_in,</a>
<a name="ln6121">       clear_ip_bgp_peer_vpnv4_in_cmd,</a>
<a name="ln6122">       &quot;clear ip bgp A.B.C.D vpnv4 unicast in&quot;,</a>
<a name="ln6123">       CLEAR_STR</a>
<a name="ln6124">       IP_STR</a>
<a name="ln6125">       BGP_STR</a>
<a name="ln6126">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6127">       &quot;Address family\n&quot;</a>
<a name="ln6128">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6129">       BGP_SOFT_IN_STR)</a>
<a name="ln6130"> </a>
<a name="ln6131">DEFUN (clear_ip_bgp_peer_encap_soft_in,</a>
<a name="ln6132">       clear_ip_bgp_peer_encap_soft_in_cmd,</a>
<a name="ln6133">       &quot;clear ip bgp A.B.C.D encap unicast soft in&quot;,</a>
<a name="ln6134">       CLEAR_STR</a>
<a name="ln6135">       IP_STR</a>
<a name="ln6136">       BGP_STR</a>
<a name="ln6137">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6138">       &quot;Address family\n&quot;</a>
<a name="ln6139">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6140">       &quot;Soft reconfig\n&quot;</a>
<a name="ln6141">       &quot;Soft reconfig inbound update\n&quot;)</a>
<a name="ln6142">{</a>
<a name="ln6143">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_peer,</a>
<a name="ln6144">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6145">}</a>
<a name="ln6146"> </a>
<a name="ln6147">ALIAS (clear_ip_bgp_peer_encap_soft_in,</a>
<a name="ln6148">       clear_ip_bgp_peer_encap_in_cmd,</a>
<a name="ln6149">       &quot;clear ip bgp A.B.C.D encap unicast in&quot;,</a>
<a name="ln6150">       CLEAR_STR</a>
<a name="ln6151">       IP_STR</a>
<a name="ln6152">       BGP_STR</a>
<a name="ln6153">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6154">       &quot;Address family\n&quot;</a>
<a name="ln6155">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6156">       &quot;Soft reconfig inbound update\n&quot;)</a>
<a name="ln6157"> </a>
<a name="ln6158">DEFUN (clear_bgp_peer_soft_in,</a>
<a name="ln6159">       clear_bgp_peer_soft_in_cmd,</a>
<a name="ln6160">       &quot;clear bgp (A.B.C.D|X:X::X:X) soft in&quot;,</a>
<a name="ln6161">       CLEAR_STR</a>
<a name="ln6162">       BGP_STR</a>
<a name="ln6163">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6164">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6165">       BGP_SOFT_STR</a>
<a name="ln6166">       BGP_SOFT_IN_STR)</a>
<a name="ln6167">{</a>
<a name="ln6168">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_peer,</a>
<a name="ln6169">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6170">}</a>
<a name="ln6171"> </a>
<a name="ln6172">ALIAS (clear_bgp_peer_soft_in,</a>
<a name="ln6173">       clear_bgp_ipv6_peer_soft_in_cmd,</a>
<a name="ln6174">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X) soft in&quot;,</a>
<a name="ln6175">       CLEAR_STR</a>
<a name="ln6176">       BGP_STR</a>
<a name="ln6177">       &quot;Address family\n&quot;</a>
<a name="ln6178">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6179">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6180">       BGP_SOFT_STR</a>
<a name="ln6181">       BGP_SOFT_IN_STR)</a>
<a name="ln6182"> </a>
<a name="ln6183">ALIAS (clear_bgp_peer_soft_in,</a>
<a name="ln6184">       clear_bgp_peer_in_cmd,</a>
<a name="ln6185">       &quot;clear bgp (A.B.C.D|X:X::X:X) in&quot;,</a>
<a name="ln6186">       CLEAR_STR</a>
<a name="ln6187">       BGP_STR</a>
<a name="ln6188">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6189">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6190">       BGP_SOFT_IN_STR)</a>
<a name="ln6191"> </a>
<a name="ln6192">ALIAS (clear_bgp_peer_soft_in,</a>
<a name="ln6193">       clear_bgp_ipv6_peer_in_cmd,</a>
<a name="ln6194">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X) in&quot;,</a>
<a name="ln6195">       CLEAR_STR</a>
<a name="ln6196">       BGP_STR</a>
<a name="ln6197">       &quot;Address family\n&quot;</a>
<a name="ln6198">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6199">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6200">       BGP_SOFT_IN_STR)</a>
<a name="ln6201"> </a>
<a name="ln6202">DEFUN (clear_bgp_peer_in_prefix_filter,</a>
<a name="ln6203">       clear_bgp_peer_in_prefix_filter_cmd,</a>
<a name="ln6204">       &quot;clear bgp (A.B.C.D|X:X::X:X) in prefix-filter&quot;,</a>
<a name="ln6205">       CLEAR_STR</a>
<a name="ln6206">       BGP_STR</a>
<a name="ln6207">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6208">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6209">       BGP_SOFT_IN_STR</a>
<a name="ln6210">       &quot;Push out the existing ORF prefix-list\n&quot;)</a>
<a name="ln6211">{</a>
<a name="ln6212">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_peer,</a>
<a name="ln6213">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6214">}</a>
<a name="ln6215"> </a>
<a name="ln6216">ALIAS (clear_bgp_peer_in_prefix_filter,</a>
<a name="ln6217">       clear_bgp_ipv6_peer_in_prefix_filter_cmd,</a>
<a name="ln6218">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X) in prefix-filter&quot;,</a>
<a name="ln6219">       CLEAR_STR</a>
<a name="ln6220">       BGP_STR</a>
<a name="ln6221">       &quot;Address family\n&quot;</a>
<a name="ln6222">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6223">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6224">       BGP_SOFT_IN_STR</a>
<a name="ln6225">       &quot;Push out the existing ORF prefix-list\n&quot;)</a>
<a name="ln6226"> </a>
<a name="ln6227">DEFUN (clear_ip_bgp_peer_group_soft_in,</a>
<a name="ln6228">       clear_ip_bgp_peer_group_soft_in_cmd,</a>
<a name="ln6229">       &quot;clear ip bgp peer-group WORD soft in&quot;,</a>
<a name="ln6230">       CLEAR_STR</a>
<a name="ln6231">       IP_STR</a>
<a name="ln6232">       BGP_STR</a>
<a name="ln6233">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6234">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6235">       BGP_SOFT_STR</a>
<a name="ln6236">       BGP_SOFT_IN_STR)</a>
<a name="ln6237">{</a>
<a name="ln6238">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln6239">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6240">}</a>
<a name="ln6241"> </a>
<a name="ln6242">ALIAS (clear_ip_bgp_peer_group_soft_in,</a>
<a name="ln6243">       clear_ip_bgp_peer_group_in_cmd,</a>
<a name="ln6244">       &quot;clear ip bgp peer-group WORD in&quot;,</a>
<a name="ln6245">       CLEAR_STR</a>
<a name="ln6246">       IP_STR</a>
<a name="ln6247">       BGP_STR</a>
<a name="ln6248">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6249">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6250">       BGP_SOFT_IN_STR)</a>
<a name="ln6251"> </a>
<a name="ln6252">DEFUN (clear_ip_bgp_peer_group_in_prefix_filter,</a>
<a name="ln6253">       clear_ip_bgp_peer_group_in_prefix_filter_cmd,</a>
<a name="ln6254">       &quot;clear ip bgp peer-group WORD in prefix-filter&quot;,</a>
<a name="ln6255">       CLEAR_STR</a>
<a name="ln6256">       IP_STR</a>
<a name="ln6257">       BGP_STR</a>
<a name="ln6258">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6259">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6260">       BGP_SOFT_IN_STR</a>
<a name="ln6261">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6262">{</a>
<a name="ln6263">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln6264">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6265">}</a>
<a name="ln6266"> </a>
<a name="ln6267">DEFUN (clear_ip_bgp_peer_group_ipv4_soft_in,</a>
<a name="ln6268">       clear_ip_bgp_peer_group_ipv4_soft_in_cmd,</a>
<a name="ln6269">       &quot;clear ip bgp peer-group WORD ipv4 (unicast|multicast) soft in&quot;,</a>
<a name="ln6270">       CLEAR_STR</a>
<a name="ln6271">       IP_STR</a>
<a name="ln6272">       BGP_STR</a>
<a name="ln6273">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6274">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6275">       &quot;Address family\n&quot;</a>
<a name="ln6276">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6277">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6278">       BGP_SOFT_STR</a>
<a name="ln6279">       BGP_SOFT_IN_STR)</a>
<a name="ln6280">{</a>
<a name="ln6281">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6282">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_group,</a>
<a name="ln6283">			  BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6284"> </a>
<a name="ln6285">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln6286">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6287">}</a>
<a name="ln6288"> </a>
<a name="ln6289">ALIAS (clear_ip_bgp_peer_group_ipv4_soft_in,</a>
<a name="ln6290">       clear_ip_bgp_peer_group_ipv4_in_cmd,</a>
<a name="ln6291">       &quot;clear ip bgp peer-group WORD ipv4 (unicast|multicast) in&quot;,</a>
<a name="ln6292">       CLEAR_STR</a>
<a name="ln6293">       IP_STR</a>
<a name="ln6294">       BGP_STR</a>
<a name="ln6295">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6296">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6297">       &quot;Address family\n&quot;</a>
<a name="ln6298">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6299">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6300">       BGP_SOFT_IN_STR)</a>
<a name="ln6301"> </a>
<a name="ln6302">DEFUN (clear_ip_bgp_peer_group_ipv4_in_prefix_filter,</a>
<a name="ln6303">       clear_ip_bgp_peer_group_ipv4_in_prefix_filter_cmd,</a>
<a name="ln6304">       &quot;clear ip bgp peer-group WORD ipv4 (unicast|multicast) in prefix-filter&quot;,</a>
<a name="ln6305">       CLEAR_STR</a>
<a name="ln6306">       IP_STR</a>
<a name="ln6307">       BGP_STR</a>
<a name="ln6308">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6309">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6310">       &quot;Address family\n&quot;</a>
<a name="ln6311">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6312">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6313">       BGP_SOFT_IN_STR</a>
<a name="ln6314">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6315">{</a>
<a name="ln6316">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6317">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_group,</a>
<a name="ln6318">			  BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6319"> </a>
<a name="ln6320">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln6321">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6322">}</a>
<a name="ln6323"> </a>
<a name="ln6324">DEFUN (clear_bgp_peer_group_soft_in,</a>
<a name="ln6325">       clear_bgp_peer_group_soft_in_cmd,</a>
<a name="ln6326">       &quot;clear bgp peer-group WORD soft in&quot;,</a>
<a name="ln6327">       CLEAR_STR</a>
<a name="ln6328">       BGP_STR</a>
<a name="ln6329">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6330">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6331">       BGP_SOFT_STR</a>
<a name="ln6332">       BGP_SOFT_IN_STR)</a>
<a name="ln6333">{</a>
<a name="ln6334">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_group,</a>
<a name="ln6335">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6336">}</a>
<a name="ln6337"> </a>
<a name="ln6338">ALIAS (clear_bgp_peer_group_soft_in,</a>
<a name="ln6339">       clear_bgp_ipv6_peer_group_soft_in_cmd,</a>
<a name="ln6340">       &quot;clear bgp ipv6 peer-group WORD soft in&quot;,</a>
<a name="ln6341">       CLEAR_STR</a>
<a name="ln6342">       BGP_STR</a>
<a name="ln6343">       &quot;Address family\n&quot;</a>
<a name="ln6344">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6345">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6346">       BGP_SOFT_STR</a>
<a name="ln6347">       BGP_SOFT_IN_STR)</a>
<a name="ln6348"> </a>
<a name="ln6349">ALIAS (clear_bgp_peer_group_soft_in,</a>
<a name="ln6350">       clear_bgp_peer_group_in_cmd,</a>
<a name="ln6351">       &quot;clear bgp peer-group WORD in&quot;,</a>
<a name="ln6352">       CLEAR_STR</a>
<a name="ln6353">       BGP_STR</a>
<a name="ln6354">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6355">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6356">       BGP_SOFT_IN_STR)</a>
<a name="ln6357"> </a>
<a name="ln6358">ALIAS (clear_bgp_peer_group_soft_in,</a>
<a name="ln6359">       clear_bgp_ipv6_peer_group_in_cmd,</a>
<a name="ln6360">       &quot;clear bgp ipv6 peer-group WORD in&quot;,</a>
<a name="ln6361">       CLEAR_STR</a>
<a name="ln6362">       BGP_STR</a>
<a name="ln6363">       &quot;Address family\n&quot;</a>
<a name="ln6364">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6365">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6366">       BGP_SOFT_IN_STR)</a>
<a name="ln6367"> </a>
<a name="ln6368">DEFUN (clear_bgp_peer_group_in_prefix_filter,</a>
<a name="ln6369">       clear_bgp_peer_group_in_prefix_filter_cmd,</a>
<a name="ln6370">       &quot;clear bgp peer-group WORD in prefix-filter&quot;,</a>
<a name="ln6371">       CLEAR_STR</a>
<a name="ln6372">       BGP_STR</a>
<a name="ln6373">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6374">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6375">       BGP_SOFT_IN_STR</a>
<a name="ln6376">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6377">{</a>
<a name="ln6378">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_group,</a>
<a name="ln6379">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6380">}</a>
<a name="ln6381"> </a>
<a name="ln6382">ALIAS (clear_bgp_peer_group_in_prefix_filter,</a>
<a name="ln6383">       clear_bgp_ipv6_peer_group_in_prefix_filter_cmd,</a>
<a name="ln6384">       &quot;clear bgp ipv6 peer-group WORD in prefix-filter&quot;,</a>
<a name="ln6385">       CLEAR_STR</a>
<a name="ln6386">       BGP_STR</a>
<a name="ln6387">       &quot;Address family\n&quot;</a>
<a name="ln6388">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6389">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6390">       BGP_SOFT_IN_STR</a>
<a name="ln6391">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6392"> </a>
<a name="ln6393">DEFUN (clear_ip_bgp_external_soft_in,</a>
<a name="ln6394">       clear_ip_bgp_external_soft_in_cmd,</a>
<a name="ln6395">       &quot;clear ip bgp external soft in&quot;,</a>
<a name="ln6396">       CLEAR_STR</a>
<a name="ln6397">       IP_STR</a>
<a name="ln6398">       BGP_STR</a>
<a name="ln6399">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6400">       BGP_SOFT_STR</a>
<a name="ln6401">       BGP_SOFT_IN_STR)</a>
<a name="ln6402">{</a>
<a name="ln6403">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln6404">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln6405">}</a>
<a name="ln6406"> </a>
<a name="ln6407">ALIAS (clear_ip_bgp_external_soft_in,</a>
<a name="ln6408">       clear_ip_bgp_external_in_cmd,</a>
<a name="ln6409">       &quot;clear ip bgp external in&quot;,</a>
<a name="ln6410">       CLEAR_STR</a>
<a name="ln6411">       IP_STR</a>
<a name="ln6412">       BGP_STR</a>
<a name="ln6413">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6414">       BGP_SOFT_IN_STR)</a>
<a name="ln6415"> </a>
<a name="ln6416">DEFUN (clear_ip_bgp_external_in_prefix_filter,</a>
<a name="ln6417">       clear_ip_bgp_external_in_prefix_filter_cmd,</a>
<a name="ln6418">       &quot;clear ip bgp external in prefix-filter&quot;,</a>
<a name="ln6419">       CLEAR_STR</a>
<a name="ln6420">       IP_STR</a>
<a name="ln6421">       BGP_STR</a>
<a name="ln6422">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6423">       BGP_SOFT_IN_STR</a>
<a name="ln6424">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6425">{</a>
<a name="ln6426">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln6427">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln6428">}</a>
<a name="ln6429"> </a>
<a name="ln6430">DEFUN (clear_ip_bgp_external_ipv4_soft_in,</a>
<a name="ln6431">       clear_ip_bgp_external_ipv4_soft_in_cmd,</a>
<a name="ln6432">       &quot;clear ip bgp external ipv4 (unicast|multicast) soft in&quot;,</a>
<a name="ln6433">       CLEAR_STR</a>
<a name="ln6434">       IP_STR</a>
<a name="ln6435">       BGP_STR</a>
<a name="ln6436">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6437">       &quot;Address family\n&quot;</a>
<a name="ln6438">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6439">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6440">       BGP_SOFT_STR</a>
<a name="ln6441">       BGP_SOFT_IN_STR)</a>
<a name="ln6442">{</a>
<a name="ln6443">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln6444">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_external,</a>
<a name="ln6445">			  BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln6446"> </a>
<a name="ln6447">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln6448">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln6449">}</a>
<a name="ln6450"> </a>
<a name="ln6451">ALIAS (clear_ip_bgp_external_ipv4_soft_in,</a>
<a name="ln6452">       clear_ip_bgp_external_ipv4_in_cmd,</a>
<a name="ln6453">       &quot;clear ip bgp external ipv4 (unicast|multicast) in&quot;,</a>
<a name="ln6454">       CLEAR_STR</a>
<a name="ln6455">       IP_STR</a>
<a name="ln6456">       BGP_STR</a>
<a name="ln6457">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6458">       &quot;Address family\n&quot;</a>
<a name="ln6459">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6460">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6461">       BGP_SOFT_IN_STR)</a>
<a name="ln6462"> </a>
<a name="ln6463">DEFUN (clear_ip_bgp_external_ipv4_in_prefix_filter,</a>
<a name="ln6464">       clear_ip_bgp_external_ipv4_in_prefix_filter_cmd,</a>
<a name="ln6465">       &quot;clear ip bgp external ipv4 (unicast|multicast) in prefix-filter&quot;,</a>
<a name="ln6466">       CLEAR_STR</a>
<a name="ln6467">       IP_STR</a>
<a name="ln6468">       BGP_STR</a>
<a name="ln6469">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6470">       &quot;Address family\n&quot;</a>
<a name="ln6471">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6472">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6473">       BGP_SOFT_IN_STR</a>
<a name="ln6474">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6475">{</a>
<a name="ln6476">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln6477">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_external,</a>
<a name="ln6478">			  BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln6479"> </a>
<a name="ln6480">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln6481">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln6482">}</a>
<a name="ln6483"> </a>
<a name="ln6484">DEFUN (clear_bgp_external_soft_in,</a>
<a name="ln6485">       clear_bgp_external_soft_in_cmd,</a>
<a name="ln6486">       &quot;clear bgp external soft in&quot;,</a>
<a name="ln6487">       CLEAR_STR</a>
<a name="ln6488">       BGP_STR</a>
<a name="ln6489">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6490">       BGP_SOFT_STR</a>
<a name="ln6491">       BGP_SOFT_IN_STR)</a>
<a name="ln6492">{</a>
<a name="ln6493">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_external,</a>
<a name="ln6494">			BGP_CLEAR_SOFT_IN, NULL);</a>
<a name="ln6495">}</a>
<a name="ln6496"> </a>
<a name="ln6497">ALIAS (clear_bgp_external_soft_in,</a>
<a name="ln6498">       clear_bgp_ipv6_external_soft_in_cmd,</a>
<a name="ln6499">       &quot;clear bgp ipv6 external soft in&quot;,</a>
<a name="ln6500">       CLEAR_STR</a>
<a name="ln6501">       BGP_STR</a>
<a name="ln6502">       &quot;Address family\n&quot;</a>
<a name="ln6503">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6504">       BGP_SOFT_STR</a>
<a name="ln6505">       BGP_SOFT_IN_STR)</a>
<a name="ln6506"> </a>
<a name="ln6507">ALIAS (clear_bgp_external_soft_in,</a>
<a name="ln6508">       clear_bgp_external_in_cmd,</a>
<a name="ln6509">       &quot;clear bgp external in&quot;,</a>
<a name="ln6510">       CLEAR_STR</a>
<a name="ln6511">       BGP_STR</a>
<a name="ln6512">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6513">       BGP_SOFT_IN_STR)</a>
<a name="ln6514"> </a>
<a name="ln6515">ALIAS (clear_bgp_external_soft_in,</a>
<a name="ln6516">       clear_bgp_ipv6_external_in_cmd,</a>
<a name="ln6517">       &quot;clear bgp ipv6 external WORD in&quot;,</a>
<a name="ln6518">       CLEAR_STR</a>
<a name="ln6519">       BGP_STR</a>
<a name="ln6520">       &quot;Address family\n&quot;</a>
<a name="ln6521">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6522">       BGP_SOFT_IN_STR)</a>
<a name="ln6523"> </a>
<a name="ln6524">DEFUN (clear_bgp_external_in_prefix_filter,</a>
<a name="ln6525">       clear_bgp_external_in_prefix_filter_cmd,</a>
<a name="ln6526">       &quot;clear bgp external in prefix-filter&quot;,</a>
<a name="ln6527">       CLEAR_STR</a>
<a name="ln6528">       BGP_STR</a>
<a name="ln6529">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6530">       BGP_SOFT_IN_STR</a>
<a name="ln6531">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6532">{</a>
<a name="ln6533">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_external,</a>
<a name="ln6534">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, NULL);</a>
<a name="ln6535">}</a>
<a name="ln6536"> </a>
<a name="ln6537">ALIAS (clear_bgp_external_in_prefix_filter,</a>
<a name="ln6538">       clear_bgp_ipv6_external_in_prefix_filter_cmd,</a>
<a name="ln6539">       &quot;clear bgp ipv6 external in prefix-filter&quot;,</a>
<a name="ln6540">       CLEAR_STR</a>
<a name="ln6541">       BGP_STR</a>
<a name="ln6542">       &quot;Address family\n&quot;</a>
<a name="ln6543">       &quot;Clear all external peers\n&quot;</a>
<a name="ln6544">       BGP_SOFT_IN_STR</a>
<a name="ln6545">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6546"> </a>
<a name="ln6547">DEFUN (clear_ip_bgp_as_soft_in,</a>
<a name="ln6548">       clear_ip_bgp_as_soft_in_cmd,</a>
<a name="ln6549">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; soft in&quot;,</a>
<a name="ln6550">       CLEAR_STR</a>
<a name="ln6551">       IP_STR</a>
<a name="ln6552">       BGP_STR</a>
<a name="ln6553">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6554">       BGP_SOFT_STR</a>
<a name="ln6555">       BGP_SOFT_IN_STR)</a>
<a name="ln6556">{</a>
<a name="ln6557">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln6558">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6559">}</a>
<a name="ln6560"> </a>
<a name="ln6561">ALIAS (clear_ip_bgp_as_soft_in,</a>
<a name="ln6562">       clear_ip_bgp_as_in_cmd,</a>
<a name="ln6563">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; in&quot;,</a>
<a name="ln6564">       CLEAR_STR</a>
<a name="ln6565">       IP_STR</a>
<a name="ln6566">       BGP_STR</a>
<a name="ln6567">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6568">       BGP_SOFT_IN_STR)</a>
<a name="ln6569"> </a>
<a name="ln6570">DEFUN (clear_ip_bgp_as_in_prefix_filter,</a>
<a name="ln6571">       clear_ip_bgp_as_in_prefix_filter_cmd,</a>
<a name="ln6572">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; in prefix-filter&quot;,</a>
<a name="ln6573">       CLEAR_STR</a>
<a name="ln6574">       IP_STR</a>
<a name="ln6575">       BGP_STR</a>
<a name="ln6576">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6577">       BGP_SOFT_IN_STR</a>
<a name="ln6578">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6579">{</a>
<a name="ln6580">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln6581">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6582">}</a>
<a name="ln6583"> </a>
<a name="ln6584">DEFUN (clear_ip_bgp_as_ipv4_soft_in,</a>
<a name="ln6585">       clear_ip_bgp_as_ipv4_soft_in_cmd,</a>
<a name="ln6586">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; ipv4 (unicast|multicast) soft in&quot;,</a>
<a name="ln6587">       CLEAR_STR</a>
<a name="ln6588">       IP_STR</a>
<a name="ln6589">       BGP_STR</a>
<a name="ln6590">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6591">       &quot;Address family\n&quot;</a>
<a name="ln6592">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6593">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6594">       BGP_SOFT_STR</a>
<a name="ln6595">       BGP_SOFT_IN_STR)</a>
<a name="ln6596">{</a>
<a name="ln6597">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6598">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_as,</a>
<a name="ln6599">			  BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6600"> </a>
<a name="ln6601">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln6602">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6603">}</a>
<a name="ln6604"> </a>
<a name="ln6605">ALIAS (clear_ip_bgp_as_ipv4_soft_in,</a>
<a name="ln6606">       clear_ip_bgp_as_ipv4_in_cmd,</a>
<a name="ln6607">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; ipv4 (unicast|multicast) in&quot;,</a>
<a name="ln6608">       CLEAR_STR</a>
<a name="ln6609">       IP_STR</a>
<a name="ln6610">       BGP_STR</a>
<a name="ln6611">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6612">       &quot;Address family\n&quot;</a>
<a name="ln6613">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6614">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6615">       BGP_SOFT_IN_STR)</a>
<a name="ln6616"> </a>
<a name="ln6617">DEFUN (clear_ip_bgp_as_ipv4_in_prefix_filter,</a>
<a name="ln6618">       clear_ip_bgp_as_ipv4_in_prefix_filter_cmd,</a>
<a name="ln6619">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; ipv4 (unicast|multicast) in prefix-filter&quot;,</a>
<a name="ln6620">       CLEAR_STR</a>
<a name="ln6621">       IP_STR</a>
<a name="ln6622">       BGP_STR</a>
<a name="ln6623">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6624">       &quot;Address family\n&quot;</a>
<a name="ln6625">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6626">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6627">       BGP_SOFT_IN_STR</a>
<a name="ln6628">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6629">{</a>
<a name="ln6630">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6631">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_as,</a>
<a name="ln6632">			  BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6633"> </a>
<a name="ln6634">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln6635">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6636">}</a>
<a name="ln6637"> </a>
<a name="ln6638">DEFUN (clear_ip_bgp_as_vpnv4_soft_in,</a>
<a name="ln6639">       clear_ip_bgp_as_vpnv4_soft_in_cmd,</a>
<a name="ln6640">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; vpnv4 unicast soft in&quot;,</a>
<a name="ln6641">       CLEAR_STR</a>
<a name="ln6642">       IP_STR</a>
<a name="ln6643">       BGP_STR</a>
<a name="ln6644">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6645">       &quot;Address family\n&quot;</a>
<a name="ln6646">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6647">       BGP_SOFT_STR</a>
<a name="ln6648">       BGP_SOFT_IN_STR)</a>
<a name="ln6649">{</a>
<a name="ln6650">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_as,</a>
<a name="ln6651">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6652">}</a>
<a name="ln6653"> </a>
<a name="ln6654">ALIAS (clear_ip_bgp_as_vpnv4_soft_in,</a>
<a name="ln6655">       clear_ip_bgp_as_vpnv4_in_cmd,</a>
<a name="ln6656">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; vpnv4 unicast in&quot;,</a>
<a name="ln6657">       CLEAR_STR</a>
<a name="ln6658">       IP_STR</a>
<a name="ln6659">       BGP_STR</a>
<a name="ln6660">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6661">       &quot;Address family\n&quot;</a>
<a name="ln6662">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6663">       BGP_SOFT_IN_STR)</a>
<a name="ln6664"> </a>
<a name="ln6665">DEFUN (clear_ip_bgp_as_encap_soft_in,</a>
<a name="ln6666">       clear_ip_bgp_as_encap_soft_in_cmd,</a>
<a name="ln6667">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; encap unicast soft in&quot;,</a>
<a name="ln6668">       CLEAR_STR</a>
<a name="ln6669">       IP_STR</a>
<a name="ln6670">       BGP_STR</a>
<a name="ln6671">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6672">       &quot;Address family\n&quot;</a>
<a name="ln6673">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6674">       &quot;Soft reconfig\n&quot;</a>
<a name="ln6675">       &quot;Soft reconfig inbound update\n&quot;)</a>
<a name="ln6676">{</a>
<a name="ln6677">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_as,</a>
<a name="ln6678">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6679">}</a>
<a name="ln6680"> </a>
<a name="ln6681">ALIAS (clear_ip_bgp_as_encap_soft_in,</a>
<a name="ln6682">       clear_ip_bgp_as_encap_in_cmd,</a>
<a name="ln6683">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; encap unicast in&quot;,</a>
<a name="ln6684">       CLEAR_STR</a>
<a name="ln6685">       IP_STR</a>
<a name="ln6686">       BGP_STR</a>
<a name="ln6687">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6688">       &quot;Address family\n&quot;</a>
<a name="ln6689">       &quot;Address Family modifier\n&quot;</a>
<a name="ln6690">       &quot;Soft reconfig inbound update\n&quot;)</a>
<a name="ln6691"> </a>
<a name="ln6692">DEFUN (clear_bgp_as_soft_in,</a>
<a name="ln6693">       clear_bgp_as_soft_in_cmd,</a>
<a name="ln6694">       &quot;clear bgp &quot; CMD_AS_RANGE &quot; soft in&quot;,</a>
<a name="ln6695">       CLEAR_STR</a>
<a name="ln6696">       BGP_STR</a>
<a name="ln6697">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6698">       BGP_SOFT_STR</a>
<a name="ln6699">       BGP_SOFT_IN_STR)</a>
<a name="ln6700">{</a>
<a name="ln6701">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_as,</a>
<a name="ln6702">			BGP_CLEAR_SOFT_IN, argv[0]);</a>
<a name="ln6703">}</a>
<a name="ln6704"> </a>
<a name="ln6705">ALIAS (clear_bgp_as_soft_in,</a>
<a name="ln6706">       clear_bgp_ipv6_as_soft_in_cmd,</a>
<a name="ln6707">       &quot;clear bgp ipv6 &quot; CMD_AS_RANGE &quot; soft in&quot;,</a>
<a name="ln6708">       CLEAR_STR</a>
<a name="ln6709">       BGP_STR</a>
<a name="ln6710">       &quot;Address family\n&quot;</a>
<a name="ln6711">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6712">       BGP_SOFT_STR</a>
<a name="ln6713">       BGP_SOFT_IN_STR)</a>
<a name="ln6714"> </a>
<a name="ln6715">ALIAS (clear_bgp_as_soft_in,</a>
<a name="ln6716">       clear_bgp_as_in_cmd,</a>
<a name="ln6717">       &quot;clear bgp &quot; CMD_AS_RANGE &quot; in&quot;,</a>
<a name="ln6718">       CLEAR_STR</a>
<a name="ln6719">       BGP_STR</a>
<a name="ln6720">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6721">       BGP_SOFT_IN_STR)</a>
<a name="ln6722"> </a>
<a name="ln6723">ALIAS (clear_bgp_as_soft_in,</a>
<a name="ln6724">       clear_bgp_ipv6_as_in_cmd,</a>
<a name="ln6725">       &quot;clear bgp ipv6 &quot; CMD_AS_RANGE &quot; in&quot;,</a>
<a name="ln6726">       CLEAR_STR</a>
<a name="ln6727">       BGP_STR</a>
<a name="ln6728">       &quot;Address family\n&quot;</a>
<a name="ln6729">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6730">       BGP_SOFT_IN_STR)</a>
<a name="ln6731"> </a>
<a name="ln6732">DEFUN (clear_bgp_as_in_prefix_filter,</a>
<a name="ln6733">       clear_bgp_as_in_prefix_filter_cmd,</a>
<a name="ln6734">       &quot;clear bgp &quot; CMD_AS_RANGE &quot; in prefix-filter&quot;,</a>
<a name="ln6735">       CLEAR_STR</a>
<a name="ln6736">       BGP_STR</a>
<a name="ln6737">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6738">       BGP_SOFT_IN_STR</a>
<a name="ln6739">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6740">{</a>
<a name="ln6741">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_as,</a>
<a name="ln6742">			BGP_CLEAR_SOFT_IN_ORF_PREFIX, argv[0]);</a>
<a name="ln6743">}</a>
<a name="ln6744"> </a>
<a name="ln6745">ALIAS (clear_bgp_as_in_prefix_filter,</a>
<a name="ln6746">       clear_bgp_ipv6_as_in_prefix_filter_cmd,</a>
<a name="ln6747">       &quot;clear bgp ipv6 &quot; CMD_AS_RANGE &quot; in prefix-filter&quot;,</a>
<a name="ln6748">       CLEAR_STR</a>
<a name="ln6749">       BGP_STR</a>
<a name="ln6750">       &quot;Address family\n&quot;</a>
<a name="ln6751">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln6752">       BGP_SOFT_IN_STR</a>
<a name="ln6753">       &quot;Push out prefix-list ORF and do inbound soft reconfig\n&quot;)</a>
<a name="ln6754"> </a>
<a name="ln6755">/* Both soft-reconfiguration */</a>
<a name="ln6756">DEFUN (clear_ip_bgp_all_soft,</a>
<a name="ln6757">       clear_ip_bgp_all_soft_cmd,</a>
<a name="ln6758">       &quot;clear ip bgp * soft&quot;,</a>
<a name="ln6759">       CLEAR_STR</a>
<a name="ln6760">       IP_STR</a>
<a name="ln6761">       BGP_STR</a>
<a name="ln6762">       &quot;Clear all peers\n&quot;</a>
<a name="ln6763">       BGP_SOFT_STR)</a>
<a name="ln6764">{</a>
<a name="ln6765">  if (argc == 1)</a>
<a name="ln6766">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln6767">                        BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln6768"> </a>
<a name="ln6769">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln6770">			BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln6771">}</a>
<a name="ln6772"> </a>
<a name="ln6773">ALIAS (clear_ip_bgp_all_soft,</a>
<a name="ln6774">       clear_ip_bgp_instance_all_soft_cmd,</a>
<a name="ln6775">       &quot;clear ip bgp view WORD * soft&quot;,</a>
<a name="ln6776">       CLEAR_STR</a>
<a name="ln6777">       IP_STR</a>
<a name="ln6778">       BGP_STR</a>
<a name="ln6779">       &quot;BGP view\n&quot;</a>
<a name="ln6780">       &quot;view name\n&quot;</a>
<a name="ln6781">       &quot;Clear all peers\n&quot;</a>
<a name="ln6782">       BGP_SOFT_STR)</a>
<a name="ln6783"> </a>
<a name="ln6784"> </a>
<a name="ln6785">DEFUN (clear_ip_bgp_all_ipv4_soft,</a>
<a name="ln6786">       clear_ip_bgp_all_ipv4_soft_cmd,</a>
<a name="ln6787">       &quot;clear ip bgp * ipv4 (unicast|multicast) soft&quot;,</a>
<a name="ln6788">       CLEAR_STR</a>
<a name="ln6789">       IP_STR</a>
<a name="ln6790">       BGP_STR</a>
<a name="ln6791">       &quot;Clear all peers\n&quot;</a>
<a name="ln6792">       &quot;Address family\n&quot;</a>
<a name="ln6793">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6794">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6795">       BGP_SOFT_STR)</a>
<a name="ln6796">{</a>
<a name="ln6797">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln6798">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln6799">			  BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln6800"> </a>
<a name="ln6801">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln6802">			BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln6803">}</a>
<a name="ln6804"> </a>
<a name="ln6805">DEFUN (clear_ip_bgp_instance_all_ipv4_soft,</a>
<a name="ln6806">       clear_ip_bgp_instance_all_ipv4_soft_cmd,</a>
<a name="ln6807">       &quot;clear ip bgp view WORD * ipv4 (unicast|multicast) soft&quot;,</a>
<a name="ln6808">       CLEAR_STR</a>
<a name="ln6809">       IP_STR</a>
<a name="ln6810">       BGP_STR</a>
<a name="ln6811">       &quot;BGP view\n&quot;</a>
<a name="ln6812">       &quot;view name\n&quot;</a>
<a name="ln6813">       &quot;Clear all peers\n&quot;</a>
<a name="ln6814">       &quot;Address family\n&quot;</a>
<a name="ln6815">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6816">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6817">       BGP_SOFT_STR)</a>
<a name="ln6818">{</a>
<a name="ln6819">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6820">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_all,</a>
<a name="ln6821">                          BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln6822"> </a>
<a name="ln6823">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln6824">                        BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln6825">}</a>
<a name="ln6826"> </a>
<a name="ln6827">DEFUN (clear_ip_bgp_all_vpnv4_soft,</a>
<a name="ln6828">       clear_ip_bgp_all_vpnv4_soft_cmd,</a>
<a name="ln6829">       &quot;clear ip bgp * vpnv4 unicast soft&quot;,</a>
<a name="ln6830">       CLEAR_STR</a>
<a name="ln6831">       IP_STR</a>
<a name="ln6832">       BGP_STR</a>
<a name="ln6833">       &quot;Clear all peers\n&quot;</a>
<a name="ln6834">       &quot;Address family\n&quot;</a>
<a name="ln6835">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6836">       BGP_SOFT_STR)</a>
<a name="ln6837">{</a>
<a name="ln6838">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_all,</a>
<a name="ln6839">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6840">}</a>
<a name="ln6841"> </a>
<a name="ln6842">DEFUN (clear_ip_bgp_all_encap_soft,</a>
<a name="ln6843">       clear_ip_bgp_all_encap_soft_cmd,</a>
<a name="ln6844">       &quot;clear ip bgp * encap unicast soft&quot;,</a>
<a name="ln6845">       CLEAR_STR</a>
<a name="ln6846">       IP_STR</a>
<a name="ln6847">       BGP_STR</a>
<a name="ln6848">       &quot;Clear all peers\n&quot;</a>
<a name="ln6849">       &quot;Address family\n&quot;</a>
<a name="ln6850">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6851">       &quot;Soft reconfig\n&quot;)</a>
<a name="ln6852">{</a>
<a name="ln6853">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_all,</a>
<a name="ln6854">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6855">}</a>
<a name="ln6856"> </a>
<a name="ln6857">DEFUN (clear_bgp_all_soft,</a>
<a name="ln6858">       clear_bgp_all_soft_cmd,</a>
<a name="ln6859">       &quot;clear bgp * soft&quot;,</a>
<a name="ln6860">       CLEAR_STR</a>
<a name="ln6861">       BGP_STR</a>
<a name="ln6862">       &quot;Clear all peers\n&quot;</a>
<a name="ln6863">       BGP_SOFT_STR)</a>
<a name="ln6864">{</a>
<a name="ln6865">  if (argc == 1)</a>
<a name="ln6866">    return bgp_clear_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln6867">                        BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6868"> </a>
<a name="ln6869">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln6870">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6871">}</a>
<a name="ln6872"> </a>
<a name="ln6873">ALIAS (clear_bgp_all_soft,</a>
<a name="ln6874">       clear_bgp_instance_all_soft_cmd,</a>
<a name="ln6875">       &quot;clear bgp view WORD * soft&quot;,</a>
<a name="ln6876">       CLEAR_STR</a>
<a name="ln6877">       BGP_STR</a>
<a name="ln6878">       &quot;BGP view\n&quot;</a>
<a name="ln6879">       &quot;view name\n&quot;</a>
<a name="ln6880">       &quot;Clear all peers\n&quot;</a>
<a name="ln6881">       BGP_SOFT_STR)</a>
<a name="ln6882"> </a>
<a name="ln6883">ALIAS (clear_bgp_all_soft,</a>
<a name="ln6884">       clear_bgp_ipv6_all_soft_cmd,</a>
<a name="ln6885">       &quot;clear bgp ipv6 * soft&quot;,</a>
<a name="ln6886">       CLEAR_STR</a>
<a name="ln6887">       BGP_STR</a>
<a name="ln6888">       &quot;Address family\n&quot;</a>
<a name="ln6889">       &quot;Clear all peers\n&quot;</a>
<a name="ln6890">       BGP_SOFT_STR)</a>
<a name="ln6891"> </a>
<a name="ln6892">DEFUN (clear_ip_bgp_peer_soft,</a>
<a name="ln6893">       clear_ip_bgp_peer_soft_cmd,</a>
<a name="ln6894">       &quot;clear ip bgp A.B.C.D soft&quot;,</a>
<a name="ln6895">       CLEAR_STR</a>
<a name="ln6896">       IP_STR</a>
<a name="ln6897">       BGP_STR</a>
<a name="ln6898">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6899">       BGP_SOFT_STR)</a>
<a name="ln6900">{</a>
<a name="ln6901">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln6902">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6903">}</a>
<a name="ln6904"> </a>
<a name="ln6905">DEFUN (clear_ip_bgp_peer_ipv4_soft,</a>
<a name="ln6906">       clear_ip_bgp_peer_ipv4_soft_cmd,</a>
<a name="ln6907">       &quot;clear ip bgp A.B.C.D ipv4 (unicast|multicast) soft&quot;,</a>
<a name="ln6908">       CLEAR_STR</a>
<a name="ln6909">       IP_STR</a>
<a name="ln6910">       BGP_STR</a>
<a name="ln6911">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6912">       &quot;Address family\n&quot;</a>
<a name="ln6913">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6914">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6915">       BGP_SOFT_STR)</a>
<a name="ln6916">{</a>
<a name="ln6917">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln6918">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_peer,</a>
<a name="ln6919">			  BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6920"> </a>
<a name="ln6921">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln6922">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6923">}</a>
<a name="ln6924"> </a>
<a name="ln6925">DEFUN (clear_ip_bgp_peer_vpnv4_soft,</a>
<a name="ln6926">       clear_ip_bgp_peer_vpnv4_soft_cmd,</a>
<a name="ln6927">       &quot;clear ip bgp A.B.C.D vpnv4 unicast soft&quot;,</a>
<a name="ln6928">       CLEAR_STR</a>
<a name="ln6929">       IP_STR</a>
<a name="ln6930">       BGP_STR</a>
<a name="ln6931">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6932">       &quot;Address family\n&quot;</a>
<a name="ln6933">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6934">       BGP_SOFT_STR)</a>
<a name="ln6935">{</a>
<a name="ln6936">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_peer,</a>
<a name="ln6937">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6938">}</a>
<a name="ln6939"> </a>
<a name="ln6940">DEFUN (clear_ip_bgp_peer_encap_soft,</a>
<a name="ln6941">       clear_ip_bgp_peer_encap_soft_cmd,</a>
<a name="ln6942">       &quot;clear ip bgp A.B.C.D encap unicast soft&quot;,</a>
<a name="ln6943">       CLEAR_STR</a>
<a name="ln6944">       IP_STR</a>
<a name="ln6945">       BGP_STR</a>
<a name="ln6946">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6947">       &quot;Address family\n&quot;</a>
<a name="ln6948">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln6949">       &quot;Soft reconfig\n&quot;)</a>
<a name="ln6950">{</a>
<a name="ln6951">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_peer,</a>
<a name="ln6952">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6953">}</a>
<a name="ln6954"> </a>
<a name="ln6955">DEFUN (clear_bgp_peer_soft,</a>
<a name="ln6956">       clear_bgp_peer_soft_cmd,</a>
<a name="ln6957">       &quot;clear bgp (A.B.C.D|X:X::X:X) soft&quot;,</a>
<a name="ln6958">       CLEAR_STR</a>
<a name="ln6959">       BGP_STR</a>
<a name="ln6960">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6961">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6962">       BGP_SOFT_STR)</a>
<a name="ln6963">{</a>
<a name="ln6964">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_peer,</a>
<a name="ln6965">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6966">}</a>
<a name="ln6967"> </a>
<a name="ln6968">ALIAS (clear_bgp_peer_soft,</a>
<a name="ln6969">       clear_bgp_ipv6_peer_soft_cmd,</a>
<a name="ln6970">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X) soft&quot;,</a>
<a name="ln6971">       CLEAR_STR</a>
<a name="ln6972">       BGP_STR</a>
<a name="ln6973">       &quot;Address family\n&quot;</a>
<a name="ln6974">       &quot;BGP neighbor address to clear\n&quot;</a>
<a name="ln6975">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln6976">       BGP_SOFT_STR)</a>
<a name="ln6977"> </a>
<a name="ln6978">DEFUN (clear_ip_bgp_peer_group_soft,</a>
<a name="ln6979">       clear_ip_bgp_peer_group_soft_cmd,</a>
<a name="ln6980">       &quot;clear ip bgp peer-group WORD soft&quot;,</a>
<a name="ln6981">       CLEAR_STR</a>
<a name="ln6982">       IP_STR</a>
<a name="ln6983">       BGP_STR</a>
<a name="ln6984">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6985">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln6986">       BGP_SOFT_STR)</a>
<a name="ln6987">{</a>
<a name="ln6988">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln6989">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln6990">}</a>
<a name="ln6991"> </a>
<a name="ln6992">DEFUN (clear_ip_bgp_peer_group_ipv4_soft,</a>
<a name="ln6993">       clear_ip_bgp_peer_group_ipv4_soft_cmd,</a>
<a name="ln6994">       &quot;clear ip bgp peer-group WORD ipv4 (unicast|multicast) soft&quot;,</a>
<a name="ln6995">       CLEAR_STR</a>
<a name="ln6996">       IP_STR</a>
<a name="ln6997">       BGP_STR</a>
<a name="ln6998">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln6999">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln7000">       &quot;Address family\n&quot;</a>
<a name="ln7001">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7002">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7003">       BGP_SOFT_STR)</a>
<a name="ln7004">{</a>
<a name="ln7005">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln7006">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_group,</a>
<a name="ln7007">			  BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7008"> </a>
<a name="ln7009">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_group,</a>
<a name="ln7010">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7011">}</a>
<a name="ln7012"> </a>
<a name="ln7013">DEFUN (clear_bgp_peer_group_soft,</a>
<a name="ln7014">       clear_bgp_peer_group_soft_cmd,</a>
<a name="ln7015">       &quot;clear bgp peer-group WORD soft&quot;,</a>
<a name="ln7016">       CLEAR_STR</a>
<a name="ln7017">       BGP_STR</a>
<a name="ln7018">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln7019">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln7020">       BGP_SOFT_STR)</a>
<a name="ln7021">{</a>
<a name="ln7022">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_group,</a>
<a name="ln7023">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7024">}</a>
<a name="ln7025"> </a>
<a name="ln7026">ALIAS (clear_bgp_peer_group_soft,</a>
<a name="ln7027">       clear_bgp_ipv6_peer_group_soft_cmd,</a>
<a name="ln7028">       &quot;clear bgp ipv6 peer-group WORD soft&quot;,</a>
<a name="ln7029">       CLEAR_STR</a>
<a name="ln7030">       BGP_STR</a>
<a name="ln7031">       &quot;Address family\n&quot;</a>
<a name="ln7032">       &quot;Clear all members of peer-group\n&quot;</a>
<a name="ln7033">       &quot;BGP peer-group name\n&quot;</a>
<a name="ln7034">       BGP_SOFT_STR)</a>
<a name="ln7035"> </a>
<a name="ln7036">DEFUN (clear_ip_bgp_external_soft,</a>
<a name="ln7037">       clear_ip_bgp_external_soft_cmd,</a>
<a name="ln7038">       &quot;clear ip bgp external soft&quot;,</a>
<a name="ln7039">       CLEAR_STR</a>
<a name="ln7040">       IP_STR</a>
<a name="ln7041">       BGP_STR</a>
<a name="ln7042">       &quot;Clear all external peers\n&quot;</a>
<a name="ln7043">       BGP_SOFT_STR)</a>
<a name="ln7044">{</a>
<a name="ln7045">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln7046">			BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln7047">}</a>
<a name="ln7048"> </a>
<a name="ln7049">DEFUN (clear_ip_bgp_external_ipv4_soft,</a>
<a name="ln7050">       clear_ip_bgp_external_ipv4_soft_cmd,</a>
<a name="ln7051">       &quot;clear ip bgp external ipv4 (unicast|multicast) soft&quot;,</a>
<a name="ln7052">       CLEAR_STR</a>
<a name="ln7053">       IP_STR</a>
<a name="ln7054">       BGP_STR</a>
<a name="ln7055">       &quot;Clear all external peers\n&quot;</a>
<a name="ln7056">       &quot;Address family\n&quot;</a>
<a name="ln7057">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7058">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7059">       BGP_SOFT_STR)</a>
<a name="ln7060">{</a>
<a name="ln7061">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln7062">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_external,</a>
<a name="ln7063">			  BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln7064"> </a>
<a name="ln7065">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_external,</a>
<a name="ln7066">			BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln7067">}</a>
<a name="ln7068"> </a>
<a name="ln7069">DEFUN (clear_bgp_external_soft,</a>
<a name="ln7070">       clear_bgp_external_soft_cmd,</a>
<a name="ln7071">       &quot;clear bgp external soft&quot;,</a>
<a name="ln7072">       CLEAR_STR</a>
<a name="ln7073">       BGP_STR</a>
<a name="ln7074">       &quot;Clear all external peers\n&quot;</a>
<a name="ln7075">       BGP_SOFT_STR)</a>
<a name="ln7076">{</a>
<a name="ln7077">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_external,</a>
<a name="ln7078">			BGP_CLEAR_SOFT_BOTH, NULL);</a>
<a name="ln7079">}</a>
<a name="ln7080"> </a>
<a name="ln7081">ALIAS (clear_bgp_external_soft,</a>
<a name="ln7082">       clear_bgp_ipv6_external_soft_cmd,</a>
<a name="ln7083">       &quot;clear bgp ipv6 external soft&quot;,</a>
<a name="ln7084">       CLEAR_STR</a>
<a name="ln7085">       BGP_STR</a>
<a name="ln7086">       &quot;Address family\n&quot;</a>
<a name="ln7087">       &quot;Clear all external peers\n&quot;</a>
<a name="ln7088">       BGP_SOFT_STR)</a>
<a name="ln7089"> </a>
<a name="ln7090">DEFUN (clear_ip_bgp_as_soft,</a>
<a name="ln7091">       clear_ip_bgp_as_soft_cmd,</a>
<a name="ln7092">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; soft&quot;,</a>
<a name="ln7093">       CLEAR_STR</a>
<a name="ln7094">       IP_STR</a>
<a name="ln7095">       BGP_STR</a>
<a name="ln7096">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln7097">       BGP_SOFT_STR)</a>
<a name="ln7098">{</a>
<a name="ln7099">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln7100">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7101">}</a>
<a name="ln7102"> </a>
<a name="ln7103">DEFUN (clear_ip_bgp_as_ipv4_soft,</a>
<a name="ln7104">       clear_ip_bgp_as_ipv4_soft_cmd,</a>
<a name="ln7105">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; ipv4 (unicast|multicast) soft&quot;,</a>
<a name="ln7106">       CLEAR_STR</a>
<a name="ln7107">       IP_STR</a>
<a name="ln7108">       BGP_STR</a>
<a name="ln7109">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln7110">       &quot;Address family\n&quot;</a>
<a name="ln7111">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln7112">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln7113">       BGP_SOFT_STR)</a>
<a name="ln7114">{</a>
<a name="ln7115">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln7116">    return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MULTICAST, clear_as,</a>
<a name="ln7117">			  BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7118"> </a>
<a name="ln7119">  return bgp_clear_vty (vty, NULL,AFI_IP, SAFI_UNICAST, clear_as,</a>
<a name="ln7120">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7121">}</a>
<a name="ln7122"> </a>
<a name="ln7123">DEFUN (clear_ip_bgp_as_vpnv4_soft,</a>
<a name="ln7124">       clear_ip_bgp_as_vpnv4_soft_cmd,</a>
<a name="ln7125">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; vpnv4 unicast soft&quot;,</a>
<a name="ln7126">       CLEAR_STR</a>
<a name="ln7127">       IP_STR</a>
<a name="ln7128">       BGP_STR</a>
<a name="ln7129">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln7130">       &quot;Address family\n&quot;</a>
<a name="ln7131">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln7132">       BGP_SOFT_STR)</a>
<a name="ln7133">{</a>
<a name="ln7134">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN, clear_as,</a>
<a name="ln7135">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7136">}</a>
<a name="ln7137"> </a>
<a name="ln7138">DEFUN (clear_ip_bgp_as_encap_soft,</a>
<a name="ln7139">       clear_ip_bgp_as_encap_soft_cmd,</a>
<a name="ln7140">       &quot;clear ip bgp &quot; CMD_AS_RANGE &quot; encap unicast soft&quot;,</a>
<a name="ln7141">       CLEAR_STR</a>
<a name="ln7142">       IP_STR</a>
<a name="ln7143">       BGP_STR</a>
<a name="ln7144">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln7145">       &quot;Address family\n&quot;</a>
<a name="ln7146">       &quot;Address Family Modifier\n&quot;</a>
<a name="ln7147">       &quot;Soft reconfig\n&quot;)</a>
<a name="ln7148">{</a>
<a name="ln7149">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_ENCAP, clear_as,</a>
<a name="ln7150">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7151">}</a>
<a name="ln7152"> </a>
<a name="ln7153">DEFUN (clear_bgp_as_soft,</a>
<a name="ln7154">       clear_bgp_as_soft_cmd,</a>
<a name="ln7155">       &quot;clear bgp &quot; CMD_AS_RANGE &quot; soft&quot;,</a>
<a name="ln7156">       CLEAR_STR</a>
<a name="ln7157">       BGP_STR</a>
<a name="ln7158">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln7159">       BGP_SOFT_STR)</a>
<a name="ln7160">{</a>
<a name="ln7161">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_as,</a>
<a name="ln7162">			BGP_CLEAR_SOFT_BOTH, argv[0]);</a>
<a name="ln7163">}</a>
<a name="ln7164"> </a>
<a name="ln7165">ALIAS (clear_bgp_as_soft,</a>
<a name="ln7166">       clear_bgp_ipv6_as_soft_cmd,</a>
<a name="ln7167">       &quot;clear bgp ipv6 &quot; CMD_AS_RANGE &quot; soft&quot;,</a>
<a name="ln7168">       CLEAR_STR</a>
<a name="ln7169">       BGP_STR</a>
<a name="ln7170">       &quot;Address family\n&quot;</a>
<a name="ln7171">       &quot;Clear peers with the AS number\n&quot;</a>
<a name="ln7172">       BGP_SOFT_STR)</a>
<a name="ln7173"> </a>
<a name="ln7174">/* RS-client soft reconfiguration. */</a>
<a name="ln7175">DEFUN (clear_bgp_all_rsclient,</a>
<a name="ln7176">       clear_bgp_all_rsclient_cmd,</a>
<a name="ln7177">       &quot;clear bgp * rsclient&quot;,</a>
<a name="ln7178">       CLEAR_STR</a>
<a name="ln7179">       BGP_STR</a>
<a name="ln7180">       &quot;Clear all peers\n&quot;</a>
<a name="ln7181">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7182">{</a>
<a name="ln7183">  if (argc == 1)</a>
<a name="ln7184">    return bgp_clear_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln7185">                          BGP_CLEAR_SOFT_RSCLIENT, NULL);</a>
<a name="ln7186"> </a>
<a name="ln7187">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_all,</a>
<a name="ln7188">                        BGP_CLEAR_SOFT_RSCLIENT, NULL);</a>
<a name="ln7189">}</a>
<a name="ln7190"> </a>
<a name="ln7191">ALIAS (clear_bgp_all_rsclient,</a>
<a name="ln7192">       clear_bgp_ipv6_all_rsclient_cmd,</a>
<a name="ln7193">       &quot;clear bgp ipv6 * rsclient&quot;,</a>
<a name="ln7194">       CLEAR_STR</a>
<a name="ln7195">       BGP_STR</a>
<a name="ln7196">       &quot;Address family\n&quot;</a>
<a name="ln7197">       &quot;Clear all peers\n&quot;</a>
<a name="ln7198">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7199"> </a>
<a name="ln7200">ALIAS (clear_bgp_all_rsclient,</a>
<a name="ln7201">       clear_bgp_instance_all_rsclient_cmd,</a>
<a name="ln7202">       &quot;clear bgp view WORD * rsclient&quot;,</a>
<a name="ln7203">       CLEAR_STR</a>
<a name="ln7204">       BGP_STR</a>
<a name="ln7205">       &quot;BGP view\n&quot;</a>
<a name="ln7206">       &quot;view name\n&quot;</a>
<a name="ln7207">       &quot;Clear all peers\n&quot;</a>
<a name="ln7208">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7209"> </a>
<a name="ln7210">ALIAS (clear_bgp_all_rsclient,</a>
<a name="ln7211">       clear_bgp_ipv6_instance_all_rsclient_cmd,</a>
<a name="ln7212">       &quot;clear bgp ipv6 view WORD * rsclient&quot;,</a>
<a name="ln7213">       CLEAR_STR</a>
<a name="ln7214">       BGP_STR</a>
<a name="ln7215">       &quot;Address family\n&quot;</a>
<a name="ln7216">       &quot;BGP view\n&quot;</a>
<a name="ln7217">       &quot;view name\n&quot;</a>
<a name="ln7218">       &quot;Clear all peers\n&quot;</a>
<a name="ln7219">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7220"> </a>
<a name="ln7221">DEFUN (clear_ip_bgp_all_rsclient,</a>
<a name="ln7222">       clear_ip_bgp_all_rsclient_cmd,</a>
<a name="ln7223">       &quot;clear ip bgp * rsclient&quot;,</a>
<a name="ln7224">       CLEAR_STR</a>
<a name="ln7225">       IP_STR</a>
<a name="ln7226">       BGP_STR</a>
<a name="ln7227">       &quot;Clear all peers\n&quot;</a>
<a name="ln7228">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7229">{</a>
<a name="ln7230">  if (argc == 1)</a>
<a name="ln7231">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln7232">                          BGP_CLEAR_SOFT_RSCLIENT, NULL);</a>
<a name="ln7233"> </a>
<a name="ln7234">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_all,</a>
<a name="ln7235">                        BGP_CLEAR_SOFT_RSCLIENT, NULL);</a>
<a name="ln7236">}</a>
<a name="ln7237"> </a>
<a name="ln7238">ALIAS (clear_ip_bgp_all_rsclient,</a>
<a name="ln7239">       clear_ip_bgp_instance_all_rsclient_cmd,</a>
<a name="ln7240">       &quot;clear ip bgp view WORD * rsclient&quot;,</a>
<a name="ln7241">       CLEAR_STR</a>
<a name="ln7242">       IP_STR</a>
<a name="ln7243">       BGP_STR</a>
<a name="ln7244">       &quot;BGP view\n&quot;</a>
<a name="ln7245">       &quot;view name\n&quot;</a>
<a name="ln7246">       &quot;Clear all peers\n&quot;</a>
<a name="ln7247">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7248"> </a>
<a name="ln7249">DEFUN (clear_bgp_peer_rsclient,</a>
<a name="ln7250">       clear_bgp_peer_rsclient_cmd,</a>
<a name="ln7251">       &quot;clear bgp (A.B.C.D|X:X::X:X) rsclient&quot;,</a>
<a name="ln7252">       CLEAR_STR</a>
<a name="ln7253">       BGP_STR</a>
<a name="ln7254">       &quot;BGP neighbor IP address to clear\n&quot;</a>
<a name="ln7255">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln7256">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7257">{</a>
<a name="ln7258">  if (argc == 2)</a>
<a name="ln7259">    return bgp_clear_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST, clear_peer,</a>
<a name="ln7260">                          BGP_CLEAR_SOFT_RSCLIENT, argv[1]);</a>
<a name="ln7261"> </a>
<a name="ln7262">  return bgp_clear_vty (vty, NULL, AFI_IP6, SAFI_UNICAST, clear_peer,</a>
<a name="ln7263">                        BGP_CLEAR_SOFT_RSCLIENT, argv[0]);</a>
<a name="ln7264">}</a>
<a name="ln7265"> </a>
<a name="ln7266">ALIAS (clear_bgp_peer_rsclient,</a>
<a name="ln7267">       clear_bgp_ipv6_peer_rsclient_cmd,</a>
<a name="ln7268">       &quot;clear bgp ipv6 (A.B.C.D|X:X::X:X) rsclient&quot;,</a>
<a name="ln7269">       CLEAR_STR</a>
<a name="ln7270">       BGP_STR</a>
<a name="ln7271">       &quot;Address family\n&quot;</a>
<a name="ln7272">       &quot;BGP neighbor IP address to clear\n&quot;</a>
<a name="ln7273">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln7274">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7275"> </a>
<a name="ln7276">ALIAS (clear_bgp_peer_rsclient,</a>
<a name="ln7277">       clear_bgp_instance_peer_rsclient_cmd,</a>
<a name="ln7278">       &quot;clear bgp view WORD (A.B.C.D|X:X::X:X) rsclient&quot;,</a>
<a name="ln7279">       CLEAR_STR</a>
<a name="ln7280">       BGP_STR</a>
<a name="ln7281">       &quot;BGP view\n&quot;</a>
<a name="ln7282">       &quot;view name\n&quot;</a>
<a name="ln7283">       &quot;BGP neighbor IP address to clear\n&quot;</a>
<a name="ln7284">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln7285">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7286"> </a>
<a name="ln7287">ALIAS (clear_bgp_peer_rsclient,</a>
<a name="ln7288">       clear_bgp_ipv6_instance_peer_rsclient_cmd,</a>
<a name="ln7289">       &quot;clear bgp ipv6 view WORD (A.B.C.D|X:X::X:X) rsclient&quot;,</a>
<a name="ln7290">       CLEAR_STR</a>
<a name="ln7291">       BGP_STR</a>
<a name="ln7292">       &quot;Address family\n&quot;</a>
<a name="ln7293">       &quot;BGP view\n&quot;</a>
<a name="ln7294">       &quot;view name\n&quot;</a>
<a name="ln7295">       &quot;BGP neighbor IP address to clear\n&quot;</a>
<a name="ln7296">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln7297">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7298"> </a>
<a name="ln7299">DEFUN (clear_ip_bgp_peer_rsclient,</a>
<a name="ln7300">       clear_ip_bgp_peer_rsclient_cmd,</a>
<a name="ln7301">       &quot;clear ip bgp (A.B.C.D|X:X::X:X) rsclient&quot;,</a>
<a name="ln7302">       CLEAR_STR</a>
<a name="ln7303">       IP_STR</a>
<a name="ln7304">       BGP_STR</a>
<a name="ln7305">       &quot;BGP neighbor IP address to clear\n&quot;</a>
<a name="ln7306">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln7307">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7308">{</a>
<a name="ln7309">  if (argc == 2)</a>
<a name="ln7310">    return bgp_clear_vty (vty, argv[0], AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln7311">                          BGP_CLEAR_SOFT_RSCLIENT, argv[1]);</a>
<a name="ln7312"> </a>
<a name="ln7313">  return bgp_clear_vty (vty, NULL, AFI_IP, SAFI_UNICAST, clear_peer,</a>
<a name="ln7314">                        BGP_CLEAR_SOFT_RSCLIENT, argv[0]);</a>
<a name="ln7315">}</a>
<a name="ln7316"> </a>
<a name="ln7317">ALIAS (clear_ip_bgp_peer_rsclient,</a>
<a name="ln7318">       clear_ip_bgp_instance_peer_rsclient_cmd,</a>
<a name="ln7319">       &quot;clear ip bgp view WORD (A.B.C.D|X:X::X:X) rsclient&quot;,</a>
<a name="ln7320">       CLEAR_STR</a>
<a name="ln7321">       IP_STR</a>
<a name="ln7322">       BGP_STR</a>
<a name="ln7323">       &quot;BGP view\n&quot;</a>
<a name="ln7324">       &quot;view name\n&quot;</a>
<a name="ln7325">       &quot;BGP neighbor IP address to clear\n&quot;</a>
<a name="ln7326">       &quot;BGP IPv6 neighbor to clear\n&quot;</a>
<a name="ln7327">       BGP_SOFT_RSCLIENT_RIB_STR)</a>
<a name="ln7328"> </a>
<a name="ln7329">DEFUN (show_bgp_views,</a>
<a name="ln7330">       show_bgp_views_cmd,</a>
<a name="ln7331">       &quot;show bgp views&quot;,</a>
<a name="ln7332">       SHOW_STR</a>
<a name="ln7333">       BGP_STR</a>
<a name="ln7334">       &quot;Show the defined BGP views\n&quot;)</a>
<a name="ln7335">{</a>
<a name="ln7336">  struct list *inst = bm-&gt;bgp;</a>
<a name="ln7337">  struct listnode *node;</a>
<a name="ln7338">  struct bgp *bgp;</a>
<a name="ln7339"> </a>
<a name="ln7340">  if (!bgp_option_check (BGP_OPT_MULTIPLE_INSTANCE))</a>
<a name="ln7341">    {</a>
<a name="ln7342">      vty_out (vty, &quot;Multiple BGP views are not defined%s&quot;, VTY_NEWLINE);</a>
<a name="ln7343">      return CMD_WARNING;</a>
<a name="ln7344">    }</a>
<a name="ln7345">  </a>
<a name="ln7346">  vty_out (vty, &quot;Defined BGP views:%s&quot;, VTY_NEWLINE);</a>
<a name="ln7347">  for (ALL_LIST_ELEMENTS_RO(inst, node, bgp))</a>
<a name="ln7348">    vty_out (vty, &quot;\t%s (AS%u)%s&quot;, </a>
<a name="ln7349">             bgp-&gt;name ? bgp-&gt;name : &quot;(null)&quot;,</a>
<a name="ln7350">             bgp-&gt;as, VTY_NEWLINE);</a>
<a name="ln7351">  </a>
<a name="ln7352">  return CMD_SUCCESS;</a>
<a name="ln7353">}</a>
<a name="ln7354"> </a>
<a name="ln7355">DEFUN (show_bgp_memory, </a>
<a name="ln7356">       show_bgp_memory_cmd,</a>
<a name="ln7357">       &quot;show bgp memory&quot;,</a>
<a name="ln7358">       SHOW_STR</a>
<a name="ln7359">       BGP_STR</a>
<a name="ln7360">       &quot;Global BGP memory statistics\n&quot;)</a>
<a name="ln7361">{</a>
<a name="ln7362">  char memstrbuf[MTYPE_MEMSTR_LEN];</a>
<a name="ln7363">  unsigned long count;</a>
<a name="ln7364">  </a>
<a name="ln7365">  /* RIB related usage stats */</a>
<a name="ln7366">  count = mtype_stats_alloc (MTYPE_BGP_NODE);</a>
<a name="ln7367">  vty_out (vty, &quot;%ld RIB nodes, using %s of memory%s&quot;, count,</a>
<a name="ln7368">           mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7369">                         count * sizeof (struct bgp_node)),</a>
<a name="ln7370">           VTY_NEWLINE);</a>
<a name="ln7371">  </a>
<a name="ln7372">  count = mtype_stats_alloc (MTYPE_BGP_ROUTE);</a>
<a name="ln7373">  vty_out (vty, &quot;%ld BGP routes, using %s of memory%s&quot;, count,</a>
<a name="ln7374">           mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7375">                         count * sizeof (struct bgp_info)),</a>
<a name="ln7376">           VTY_NEWLINE);</a>
<a name="ln7377">  if ((count = mtype_stats_alloc (MTYPE_BGP_ROUTE_EXTRA)))</a>
<a name="ln7378">    vty_out (vty, &quot;%ld BGP route ancillaries, using %s of memory%s&quot;, count,</a>
<a name="ln7379">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7380">                           count * sizeof (struct bgp_info_extra)),</a>
<a name="ln7381">             VTY_NEWLINE);</a>
<a name="ln7382">  </a>
<a name="ln7383">  if ((count = mtype_stats_alloc (MTYPE_BGP_STATIC)))</a>
<a name="ln7384">    vty_out (vty, &quot;%ld Static routes, using %s of memory%s&quot;, count,</a>
<a name="ln7385">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7386">                         count * sizeof (struct bgp_static)),</a>
<a name="ln7387">             VTY_NEWLINE);</a>
<a name="ln7388">  </a>
<a name="ln7389">  /* Adj-In/Out */</a>
<a name="ln7390">  if ((count = mtype_stats_alloc (MTYPE_BGP_ADJ_IN)))</a>
<a name="ln7391">    vty_out (vty, &quot;%ld Adj-In entries, using %s of memory%s&quot;, count,</a>
<a name="ln7392">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7393">                           count * sizeof (struct bgp_adj_in)),</a>
<a name="ln7394">             VTY_NEWLINE);</a>
<a name="ln7395">  if ((count = mtype_stats_alloc (MTYPE_BGP_ADJ_OUT)))</a>
<a name="ln7396">    vty_out (vty, &quot;%ld Adj-Out entries, using %s of memory%s&quot;, count,</a>
<a name="ln7397">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7398">                           count * sizeof (struct bgp_adj_out)),</a>
<a name="ln7399">             VTY_NEWLINE);</a>
<a name="ln7400">  </a>
<a name="ln7401">  if ((count = mtype_stats_alloc (MTYPE_BGP_NEXTHOP_CACHE)))</a>
<a name="ln7402">    vty_out (vty, &quot;%ld Nexthop cache entries, using %s of memory%s&quot;, count,</a>
<a name="ln7403">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7404">                         count * sizeof (struct bgp_nexthop_cache)),</a>
<a name="ln7405">             VTY_NEWLINE);</a>
<a name="ln7406"> </a>
<a name="ln7407">  if ((count = mtype_stats_alloc (MTYPE_BGP_DAMP_INFO)))</a>
<a name="ln7408">    vty_out (vty, &quot;%ld Dampening entries, using %s of memory%s&quot;, count,</a>
<a name="ln7409">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7410">                         count * sizeof (struct bgp_damp_info)),</a>
<a name="ln7411">             VTY_NEWLINE);</a>
<a name="ln7412"> </a>
<a name="ln7413">  /* Attributes */</a>
<a name="ln7414">  count = attr_count();</a>
<a name="ln7415">  vty_out (vty, &quot;%ld BGP attributes, using %s of memory%s&quot;, count, </a>
<a name="ln7416">           mtype_memstr (memstrbuf, sizeof (memstrbuf), </a>
<a name="ln7417">                         count * sizeof(struct attr)), </a>
<a name="ln7418">           VTY_NEWLINE);</a>
<a name="ln7419">  if ((count = mtype_stats_alloc (MTYPE_ATTR_EXTRA)))</a>
<a name="ln7420">    vty_out (vty, &quot;%ld BGP extra attributes, using %s of memory%s&quot;, count, </a>
<a name="ln7421">             mtype_memstr (memstrbuf, sizeof (memstrbuf), </a>
<a name="ln7422">                           count * sizeof(struct attr_extra)), </a>
<a name="ln7423">             VTY_NEWLINE);</a>
<a name="ln7424">  </a>
<a name="ln7425">  if ((count = attr_unknown_count()))</a>
<a name="ln7426">    vty_out (vty, &quot;%ld unknown attributes%s&quot;, count, VTY_NEWLINE);</a>
<a name="ln7427">  </a>
<a name="ln7428">  /* AS_PATH attributes */</a>
<a name="ln7429">  count = aspath_count ();</a>
<a name="ln7430">  vty_out (vty, &quot;%ld BGP AS-PATH entries, using %s of memory%s&quot;, count,</a>
<a name="ln7431">           mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7432">                         count * sizeof (struct aspath)),</a>
<a name="ln7433">           VTY_NEWLINE);</a>
<a name="ln7434">  </a>
<a name="ln7435">  count = mtype_stats_alloc (MTYPE_AS_SEG);</a>
<a name="ln7436">  vty_out (vty, &quot;%ld BGP AS-PATH segments, using %s of memory%s&quot;, count,</a>
<a name="ln7437">           mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7438">                         count * sizeof (struct assegment)),</a>
<a name="ln7439">           VTY_NEWLINE);</a>
<a name="ln7440">  </a>
<a name="ln7441">  /* Other attributes */</a>
<a name="ln7442">  if ((count = community_count ()))</a>
<a name="ln7443">    vty_out (vty, &quot;%ld BGP community entries, using %s of memory%s&quot;, count,</a>
<a name="ln7444">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7445">                         count * sizeof (struct community)),</a>
<a name="ln7446">             VTY_NEWLINE);</a>
<a name="ln7447">  if ((count = mtype_stats_alloc (MTYPE_ECOMMUNITY)))</a>
<a name="ln7448">    vty_out (vty, &quot;%ld BGP community entries, using %s of memory%s&quot;, count,</a>
<a name="ln7449">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7450">                         count * sizeof (struct ecommunity)),</a>
<a name="ln7451">             VTY_NEWLINE);</a>
<a name="ln7452">  if ((count = mtype_stats_alloc (MTYPE_LCOMMUNITY)))</a>
<a name="ln7453">    vty_out (vty, &quot;%ld BGP large-community entries, using %s of memory%s&quot;,</a>
<a name="ln7454">	     count,</a>
<a name="ln7455">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7456">                         count * sizeof (struct lcommunity)),</a>
<a name="ln7457">             VTY_NEWLINE);</a>
<a name="ln7458">  if ((count = mtype_stats_alloc (MTYPE_CLUSTER)))</a>
<a name="ln7459">    vty_out (vty, &quot;%ld Cluster lists, using %s of memory%s&quot;, count,</a>
<a name="ln7460">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7461">                         count * sizeof (struct cluster_list)),</a>
<a name="ln7462">             VTY_NEWLINE);</a>
<a name="ln7463">  </a>
<a name="ln7464">  /* Peer related usage */</a>
<a name="ln7465">  count = mtype_stats_alloc (MTYPE_BGP_PEER);</a>
<a name="ln7466">  vty_out (vty, &quot;%ld peers, using %s of memory%s&quot;, count,</a>
<a name="ln7467">           mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7468">                         count * sizeof (struct peer)),</a>
<a name="ln7469">           VTY_NEWLINE);</a>
<a name="ln7470">  </a>
<a name="ln7471">  if ((count = mtype_stats_alloc (MTYPE_PEER_GROUP)))</a>
<a name="ln7472">    vty_out (vty, &quot;%ld peer groups, using %s of memory%s&quot;, count,</a>
<a name="ln7473">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7474">                           count * sizeof (struct peer_group)),</a>
<a name="ln7475">             VTY_NEWLINE);</a>
<a name="ln7476">  </a>
<a name="ln7477">  /* Other */</a>
<a name="ln7478">  if ((count = mtype_stats_alloc (MTYPE_HASH)))</a>
<a name="ln7479">    vty_out (vty, &quot;%ld hash tables, using %s of memory%s&quot;, count,</a>
<a name="ln7480">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7481">                           count * sizeof (struct hash)),</a>
<a name="ln7482">             VTY_NEWLINE);</a>
<a name="ln7483">  if ((count = mtype_stats_alloc (MTYPE_HASH_BACKET)))</a>
<a name="ln7484">    vty_out (vty, &quot;%ld hash buckets, using %s of memory%s&quot;, count,</a>
<a name="ln7485">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7486">                           count * sizeof (struct hash_backet)),</a>
<a name="ln7487">             VTY_NEWLINE);</a>
<a name="ln7488">  if ((count = mtype_stats_alloc (MTYPE_BGP_REGEXP)))</a>
<a name="ln7489">    vty_out (vty, &quot;%ld compiled regexes, using %s of memory%s&quot;, count,</a>
<a name="ln7490">             mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7491">                           count * sizeof (regex_t)),</a>
<a name="ln7492">             VTY_NEWLINE);</a>
<a name="ln7493">  return CMD_SUCCESS;</a>
<a name="ln7494">}</a>
<a name="ln7495"> </a>
<a name="ln7496">/* Show BGP peer's summary information. */</a>
<a name="ln7497">static int</a>
<a name="ln7498">bgp_show_summary (struct vty *vty, struct bgp *bgp, int afi, int safi)</a>
<a name="ln7499">{</a>
<a name="ln7500">  struct peer *peer;</a>
<a name="ln7501">  struct listnode *node, *nnode;</a>
<a name="ln7502">  unsigned int count = 0;</a>
<a name="ln7503">  unsigned int totrcount = 0;</a>
<a name="ln7504">  unsigned int totecount = 0;</a>
<a name="ln7505">  char timebuf[BGP_UPTIME_LEN];</a>
<a name="ln7506">  int len;</a>
<a name="ln7507"> </a>
<a name="ln7508">  /* Header string for each address family. */</a>
<a name="ln7509">  static char header[] = &quot;Neighbor        V         AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd&quot;;</a>
<a name="ln7510">  </a>
<a name="ln7511">  for (ALL_LIST_ELEMENTS (bgp-&gt;peer, node, nnode, peer))</a>
<a name="ln7512">    {</a>
<a name="ln7513">      if (peer-&gt;afc[afi][safi])</a>
<a name="ln7514">	{</a>
<a name="ln7515">          if (!count)</a>
<a name="ln7516">            {</a>
<a name="ln7517">              unsigned long ents;</a>
<a name="ln7518">              char memstrbuf[MTYPE_MEMSTR_LEN];</a>
<a name="ln7519">              </a>
<a name="ln7520">              /* Usage summary and header */</a>
<a name="ln7521">              vty_out (vty,</a>
<a name="ln7522">                       &quot;BGP router identifier %s, local AS number %u%s&quot;,</a>
<a name="ln7523">                       inet_ntoa (bgp-&gt;router_id), bgp-&gt;as, VTY_NEWLINE);</a>
<a name="ln7524"> </a>
<a name="ln7525">              ents = bgp_table_count (bgp-&gt;rib[afi][safi]);</a>
<a name="ln7526">              vty_out (vty, &quot;RIB entries %ld, using %s of memory%s&quot;, ents,</a>
<a name="ln7527">                       mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7528">                                     ents * sizeof (struct bgp_node)),</a>
<a name="ln7529">                       VTY_NEWLINE);</a>
<a name="ln7530">              </a>
<a name="ln7531">              /* Peer related usage */</a>
<a name="ln7532">              ents = listcount (bgp-&gt;peer);</a>
<a name="ln7533">              vty_out (vty, &quot;Peers %ld, using %s of memory%s&quot;,</a>
<a name="ln7534">                       ents,</a>
<a name="ln7535">                       mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7536">                                     ents * sizeof (struct peer)),</a>
<a name="ln7537">                       VTY_NEWLINE);</a>
<a name="ln7538">              </a>
<a name="ln7539">              if ((ents = listcount (bgp-&gt;rsclient)))</a>
<a name="ln7540">                vty_out (vty, &quot;RS-Client peers %ld, using %s of memory%s&quot;,</a>
<a name="ln7541">                         ents,</a>
<a name="ln7542">                         mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7543">                                       ents * sizeof (struct peer)),</a>
<a name="ln7544">                         VTY_NEWLINE);</a>
<a name="ln7545">              </a>
<a name="ln7546">              if ((ents = listcount (bgp-&gt;group)))</a>
<a name="ln7547">                vty_out (vty, &quot;Peer groups %ld, using %s of memory%s&quot;, ents,</a>
<a name="ln7548">                         mtype_memstr (memstrbuf, sizeof (memstrbuf),</a>
<a name="ln7549">                                       ents * sizeof (struct peer_group)),</a>
<a name="ln7550">                         VTY_NEWLINE);</a>
<a name="ln7551"> </a>
<a name="ln7552">              if (CHECK_FLAG (bgp-&gt;af_flags[afi][safi], BGP_CONFIG_DAMPENING))</a>
<a name="ln7553">                vty_out (vty, &quot;Dampening enabled.%s&quot;, VTY_NEWLINE);</a>
<a name="ln7554">              vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln7555">              vty_out (vty, &quot;%s%s&quot;, header, VTY_NEWLINE);</a>
<a name="ln7556">            }</a>
<a name="ln7557">          </a>
<a name="ln7558">	  count++;</a>
<a name="ln7559"> </a>
<a name="ln7560">	  len = vty_out (vty, &quot;%s&quot;, peer-&gt;host);</a>
<a name="ln7561">	  len = 16 - len;</a>
<a name="ln7562">	  if (len &lt; 1)</a>
<a name="ln7563">	    vty_out (vty, &quot;%s%*s&quot;, VTY_NEWLINE, 16, &quot; &quot;);</a>
<a name="ln7564">	  else</a>
<a name="ln7565">	    vty_out (vty, &quot;%*s&quot;, len, &quot; &quot;);</a>
<a name="ln7566"> </a>
<a name="ln7567">	  vty_out (vty, &quot;4 &quot;);</a>
<a name="ln7568"> </a>
<a name="ln7569">	  vty_out (vty, &quot;%5u %7d %7d %8d %4d %4d &quot;,</a>
<a name="ln7570">		   peer-&gt;as,</a>
<a name="ln7571">		   peer-&gt;open_in + peer-&gt;update_in + peer-&gt;keepalive_in</a>
<a name="ln7572">		   + peer-&gt;notify_in + peer-&gt;refresh_in + peer-&gt;dynamic_cap_in,</a>
<a name="ln7573">		   peer-&gt;open_out + peer-&gt;update_out + peer-&gt;keepalive_out</a>
<a name="ln7574">		   + peer-&gt;notify_out + peer-&gt;refresh_out</a>
<a name="ln7575">		   + peer-&gt;dynamic_cap_out,</a>
<a name="ln7576">		   0, 0,</a>
<a name="ln7577">		   peer-&gt;sync[afi][safi]-&gt;update.count +</a>
<a name="ln7578">		   peer-&gt;sync[afi][safi]-&gt;withdraw.count);</a>
<a name="ln7579"> </a>
<a name="ln7580">	  vty_out (vty, &quot;%8s&quot;, </a>
<a name="ln7581">		   peer_uptime (peer-&gt;uptime, timebuf, BGP_UPTIME_LEN));</a>
<a name="ln7582"> </a>
<a name="ln7583">	  if (peer-&gt;status == Established)</a>
<a name="ln7584">	    {</a>
<a name="ln7585">	      vty_out (vty, &quot; %8ld&quot;, peer-&gt;pcount[afi][safi]);</a>
<a name="ln7586">	      totrcount += peer-&gt;pcount[afi][safi];</a>
<a name="ln7587">	      totecount++;</a>
<a name="ln7588">	    }</a>
<a name="ln7589">	  else</a>
<a name="ln7590">	    {</a>
<a name="ln7591">	      if (CHECK_FLAG (peer-&gt;flags, PEER_FLAG_SHUTDOWN))</a>
<a name="ln7592">		vty_out (vty, &quot; Idle (Admin)&quot;);</a>
<a name="ln7593">	      else if (CHECK_FLAG (peer-&gt;sflags, PEER_STATUS_PREFIX_OVERFLOW))</a>
<a name="ln7594">		vty_out (vty, &quot; Idle (PfxCt)&quot;);</a>
<a name="ln7595">	      else</a>
<a name="ln7596">		vty_out (vty, &quot; %-11s&quot;, LOOKUP(bgp_status_msg, peer-&gt;status));</a>
<a name="ln7597">	    }</a>
<a name="ln7598"> </a>
<a name="ln7599">	  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln7600">	}</a>
<a name="ln7601">    }</a>
<a name="ln7602"> </a>
<a name="ln7603">  if (count)</a>
<a name="ln7604">    {</a>
<a name="ln7605">      vty_out (vty, &quot;%sTotal number of neighbors %d%s&quot;, VTY_NEWLINE,</a>
<a name="ln7606">	       count, VTY_NEWLINE);</a>
<a name="ln7607">      vty_out (vty, &quot;%sTotal num. Established sessions %d%s&quot;, VTY_NEWLINE,</a>
<a name="ln7608">	       totecount, VTY_NEWLINE);</a>
<a name="ln7609">      vty_out (vty, &quot;Total num. of routes received     %d%s&quot;,</a>
<a name="ln7610">               totrcount, VTY_NEWLINE);</a>
<a name="ln7611">    }</a>
<a name="ln7612">  else</a>
<a name="ln7613">    vty_out (vty, &quot;No %s neighbor is configured%s&quot;,</a>
<a name="ln7614">	     afi == AFI_IP ? &quot;IPv4&quot; : &quot;IPv6&quot;, VTY_NEWLINE);</a>
<a name="ln7615">  return CMD_SUCCESS;</a>
<a name="ln7616">}</a>
<a name="ln7617"> </a>
<a name="ln7618">static int </a>
<a name="ln7619">bgp_show_summary_vty (struct vty *vty, const char *name, </a>
<a name="ln7620">                      afi_t afi, safi_t safi)</a>
<a name="ln7621">{</a>
<a name="ln7622">  struct bgp *bgp;</a>
<a name="ln7623"> </a>
<a name="ln7624">  if (name)</a>
<a name="ln7625">    {</a>
<a name="ln7626">      bgp = bgp_lookup_by_name (name);</a>
<a name="ln7627">      </a>
<a name="ln7628">      if (! bgp)</a>
<a name="ln7629">	{</a>
<a name="ln7630">	  vty_out (vty, &quot;%% No such BGP instance exist%s&quot;, VTY_NEWLINE); </a>
<a name="ln7631">	  return CMD_WARNING;</a>
<a name="ln7632">	}</a>
<a name="ln7633"> </a>
<a name="ln7634">      bgp_show_summary (vty, bgp, afi, safi);</a>
<a name="ln7635">      return CMD_SUCCESS;</a>
<a name="ln7636">    }</a>
<a name="ln7637">  </a>
<a name="ln7638">  bgp = bgp_get_default ();</a>
<a name="ln7639"> </a>
<a name="ln7640">  if (bgp)</a>
<a name="ln7641">    bgp_show_summary (vty, bgp, afi, safi);    </a>
<a name="ln7642"> </a>
<a name="ln7643">  return CMD_SUCCESS;</a>
<a name="ln7644">}</a>
<a name="ln7645"> </a>
<a name="ln7646">/* `show ip bgp summary' commands. */</a>
<a name="ln7647">DEFUN (show_ip_bgp_summary, </a>
<a name="ln7648">       show_ip_bgp_summary_cmd,</a>
<a name="ln7649">       &quot;show ip bgp summary&quot;,</a>
<a name="ln7650">       SHOW_STR</a>
<a name="ln7651">       IP_STR</a>
<a name="ln7652">       BGP_STR</a>
<a name="ln7653">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7654">{</a>
<a name="ln7655">  return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln7656">}</a>
<a name="ln7657"> </a>
<a name="ln7658">DEFUN (show_ip_bgp_instance_summary,</a>
<a name="ln7659">       show_ip_bgp_instance_summary_cmd,</a>
<a name="ln7660">       &quot;show ip bgp view WORD summary&quot;,</a>
<a name="ln7661">       SHOW_STR</a>
<a name="ln7662">       IP_STR</a>
<a name="ln7663">       BGP_STR</a>
<a name="ln7664">       &quot;BGP view\n&quot;</a>
<a name="ln7665">       &quot;View name\n&quot;</a>
<a name="ln7666">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7667">{</a>
<a name="ln7668">  return bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);  </a>
<a name="ln7669">}</a>
<a name="ln7670"> </a>
<a name="ln7671">DEFUN (show_ip_bgp_ipv4_summary, </a>
<a name="ln7672">       show_ip_bgp_ipv4_summary_cmd,</a>
<a name="ln7673">       &quot;show ip bgp ipv4 (unicast|multicast) summary&quot;,</a>
<a name="ln7674">       SHOW_STR</a>
<a name="ln7675">       IP_STR</a>
<a name="ln7676">       BGP_STR</a>
<a name="ln7677">       &quot;Address family\n&quot;</a>
<a name="ln7678">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7679">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7680">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7681">{</a>
<a name="ln7682">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln7683">    return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MULTICAST);</a>
<a name="ln7684"> </a>
<a name="ln7685">  return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln7686">}</a>
<a name="ln7687"> </a>
<a name="ln7688">DEFUN (show_ip_bgp_instance_ipv4_summary,</a>
<a name="ln7689">       show_ip_bgp_instance_ipv4_summary_cmd,</a>
<a name="ln7690">       &quot;show ip bgp view WORD ipv4 (unicast|multicast) summary&quot;,</a>
<a name="ln7691">       SHOW_STR</a>
<a name="ln7692">       IP_STR</a>
<a name="ln7693">       BGP_STR</a>
<a name="ln7694">       &quot;BGP view\n&quot;</a>
<a name="ln7695">       &quot;View name\n&quot;</a>
<a name="ln7696">       &quot;Address family\n&quot;</a>
<a name="ln7697">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7698">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7699">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7700">{</a>
<a name="ln7701">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln7702">    return bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST);</a>
<a name="ln7703">  else</a>
<a name="ln7704">    return bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);</a>
<a name="ln7705">}</a>
<a name="ln7706"> </a>
<a name="ln7707">DEFUN (show_ip_bgp_vpnv4_all_summary,</a>
<a name="ln7708">       show_ip_bgp_vpnv4_all_summary_cmd,</a>
<a name="ln7709">       &quot;show ip bgp vpnv4 all summary&quot;,</a>
<a name="ln7710">       SHOW_STR</a>
<a name="ln7711">       IP_STR</a>
<a name="ln7712">       BGP_STR</a>
<a name="ln7713">       &quot;Display VPNv4 NLRI specific information\n&quot;</a>
<a name="ln7714">       &quot;Display information about all VPNv4 NLRIs\n&quot;</a>
<a name="ln7715">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7716">{</a>
<a name="ln7717">  return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln7718">}</a>
<a name="ln7719"> </a>
<a name="ln7720">DEFUN (show_ip_bgp_vpnv4_rd_summary,</a>
<a name="ln7721">       show_ip_bgp_vpnv4_rd_summary_cmd,</a>
<a name="ln7722">       &quot;show ip bgp vpnv4 rd ASN:nn_or_IP-address:nn summary&quot;,</a>
<a name="ln7723">       SHOW_STR</a>
<a name="ln7724">       IP_STR</a>
<a name="ln7725">       BGP_STR</a>
<a name="ln7726">       &quot;Display VPNv4 NLRI specific information\n&quot;</a>
<a name="ln7727">       &quot;Display information for a route distinguisher\n&quot;</a>
<a name="ln7728">       &quot;VPN Route Distinguisher\n&quot;</a>
<a name="ln7729">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7730">{</a>
<a name="ln7731">  int ret;</a>
<a name="ln7732">  struct prefix_rd prd;</a>
<a name="ln7733"> </a>
<a name="ln7734">  ret = str2prefix_rd (argv[0], &amp;prd);</a>
<a name="ln7735">  if (! ret)</a>
<a name="ln7736">    {</a>
<a name="ln7737">      vty_out (vty, &quot;%% Malformed Route Distinguisher%s&quot;, VTY_NEWLINE);</a>
<a name="ln7738">      return CMD_WARNING;</a>
<a name="ln7739">    }</a>
<a name="ln7740"> </a>
<a name="ln7741">  return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln7742">}</a>
<a name="ln7743"> </a>
<a name="ln7744">DEFUN (show_bgp_ipv4_safi_summary,</a>
<a name="ln7745">       show_bgp_ipv4_safi_summary_cmd,</a>
<a name="ln7746">       &quot;show bgp ipv4 (unicast|multicast) summary&quot;,</a>
<a name="ln7747">       SHOW_STR</a>
<a name="ln7748">       BGP_STR</a>
<a name="ln7749">       &quot;Address family\n&quot;</a>
<a name="ln7750">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7751">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7752">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7753">{</a>
<a name="ln7754">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln7755">    return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MULTICAST);</a>
<a name="ln7756"> </a>
<a name="ln7757">  return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln7758">}</a>
<a name="ln7759"> </a>
<a name="ln7760">DEFUN (show_bgp_instance_ipv4_safi_summary,</a>
<a name="ln7761">       show_bgp_instance_ipv4_safi_summary_cmd,</a>
<a name="ln7762">       &quot;show bgp view WORD ipv4 (unicast|multicast) summary&quot;,</a>
<a name="ln7763">       SHOW_STR</a>
<a name="ln7764">       BGP_STR</a>
<a name="ln7765">       &quot;BGP view\n&quot;</a>
<a name="ln7766">       &quot;View name\n&quot;</a>
<a name="ln7767">       &quot;Address family\n&quot;</a>
<a name="ln7768">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7769">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7770">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7771">{</a>
<a name="ln7772">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln7773">    return bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST);</a>
<a name="ln7774">  else</a>
<a name="ln7775">    return bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);</a>
<a name="ln7776">}</a>
<a name="ln7777"> </a>
<a name="ln7778">DEFUN (show_bgp_ipv4_vpn_summary,</a>
<a name="ln7779">       show_bgp_ipv4_vpn_summary_cmd,</a>
<a name="ln7780">       &quot;show bgp ipv4 vpn summary&quot;,</a>
<a name="ln7781">       SHOW_STR</a>
<a name="ln7782">       BGP_STR</a>
<a name="ln7783">       &quot;IPv4\n&quot;</a>
<a name="ln7784">       &quot;Display VPN NLRI specific information\n&quot;</a>
<a name="ln7785">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7786">{</a>
<a name="ln7787">  return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln7788">}</a>
<a name="ln7789"> </a>
<a name="ln7790">/* `show ip bgp summary' commands. */</a>
<a name="ln7791">DEFUN (show_bgp_ipv6_vpn_summary,</a>
<a name="ln7792">       show_bgp_ipv6_vpn_summary_cmd,</a>
<a name="ln7793">       &quot;show bgp ipv6 vpn summary&quot;,</a>
<a name="ln7794">       SHOW_STR</a>
<a name="ln7795">       BGP_STR</a>
<a name="ln7796">       &quot;IPv6\n&quot;</a>
<a name="ln7797">       &quot;Display VPN NLRI specific information\n&quot;</a>
<a name="ln7798">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7799">{</a>
<a name="ln7800">  return bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln7801">}</a>
<a name="ln7802"> </a>
<a name="ln7803">DEFUN (show_bgp_ipv4_encap_summary,</a>
<a name="ln7804">       show_bgp_ipv4_encap_summary_cmd,</a>
<a name="ln7805">       &quot;show bgp ipv4 encap summary&quot;,</a>
<a name="ln7806">       SHOW_STR</a>
<a name="ln7807">       BGP_STR</a>
<a name="ln7808">       &quot;IPv4\n&quot;</a>
<a name="ln7809">       &quot;Display ENCAP NLRI specific information\n&quot;</a>
<a name="ln7810">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7811">{</a>
<a name="ln7812">  return bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_ENCAP);</a>
<a name="ln7813">}</a>
<a name="ln7814"> </a>
<a name="ln7815">DEFUN (show_bgp_ipv6_encap_summary,</a>
<a name="ln7816">       show_bgp_ipv6_encap_summary_cmd,</a>
<a name="ln7817">       &quot;show bgp ipv6 encap summary&quot;,</a>
<a name="ln7818">       SHOW_STR</a>
<a name="ln7819">       BGP_STR</a>
<a name="ln7820">       &quot;IPv6\n&quot;</a>
<a name="ln7821">       &quot;Display ENCAP NLRI specific information\n&quot;</a>
<a name="ln7822">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7823">{</a>
<a name="ln7824">  return bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_ENCAP);</a>
<a name="ln7825">}</a>
<a name="ln7826"> </a>
<a name="ln7827">DEFUN (show_bgp_instance_summary,</a>
<a name="ln7828">       show_bgp_instance_summary_cmd,</a>
<a name="ln7829">       &quot;show bgp view WORD summary&quot;,</a>
<a name="ln7830">       SHOW_STR</a>
<a name="ln7831">       BGP_STR</a>
<a name="ln7832">       &quot;BGP view\n&quot;</a>
<a name="ln7833">       &quot;View name\n&quot;</a>
<a name="ln7834">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7835">{</a>
<a name="ln7836">    vty_out(vty, &quot;%sIPv4 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7837">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7838">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);</a>
<a name="ln7839">    vty_out(vty, &quot;%sIPv4 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7840">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7841">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST);</a>
<a name="ln7842">    vty_out(vty, &quot;%sIPv4 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7843">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7844">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln7845">    vty_out(vty, &quot;%sIPv4 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7846">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7847">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_ENCAP);</a>
<a name="ln7848"> </a>
<a name="ln7849">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7850">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7851">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST);</a>
<a name="ln7852">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7853">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7854">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln7855">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7856">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7857">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln7858">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7859">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7860">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_ENCAP);</a>
<a name="ln7861"> </a>
<a name="ln7862">    return CMD_SUCCESS;</a>
<a name="ln7863">}</a>
<a name="ln7864"> </a>
<a name="ln7865">DEFUN (show_bgp_instance_ipv4_summary,</a>
<a name="ln7866">       show_bgp_instance_ipv4_summary_cmd,</a>
<a name="ln7867">       &quot;show bgp view WORD ipv4 summary&quot;,</a>
<a name="ln7868">       SHOW_STR</a>
<a name="ln7869">       BGP_STR</a>
<a name="ln7870">       IP_STR</a>
<a name="ln7871">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7872">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7873">       &quot;BGP view\n&quot;</a>
<a name="ln7874">       &quot;View name\n&quot;</a>
<a name="ln7875">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7876">{</a>
<a name="ln7877">    vty_out(vty, &quot;%sIPv4 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7878">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7879">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);</a>
<a name="ln7880">    vty_out(vty, &quot;%sIPv4 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7881">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7882">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST);</a>
<a name="ln7883">    vty_out(vty, &quot;%sIPv4 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7884">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7885">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln7886">    vty_out(vty, &quot;%sIPv4 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7887">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7888">    bgp_show_summary_vty (vty, argv[0], AFI_IP, SAFI_ENCAP);</a>
<a name="ln7889"> </a>
<a name="ln7890">    return CMD_SUCCESS;</a>
<a name="ln7891">}</a>
<a name="ln7892"> </a>
<a name="ln7893">DEFUN (show_bgp_instance_ipv6_summary,</a>
<a name="ln7894">       show_bgp_instance_ipv6_summary_cmd,</a>
<a name="ln7895">       &quot;show bgp view WORD ipv6 summary&quot;,</a>
<a name="ln7896">       SHOW_STR</a>
<a name="ln7897">       BGP_STR</a>
<a name="ln7898">       IPV6_STR</a>
<a name="ln7899">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7900">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7901">       &quot;BGP view\n&quot;</a>
<a name="ln7902">       &quot;View name\n&quot;</a>
<a name="ln7903">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7904">{</a>
<a name="ln7905">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7906">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7907">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST);</a>
<a name="ln7908">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7909">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7910">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln7911">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7912">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7913">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln7914">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7915">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7916">    bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_ENCAP);</a>
<a name="ln7917"> </a>
<a name="ln7918">    return CMD_SUCCESS;</a>
<a name="ln7919">}</a>
<a name="ln7920"> </a>
<a name="ln7921">DEFUN (show_bgp_ipv6_safi_summary,</a>
<a name="ln7922">       show_bgp_ipv6_safi_summary_cmd,</a>
<a name="ln7923">       &quot;show bgp ipv6 (unicast|multicast) summary&quot;,</a>
<a name="ln7924">       SHOW_STR</a>
<a name="ln7925">       BGP_STR</a>
<a name="ln7926">       &quot;Address family\n&quot;</a>
<a name="ln7927">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7928">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7929">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7930">{</a>
<a name="ln7931">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln7932">    return bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln7933"> </a>
<a name="ln7934">  return bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_UNICAST);</a>
<a name="ln7935">}</a>
<a name="ln7936"> </a>
<a name="ln7937">DEFUN (show_bgp_instance_ipv6_safi_summary,</a>
<a name="ln7938">       show_bgp_instance_ipv6_safi_summary_cmd,</a>
<a name="ln7939">       &quot;show bgp view WORD ipv6 (unicast|multicast) summary&quot;,</a>
<a name="ln7940">       SHOW_STR</a>
<a name="ln7941">       BGP_STR</a>
<a name="ln7942">       &quot;BGP view\n&quot;</a>
<a name="ln7943">       &quot;View name\n&quot;</a>
<a name="ln7944">       &quot;Address family\n&quot;</a>
<a name="ln7945">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7946">       &quot;Address Family modifier\n&quot;</a>
<a name="ln7947">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7948">{</a>
<a name="ln7949">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln7950">    return bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln7951"> </a>
<a name="ln7952">  return bgp_show_summary_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST);</a>
<a name="ln7953">}</a>
<a name="ln7954"> </a>
<a name="ln7955">/* old command */</a>
<a name="ln7956">DEFUN (show_ipv6_bgp_summary, </a>
<a name="ln7957">       show_ipv6_bgp_summary_cmd,</a>
<a name="ln7958">       &quot;show ipv6 bgp summary&quot;,</a>
<a name="ln7959">       SHOW_STR</a>
<a name="ln7960">       IPV6_STR</a>
<a name="ln7961">       BGP_STR</a>
<a name="ln7962">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7963">{</a>
<a name="ln7964">  return bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_UNICAST);</a>
<a name="ln7965">}</a>
<a name="ln7966"> </a>
<a name="ln7967">/* old command */</a>
<a name="ln7968">DEFUN (show_ipv6_mbgp_summary, </a>
<a name="ln7969">       show_ipv6_mbgp_summary_cmd,</a>
<a name="ln7970">       &quot;show ipv6 mbgp summary&quot;,</a>
<a name="ln7971">       SHOW_STR</a>
<a name="ln7972">       IPV6_STR</a>
<a name="ln7973">       MBGP_STR</a>
<a name="ln7974">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7975">{</a>
<a name="ln7976">  return bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln7977">}</a>
<a name="ln7978"> </a>
<a name="ln7979">/* variations of show bgp [...] summary */</a>
<a name="ln7980"> </a>
<a name="ln7981">/* This one is for the 0-keyword variant */</a>
<a name="ln7982">DEFUN (show_bgp_summary,</a>
<a name="ln7983">       show_bgp_summary_cmd,</a>
<a name="ln7984">       &quot;show bgp summary&quot;,</a>
<a name="ln7985">       SHOW_STR</a>
<a name="ln7986">       BGP_STR</a>
<a name="ln7987">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln7988">{</a>
<a name="ln7989">    vty_out(vty, &quot;%sIPv4 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7990">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7991">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln7992">    vty_out(vty, &quot;%sIPv4 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7993">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7994">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MULTICAST);</a>
<a name="ln7995">    vty_out(vty, &quot;%sIPv4 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7996">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln7997">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln7998">    vty_out(vty, &quot;%sIPv4 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln7999">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8000">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_ENCAP);</a>
<a name="ln8001"> </a>
<a name="ln8002">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8003">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8004">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_UNICAST);</a>
<a name="ln8005">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8006">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8007">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln8008">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8009">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8010">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln8011">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8012">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8013">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_ENCAP);</a>
<a name="ln8014"> </a>
<a name="ln8015">    return CMD_SUCCESS;</a>
<a name="ln8016">}</a>
<a name="ln8017"> </a>
<a name="ln8018">ALIAS (show_bgp_summary, </a>
<a name="ln8019">       show_bgp_ipv6_summary_cmd,</a>
<a name="ln8020">       &quot;show bgp ipv6 summary&quot;,</a>
<a name="ln8021">       SHOW_STR</a>
<a name="ln8022">       BGP_STR</a>
<a name="ln8023">       &quot;Address family\n&quot;</a>
<a name="ln8024">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln8025"> </a>
<a name="ln8026">DEFUN (show_bgp_summary_1w,</a>
<a name="ln8027">       show_bgp_summary_1w_cmd,</a>
<a name="ln8028">       &quot;show bgp (ipv4|ipv6|unicast|multicast|vpn|encap) summary&quot;,</a>
<a name="ln8029">       SHOW_STR</a>
<a name="ln8030">       BGP_STR</a>
<a name="ln8031">       IP_STR</a>
<a name="ln8032">       IP6_STR</a>
<a name="ln8033">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8034">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8035">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8036">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8037">       &quot;Summary of BGP neighbor status\n&quot;)</a>
<a name="ln8038">{</a>
<a name="ln8039">  if (strcmp (argv[0], &quot;ipv4&quot;) == 0) {</a>
<a name="ln8040">    vty_out(vty, &quot;%sIPv4 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8041">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8042">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln8043">    vty_out(vty, &quot;%sIPv4 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8044">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8045">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MULTICAST);</a>
<a name="ln8046">    vty_out(vty, &quot;%sIPv4 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8047">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8048">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln8049">    vty_out(vty, &quot;%sIPv4 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8050">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8051">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_ENCAP);</a>
<a name="ln8052">    return CMD_SUCCESS;</a>
<a name="ln8053">  }</a>
<a name="ln8054"> </a>
<a name="ln8055">  if (strcmp (argv[0], &quot;ipv6&quot;) == 0) {</a>
<a name="ln8056">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8057">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8058">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_UNICAST);</a>
<a name="ln8059">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8060">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8061">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln8062">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8063">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8064">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln8065">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln8066">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8067">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_ENCAP);</a>
<a name="ln8068">    return CMD_SUCCESS;</a>
<a name="ln8069">  }</a>
<a name="ln8070"> </a>
<a name="ln8071">  if (strcmp (argv[0], &quot;unicast&quot;) == 0) {</a>
<a name="ln8072">    vty_out(vty, &quot;IPv4 Unicast Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8073">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8074">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln8075">    vty_out(vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8076">    vty_out(vty, &quot;IPv6 Unicast Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8077">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8078">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_UNICAST);</a>
<a name="ln8079">    return CMD_SUCCESS;</a>
<a name="ln8080">  }</a>
<a name="ln8081">  if (strcmp (argv[0], &quot;multicast&quot;) == 0) {</a>
<a name="ln8082">    vty_out(vty, &quot;IPv4 Multicast Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8083">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8084">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MULTICAST);</a>
<a name="ln8085">    vty_out(vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8086">    vty_out(vty, &quot;IPv6 Multicast Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8087">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8088">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln8089">    return CMD_SUCCESS;</a>
<a name="ln8090">  }</a>
<a name="ln8091">  if (strcmp (argv[0], &quot;vpn&quot;) == 0) {</a>
<a name="ln8092">    vty_out(vty, &quot;IPv4 VPN Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8093">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8094">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln8095">    vty_out(vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8096">    vty_out(vty, &quot;IPv6 VPN Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8097">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8098">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln8099">    return CMD_SUCCESS;</a>
<a name="ln8100">  }</a>
<a name="ln8101">  if (strcmp (argv[0], &quot;encap&quot;) == 0) {</a>
<a name="ln8102">    vty_out(vty, &quot;IPv4 Encap Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8103">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8104">    bgp_show_summary_vty (vty, NULL, AFI_IP, SAFI_ENCAP);</a>
<a name="ln8105">    vty_out(vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8106">    vty_out(vty, &quot;IPv6 Encap Summary:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8107">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln8108">    bgp_show_summary_vty (vty, NULL, AFI_IP6, SAFI_ENCAP);</a>
<a name="ln8109">    return CMD_SUCCESS;</a>
<a name="ln8110">  }</a>
<a name="ln8111">  vty_out(vty, &quot;Unknown keyword: %s%s&quot;, argv[0], VTY_NEWLINE);</a>
<a name="ln8112">  return CMD_WARNING;</a>
<a name="ln8113">}</a>
<a name="ln8114"> </a>
<a name="ln8115"> </a>
<a name="ln8116"> </a>
<a name="ln8117">const char *</a>
<a name="ln8118">afi_safi_print (afi_t afi, safi_t safi)</a>
<a name="ln8119">{</a>
<a name="ln8120">  if (afi == AFI_IP &amp;&amp; safi == SAFI_UNICAST)</a>
<a name="ln8121">    return &quot;IPv4 Unicast&quot;;</a>
<a name="ln8122">  else if (afi == AFI_IP &amp;&amp; safi == SAFI_MULTICAST)</a>
<a name="ln8123">    return &quot;IPv4 Multicast&quot;;</a>
<a name="ln8124">  else if (afi == AFI_IP &amp;&amp; safi == SAFI_MPLS_VPN)</a>
<a name="ln8125">    return &quot;VPN-IPv4 Unicast&quot;;</a>
<a name="ln8126">  else if (afi == AFI_IP &amp;&amp; safi == SAFI_ENCAP)</a>
<a name="ln8127">    return &quot;ENCAP-IPv4 Unicast&quot;;</a>
<a name="ln8128">  else if (afi == AFI_IP6 &amp;&amp; safi == SAFI_UNICAST)</a>
<a name="ln8129">    return &quot;IPv6 Unicast&quot;;</a>
<a name="ln8130">  else if (afi == AFI_IP6 &amp;&amp; safi == SAFI_MULTICAST)</a>
<a name="ln8131">    return &quot;IPv6 Multicast&quot;;</a>
<a name="ln8132">  else if (afi == AFI_IP6 &amp;&amp; safi == SAFI_MPLS_VPN)</a>
<a name="ln8133">    return &quot;VPN-IPv6 Unicast&quot;;</a>
<a name="ln8134">  else if (afi == AFI_IP6 &amp;&amp; safi == SAFI_ENCAP)</a>
<a name="ln8135">    return &quot;ENCAP-IPv6 Unicast&quot;;</a>
<a name="ln8136">  else</a>
<a name="ln8137">    return &quot;Unknown&quot;;</a>
<a name="ln8138">}</a>
<a name="ln8139"> </a>
<a name="ln8140">/* Show BGP peer's information. */</a>
<a name="ln8141">enum show_type</a>
<a name="ln8142">{</a>
<a name="ln8143">  show_all,</a>
<a name="ln8144">  show_peer</a>
<a name="ln8145">};</a>
<a name="ln8146"> </a>
<a name="ln8147">static void</a>
<a name="ln8148">bgp_show_peer_afi_orf_cap (struct vty *vty, struct peer *p,</a>
<a name="ln8149">			   afi_t afi, safi_t safi,</a>
<a name="ln8150">			   u_int16_t adv_smcap, u_int16_t adv_rmcap,</a>
<a name="ln8151">			   u_int16_t rcv_smcap, u_int16_t rcv_rmcap)</a>
<a name="ln8152">{</a>
<a name="ln8153">  /* Send-Mode */</a>
<a name="ln8154">  if (CHECK_FLAG (p-&gt;af_cap[afi][safi], adv_smcap)</a>
<a name="ln8155">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], rcv_smcap))</a>
<a name="ln8156">    {</a>
<a name="ln8157">      vty_out (vty, &quot;      Send-mode: &quot;);</a>
<a name="ln8158">      if (CHECK_FLAG (p-&gt;af_cap[afi][safi], adv_smcap))</a>
<a name="ln8159">	vty_out (vty, &quot;advertised&quot;);</a>
<a name="ln8160">      if (CHECK_FLAG (p-&gt;af_cap[afi][safi], rcv_smcap))</a>
<a name="ln8161">	vty_out (vty, &quot;%sreceived&quot;,</a>
<a name="ln8162">		 CHECK_FLAG (p-&gt;af_cap[afi][safi], adv_smcap) ?</a>
<a name="ln8163">		 &quot;, &quot; : &quot;&quot;);</a>
<a name="ln8164">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8165">    }</a>
<a name="ln8166"> </a>
<a name="ln8167">  /* Receive-Mode */</a>
<a name="ln8168">  if (CHECK_FLAG (p-&gt;af_cap[afi][safi], adv_rmcap)</a>
<a name="ln8169">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], rcv_rmcap))</a>
<a name="ln8170">    {</a>
<a name="ln8171">      vty_out (vty, &quot;      Receive-mode: &quot;);</a>
<a name="ln8172">      if (CHECK_FLAG (p-&gt;af_cap[afi][safi], adv_rmcap))</a>
<a name="ln8173">	vty_out (vty, &quot;advertised&quot;);</a>
<a name="ln8174">      if (CHECK_FLAG (p-&gt;af_cap[afi][safi], rcv_rmcap))</a>
<a name="ln8175">	vty_out (vty, &quot;%sreceived&quot;,</a>
<a name="ln8176">		 CHECK_FLAG (p-&gt;af_cap[afi][safi], adv_rmcap) ?</a>
<a name="ln8177">		 &quot;, &quot; : &quot;&quot;);</a>
<a name="ln8178">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8179">    }</a>
<a name="ln8180">}</a>
<a name="ln8181"> </a>
<a name="ln8182">static void</a>
<a name="ln8183">bgp_show_peer_afi (struct vty *vty, struct peer *p, afi_t afi, safi_t safi)</a>
<a name="ln8184">{</a>
<a name="ln8185">  struct bgp_filter *filter;</a>
<a name="ln8186">  char orf_pfx_name[BUFSIZ];</a>
<a name="ln8187">  int orf_pfx_count;</a>
<a name="ln8188"> </a>
<a name="ln8189">  filter = &amp;p-&gt;filter[afi][safi];</a>
<a name="ln8190"> </a>
<a name="ln8191">  vty_out (vty, &quot; For address family: %s%s&quot;, afi_safi_print (afi, safi),</a>
<a name="ln8192">	   VTY_NEWLINE);</a>
<a name="ln8193"> </a>
<a name="ln8194">  if (p-&gt;af_group[afi][safi])</a>
<a name="ln8195">    vty_out (vty, &quot;  %s peer-group member%s&quot;, p-&gt;group-&gt;name, VTY_NEWLINE);</a>
<a name="ln8196"> </a>
<a name="ln8197">  if (CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_SM_ADV)</a>
<a name="ln8198">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_SM_RCV)</a>
<a name="ln8199">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_SM_OLD_RCV)</a>
<a name="ln8200">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_RM_ADV)</a>
<a name="ln8201">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_RM_RCV)</a>
<a name="ln8202">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_RM_OLD_RCV))</a>
<a name="ln8203">    vty_out (vty, &quot;  AF-dependant capabilities:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8204"> </a>
<a name="ln8205">  if (CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_SM_ADV)</a>
<a name="ln8206">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_SM_RCV)</a>
<a name="ln8207">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_RM_ADV)</a>
<a name="ln8208">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_RM_RCV))</a>
<a name="ln8209">    {</a>
<a name="ln8210">      vty_out (vty, &quot;    Outbound Route Filter (ORF) type (%d) Prefix-list:%s&quot;,</a>
<a name="ln8211">	       ORF_TYPE_PREFIX, VTY_NEWLINE);</a>
<a name="ln8212">      bgp_show_peer_afi_orf_cap (vty, p, afi, safi,</a>
<a name="ln8213">				 PEER_CAP_ORF_PREFIX_SM_ADV,</a>
<a name="ln8214">				 PEER_CAP_ORF_PREFIX_RM_ADV,</a>
<a name="ln8215">				 PEER_CAP_ORF_PREFIX_SM_RCV,</a>
<a name="ln8216">				 PEER_CAP_ORF_PREFIX_RM_RCV);</a>
<a name="ln8217">    }</a>
<a name="ln8218">  if (CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_SM_ADV)</a>
<a name="ln8219">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_SM_OLD_RCV)</a>
<a name="ln8220">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_RM_ADV)</a>
<a name="ln8221">      || CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_ORF_PREFIX_RM_OLD_RCV))</a>
<a name="ln8222">    {</a>
<a name="ln8223">      vty_out (vty, &quot;    Outbound Route Filter (ORF) type (%d) Prefix-list:%s&quot;,</a>
<a name="ln8224">	       ORF_TYPE_PREFIX_OLD, VTY_NEWLINE);</a>
<a name="ln8225">      bgp_show_peer_afi_orf_cap (vty, p, afi, safi,</a>
<a name="ln8226">				 PEER_CAP_ORF_PREFIX_SM_ADV,</a>
<a name="ln8227">				 PEER_CAP_ORF_PREFIX_RM_ADV,</a>
<a name="ln8228">				 PEER_CAP_ORF_PREFIX_SM_OLD_RCV,</a>
<a name="ln8229">				 PEER_CAP_ORF_PREFIX_RM_OLD_RCV);</a>
<a name="ln8230">    }</a>
<a name="ln8231"> </a>
<a name="ln8232">  sprintf (orf_pfx_name, &quot;%s.%d.%d&quot;, p-&gt;host, afi, safi);</a>
<a name="ln8233">  orf_pfx_count =  prefix_bgp_show_prefix_list (NULL, afi, orf_pfx_name);</a>
<a name="ln8234"> </a>
<a name="ln8235">  if (CHECK_FLAG (p-&gt;af_sflags[afi][safi], PEER_STATUS_ORF_PREFIX_SEND)</a>
<a name="ln8236">      || orf_pfx_count)</a>
<a name="ln8237">    {</a>
<a name="ln8238">      vty_out (vty, &quot;  Outbound Route Filter (ORF):&quot;);</a>
<a name="ln8239">      if (CHECK_FLAG (p-&gt;af_sflags[afi][safi], PEER_STATUS_ORF_PREFIX_SEND))</a>
<a name="ln8240">	  vty_out (vty, &quot; sent;&quot;);</a>
<a name="ln8241">      if (orf_pfx_count)</a>
<a name="ln8242">	vty_out (vty, &quot; received (%d entries)&quot;, orf_pfx_count);</a>
<a name="ln8243">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8244">    }</a>
<a name="ln8245">  if (CHECK_FLAG (p-&gt;af_sflags[afi][safi], PEER_STATUS_ORF_WAIT_REFRESH))</a>
<a name="ln8246">      vty_out (vty, &quot;  First update is deferred until ORF or ROUTE-REFRESH is received%s&quot;, VTY_NEWLINE);</a>
<a name="ln8247"> </a>
<a name="ln8248">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_REFLECTOR_CLIENT))</a>
<a name="ln8249">    vty_out (vty, &quot;  Route-Reflector Client%s&quot;, VTY_NEWLINE);</a>
<a name="ln8250">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_RSERVER_CLIENT))</a>
<a name="ln8251">    vty_out (vty, &quot;  Route-Server Client%s&quot;, VTY_NEWLINE);</a>
<a name="ln8252">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SOFT_RECONFIG))</a>
<a name="ln8253">    vty_out (vty, &quot;  Inbound soft reconfiguration allowed%s&quot;, VTY_NEWLINE);</a>
<a name="ln8254">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_REMOVE_PRIVATE_AS))</a>
<a name="ln8255">    vty_out (vty, &quot;  Private AS number removed from updates to this neighbor%s&quot;, VTY_NEWLINE);</a>
<a name="ln8256">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_NEXTHOP_SELF))</a>
<a name="ln8257">    vty_out (vty, &quot;  NEXT_HOP is always this router%s&quot;, VTY_NEWLINE);</a>
<a name="ln8258">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_AS_PATH_UNCHANGED))</a>
<a name="ln8259">    vty_out (vty, &quot;  AS_PATH is propagated unchanged to this neighbor%s&quot;, VTY_NEWLINE);</a>
<a name="ln8260">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_NEXTHOP_UNCHANGED))</a>
<a name="ln8261">    vty_out (vty, &quot;  NEXT_HOP is propagated unchanged to this neighbor%s&quot;, VTY_NEWLINE);</a>
<a name="ln8262">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_MED_UNCHANGED))</a>
<a name="ln8263">    vty_out (vty, &quot;  MED is propagated unchanged to this neighbor%s&quot;, VTY_NEWLINE);</a>
<a name="ln8264">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_COMMUNITY)</a>
<a name="ln8265">      || CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_EXT_COMMUNITY)</a>
<a name="ln8266">      || CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_LARGE_COMMUNITY))</a>
<a name="ln8267">    {</a>
<a name="ln8268">      vty_out (vty, &quot;  Community attribute sent to this neighbor&quot;);</a>
<a name="ln8269">      if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_COMMUNITY)</a>
<a name="ln8270">	  &amp;&amp; CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_EXT_COMMUNITY)</a>
<a name="ln8271">	  &amp;&amp; CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_LARGE_COMMUNITY))</a>
<a name="ln8272">	vty_out (vty, &quot;(all)%s&quot;, VTY_NEWLINE);</a>
<a name="ln8273">      else if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_EXT_COMMUNITY))</a>
<a name="ln8274">	vty_out (vty, &quot;(extended)%s&quot;, VTY_NEWLINE);</a>
<a name="ln8275">      else if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_SEND_LARGE_COMMUNITY))</a>
<a name="ln8276">	vty_out (vty, &quot;(large)%s&quot;, VTY_NEWLINE);</a>
<a name="ln8277">      else </a>
<a name="ln8278">	vty_out (vty, &quot;(standard)%s&quot;, VTY_NEWLINE);</a>
<a name="ln8279">    }</a>
<a name="ln8280">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_DEFAULT_ORIGINATE))</a>
<a name="ln8281">    {</a>
<a name="ln8282">      vty_out (vty, &quot;  Default information originate,&quot;);</a>
<a name="ln8283"> </a>
<a name="ln8284">      if (p-&gt;default_rmap[afi][safi].name)</a>
<a name="ln8285">	vty_out (vty, &quot; default route-map %s%s,&quot;,</a>
<a name="ln8286">		 p-&gt;default_rmap[afi][safi].map ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8287">		 p-&gt;default_rmap[afi][safi].name);</a>
<a name="ln8288">      if (CHECK_FLAG (p-&gt;af_sflags[afi][safi], PEER_STATUS_DEFAULT_ORIGINATE))</a>
<a name="ln8289">	vty_out (vty, &quot; default sent%s&quot;, VTY_NEWLINE);</a>
<a name="ln8290">      else</a>
<a name="ln8291">	vty_out (vty, &quot; default not sent%s&quot;, VTY_NEWLINE);</a>
<a name="ln8292">    }</a>
<a name="ln8293"> </a>
<a name="ln8294">  if (filter-&gt;plist[FILTER_IN].name</a>
<a name="ln8295">      || filter-&gt;dlist[FILTER_IN].name</a>
<a name="ln8296">      || filter-&gt;aslist[FILTER_IN].name</a>
<a name="ln8297">      || filter-&gt;map[RMAP_IN].name)</a>
<a name="ln8298">    vty_out (vty, &quot;  Inbound path policy configured%s&quot;, VTY_NEWLINE);</a>
<a name="ln8299">  if (filter-&gt;plist[FILTER_OUT].name</a>
<a name="ln8300">      || filter-&gt;dlist[FILTER_OUT].name</a>
<a name="ln8301">      || filter-&gt;aslist[FILTER_OUT].name</a>
<a name="ln8302">      || filter-&gt;map[RMAP_OUT].name</a>
<a name="ln8303">      || filter-&gt;usmap.name)</a>
<a name="ln8304">    vty_out (vty, &quot;  Outbound path policy configured%s&quot;, VTY_NEWLINE);</a>
<a name="ln8305">  if (filter-&gt;map[RMAP_IMPORT].name)</a>
<a name="ln8306">    vty_out (vty, &quot;  Import policy for this RS-client configured%s&quot;, VTY_NEWLINE);</a>
<a name="ln8307">  if (filter-&gt;map[RMAP_EXPORT].name)</a>
<a name="ln8308">    vty_out (vty, &quot;  Export policy for this RS-client configured%s&quot;, VTY_NEWLINE);</a>
<a name="ln8309"> </a>
<a name="ln8310">  /* prefix-list */</a>
<a name="ln8311">  if (filter-&gt;plist[FILTER_IN].name)</a>
<a name="ln8312">    vty_out (vty, &quot;  Incoming update prefix filter list is %s%s%s&quot;,</a>
<a name="ln8313">	     filter-&gt;plist[FILTER_IN].plist ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8314">	     filter-&gt;plist[FILTER_IN].name,</a>
<a name="ln8315">	     VTY_NEWLINE);</a>
<a name="ln8316">  if (filter-&gt;plist[FILTER_OUT].name)</a>
<a name="ln8317">    vty_out (vty, &quot;  Outgoing update prefix filter list is %s%s%s&quot;,</a>
<a name="ln8318">	     filter-&gt;plist[FILTER_OUT].plist ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8319">	     filter-&gt;plist[FILTER_OUT].name,</a>
<a name="ln8320">	     VTY_NEWLINE);</a>
<a name="ln8321"> </a>
<a name="ln8322">  /* distribute-list */</a>
<a name="ln8323">  if (filter-&gt;dlist[FILTER_IN].name)</a>
<a name="ln8324">    vty_out (vty, &quot;  Incoming update network filter list is %s%s%s&quot;,</a>
<a name="ln8325">	     filter-&gt;dlist[FILTER_IN].alist ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8326">	     filter-&gt;dlist[FILTER_IN].name,</a>
<a name="ln8327">	     VTY_NEWLINE);</a>
<a name="ln8328">  if (filter-&gt;dlist[FILTER_OUT].name)</a>
<a name="ln8329">    vty_out (vty, &quot;  Outgoing update network filter list is %s%s%s&quot;,</a>
<a name="ln8330">	     filter-&gt;dlist[FILTER_OUT].alist ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8331">	     filter-&gt;dlist[FILTER_OUT].name,</a>
<a name="ln8332">	     VTY_NEWLINE);</a>
<a name="ln8333"> </a>
<a name="ln8334">  /* filter-list. */</a>
<a name="ln8335">  if (filter-&gt;aslist[FILTER_IN].name)</a>
<a name="ln8336">    vty_out (vty, &quot;  Incoming update AS path filter list is %s%s%s&quot;,</a>
<a name="ln8337">	     filter-&gt;aslist[FILTER_IN].aslist ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8338">	     filter-&gt;aslist[FILTER_IN].name,</a>
<a name="ln8339">	     VTY_NEWLINE);</a>
<a name="ln8340">  if (filter-&gt;aslist[FILTER_OUT].name)</a>
<a name="ln8341">    vty_out (vty, &quot;  Outgoing update AS path filter list is %s%s%s&quot;,</a>
<a name="ln8342">	     filter-&gt;aslist[FILTER_OUT].aslist ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8343">	     filter-&gt;aslist[FILTER_OUT].name,</a>
<a name="ln8344">	     VTY_NEWLINE);</a>
<a name="ln8345"> </a>
<a name="ln8346">  /* route-map. */</a>
<a name="ln8347">  if (filter-&gt;map[RMAP_IN].name)</a>
<a name="ln8348">    vty_out (vty, &quot;  Route map for incoming advertisements is %s%s%s&quot;,</a>
<a name="ln8349">            filter-&gt;map[RMAP_IN].map ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8350">            filter-&gt;map[RMAP_IN].name,</a>
<a name="ln8351">	     VTY_NEWLINE);</a>
<a name="ln8352">  if (filter-&gt;map[RMAP_OUT].name)</a>
<a name="ln8353">    vty_out (vty, &quot;  Route map for outgoing advertisements is %s%s%s&quot;,</a>
<a name="ln8354">            filter-&gt;map[RMAP_OUT].map ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8355">            filter-&gt;map[RMAP_OUT].name,</a>
<a name="ln8356">            VTY_NEWLINE);</a>
<a name="ln8357">  if (filter-&gt;map[RMAP_IMPORT].name)</a>
<a name="ln8358">    vty_out (vty, &quot;  Route map for advertisements going into this RS-client's table is %s%s%s&quot;,</a>
<a name="ln8359">            filter-&gt;map[RMAP_IMPORT].map ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8360">            filter-&gt;map[RMAP_IMPORT].name,</a>
<a name="ln8361">            VTY_NEWLINE);</a>
<a name="ln8362">  if (filter-&gt;map[RMAP_EXPORT].name)</a>
<a name="ln8363">    vty_out (vty, &quot;  Route map for advertisements coming from this RS-client is %s%s%s&quot;,</a>
<a name="ln8364">            filter-&gt;map[RMAP_EXPORT].map ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8365">            filter-&gt;map[RMAP_EXPORT].name,</a>
<a name="ln8366">	     VTY_NEWLINE);</a>
<a name="ln8367"> </a>
<a name="ln8368">  /* unsuppress-map */</a>
<a name="ln8369">  if (filter-&gt;usmap.name)</a>
<a name="ln8370">    vty_out (vty, &quot;  Route map for selective unsuppress is %s%s%s&quot;,</a>
<a name="ln8371">	     filter-&gt;usmap.map ? &quot;*&quot; : &quot;&quot;,</a>
<a name="ln8372">	     filter-&gt;usmap.name, VTY_NEWLINE);</a>
<a name="ln8373"> </a>
<a name="ln8374">  /* Receive prefix count */</a>
<a name="ln8375">  vty_out (vty, &quot;  %ld accepted prefixes%s&quot;, p-&gt;pcount[afi][safi], VTY_NEWLINE);</a>
<a name="ln8376"> </a>
<a name="ln8377">  /* Maximum prefix */</a>
<a name="ln8378">  if (CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_MAX_PREFIX))</a>
<a name="ln8379">    {</a>
<a name="ln8380">      vty_out (vty, &quot;  Maximum prefixes allowed %ld%s%s&quot;, p-&gt;pmax[afi][safi],</a>
<a name="ln8381">	       CHECK_FLAG (p-&gt;af_flags[afi][safi], PEER_FLAG_MAX_PREFIX_WARNING)</a>
<a name="ln8382">	       ? &quot; (warning-only)&quot; : &quot;&quot;, VTY_NEWLINE);</a>
<a name="ln8383">      vty_out (vty, &quot;  Threshold for warning message %d%%&quot;,</a>
<a name="ln8384">	       p-&gt;pmax_threshold[afi][safi]);</a>
<a name="ln8385">      if (p-&gt;pmax_restart[afi][safi])</a>
<a name="ln8386">	vty_out (vty, &quot;, restart interval %d min&quot;, p-&gt;pmax_restart[afi][safi]);</a>
<a name="ln8387">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8388">    }</a>
<a name="ln8389"> </a>
<a name="ln8390">  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8391">}</a>
<a name="ln8392"> </a>
<a name="ln8393">static void</a>
<a name="ln8394">bgp_show_peer (struct vty *vty, struct peer *p)</a>
<a name="ln8395">{</a>
<a name="ln8396">  struct bgp *bgp;</a>
<a name="ln8397">  char buf1[BUFSIZ];</a>
<a name="ln8398">  char timebuf[BGP_UPTIME_LEN];</a>
<a name="ln8399">  afi_t afi;</a>
<a name="ln8400">  safi_t safi;</a>
<a name="ln8401">  int ttl;</a>
<a name="ln8402"> </a>
<a name="ln8403">  bgp = p-&gt;bgp;</a>
<a name="ln8404"> </a>
<a name="ln8405">  /* Configured IP address. */</a>
<a name="ln8406">  vty_out (vty, &quot;BGP neighbor is %s, &quot;, p-&gt;host);</a>
<a name="ln8407">  vty_out (vty, &quot;remote AS %u, &quot;, p-&gt;as);</a>
<a name="ln8408">  vty_out (vty, &quot;local AS %u%s%s, &quot;,</a>
<a name="ln8409">	   p-&gt;change_local_as ? p-&gt;change_local_as : p-&gt;local_as,</a>
<a name="ln8410">	   CHECK_FLAG (p-&gt;flags, PEER_FLAG_LOCAL_AS_NO_PREPEND) ?</a>
<a name="ln8411">	   &quot; no-prepend&quot; : &quot;&quot;,</a>
<a name="ln8412">	   CHECK_FLAG (p-&gt;flags, PEER_FLAG_LOCAL_AS_REPLACE_AS) ?</a>
<a name="ln8413">	   &quot; replace-as&quot; : &quot;&quot;);</a>
<a name="ln8414">  vty_out (vty, &quot;%s link%s&quot;,</a>
<a name="ln8415">	   p-&gt;as == p-&gt;local_as ? &quot;internal&quot; : &quot;external&quot;,</a>
<a name="ln8416">	   VTY_NEWLINE);</a>
<a name="ln8417"> </a>
<a name="ln8418">  /* Description. */</a>
<a name="ln8419">  if (p-&gt;desc)</a>
<a name="ln8420">    vty_out (vty, &quot; Description: %s%s&quot;, p-&gt;desc, VTY_NEWLINE);</a>
<a name="ln8421">  </a>
<a name="ln8422">  /* Peer-group */</a>
<a name="ln8423">  if (p-&gt;group)</a>
<a name="ln8424">    vty_out (vty, &quot; Member of peer-group %s for session parameters%s&quot;,</a>
<a name="ln8425">	     p-&gt;group-&gt;name, VTY_NEWLINE);</a>
<a name="ln8426"> </a>
<a name="ln8427">  /* Administrative shutdown. */</a>
<a name="ln8428">  if (CHECK_FLAG (p-&gt;flags, PEER_FLAG_SHUTDOWN))</a>
<a name="ln8429">    vty_out (vty, &quot; Administratively shut down%s&quot;, VTY_NEWLINE);</a>
<a name="ln8430"> </a>
<a name="ln8431">  /* BGP Version. */</a>
<a name="ln8432">  vty_out (vty, &quot;  BGP version 4&quot;);</a>
<a name="ln8433">  vty_out (vty, &quot;, remote router ID %s%s&quot;, </a>
<a name="ln8434">	   inet_ntop (AF_INET, &amp;p-&gt;remote_id, buf1, BUFSIZ),</a>
<a name="ln8435">	   VTY_NEWLINE);</a>
<a name="ln8436"> </a>
<a name="ln8437">  /* Confederation */</a>
<a name="ln8438">  if (CHECK_FLAG (bgp-&gt;config, BGP_CONFIG_CONFEDERATION)</a>
<a name="ln8439">      &amp;&amp; bgp_confederation_peers_check (bgp, p-&gt;as))</a>
<a name="ln8440">    vty_out (vty, &quot;  Neighbor under common administration%s&quot;, VTY_NEWLINE);</a>
<a name="ln8441">  </a>
<a name="ln8442">  /* Status. */</a>
<a name="ln8443">  vty_out (vty, &quot;  BGP state = %s&quot;,  </a>
<a name="ln8444">	   LOOKUP (bgp_status_msg, p-&gt;status));</a>
<a name="ln8445">  if (p-&gt;status == Established) </a>
<a name="ln8446">    vty_out (vty, &quot;, up for %8s&quot;, </a>
<a name="ln8447">	     peer_uptime (p-&gt;uptime, timebuf, BGP_UPTIME_LEN));</a>
<a name="ln8448">  else if (p-&gt;status == Active)</a>
<a name="ln8449">    {</a>
<a name="ln8450">      if (CHECK_FLAG (p-&gt;flags, PEER_FLAG_PASSIVE))</a>
<a name="ln8451">	vty_out (vty, &quot; (passive)&quot;); </a>
<a name="ln8452">      else if (CHECK_FLAG (p-&gt;sflags, PEER_STATUS_NSF_WAIT))</a>
<a name="ln8453">	vty_out (vty, &quot; (NSF passive)&quot;); </a>
<a name="ln8454">    }</a>
<a name="ln8455">  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8456">  </a>
<a name="ln8457">  /* read timer */</a>
<a name="ln8458">  vty_out (vty, &quot;  Last read %s&quot;, peer_uptime (p-&gt;readtime, timebuf, BGP_UPTIME_LEN));</a>
<a name="ln8459"> </a>
<a name="ln8460">  /* Configured timer values. */</a>
<a name="ln8461">  vty_out (vty, &quot;, hold time is %d, keepalive interval is %d seconds%s&quot;,</a>
<a name="ln8462">	   p-&gt;v_holdtime, p-&gt;v_keepalive, VTY_NEWLINE);</a>
<a name="ln8463">  if (CHECK_FLAG (p-&gt;config, PEER_CONFIG_TIMER))</a>
<a name="ln8464">    {</a>
<a name="ln8465">      vty_out (vty, &quot;  Configured hold time is %d&quot;, p-&gt;holdtime);</a>
<a name="ln8466">      vty_out (vty, &quot;, keepalive interval is %d seconds%s&quot;,</a>
<a name="ln8467">	       p-&gt;keepalive, VTY_NEWLINE);</a>
<a name="ln8468">    }</a>
<a name="ln8469"> </a>
<a name="ln8470">  /* Capability. */</a>
<a name="ln8471">  if (p-&gt;status == Established) </a>
<a name="ln8472">    {</a>
<a name="ln8473">      if (p-&gt;cap</a>
<a name="ln8474">	  || p-&gt;afc_adv[AFI_IP][SAFI_UNICAST]</a>
<a name="ln8475">	  || p-&gt;afc_recv[AFI_IP][SAFI_UNICAST]</a>
<a name="ln8476">	  || p-&gt;afc_adv[AFI_IP][SAFI_MULTICAST]</a>
<a name="ln8477">	  || p-&gt;afc_recv[AFI_IP][SAFI_MULTICAST]</a>
<a name="ln8478">	  || p-&gt;afc_adv[AFI_IP6][SAFI_UNICAST]</a>
<a name="ln8479">	  || p-&gt;afc_recv[AFI_IP6][SAFI_UNICAST]</a>
<a name="ln8480">	  || p-&gt;afc_adv[AFI_IP6][SAFI_MULTICAST]</a>
<a name="ln8481">	  || p-&gt;afc_recv[AFI_IP6][SAFI_MULTICAST]</a>
<a name="ln8482">	  || p-&gt;afc_adv[AFI_IP6][SAFI_MPLS_VPN]</a>
<a name="ln8483">	  || p-&gt;afc_recv[AFI_IP6][SAFI_MPLS_VPN]</a>
<a name="ln8484">	  || p-&gt;afc_adv[AFI_IP6][SAFI_ENCAP]</a>
<a name="ln8485">	  || p-&gt;afc_recv[AFI_IP6][SAFI_ENCAP]</a>
<a name="ln8486">	  || p-&gt;afc_adv[AFI_IP][SAFI_ENCAP]</a>
<a name="ln8487">	  || p-&gt;afc_recv[AFI_IP][SAFI_ENCAP]</a>
<a name="ln8488">	  || p-&gt;afc_adv[AFI_IP][SAFI_MPLS_VPN]</a>
<a name="ln8489">	  || p-&gt;afc_recv[AFI_IP][SAFI_MPLS_VPN])</a>
<a name="ln8490">	{</a>
<a name="ln8491">	  vty_out (vty, &quot;  Neighbor capabilities:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8492"> </a>
<a name="ln8493">	  /* AS4 */</a>
<a name="ln8494">	  if (CHECK_FLAG (p-&gt;cap, PEER_CAP_AS4_RCV)</a>
<a name="ln8495">	      || CHECK_FLAG (p-&gt;cap, PEER_CAP_AS4_ADV))</a>
<a name="ln8496">	    {</a>
<a name="ln8497">	      vty_out (vty, &quot;    4 Byte AS:&quot;);</a>
<a name="ln8498">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_AS4_ADV))</a>
<a name="ln8499">		vty_out (vty, &quot; advertised&quot;);</a>
<a name="ln8500">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_AS4_RCV))</a>
<a name="ln8501">		vty_out (vty, &quot; %sreceived&quot;,</a>
<a name="ln8502">			 CHECK_FLAG (p-&gt;cap, PEER_CAP_AS4_ADV) ? &quot;and &quot; : &quot;&quot;);</a>
<a name="ln8503">	      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8504">	    }</a>
<a name="ln8505">	  /* Dynamic */</a>
<a name="ln8506">	  if (CHECK_FLAG (p-&gt;cap, PEER_CAP_DYNAMIC_RCV)</a>
<a name="ln8507">	      || CHECK_FLAG (p-&gt;cap, PEER_CAP_DYNAMIC_ADV))</a>
<a name="ln8508">	    {</a>
<a name="ln8509">	      vty_out (vty, &quot;    Dynamic:&quot;);</a>
<a name="ln8510">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_DYNAMIC_ADV))</a>
<a name="ln8511">		vty_out (vty, &quot; advertised&quot;);</a>
<a name="ln8512">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_DYNAMIC_RCV))</a>
<a name="ln8513">		vty_out (vty, &quot; %sreceived&quot;,</a>
<a name="ln8514">			 CHECK_FLAG (p-&gt;cap, PEER_CAP_DYNAMIC_ADV) ? &quot;and &quot; : &quot;&quot;);</a>
<a name="ln8515">	      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8516">	    }</a>
<a name="ln8517"> </a>
<a name="ln8518">	  /* Route Refresh */</a>
<a name="ln8519">	  if (CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_ADV)</a>
<a name="ln8520">	      || CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_NEW_RCV)</a>
<a name="ln8521">	      || CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_OLD_RCV))</a>
<a name="ln8522">	    {</a>
<a name="ln8523">	      vty_out (vty, &quot;    Route refresh:&quot;);</a>
<a name="ln8524"> 	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_ADV))</a>
<a name="ln8525">		vty_out (vty, &quot; advertised&quot;);</a>
<a name="ln8526">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_NEW_RCV)</a>
<a name="ln8527">		  || CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_OLD_RCV))</a>
<a name="ln8528">		vty_out (vty, &quot; %sreceived(%s)&quot;,</a>
<a name="ln8529">			 CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_ADV) ? &quot;and &quot; : &quot;&quot;,</a>
<a name="ln8530">			 (CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_OLD_RCV)</a>
<a name="ln8531">			  &amp;&amp; CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_NEW_RCV)) ?</a>
<a name="ln8532">			 &quot;old &amp; new&quot; : CHECK_FLAG (p-&gt;cap, PEER_CAP_REFRESH_OLD_RCV) ? &quot;old&quot; : &quot;new&quot;);</a>
<a name="ln8533"> </a>
<a name="ln8534">	      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8535">	    }</a>
<a name="ln8536"> </a>
<a name="ln8537">	  /* Multiprotocol Extensions */</a>
<a name="ln8538">	  for (afi = AFI_IP ; afi &lt; AFI_MAX ; afi++)</a>
<a name="ln8539">	    for (safi = SAFI_UNICAST ; safi &lt; SAFI_MAX ; safi++)</a>
<a name="ln8540">	      if (p-&gt;afc_adv[afi][safi] || p-&gt;afc_recv[afi][safi])</a>
<a name="ln8541">		{</a>
<a name="ln8542">		  vty_out (vty, &quot;    Address family %s:&quot;, afi_safi_print (afi, safi));</a>
<a name="ln8543">		  if (p-&gt;afc_adv[afi][safi]) </a>
<a name="ln8544">		    vty_out (vty, &quot; advertised&quot;);</a>
<a name="ln8545">		  if (p-&gt;afc_recv[afi][safi])</a>
<a name="ln8546">		    vty_out (vty, &quot; %sreceived&quot;, p-&gt;afc_adv[afi][safi] ? &quot;and &quot; : &quot;&quot;);</a>
<a name="ln8547">		  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8548">		} </a>
<a name="ln8549"> </a>
<a name="ln8550">	  /* Gracefull Restart */</a>
<a name="ln8551">	  if (CHECK_FLAG (p-&gt;cap, PEER_CAP_RESTART_RCV)</a>
<a name="ln8552">	      || CHECK_FLAG (p-&gt;cap, PEER_CAP_RESTART_ADV))</a>
<a name="ln8553">	    {</a>
<a name="ln8554">	      vty_out (vty, &quot;    Graceful Restart Capabilty:&quot;);</a>
<a name="ln8555">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_RESTART_ADV))</a>
<a name="ln8556">		vty_out (vty, &quot; advertised&quot;);</a>
<a name="ln8557">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_RESTART_RCV))</a>
<a name="ln8558">		vty_out (vty, &quot; %sreceived&quot;,</a>
<a name="ln8559">			 CHECK_FLAG (p-&gt;cap, PEER_CAP_RESTART_ADV) ? &quot;and &quot; : &quot;&quot;);</a>
<a name="ln8560">	      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8561"> </a>
<a name="ln8562">	      if (CHECK_FLAG (p-&gt;cap, PEER_CAP_RESTART_RCV))</a>
<a name="ln8563">		{</a>
<a name="ln8564">		  int restart_af_count = 0;</a>
<a name="ln8565"> </a>
<a name="ln8566">		  vty_out (vty, &quot;      Remote Restart timer is %d seconds%s&quot;,</a>
<a name="ln8567">			   p-&gt;v_gr_restart, VTY_NEWLINE);	</a>
<a name="ln8568">		  vty_out (vty, &quot;      Address families by peer:%s        &quot;, VTY_NEWLINE);</a>
<a name="ln8569"> </a>
<a name="ln8570">		  for (afi = AFI_IP ; afi &lt; AFI_MAX ; afi++)</a>
<a name="ln8571">		    for (safi = SAFI_UNICAST ; safi &lt; SAFI_MAX ; safi++)</a>
<a name="ln8572">		      if (CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_RESTART_AF_RCV))</a>
<a name="ln8573">			{</a>
<a name="ln8574">			  vty_out (vty, &quot;%s%s(%s)&quot;, restart_af_count ? &quot;, &quot; : &quot;&quot;,</a>
<a name="ln8575">				   afi_safi_print (afi, safi),</a>
<a name="ln8576">				   CHECK_FLAG (p-&gt;af_cap[afi][safi], PEER_CAP_RESTART_AF_PRESERVE_RCV) ?</a>
<a name="ln8577">				   &quot;preserved&quot; : &quot;not preserved&quot;);</a>
<a name="ln8578">			  restart_af_count++;</a>
<a name="ln8579">			}</a>
<a name="ln8580">		  if (! restart_af_count)</a>
<a name="ln8581">		    vty_out (vty, &quot;none&quot;);</a>
<a name="ln8582">		  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8583">		}</a>
<a name="ln8584">	    }</a>
<a name="ln8585">	}</a>
<a name="ln8586">    }</a>
<a name="ln8587"> </a>
<a name="ln8588">  /* graceful restart information */</a>
<a name="ln8589">  if (CHECK_FLAG (p-&gt;cap, PEER_CAP_RESTART_RCV)</a>
<a name="ln8590">      || p-&gt;t_gr_restart</a>
<a name="ln8591">      || p-&gt;t_gr_stale)</a>
<a name="ln8592">    {</a>
<a name="ln8593">      int eor_send_af_count = 0;</a>
<a name="ln8594">      int eor_receive_af_count = 0;</a>
<a name="ln8595"> </a>
<a name="ln8596">      vty_out (vty, &quot;  Graceful restart informations:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8597">      if (p-&gt;status == Established) </a>
<a name="ln8598">	{</a>
<a name="ln8599">	  vty_out (vty, &quot;    End-of-RIB send: &quot;);</a>
<a name="ln8600">	  for (afi = AFI_IP ; afi &lt; AFI_MAX ; afi++)</a>
<a name="ln8601">	    for (safi = SAFI_UNICAST ; safi &lt; SAFI_MAX ; safi++)</a>
<a name="ln8602">	      if (CHECK_FLAG (p-&gt;af_sflags[afi][safi], PEER_STATUS_EOR_SEND))</a>
<a name="ln8603">		{</a>
<a name="ln8604">		  vty_out (vty, &quot;%s%s&quot;, eor_send_af_count ? &quot;, &quot; : &quot;&quot;,</a>
<a name="ln8605">			   afi_safi_print (afi, safi));</a>
<a name="ln8606">		  eor_send_af_count++;</a>
<a name="ln8607">		}</a>
<a name="ln8608">	  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8609"> </a>
<a name="ln8610">	  vty_out (vty, &quot;    End-of-RIB received: &quot;);</a>
<a name="ln8611">	  for (afi = AFI_IP ; afi &lt; AFI_MAX ; afi++)</a>
<a name="ln8612">	    for (safi = SAFI_UNICAST ; safi &lt; SAFI_MAX ; safi++)</a>
<a name="ln8613">	      if (CHECK_FLAG (p-&gt;af_sflags[afi][safi], PEER_STATUS_EOR_RECEIVED))</a>
<a name="ln8614">		{</a>
<a name="ln8615">		  vty_out (vty, &quot;%s%s&quot;, eor_receive_af_count ? &quot;, &quot; : &quot;&quot;,</a>
<a name="ln8616">			   afi_safi_print (afi, safi));</a>
<a name="ln8617">		  eor_receive_af_count++;</a>
<a name="ln8618">		}</a>
<a name="ln8619">	  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8620">	}</a>
<a name="ln8621"> </a>
<a name="ln8622">      if (p-&gt;t_gr_restart)</a>
<a name="ln8623">        vty_out (vty, &quot;    The remaining time of restart timer is %ld%s&quot;,</a>
<a name="ln8624">                 thread_timer_remain_second (p-&gt;t_gr_restart), VTY_NEWLINE);</a>
<a name="ln8625">      </a>
<a name="ln8626">      if (p-&gt;t_gr_stale)</a>
<a name="ln8627">        vty_out (vty, &quot;    The remaining time of stalepath timer is %ld%s&quot;,</a>
<a name="ln8628">                 thread_timer_remain_second (p-&gt;t_gr_stale), VTY_NEWLINE);</a>
<a name="ln8629">    }</a>
<a name="ln8630"> </a>
<a name="ln8631">  /* Packet counts. */</a>
<a name="ln8632">  vty_out (vty, &quot;  Message statistics:%s&quot;, VTY_NEWLINE);</a>
<a name="ln8633">  vty_out (vty, &quot;    Inq depth is 0%s&quot;, VTY_NEWLINE);</a>
<a name="ln8634">  vty_out (vty, &quot;    Outq depth is %lu%s&quot;, (unsigned long) p-&gt;obuf-&gt;count, VTY_NEWLINE);</a>
<a name="ln8635">  vty_out (vty, &quot;                         Sent       Rcvd%s&quot;, VTY_NEWLINE);</a>
<a name="ln8636">  vty_out (vty, &quot;    Opens:         %10d %10d%s&quot;, p-&gt;open_out, p-&gt;open_in, VTY_NEWLINE);</a>
<a name="ln8637">  vty_out (vty, &quot;    Notifications: %10d %10d%s&quot;, p-&gt;notify_out, p-&gt;notify_in, VTY_NEWLINE);</a>
<a name="ln8638">  vty_out (vty, &quot;    Updates:       %10d %10d%s&quot;, p-&gt;update_out, p-&gt;update_in, VTY_NEWLINE);</a>
<a name="ln8639">  vty_out (vty, &quot;    Keepalives:    %10d %10d%s&quot;, p-&gt;keepalive_out, p-&gt;keepalive_in, VTY_NEWLINE);</a>
<a name="ln8640">  vty_out (vty, &quot;    Route Refresh: %10d %10d%s&quot;, p-&gt;refresh_out, p-&gt;refresh_in, VTY_NEWLINE);</a>
<a name="ln8641">  vty_out (vty, &quot;    Capability:    %10d %10d%s&quot;, p-&gt;dynamic_cap_out, p-&gt;dynamic_cap_in, VTY_NEWLINE);</a>
<a name="ln8642">  vty_out (vty, &quot;    Total:         %10d %10d%s&quot;, p-&gt;open_out + p-&gt;notify_out +</a>
<a name="ln8643">	   p-&gt;update_out + p-&gt;keepalive_out + p-&gt;refresh_out + p-&gt;dynamic_cap_out,</a>
<a name="ln8644">	   p-&gt;open_in + p-&gt;notify_in + p-&gt;update_in + p-&gt;keepalive_in + p-&gt;refresh_in +</a>
<a name="ln8645">	   p-&gt;dynamic_cap_in, VTY_NEWLINE);</a>
<a name="ln8646"> </a>
<a name="ln8647">  /* advertisement-interval */</a>
<a name="ln8648">  vty_out (vty, &quot;  Minimum time between advertisement runs is %d seconds%s&quot;,</a>
<a name="ln8649">	   p-&gt;v_routeadv, VTY_NEWLINE);</a>
<a name="ln8650"> </a>
<a name="ln8651">  /* Update-source. */</a>
<a name="ln8652">  if (p-&gt;update_if || p-&gt;update_source)</a>
<a name="ln8653">    {</a>
<a name="ln8654">      vty_out (vty, &quot;  Update source is &quot;);</a>
<a name="ln8655">      if (p-&gt;update_if)</a>
<a name="ln8656">	vty_out (vty, &quot;%s&quot;, p-&gt;update_if);</a>
<a name="ln8657">      else if (p-&gt;update_source)</a>
<a name="ln8658">	vty_out (vty, &quot;%s&quot;,</a>
<a name="ln8659">		 sockunion2str (p-&gt;update_source, buf1, SU_ADDRSTRLEN));</a>
<a name="ln8660">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8661">    }</a>
<a name="ln8662"> </a>
<a name="ln8663">  /* Default weight */</a>
<a name="ln8664">  if (CHECK_FLAG (p-&gt;config, PEER_CONFIG_WEIGHT))</a>
<a name="ln8665">    vty_out (vty, &quot;  Default weight %d%s&quot;, p-&gt;weight,</a>
<a name="ln8666">	     VTY_NEWLINE);</a>
<a name="ln8667"> </a>
<a name="ln8668">  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8669"> </a>
<a name="ln8670">  /* Address Family Information */</a>
<a name="ln8671">  for (afi = AFI_IP ; afi &lt; AFI_MAX ; afi++)</a>
<a name="ln8672">    for (safi = SAFI_UNICAST ; safi &lt; SAFI_MAX ; safi++)</a>
<a name="ln8673">      if (p-&gt;afc[afi][safi])</a>
<a name="ln8674">	bgp_show_peer_afi (vty, p, afi, safi);</a>
<a name="ln8675"> </a>
<a name="ln8676">  vty_out (vty, &quot;  Connections established %d; dropped %d%s&quot;,</a>
<a name="ln8677">	   p-&gt;established, p-&gt;dropped,</a>
<a name="ln8678">	   VTY_NEWLINE);</a>
<a name="ln8679"> </a>
<a name="ln8680">  if (! p-&gt;dropped)</a>
<a name="ln8681">    vty_out (vty, &quot;  Last reset never%s&quot;, VTY_NEWLINE);</a>
<a name="ln8682">  else</a>
<a name="ln8683">    vty_out (vty, &quot;  Last reset %s, due to %s%s&quot;,</a>
<a name="ln8684">            peer_uptime (p-&gt;resettime, timebuf, BGP_UPTIME_LEN),</a>
<a name="ln8685">            peer_down_str[(int) p-&gt;last_reset], VTY_NEWLINE);</a>
<a name="ln8686"> </a>
<a name="ln8687">  if (CHECK_FLAG (p-&gt;sflags, PEER_STATUS_PREFIX_OVERFLOW))</a>
<a name="ln8688">    {</a>
<a name="ln8689">      vty_out (vty, &quot;  Peer had exceeded the max. no. of prefixes configured.%s&quot;, VTY_NEWLINE);</a>
<a name="ln8690"> </a>
<a name="ln8691">      if (p-&gt;t_pmax_restart)</a>
<a name="ln8692">	vty_out (vty, &quot;  Reduce the no. of prefix from %s, will restart in %ld seconds%s&quot;,</a>
<a name="ln8693">		 p-&gt;host, thread_timer_remain_second (p-&gt;t_pmax_restart),</a>
<a name="ln8694">		 VTY_NEWLINE);</a>
<a name="ln8695">      else</a>
<a name="ln8696">	vty_out (vty, &quot;  Reduce the no. of prefix and clear ip bgp %s to restore peering%s&quot;,</a>
<a name="ln8697">		 p-&gt;host, VTY_NEWLINE);</a>
<a name="ln8698">    }</a>
<a name="ln8699"> </a>
<a name="ln8700">  /* EBGP Multihop and GTSM */</a>
<a name="ln8701">  ttl = p-&gt;gtsm_hops;</a>
<a name="ln8702">  if (! ttl)</a>
<a name="ln8703">    ttl = peer_ttl (p);</a>
<a name="ln8704">  vty_out (vty, &quot;  %s BGP neighbor may be up to %d hops away.%s&quot;,</a>
<a name="ln8705">           p-&gt;sort == BGP_PEER_IBGP ? &quot;Internal&quot; : &quot;External&quot;,</a>
<a name="ln8706">           ttl, VTY_NEWLINE);</a>
<a name="ln8707"> </a>
<a name="ln8708">  /* Local address. */</a>
<a name="ln8709">  if (p-&gt;su_local)</a>
<a name="ln8710">    {</a>
<a name="ln8711">      vty_out (vty, &quot;Local host: %s, Local port: %d%s&quot;,</a>
<a name="ln8712">	       sockunion2str (p-&gt;su_local, buf1, SU_ADDRSTRLEN),</a>
<a name="ln8713">	       ntohs (p-&gt;su_local-&gt;sin.sin_port),</a>
<a name="ln8714">	       VTY_NEWLINE);</a>
<a name="ln8715">    }</a>
<a name="ln8716">      </a>
<a name="ln8717">  /* Remote address. */</a>
<a name="ln8718">  if (p-&gt;su_remote)</a>
<a name="ln8719">    {</a>
<a name="ln8720">      vty_out (vty, &quot;Foreign host: %s, Foreign port: %d%s&quot;,</a>
<a name="ln8721">	       sockunion2str (p-&gt;su_remote, buf1, SU_ADDRSTRLEN),</a>
<a name="ln8722">	       ntohs (p-&gt;su_remote-&gt;sin.sin_port),</a>
<a name="ln8723">	       VTY_NEWLINE);</a>
<a name="ln8724">    }</a>
<a name="ln8725"> </a>
<a name="ln8726">  /* Nexthop display. */</a>
<a name="ln8727">  if (p-&gt;su_local)</a>
<a name="ln8728">    {</a>
<a name="ln8729">      vty_out (vty, &quot;Nexthop: %s%s&quot;, </a>
<a name="ln8730">	       inet_ntop (AF_INET, &amp;p-&gt;nexthop.v4, buf1, BUFSIZ),</a>
<a name="ln8731">	       VTY_NEWLINE);</a>
<a name="ln8732">      vty_out (vty, &quot;Nexthop global: %s%s&quot;, </a>
<a name="ln8733">	       inet_ntop (AF_INET6, &amp;p-&gt;nexthop.v6_global, buf1, BUFSIZ),</a>
<a name="ln8734">	       VTY_NEWLINE);</a>
<a name="ln8735">      vty_out (vty, &quot;Nexthop local: %s%s&quot;,</a>
<a name="ln8736">	       inet_ntop (AF_INET6, &amp;p-&gt;nexthop.v6_local, buf1, BUFSIZ),</a>
<a name="ln8737">	       VTY_NEWLINE);</a>
<a name="ln8738">      vty_out (vty, &quot;BGP connection: %s%s&quot;,</a>
<a name="ln8739">	       p-&gt;shared_network ? &quot;shared network&quot; : &quot;non shared network&quot;,</a>
<a name="ln8740">	       VTY_NEWLINE);</a>
<a name="ln8741">    }</a>
<a name="ln8742"> </a>
<a name="ln8743">  /* TCP metrics. */</a>
<a name="ln8744">  if (p-&gt;status == Established &amp;&amp; p-&gt;rtt)</a>
<a name="ln8745">    vty_out (vty, &quot;Estimated round trip time: %d ms%s&quot;,</a>
<a name="ln8746">	     p-&gt;rtt, VTY_NEWLINE);</a>
<a name="ln8747"> </a>
<a name="ln8748">  /* Timer information. */</a>
<a name="ln8749">  if (p-&gt;t_start)</a>
<a name="ln8750">    vty_out (vty, &quot;Next start timer due in %ld seconds%s&quot;,</a>
<a name="ln8751">	     thread_timer_remain_second (p-&gt;t_start), VTY_NEWLINE);</a>
<a name="ln8752">  if (p-&gt;t_connect)</a>
<a name="ln8753">    vty_out (vty, &quot;Next connect timer due in %ld seconds%s&quot;,</a>
<a name="ln8754">	     thread_timer_remain_second (p-&gt;t_connect), VTY_NEWLINE);</a>
<a name="ln8755">  </a>
<a name="ln8756">  vty_out (vty, &quot;Read thread: %s  Write thread: %s%s&quot;, </a>
<a name="ln8757">	   p-&gt;t_read ? &quot;on&quot; : &quot;off&quot;,</a>
<a name="ln8758">	   p-&gt;t_write ? &quot;on&quot; : &quot;off&quot;,</a>
<a name="ln8759">	   VTY_NEWLINE);</a>
<a name="ln8760"> </a>
<a name="ln8761">  if (p-&gt;notify.code == BGP_NOTIFY_OPEN_ERR</a>
<a name="ln8762">      &amp;&amp; p-&gt;notify.subcode == BGP_NOTIFY_OPEN_UNSUP_CAPBL)</a>
<a name="ln8763">    bgp_capability_vty_out (vty, p);</a>
<a name="ln8764"> </a>
<a name="ln8765">  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln8766">}</a>
<a name="ln8767"> </a>
<a name="ln8768">static int</a>
<a name="ln8769">bgp_show_neighbor (struct vty *vty, struct bgp *bgp,</a>
<a name="ln8770">		   enum show_type type, union sockunion *su)</a>
<a name="ln8771">{</a>
<a name="ln8772">  struct listnode *node, *nnode;</a>
<a name="ln8773">  struct peer *peer;</a>
<a name="ln8774">  int find = 0;</a>
<a name="ln8775"> </a>
<a name="ln8776">  for (ALL_LIST_ELEMENTS (bgp-&gt;peer, node, nnode, peer))</a>
<a name="ln8777">    {</a>
<a name="ln8778">      switch (type)</a>
<a name="ln8779">	{</a>
<a name="ln8780">	case show_all:</a>
<a name="ln8781">	  bgp_show_peer (vty, peer);</a>
<a name="ln8782">	  break;</a>
<a name="ln8783">	case show_peer:</a>
<a name="ln8784">	  if (sockunion_same (&amp;peer-&gt;su, su))</a>
<a name="ln8785">	    {</a>
<a name="ln8786">	      find = 1;</a>
<a name="ln8787">	      bgp_show_peer (vty, peer);</a>
<a name="ln8788">	    }</a>
<a name="ln8789">	  break;</a>
<a name="ln8790">	}</a>
<a name="ln8791">    }</a>
<a name="ln8792"> </a>
<a name="ln8793">  if (type == show_peer &amp;&amp; ! find)</a>
<a name="ln8794">    vty_out (vty, &quot;%% No such neighbor%s&quot;, VTY_NEWLINE);</a>
<a name="ln8795">  </a>
<a name="ln8796">  return CMD_SUCCESS;</a>
<a name="ln8797">}</a>
<a name="ln8798"> </a>
<a name="ln8799">static int </a>
<a name="ln8800">bgp_show_neighbor_vty (struct vty *vty, const char *name, </a>
<a name="ln8801">                       enum show_type type, const char *ip_str)</a>
<a name="ln8802">{</a>
<a name="ln8803">  int ret;</a>
<a name="ln8804">  struct bgp *bgp;</a>
<a name="ln8805">  union sockunion su;</a>
<a name="ln8806"> </a>
<a name="ln8807">  if (ip_str)</a>
<a name="ln8808">    {</a>
<a name="ln8809">      ret = str2sockunion (ip_str, &amp;su);</a>
<a name="ln8810">      if (ret &lt; 0)</a>
<a name="ln8811">        {</a>
<a name="ln8812">          vty_out (vty, &quot;%% Malformed address: %s%s&quot;, ip_str, VTY_NEWLINE);</a>
<a name="ln8813">          return CMD_WARNING;</a>
<a name="ln8814">        }</a>
<a name="ln8815">    }</a>
<a name="ln8816"> </a>
<a name="ln8817">  if (name)</a>
<a name="ln8818">    {</a>
<a name="ln8819">      bgp = bgp_lookup_by_name (name);</a>
<a name="ln8820">      </a>
<a name="ln8821">      if (! bgp)</a>
<a name="ln8822">        {</a>
<a name="ln8823">          vty_out (vty, &quot;%% No such BGP instance exist%s&quot;, VTY_NEWLINE); </a>
<a name="ln8824">          return CMD_WARNING;</a>
<a name="ln8825">        }</a>
<a name="ln8826"> </a>
<a name="ln8827">      bgp_show_neighbor (vty, bgp, type, &amp;su);</a>
<a name="ln8828"> </a>
<a name="ln8829">      return CMD_SUCCESS;</a>
<a name="ln8830">    }</a>
<a name="ln8831"> </a>
<a name="ln8832">  bgp = bgp_get_default ();</a>
<a name="ln8833"> </a>
<a name="ln8834">  if (bgp)</a>
<a name="ln8835">    bgp_show_neighbor (vty, bgp, type, &amp;su);</a>
<a name="ln8836"> </a>
<a name="ln8837">  return CMD_SUCCESS;</a>
<a name="ln8838">}</a>
<a name="ln8839"> </a>
<a name="ln8840">/* &quot;show ip bgp neighbors&quot; commands.  */DEFUN (show_ip_bgp_neighbors,</a>
<a name="ln8841">       show_ip_bgp_neighbors_cmd,</a>
<a name="ln8842">       &quot;show ip bgp neighbors&quot;,</a>
<a name="ln8843">       SHOW_STR</a>
<a name="ln8844">       IP_STR</a>
<a name="ln8845">       BGP_STR</a>
<a name="ln8846">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln8847">{</a>
<a name="ln8848">  return bgp_show_neighbor_vty (vty, NULL, show_all, NULL);</a>
<a name="ln8849">}</a>
<a name="ln8850"> </a>
<a name="ln8851">ALIAS (show_ip_bgp_neighbors,</a>
<a name="ln8852">       show_ip_bgp_ipv4_neighbors_cmd,</a>
<a name="ln8853">       &quot;show ip bgp ipv4 (unicast|multicast) neighbors&quot;,</a>
<a name="ln8854">       SHOW_STR</a>
<a name="ln8855">       IP_STR</a>
<a name="ln8856">       BGP_STR</a>
<a name="ln8857">       &quot;Address family\n&quot;</a>
<a name="ln8858">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8859">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8860">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln8861"> </a>
<a name="ln8862">ALIAS (show_ip_bgp_neighbors,</a>
<a name="ln8863">       show_ip_bgp_vpnv4_all_neighbors_cmd,</a>
<a name="ln8864">       &quot;show ip bgp vpnv4 all neighbors&quot;,</a>
<a name="ln8865">       SHOW_STR</a>
<a name="ln8866">       IP_STR</a>
<a name="ln8867">       BGP_STR</a>
<a name="ln8868">       &quot;Display VPNv4 NLRI specific information\n&quot;</a>
<a name="ln8869">       &quot;Display information about all VPNv4 NLRIs\n&quot;</a>
<a name="ln8870">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln8871"> </a>
<a name="ln8872">ALIAS (show_ip_bgp_neighbors,</a>
<a name="ln8873">       show_ip_bgp_vpnv4_rd_neighbors_cmd,</a>
<a name="ln8874">       &quot;show ip bgp vpnv4 rd ASN:nn_or_IP-address:nn neighbors&quot;,</a>
<a name="ln8875">       SHOW_STR</a>
<a name="ln8876">       IP_STR</a>
<a name="ln8877">       BGP_STR</a>
<a name="ln8878">       &quot;Display VPNv4 NLRI specific information\n&quot;</a>
<a name="ln8879">       &quot;Display information for a route distinguisher\n&quot;</a>
<a name="ln8880">       &quot;VPN Route Distinguisher\n&quot;</a>
<a name="ln8881">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln8882"> </a>
<a name="ln8883">ALIAS (show_ip_bgp_neighbors,</a>
<a name="ln8884">       show_bgp_ipv6_neighbors_cmd,</a>
<a name="ln8885">       &quot;show bgp ipv6 neighbors&quot;,</a>
<a name="ln8886">       SHOW_STR</a>
<a name="ln8887">       BGP_STR</a>
<a name="ln8888">       &quot;Address family\n&quot;</a>
<a name="ln8889">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln8890"> </a>
<a name="ln8891">DEFUN (show_ip_bgp_neighbors_peer,</a>
<a name="ln8892">       show_ip_bgp_neighbors_peer_cmd,</a>
<a name="ln8893">       &quot;show ip bgp neighbors (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln8894">       SHOW_STR</a>
<a name="ln8895">       IP_STR</a>
<a name="ln8896">       BGP_STR</a>
<a name="ln8897">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln8898">       &quot;Neighbor to display information about\n&quot;</a>
<a name="ln8899">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln8900">{</a>
<a name="ln8901">  return bgp_show_neighbor_vty (vty, NULL, show_peer, argv[argc - 1]);</a>
<a name="ln8902">}</a>
<a name="ln8903"> </a>
<a name="ln8904">ALIAS (show_ip_bgp_neighbors_peer,</a>
<a name="ln8905">       show_ip_bgp_ipv4_neighbors_peer_cmd,</a>
<a name="ln8906">       &quot;show ip bgp ipv4 (unicast|multicast) neighbors (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln8907">       SHOW_STR</a>
<a name="ln8908">       IP_STR</a>
<a name="ln8909">       BGP_STR</a>
<a name="ln8910">       &quot;Address family\n&quot;</a>
<a name="ln8911">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8912">       &quot;Address Family modifier\n&quot;</a>
<a name="ln8913">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln8914">       &quot;Neighbor to display information about\n&quot;</a>
<a name="ln8915">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln8916"> </a>
<a name="ln8917">ALIAS (show_ip_bgp_neighbors_peer,</a>
<a name="ln8918">       show_ip_bgp_vpnv4_all_neighbors_peer_cmd,</a>
<a name="ln8919">       &quot;show ip bgp vpnv4 all neighbors A.B.C.D&quot;,</a>
<a name="ln8920">       SHOW_STR</a>
<a name="ln8921">       IP_STR</a>
<a name="ln8922">       BGP_STR</a>
<a name="ln8923">       &quot;Display VPNv4 NLRI specific information\n&quot;</a>
<a name="ln8924">       &quot;Display information about all VPNv4 NLRIs\n&quot;</a>
<a name="ln8925">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln8926">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln8927"> </a>
<a name="ln8928">ALIAS (show_ip_bgp_neighbors_peer,</a>
<a name="ln8929">       show_ip_bgp_vpnv4_rd_neighbors_peer_cmd,</a>
<a name="ln8930">       &quot;show ip bgp vpnv4 rd ASN:nn_or_IP-address:nn neighbors A.B.C.D&quot;,</a>
<a name="ln8931">       SHOW_STR</a>
<a name="ln8932">       IP_STR</a>
<a name="ln8933">       BGP_STR</a>
<a name="ln8934">       &quot;Display VPNv4 NLRI specific information\n&quot;</a>
<a name="ln8935">       &quot;Display information about all VPNv4 NLRIs\n&quot;</a>
<a name="ln8936">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln8937">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln8938"> </a>
<a name="ln8939">ALIAS (show_ip_bgp_neighbors_peer,</a>
<a name="ln8940">       show_bgp_ipv6_neighbors_peer_cmd,</a>
<a name="ln8941">       &quot;show bgp ipv6 neighbors (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln8942">       SHOW_STR</a>
<a name="ln8943">       BGP_STR</a>
<a name="ln8944">       &quot;Address family\n&quot;</a>
<a name="ln8945">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln8946">       &quot;Neighbor to display information about\n&quot;</a>
<a name="ln8947">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln8948"> </a>
<a name="ln8949">DEFUN (show_ip_bgp_instance_neighbors,</a>
<a name="ln8950">       show_ip_bgp_instance_neighbors_cmd,</a>
<a name="ln8951">       &quot;show ip bgp view WORD neighbors&quot;,</a>
<a name="ln8952">       SHOW_STR</a>
<a name="ln8953">       IP_STR</a>
<a name="ln8954">       BGP_STR</a>
<a name="ln8955">       &quot;BGP view\n&quot;</a>
<a name="ln8956">       &quot;View name\n&quot;</a>
<a name="ln8957">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln8958">{</a>
<a name="ln8959">  return bgp_show_neighbor_vty (vty, argv[0], show_all, NULL);</a>
<a name="ln8960">}</a>
<a name="ln8961"> </a>
<a name="ln8962">ALIAS (show_ip_bgp_instance_neighbors,</a>
<a name="ln8963">       show_bgp_instance_ipv6_neighbors_cmd,</a>
<a name="ln8964">       &quot;show bgp view WORD ipv6 neighbors&quot;,</a>
<a name="ln8965">       SHOW_STR</a>
<a name="ln8966">       BGP_STR</a>
<a name="ln8967">       &quot;BGP view\n&quot;</a>
<a name="ln8968">       &quot;View name\n&quot;</a>
<a name="ln8969">       &quot;Address family\n&quot;</a>
<a name="ln8970">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln8971"> </a>
<a name="ln8972">DEFUN (show_ip_bgp_instance_neighbors_peer,</a>
<a name="ln8973">       show_ip_bgp_instance_neighbors_peer_cmd,</a>
<a name="ln8974">       &quot;show ip bgp view WORD neighbors (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln8975">       SHOW_STR</a>
<a name="ln8976">       IP_STR</a>
<a name="ln8977">       BGP_STR</a>
<a name="ln8978">       &quot;BGP view\n&quot;</a>
<a name="ln8979">       &quot;View name\n&quot;</a>
<a name="ln8980">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln8981">       &quot;Neighbor to display information about\n&quot;</a>
<a name="ln8982">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln8983">{</a>
<a name="ln8984">  return bgp_show_neighbor_vty (vty, argv[0], show_peer, argv[1]);</a>
<a name="ln8985">}</a>
<a name="ln8986"> </a>
<a name="ln8987">/* Show BGP's AS paths internal data.  There are both `show ip bgp</a>
<a name="ln8988">   paths' and `show ip mbgp paths'.  Those functions results are the</a>
<a name="ln8989">   same.*/</a>
<a name="ln8990">DEFUN (show_ip_bgp_paths, </a>
<a name="ln8991">       show_ip_bgp_paths_cmd,</a>
<a name="ln8992">       &quot;show ip bgp paths&quot;,</a>
<a name="ln8993">       SHOW_STR</a>
<a name="ln8994">       IP_STR</a>
<a name="ln8995">       BGP_STR</a>
<a name="ln8996">       &quot;Path information\n&quot;)</a>
<a name="ln8997">{</a>
<a name="ln8998">  vty_out (vty, &quot;Address Refcnt Path%s&quot;, VTY_NEWLINE);</a>
<a name="ln8999">  aspath_print_all_vty (vty);</a>
<a name="ln9000">  return CMD_SUCCESS;</a>
<a name="ln9001">}</a>
<a name="ln9002"> </a>
<a name="ln9003">DEFUN (show_ip_bgp_ipv4_paths, </a>
<a name="ln9004">       show_ip_bgp_ipv4_paths_cmd,</a>
<a name="ln9005">       &quot;show ip bgp ipv4 (unicast|multicast) paths&quot;,</a>
<a name="ln9006">       SHOW_STR</a>
<a name="ln9007">       IP_STR</a>
<a name="ln9008">       BGP_STR</a>
<a name="ln9009">       &quot;Address family\n&quot;</a>
<a name="ln9010">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9011">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9012">       &quot;Path information\n&quot;)</a>
<a name="ln9013">{</a>
<a name="ln9014">  vty_out (vty, &quot;Address Refcnt Path\r\n&quot;);</a>
<a name="ln9015">  aspath_print_all_vty (vty);</a>
<a name="ln9016"> </a>
<a name="ln9017">  return CMD_SUCCESS;</a>
<a name="ln9018">}</a>
<a name="ln9019"> </a>
<a name="ln9020">DEFUN (show_bgp_neighbors,</a>
<a name="ln9021">       show_bgp_neighbors_cmd,</a>
<a name="ln9022">       &quot;show bgp neighbors&quot;,</a>
<a name="ln9023">       SHOW_STR</a>
<a name="ln9024">       BGP_STR</a>
<a name="ln9025">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln9026">{</a>
<a name="ln9027">  return bgp_show_neighbor_vty (vty, NULL, show_all, NULL);</a>
<a name="ln9028">}</a>
<a name="ln9029"> </a>
<a name="ln9030">DEFUN (show_bgp_neighbors_peer,</a>
<a name="ln9031">       show_bgp_neighbors_peer_cmd,</a>
<a name="ln9032">       &quot;show bgp neighbors (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln9033">       SHOW_STR</a>
<a name="ln9034">       BGP_STR</a>
<a name="ln9035">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln9036">       &quot;Neighbor to display information about\n&quot;</a>
<a name="ln9037">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln9038">{</a>
<a name="ln9039">  return bgp_show_neighbor_vty (vty, NULL, show_peer, argv[argc - 1]);</a>
<a name="ln9040">}</a>
<a name="ln9041"> </a>
<a name="ln9042">DEFUN (show_bgp_instance_neighbors,</a>
<a name="ln9043">       show_bgp_instance_neighbors_cmd,</a>
<a name="ln9044">       &quot;show bgp view WORD neighbors&quot;,</a>
<a name="ln9045">       SHOW_STR</a>
<a name="ln9046">       BGP_STR</a>
<a name="ln9047">       &quot;BGP view\n&quot;</a>
<a name="ln9048">       &quot;View name\n&quot;</a>
<a name="ln9049">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;)</a>
<a name="ln9050">{</a>
<a name="ln9051">  return bgp_show_neighbor_vty (vty, argv[0], show_all, NULL);</a>
<a name="ln9052">}</a>
<a name="ln9053"> </a>
<a name="ln9054">DEFUN (show_bgp_instance_neighbors_peer,</a>
<a name="ln9055">       show_bgp_instance_neighbors_peer_cmd,</a>
<a name="ln9056">       &quot;show bgp view WORD neighbors (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln9057">       SHOW_STR</a>
<a name="ln9058">       BGP_STR</a>
<a name="ln9059">       &quot;BGP view\n&quot;</a>
<a name="ln9060">       &quot;View name\n&quot;</a>
<a name="ln9061">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln9062">       &quot;Neighbor to display information about\n&quot;</a>
<a name="ln9063">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln9064">{</a>
<a name="ln9065">  return bgp_show_neighbor_vty (vty, argv[0], show_peer, argv[1]);</a>
<a name="ln9066">}</a>
<a name="ln9067"> </a>
<a name="ln9068">ALIAS (show_bgp_instance_neighbors_peer,</a>
<a name="ln9069">       show_bgp_instance_ipv6_neighbors_peer_cmd,</a>
<a name="ln9070">       &quot;show bgp view WORD ipv6 neighbors (A.B.C.D|X:X::X:X)&quot;,</a>
<a name="ln9071">       SHOW_STR</a>
<a name="ln9072">       BGP_STR</a>
<a name="ln9073">       &quot;BGP view\n&quot;</a>
<a name="ln9074">       &quot;View name\n&quot;</a>
<a name="ln9075">       &quot;Address family\n&quot;</a>
<a name="ln9076">       &quot;Detailed information on TCP and BGP neighbor connections\n&quot;</a>
<a name="ln9077">       &quot;Neighbor to display information about\n&quot;</a>
<a name="ln9078">       &quot;Neighbor to display information about\n&quot;)</a>
<a name="ln9079">       </a>
<a name="ln9080">/* Show BGP's AS paths internal data.  There are both `show ip bgp</a>
<a name="ln9081">   paths' and `show ip mbgp paths'.  Those functions results are the</a>
<a name="ln9082">   same.*/</a>
<a name="ln9083">DEFUN (show_bgp_ipv4_paths, </a>
<a name="ln9084">       show_bgp_ipv4_paths_cmd,</a>
<a name="ln9085">       &quot;show bgp paths&quot;,</a>
<a name="ln9086">       SHOW_STR</a>
<a name="ln9087">       BGP_STR</a>
<a name="ln9088">       &quot;Path information\n&quot;)</a>
<a name="ln9089">{</a>
<a name="ln9090">  vty_out (vty, &quot;Address Refcnt Path%s&quot;, VTY_NEWLINE);</a>
<a name="ln9091">  aspath_print_all_vty (vty);</a>
<a name="ln9092">  return CMD_SUCCESS;</a>
<a name="ln9093">}</a>
<a name="ln9094"> </a>
<a name="ln9095">#include &quot;hash.h&quot;</a>
<a name="ln9096"> </a>
<a name="ln9097">static void</a>
<a name="ln9098">community_show_all_iterator (struct hash_backet *backet, struct vty *vty)</a>
<a name="ln9099">{</a>
<a name="ln9100">  struct community *com;</a>
<a name="ln9101"> </a>
<a name="ln9102">  com = (struct community *) backet-&gt;data;</a>
<a name="ln9103">  vty_out (vty, &quot;[%p] (%ld) %s%s&quot;, (void *)backet, com-&gt;refcnt,</a>
<a name="ln9104">	   community_str (com), VTY_NEWLINE);</a>
<a name="ln9105">}</a>
<a name="ln9106"> </a>
<a name="ln9107">/* Show BGP's community internal data. */</a>
<a name="ln9108">DEFUN (show_ip_bgp_community_info, </a>
<a name="ln9109">       show_ip_bgp_community_info_cmd,</a>
<a name="ln9110">       &quot;show ip bgp community-info&quot;,</a>
<a name="ln9111">       SHOW_STR</a>
<a name="ln9112">       IP_STR</a>
<a name="ln9113">       BGP_STR</a>
<a name="ln9114">       &quot;List all bgp community information\n&quot;)</a>
<a name="ln9115">{</a>
<a name="ln9116">  vty_out (vty, &quot;Address Refcnt Community%s&quot;, VTY_NEWLINE);</a>
<a name="ln9117"> </a>
<a name="ln9118">  hash_iterate (community_hash (), </a>
<a name="ln9119">		(void (*) (struct hash_backet *, void *))</a>
<a name="ln9120">		community_show_all_iterator,</a>
<a name="ln9121">		vty);</a>
<a name="ln9122"> </a>
<a name="ln9123">  return CMD_SUCCESS;</a>
<a name="ln9124">}</a>
<a name="ln9125"> </a>
<a name="ln9126">static void</a>
<a name="ln9127">lcommunity_show_all_iterator (struct hash_backet *backet, struct vty *vty)</a>
<a name="ln9128">{</a>
<a name="ln9129">  struct lcommunity *lcom;</a>
<a name="ln9130"> </a>
<a name="ln9131">  lcom = (struct lcommunity *) backet-&gt;data;</a>
<a name="ln9132">  vty_out (vty, &quot;[%p] (%ld) %s%s&quot;, (void *)backet, lcom-&gt;refcnt,</a>
<a name="ln9133">	   lcommunity_str (lcom), VTY_NEWLINE);</a>
<a name="ln9134">}</a>
<a name="ln9135"> </a>
<a name="ln9136">/* Show BGP's community internal data. */</a>
<a name="ln9137">DEFUN (show_ip_bgp_lcommunity_info,</a>
<a name="ln9138">       show_ip_bgp_lcommunity_info_cmd,</a>
<a name="ln9139">       &quot;show ip bgp large-community-info&quot;,</a>
<a name="ln9140">       SHOW_STR</a>
<a name="ln9141">       IP_STR</a>
<a name="ln9142">       BGP_STR</a>
<a name="ln9143">       &quot;List all bgp large-community information\n&quot;)</a>
<a name="ln9144">{</a>
<a name="ln9145">  vty_out (vty, &quot;Address Refcnt Large-community%s&quot;, VTY_NEWLINE);</a>
<a name="ln9146"> </a>
<a name="ln9147">  hash_iterate (lcommunity_hash (),</a>
<a name="ln9148">		(void (*) (struct hash_backet *, void *))</a>
<a name="ln9149">		lcommunity_show_all_iterator,</a>
<a name="ln9150">		vty);</a>
<a name="ln9151"> </a>
<a name="ln9152">  return CMD_SUCCESS;</a>
<a name="ln9153">}</a>
<a name="ln9154"> </a>
<a name="ln9155">DEFUN (show_ip_bgp_attr_info, </a>
<a name="ln9156">       show_ip_bgp_attr_info_cmd,</a>
<a name="ln9157">       &quot;show ip bgp attribute-info&quot;,</a>
<a name="ln9158">       SHOW_STR</a>
<a name="ln9159">       IP_STR</a>
<a name="ln9160">       BGP_STR</a>
<a name="ln9161">       &quot;List all bgp attribute information\n&quot;)</a>
<a name="ln9162">{</a>
<a name="ln9163">  attr_show_all (vty);</a>
<a name="ln9164">  return CMD_SUCCESS;</a>
<a name="ln9165">}</a>
<a name="ln9166"> </a>
<a name="ln9167">static int</a>
<a name="ln9168">bgp_write_rsclient_summary (struct vty *vty, struct peer *rsclient,</a>
<a name="ln9169">        afi_t afi, safi_t safi)</a>
<a name="ln9170">{</a>
<a name="ln9171">  char timebuf[BGP_UPTIME_LEN];</a>
<a name="ln9172">  char rmbuf[14];</a>
<a name="ln9173">  const char *rmname;</a>
<a name="ln9174">  struct peer *peer;</a>
<a name="ln9175">  struct listnode *node, *nnode;</a>
<a name="ln9176">  int len;</a>
<a name="ln9177">  int count = 0;</a>
<a name="ln9178"> </a>
<a name="ln9179">  if (CHECK_FLAG (rsclient-&gt;sflags, PEER_STATUS_GROUP))</a>
<a name="ln9180">    {</a>
<a name="ln9181">      for (ALL_LIST_ELEMENTS (rsclient-&gt;group-&gt;peer, node, nnode, peer))</a>
<a name="ln9182">        {</a>
<a name="ln9183">          count++;</a>
<a name="ln9184">          bgp_write_rsclient_summary (vty, peer, afi, safi);</a>
<a name="ln9185">        }</a>
<a name="ln9186">      return count;</a>
<a name="ln9187">    }</a>
<a name="ln9188"> </a>
<a name="ln9189">  len = vty_out (vty, &quot;%s&quot;, rsclient-&gt;host);</a>
<a name="ln9190">  len = 16 - len;</a>
<a name="ln9191"> </a>
<a name="ln9192">  if (len &lt; 1)</a>
<a name="ln9193">    vty_out (vty, &quot;%s%*s&quot;, VTY_NEWLINE, 16, &quot; &quot;);</a>
<a name="ln9194">  else</a>
<a name="ln9195">    vty_out (vty, &quot;%*s&quot;, len, &quot; &quot;);</a>
<a name="ln9196"> </a>
<a name="ln9197">  vty_out (vty, &quot;4 &quot;);</a>
<a name="ln9198"> </a>
<a name="ln9199">  vty_out (vty, &quot;%10u &quot;, rsclient-&gt;as);</a>
<a name="ln9200"> </a>
<a name="ln9201">  rmname = ROUTE_MAP_EXPORT_NAME(&amp;rsclient-&gt;filter[afi][safi]);</a>
<a name="ln9202">  if ( rmname &amp;&amp; strlen (rmname) &gt; 13 )</a>
<a name="ln9203">    {</a>
<a name="ln9204">      sprintf (rmbuf, &quot;%13s&quot;, &quot;...&quot;);</a>
<a name="ln9205">      rmname = strncpy (rmbuf, rmname, 10);</a>
<a name="ln9206">    }</a>
<a name="ln9207">  else if (! rmname)</a>
<a name="ln9208">    rmname = &quot;&lt;none&gt;&quot;;</a>
<a name="ln9209">  vty_out (vty, &quot; %13s &quot;, rmname);</a>
<a name="ln9210"> </a>
<a name="ln9211">  rmname = ROUTE_MAP_IMPORT_NAME(&amp;rsclient-&gt;filter[afi][safi]);</a>
<a name="ln9212">  if ( rmname &amp;&amp; strlen (rmname) &gt; 13 )</a>
<a name="ln9213">    {</a>
<a name="ln9214">      sprintf (rmbuf, &quot;%13s&quot;, &quot;...&quot;);</a>
<a name="ln9215">      rmname = strncpy (rmbuf, rmname, 10);</a>
<a name="ln9216">    }</a>
<a name="ln9217">  else if (! rmname)</a>
<a name="ln9218">    rmname = &quot;&lt;none&gt;&quot;;</a>
<a name="ln9219">  vty_out (vty, &quot; %13s &quot;, rmname);</a>
<a name="ln9220"> </a>
<a name="ln9221">  vty_out (vty, &quot;%8s&quot;, peer_uptime (rsclient-&gt;uptime, timebuf, BGP_UPTIME_LEN));</a>
<a name="ln9222"> </a>
<a name="ln9223">  if (CHECK_FLAG (rsclient-&gt;flags, PEER_FLAG_SHUTDOWN))</a>
<a name="ln9224">    vty_out (vty, &quot; Idle (Admin)&quot;);</a>
<a name="ln9225">  else if (CHECK_FLAG (rsclient-&gt;sflags, PEER_STATUS_PREFIX_OVERFLOW))</a>
<a name="ln9226">    vty_out (vty, &quot; Idle (PfxCt)&quot;);</a>
<a name="ln9227">  else</a>
<a name="ln9228">    vty_out (vty, &quot; %-11s&quot;, LOOKUP(bgp_status_msg, rsclient-&gt;status));</a>
<a name="ln9229"> </a>
<a name="ln9230">  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln9231"> </a>
<a name="ln9232">  return 1;</a>
<a name="ln9233">}</a>
<a name="ln9234"> </a>
<a name="ln9235">static int</a>
<a name="ln9236">bgp_show_rsclient_summary (struct vty *vty, struct bgp *bgp, </a>
<a name="ln9237">                           afi_t afi, safi_t safi)</a>
<a name="ln9238">{</a>
<a name="ln9239">  struct peer *peer;</a>
<a name="ln9240">  struct listnode *node, *nnode;</a>
<a name="ln9241">  int count = 0;</a>
<a name="ln9242"> </a>
<a name="ln9243">  /* Header string for each address family. */</a>
<a name="ln9244">  static char header[] = &quot;Neighbor        V         AS  Export-Policy  Import-Policy  Up/Down  State&quot;;</a>
<a name="ln9245"> </a>
<a name="ln9246">  for (ALL_LIST_ELEMENTS (bgp-&gt;rsclient, node, nnode, peer))</a>
<a name="ln9247">    {</a>
<a name="ln9248">      if (peer-&gt;afc[afi][safi] &amp;&amp;</a>
<a name="ln9249">         CHECK_FLAG (peer-&gt;af_flags[afi][safi], PEER_FLAG_RSERVER_CLIENT))</a>
<a name="ln9250">       {</a>
<a name="ln9251">         if (! count)</a>
<a name="ln9252">           {</a>
<a name="ln9253">             vty_out (vty,</a>
<a name="ln9254">                      &quot;Route Server's BGP router identifier %s%s&quot;,</a>
<a name="ln9255">                      inet_ntoa (bgp-&gt;router_id), VTY_NEWLINE);</a>
<a name="ln9256">             vty_out (vty,</a>
<a name="ln9257">              &quot;Route Server's local AS number %u%s&quot;, bgp-&gt;as,</a>
<a name="ln9258">                       VTY_NEWLINE);</a>
<a name="ln9259"> </a>
<a name="ln9260">             vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln9261">             vty_out (vty, &quot;%s%s&quot;, header, VTY_NEWLINE);</a>
<a name="ln9262">           }</a>
<a name="ln9263"> </a>
<a name="ln9264">         count += bgp_write_rsclient_summary (vty, peer, afi, safi);</a>
<a name="ln9265">       }</a>
<a name="ln9266">    }</a>
<a name="ln9267"> </a>
<a name="ln9268">  if (count)</a>
<a name="ln9269">    vty_out (vty, &quot;%sTotal number of Route Server Clients %d%s&quot;, VTY_NEWLINE,</a>
<a name="ln9270">            count, VTY_NEWLINE);</a>
<a name="ln9271">  else</a>
<a name="ln9272">    vty_out (vty, &quot;No %s Route Server Client is configured%s&quot;,</a>
<a name="ln9273">            afi == AFI_IP ? &quot;IPv4&quot; : &quot;IPv6&quot;, VTY_NEWLINE);</a>
<a name="ln9274"> </a>
<a name="ln9275">  return CMD_SUCCESS;</a>
<a name="ln9276">}</a>
<a name="ln9277"> </a>
<a name="ln9278">static int</a>
<a name="ln9279">bgp_show_rsclient_summary_vty (struct vty *vty, const char *name, </a>
<a name="ln9280">                               afi_t afi, safi_t safi)</a>
<a name="ln9281">{</a>
<a name="ln9282">  struct bgp *bgp;</a>
<a name="ln9283"> </a>
<a name="ln9284">  if (name)</a>
<a name="ln9285">    {</a>
<a name="ln9286">      bgp = bgp_lookup_by_name (name);</a>
<a name="ln9287"> </a>
<a name="ln9288">      if (! bgp)</a>
<a name="ln9289">       {</a>
<a name="ln9290">         vty_out (vty, &quot;%% No such BGP instance exist%s&quot;, VTY_NEWLINE);</a>
<a name="ln9291">         return CMD_WARNING;</a>
<a name="ln9292">       }</a>
<a name="ln9293"> </a>
<a name="ln9294">      bgp_show_rsclient_summary (vty, bgp, afi, safi);</a>
<a name="ln9295">      return CMD_SUCCESS;</a>
<a name="ln9296">    }</a>
<a name="ln9297"> </a>
<a name="ln9298">  bgp = bgp_get_default ();</a>
<a name="ln9299"> </a>
<a name="ln9300">  if (bgp)</a>
<a name="ln9301">    bgp_show_rsclient_summary (vty, bgp, afi, safi);</a>
<a name="ln9302"> </a>
<a name="ln9303">  return CMD_SUCCESS;</a>
<a name="ln9304">}</a>
<a name="ln9305"> </a>
<a name="ln9306">/* 'show bgp rsclient' commands. */</a>
<a name="ln9307">DEFUN (show_ip_bgp_rsclient_summary,</a>
<a name="ln9308">       show_ip_bgp_rsclient_summary_cmd,</a>
<a name="ln9309">       &quot;show ip bgp rsclient summary&quot;,</a>
<a name="ln9310">       SHOW_STR</a>
<a name="ln9311">       IP_STR</a>
<a name="ln9312">       BGP_STR</a>
<a name="ln9313">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9314">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9315">{</a>
<a name="ln9316">  return bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln9317">}</a>
<a name="ln9318"> </a>
<a name="ln9319">DEFUN (show_ip_bgp_instance_rsclient_summary,</a>
<a name="ln9320">       show_ip_bgp_instance_rsclient_summary_cmd,</a>
<a name="ln9321">       &quot;show ip bgp view WORD rsclient summary&quot;,</a>
<a name="ln9322">       SHOW_STR</a>
<a name="ln9323">       IP_STR</a>
<a name="ln9324">       BGP_STR</a>
<a name="ln9325">       &quot;BGP view\n&quot;</a>
<a name="ln9326">       &quot;View name\n&quot;</a>
<a name="ln9327">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9328">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9329">{</a>
<a name="ln9330">  return bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);</a>
<a name="ln9331">}</a>
<a name="ln9332"> </a>
<a name="ln9333">DEFUN (show_ip_bgp_ipv4_rsclient_summary,</a>
<a name="ln9334">      show_ip_bgp_ipv4_rsclient_summary_cmd,</a>
<a name="ln9335">      &quot;show ip bgp ipv4 (unicast|multicast) rsclient summary&quot;,</a>
<a name="ln9336">       SHOW_STR</a>
<a name="ln9337">       IP_STR</a>
<a name="ln9338">       BGP_STR</a>
<a name="ln9339">       &quot;Address family\n&quot;</a>
<a name="ln9340">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9341">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9342">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9343">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9344">{</a>
<a name="ln9345">  if (strncmp (argv[0], &quot;m&quot;, 1) == 0)</a>
<a name="ln9346">    return bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, SAFI_MULTICAST);</a>
<a name="ln9347"> </a>
<a name="ln9348">  return bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln9349">}</a>
<a name="ln9350"> </a>
<a name="ln9351">DEFUN (show_ip_bgp_instance_ipv4_rsclient_summary,</a>
<a name="ln9352">      show_ip_bgp_instance_ipv4_rsclient_summary_cmd,</a>
<a name="ln9353">      &quot;show ip bgp view WORD ipv4 (unicast|multicast) rsclient summary&quot;,</a>
<a name="ln9354">       SHOW_STR</a>
<a name="ln9355">       IP_STR</a>
<a name="ln9356">       BGP_STR</a>
<a name="ln9357">       &quot;BGP view\n&quot;</a>
<a name="ln9358">       &quot;View name\n&quot;</a>
<a name="ln9359">       &quot;Address family\n&quot;</a>
<a name="ln9360">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9361">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9362">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9363">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9364">{</a>
<a name="ln9365">  if (strncmp (argv[1], &quot;m&quot;, 1) == 0)</a>
<a name="ln9366">    return bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST);</a>
<a name="ln9367"> </a>
<a name="ln9368">  return bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);</a>
<a name="ln9369">}</a>
<a name="ln9370"> </a>
<a name="ln9371">DEFUN (show_bgp_instance_ipv4_safi_rsclient_summary,</a>
<a name="ln9372">       show_bgp_instance_ipv4_safi_rsclient_summary_cmd,</a>
<a name="ln9373">       &quot;show bgp view WORD ipv4 (unicast|multicast) rsclient summary&quot;,</a>
<a name="ln9374">       SHOW_STR</a>
<a name="ln9375">       BGP_STR</a>
<a name="ln9376">       &quot;BGP view\n&quot;</a>
<a name="ln9377">       &quot;View name\n&quot;</a>
<a name="ln9378">       &quot;Address family\n&quot;</a>
<a name="ln9379">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9380">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9381">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9382">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9383">{</a>
<a name="ln9384">  safi_t safi;</a>
<a name="ln9385"> </a>
<a name="ln9386">  if (argc == 2) {</a>
<a name="ln9387">    safi = (strncmp (argv[1], &quot;m&quot;, 1) == 0) ? SAFI_MULTICAST : SAFI_UNICAST;</a>
<a name="ln9388">    return bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, safi);</a>
<a name="ln9389">  } else {</a>
<a name="ln9390">    safi = (strncmp (argv[0], &quot;m&quot;, 1) == 0) ? SAFI_MULTICAST : SAFI_UNICAST;</a>
<a name="ln9391">    return bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, safi);</a>
<a name="ln9392">  }</a>
<a name="ln9393">}</a>
<a name="ln9394"> </a>
<a name="ln9395">ALIAS (show_bgp_instance_ipv4_safi_rsclient_summary,</a>
<a name="ln9396">       show_bgp_ipv4_safi_rsclient_summary_cmd,</a>
<a name="ln9397">       &quot;show bgp ipv4 (unicast|multicast) rsclient summary&quot;,</a>
<a name="ln9398">       SHOW_STR</a>
<a name="ln9399">       BGP_STR</a>
<a name="ln9400">       &quot;Address family\n&quot;</a>
<a name="ln9401">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9402">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9403">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9404">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9405"> </a>
<a name="ln9406">DEFUN (show_bgp_rsclient_summary,</a>
<a name="ln9407">       show_bgp_rsclient_summary_cmd,</a>
<a name="ln9408">       &quot;show bgp rsclient summary&quot;,</a>
<a name="ln9409">       SHOW_STR</a>
<a name="ln9410">       BGP_STR</a>
<a name="ln9411">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9412">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9413">{</a>
<a name="ln9414">    vty_out(vty, &quot;%sIPv4 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9415">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9416">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, SAFI_UNICAST);</a>
<a name="ln9417">    vty_out(vty, &quot;%sIPv4 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9418">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9419">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, SAFI_MULTICAST);</a>
<a name="ln9420">    vty_out(vty, &quot;%sIPv4 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9421">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9422">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln9423">    vty_out(vty, &quot;%sIPv4 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9424">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9425">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP, SAFI_ENCAP);</a>
<a name="ln9426"> </a>
<a name="ln9427">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9428">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9429">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_UNICAST);</a>
<a name="ln9430">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9431">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9432">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln9433">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9434">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9435">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln9436">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9437">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9438">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_ENCAP);</a>
<a name="ln9439"> </a>
<a name="ln9440">    return CMD_SUCCESS;</a>
<a name="ln9441">}</a>
<a name="ln9442"> </a>
<a name="ln9443">DEFUN (show_bgp_instance_rsclient_summary,</a>
<a name="ln9444">       show_bgp_instance_rsclient_summary_cmd,</a>
<a name="ln9445">       &quot;show bgp view WORD rsclient summary&quot;,</a>
<a name="ln9446">       SHOW_STR</a>
<a name="ln9447">       BGP_STR</a>
<a name="ln9448">       &quot;BGP view\n&quot;</a>
<a name="ln9449">       &quot;View name\n&quot;</a>
<a name="ln9450">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9451">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9452">{</a>
<a name="ln9453">    vty_out(vty, &quot;%sIPv4 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9454">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9455">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, SAFI_UNICAST);</a>
<a name="ln9456">    vty_out(vty, &quot;%sIPv4 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9457">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9458">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, SAFI_MULTICAST);</a>
<a name="ln9459">    vty_out(vty, &quot;%sIPv4 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9460">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9461">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, SAFI_MPLS_VPN);</a>
<a name="ln9462">    vty_out(vty, &quot;%sIPv4 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9463">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9464">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP, SAFI_ENCAP);</a>
<a name="ln9465"> </a>
<a name="ln9466">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9467">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9468">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST);</a>
<a name="ln9469">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9470">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9471">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln9472">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9473">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9474">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln9475">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9476">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9477">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_ENCAP);</a>
<a name="ln9478"> </a>
<a name="ln9479">    return CMD_SUCCESS;</a>
<a name="ln9480">}</a>
<a name="ln9481"> </a>
<a name="ln9482">DEFUN (show_bgp_ipv6_rsclient_summary,</a>
<a name="ln9483">      show_bgp_ipv6_rsclient_summary_cmd,</a>
<a name="ln9484">      &quot;show bgp ipv6 rsclient summary&quot;,</a>
<a name="ln9485">       SHOW_STR</a>
<a name="ln9486">       BGP_STR</a>
<a name="ln9487">       &quot;Address family\n&quot;</a>
<a name="ln9488">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9489">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9490">{</a>
<a name="ln9491">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9492">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9493">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_UNICAST);</a>
<a name="ln9494">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9495">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9496">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln9497">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9498">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9499">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln9500">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9501">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9502">    bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, SAFI_ENCAP);</a>
<a name="ln9503"> </a>
<a name="ln9504">    return CMD_SUCCESS;</a>
<a name="ln9505">}</a>
<a name="ln9506"> </a>
<a name="ln9507">DEFUN (show_bgp_instance_ipv6_rsclient_summary,</a>
<a name="ln9508">      show_bgp_instance_ipv6_rsclient_summary_cmd,</a>
<a name="ln9509">       &quot;show bgp view WORD ipv6 rsclient summary&quot;,</a>
<a name="ln9510">       SHOW_STR</a>
<a name="ln9511">       BGP_STR</a>
<a name="ln9512">       &quot;BGP view\n&quot;</a>
<a name="ln9513">       &quot;View name\n&quot;</a>
<a name="ln9514">       &quot;Address family\n&quot;</a>
<a name="ln9515">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9516">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9517">{</a>
<a name="ln9518">    vty_out(vty, &quot;%sIPv6 Unicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9519">    vty_out(vty, &quot;---------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9520">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_UNICAST);</a>
<a name="ln9521">    vty_out(vty, &quot;%sIPv6 Multicast Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9522">    vty_out(vty, &quot;-----------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9523">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_MULTICAST);</a>
<a name="ln9524">    vty_out(vty, &quot;%sIPv6 VPN Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9525">    vty_out(vty, &quot;-----------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9526">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_MPLS_VPN);</a>
<a name="ln9527">    vty_out(vty, &quot;%sIPv6 Encap Summary:%s&quot;, VTY_NEWLINE, VTY_NEWLINE);</a>
<a name="ln9528">    vty_out(vty, &quot;-------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln9529">    bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, SAFI_ENCAP);</a>
<a name="ln9530"> </a>
<a name="ln9531">    return CMD_SUCCESS;</a>
<a name="ln9532">}</a>
<a name="ln9533"> </a>
<a name="ln9534">DEFUN (show_bgp_instance_ipv6_safi_rsclient_summary,</a>
<a name="ln9535">       show_bgp_instance_ipv6_safi_rsclient_summary_cmd,</a>
<a name="ln9536">       &quot;show bgp view WORD ipv6 (unicast|multicast) rsclient summary&quot;,</a>
<a name="ln9537">       SHOW_STR</a>
<a name="ln9538">       BGP_STR</a>
<a name="ln9539">       &quot;BGP view\n&quot;</a>
<a name="ln9540">       &quot;View name\n&quot;</a>
<a name="ln9541">       &quot;Address family\n&quot;</a>
<a name="ln9542">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9543">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9544">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9545">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9546">{</a>
<a name="ln9547">  safi_t safi;</a>
<a name="ln9548"> </a>
<a name="ln9549">  if (argc == 2) {</a>
<a name="ln9550">    safi = (strncmp (argv[1], &quot;m&quot;, 1) == 0) ? SAFI_MULTICAST : SAFI_UNICAST;</a>
<a name="ln9551">    return bgp_show_rsclient_summary_vty (vty, argv[0], AFI_IP6, safi);</a>
<a name="ln9552">  } else {</a>
<a name="ln9553">    safi = (strncmp (argv[0], &quot;m&quot;, 1) == 0) ? SAFI_MULTICAST : SAFI_UNICAST;</a>
<a name="ln9554">    return bgp_show_rsclient_summary_vty (vty, NULL, AFI_IP6, safi);</a>
<a name="ln9555">  }</a>
<a name="ln9556">}</a>
<a name="ln9557"> </a>
<a name="ln9558">ALIAS (show_bgp_instance_ipv6_safi_rsclient_summary,</a>
<a name="ln9559">       show_bgp_ipv6_safi_rsclient_summary_cmd,</a>
<a name="ln9560">       &quot;show bgp ipv6 (unicast|multicast) rsclient summary&quot;,</a>
<a name="ln9561">       SHOW_STR</a>
<a name="ln9562">       BGP_STR</a>
<a name="ln9563">       IPV6_STR</a>
<a name="ln9564">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9565">       &quot;Address Family modifier\n&quot;</a>
<a name="ln9566">       &quot;Information about Route Server Clients\n&quot;</a>
<a name="ln9567">       &quot;Summary of all Route Server Clients\n&quot;)</a>
<a name="ln9568"> </a>
<a name="ln9569">/* Redistribute VTY commands.  */</a>
<a name="ln9570"> </a>
<a name="ln9571">DEFUN (bgp_redistribute_ipv4,</a>
<a name="ln9572">       bgp_redistribute_ipv4_cmd,</a>
<a name="ln9573">       &quot;redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD,</a>
<a name="ln9574">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9575">       QUAGGA_IP_REDIST_HELP_STR_BGPD)</a>
<a name="ln9576">{</a>
<a name="ln9577">  int type;</a>
<a name="ln9578"> </a>
<a name="ln9579">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln9580">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9581">    {</a>
<a name="ln9582">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9583">      return CMD_WARNING;</a>
<a name="ln9584">    }</a>
<a name="ln9585">  return bgp_redistribute_set (vty-&gt;index, AFI_IP, type);</a>
<a name="ln9586">}</a>
<a name="ln9587"> </a>
<a name="ln9588">DEFUN (bgp_redistribute_ipv4_rmap,</a>
<a name="ln9589">       bgp_redistribute_ipv4_rmap_cmd,</a>
<a name="ln9590">       &quot;redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; route-map WORD&quot;,</a>
<a name="ln9591">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9592">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9593">       &quot;Route map reference\n&quot;</a>
<a name="ln9594">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9595">{</a>
<a name="ln9596">  int type;</a>
<a name="ln9597"> </a>
<a name="ln9598">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln9599">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9600">    {</a>
<a name="ln9601">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9602">      return CMD_WARNING;</a>
<a name="ln9603">    }</a>
<a name="ln9604"> </a>
<a name="ln9605">  bgp_redistribute_rmap_set (vty-&gt;index, AFI_IP, type, argv[1]);</a>
<a name="ln9606">  return bgp_redistribute_set (vty-&gt;index, AFI_IP, type);</a>
<a name="ln9607">}</a>
<a name="ln9608"> </a>
<a name="ln9609">DEFUN (bgp_redistribute_ipv4_metric,</a>
<a name="ln9610">       bgp_redistribute_ipv4_metric_cmd,</a>
<a name="ln9611">       &quot;redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9612">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9613">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9614">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9615">       &quot;Default metric\n&quot;)</a>
<a name="ln9616">{</a>
<a name="ln9617">  int type;</a>
<a name="ln9618">  u_int32_t metric;</a>
<a name="ln9619"> </a>
<a name="ln9620">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln9621">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9622">    {</a>
<a name="ln9623">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9624">      return CMD_WARNING;</a>
<a name="ln9625">    }</a>
<a name="ln9626">  VTY_GET_INTEGER (&quot;metric&quot;, metric, argv[1]);</a>
<a name="ln9627"> </a>
<a name="ln9628">  bgp_redistribute_metric_set (vty-&gt;index, AFI_IP, type, metric);</a>
<a name="ln9629">  return bgp_redistribute_set (vty-&gt;index, AFI_IP, type);</a>
<a name="ln9630">}</a>
<a name="ln9631"> </a>
<a name="ln9632">DEFUN (bgp_redistribute_ipv4_rmap_metric,</a>
<a name="ln9633">       bgp_redistribute_ipv4_rmap_metric_cmd,</a>
<a name="ln9634">       &quot;redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; route-map WORD metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9635">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9636">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9637">       &quot;Route map reference\n&quot;</a>
<a name="ln9638">       &quot;Pointer to route-map entries\n&quot;</a>
<a name="ln9639">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9640">       &quot;Default metric\n&quot;)</a>
<a name="ln9641">{</a>
<a name="ln9642">  int type;</a>
<a name="ln9643">  u_int32_t metric;</a>
<a name="ln9644"> </a>
<a name="ln9645">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln9646">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9647">    {</a>
<a name="ln9648">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9649">      return CMD_WARNING;</a>
<a name="ln9650">    }</a>
<a name="ln9651">  VTY_GET_INTEGER (&quot;metric&quot;, metric, argv[2]);</a>
<a name="ln9652"> </a>
<a name="ln9653">  bgp_redistribute_rmap_set (vty-&gt;index, AFI_IP, type, argv[1]);</a>
<a name="ln9654">  bgp_redistribute_metric_set (vty-&gt;index, AFI_IP, type, metric);</a>
<a name="ln9655">  return bgp_redistribute_set (vty-&gt;index, AFI_IP, type);</a>
<a name="ln9656">}</a>
<a name="ln9657"> </a>
<a name="ln9658">DEFUN (bgp_redistribute_ipv4_metric_rmap,</a>
<a name="ln9659">       bgp_redistribute_ipv4_metric_rmap_cmd,</a>
<a name="ln9660">       &quot;redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt; route-map WORD&quot;,</a>
<a name="ln9661">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9662">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9663">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9664">       &quot;Default metric\n&quot;</a>
<a name="ln9665">       &quot;Route map reference\n&quot;</a>
<a name="ln9666">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9667">{</a>
<a name="ln9668">  int type;</a>
<a name="ln9669">  u_int32_t metric;</a>
<a name="ln9670"> </a>
<a name="ln9671">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln9672">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9673">    {</a>
<a name="ln9674">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9675">      return CMD_WARNING;</a>
<a name="ln9676">    }</a>
<a name="ln9677">  VTY_GET_INTEGER (&quot;metric&quot;, metric, argv[1]);</a>
<a name="ln9678"> </a>
<a name="ln9679">  bgp_redistribute_metric_set (vty-&gt;index, AFI_IP, type, metric);</a>
<a name="ln9680">  bgp_redistribute_rmap_set (vty-&gt;index, AFI_IP, type, argv[2]);</a>
<a name="ln9681">  return bgp_redistribute_set (vty-&gt;index, AFI_IP, type);</a>
<a name="ln9682">}</a>
<a name="ln9683"> </a>
<a name="ln9684">DEFUN (no_bgp_redistribute_ipv4,</a>
<a name="ln9685">       no_bgp_redistribute_ipv4_cmd,</a>
<a name="ln9686">       &quot;no redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD,</a>
<a name="ln9687">       NO_STR</a>
<a name="ln9688">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9689">       QUAGGA_IP_REDIST_HELP_STR_BGPD)</a>
<a name="ln9690">{</a>
<a name="ln9691">  int type;</a>
<a name="ln9692"> </a>
<a name="ln9693">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln9694">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9695">    {</a>
<a name="ln9696">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9697">      return CMD_WARNING;</a>
<a name="ln9698">    }</a>
<a name="ln9699"> </a>
<a name="ln9700">  return bgp_redistribute_unset (vty-&gt;index, AFI_IP, type);</a>
<a name="ln9701">}</a>
<a name="ln9702"> </a>
<a name="ln9703">ALIAS (no_bgp_redistribute_ipv4,</a>
<a name="ln9704">       no_bgp_redistribute_ipv4_rmap_cmd,</a>
<a name="ln9705">       &quot;no redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; route-map WORD&quot;,</a>
<a name="ln9706">       NO_STR</a>
<a name="ln9707">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9708">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9709">       &quot;Route map reference\n&quot;</a>
<a name="ln9710">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9711"> </a>
<a name="ln9712">ALIAS (no_bgp_redistribute_ipv4,</a>
<a name="ln9713">       no_bgp_redistribute_ipv4_metric_cmd,</a>
<a name="ln9714">       &quot;no redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9715">       NO_STR</a>
<a name="ln9716">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9717">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9718">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9719">       &quot;Default metric\n&quot;)</a>
<a name="ln9720"> </a>
<a name="ln9721">ALIAS (no_bgp_redistribute_ipv4,</a>
<a name="ln9722">       no_bgp_redistribute_ipv4_rmap_metric_cmd,</a>
<a name="ln9723">       &quot;no redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; route-map WORD metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9724">       NO_STR</a>
<a name="ln9725">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9726">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9727">       &quot;Route map reference\n&quot;</a>
<a name="ln9728">       &quot;Pointer to route-map entries\n&quot;</a>
<a name="ln9729">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9730">       &quot;Default metric\n&quot;)</a>
<a name="ln9731"> </a>
<a name="ln9732">ALIAS (no_bgp_redistribute_ipv4,</a>
<a name="ln9733">       no_bgp_redistribute_ipv4_metric_rmap_cmd,</a>
<a name="ln9734">       &quot;no redistribute &quot; QUAGGA_IP_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt; route-map WORD&quot;,</a>
<a name="ln9735">       NO_STR</a>
<a name="ln9736">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9737">       QUAGGA_IP_REDIST_HELP_STR_BGPD</a>
<a name="ln9738">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9739">       &quot;Default metric\n&quot;</a>
<a name="ln9740">       &quot;Route map reference\n&quot;</a>
<a name="ln9741">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9742"> </a>
<a name="ln9743">DEFUN (bgp_redistribute_ipv6,</a>
<a name="ln9744">       bgp_redistribute_ipv6_cmd,</a>
<a name="ln9745">       &quot;redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD,</a>
<a name="ln9746">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9747">       QUAGGA_IP6_REDIST_HELP_STR_BGPD)</a>
<a name="ln9748">{</a>
<a name="ln9749">  int type;</a>
<a name="ln9750"> </a>
<a name="ln9751">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln9752">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9753">    {</a>
<a name="ln9754">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9755">      return CMD_WARNING;</a>
<a name="ln9756">    }</a>
<a name="ln9757"> </a>
<a name="ln9758">  return bgp_redistribute_set (vty-&gt;index, AFI_IP6, type);</a>
<a name="ln9759">}</a>
<a name="ln9760"> </a>
<a name="ln9761">DEFUN (bgp_redistribute_ipv6_rmap,</a>
<a name="ln9762">       bgp_redistribute_ipv6_rmap_cmd,</a>
<a name="ln9763">       &quot;redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; route-map WORD&quot;,</a>
<a name="ln9764">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9765">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9766">       &quot;Route map reference\n&quot;</a>
<a name="ln9767">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9768">{</a>
<a name="ln9769">  int type;</a>
<a name="ln9770"> </a>
<a name="ln9771">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln9772">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9773">    {</a>
<a name="ln9774">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9775">      return CMD_WARNING;</a>
<a name="ln9776">    }</a>
<a name="ln9777"> </a>
<a name="ln9778">  bgp_redistribute_rmap_set (vty-&gt;index, AFI_IP6, type, argv[1]);</a>
<a name="ln9779">  return bgp_redistribute_set (vty-&gt;index, AFI_IP6, type);</a>
<a name="ln9780">}</a>
<a name="ln9781"> </a>
<a name="ln9782">DEFUN (bgp_redistribute_ipv6_metric,</a>
<a name="ln9783">       bgp_redistribute_ipv6_metric_cmd,</a>
<a name="ln9784">       &quot;redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9785">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9786">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9787">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9788">       &quot;Default metric\n&quot;)</a>
<a name="ln9789">{</a>
<a name="ln9790">  int type;</a>
<a name="ln9791">  u_int32_t metric;</a>
<a name="ln9792"> </a>
<a name="ln9793">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln9794">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9795">    {</a>
<a name="ln9796">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9797">      return CMD_WARNING;</a>
<a name="ln9798">    }</a>
<a name="ln9799">  VTY_GET_INTEGER (&quot;metric&quot;, metric, argv[1]);</a>
<a name="ln9800"> </a>
<a name="ln9801">  bgp_redistribute_metric_set (vty-&gt;index, AFI_IP6, type, metric);</a>
<a name="ln9802">  return bgp_redistribute_set (vty-&gt;index, AFI_IP6, type);</a>
<a name="ln9803">}</a>
<a name="ln9804"> </a>
<a name="ln9805">DEFUN (bgp_redistribute_ipv6_rmap_metric,</a>
<a name="ln9806">       bgp_redistribute_ipv6_rmap_metric_cmd,</a>
<a name="ln9807">       &quot;redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; route-map WORD metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9808">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9809">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9810">       &quot;Route map reference\n&quot;</a>
<a name="ln9811">       &quot;Pointer to route-map entries\n&quot;</a>
<a name="ln9812">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9813">       &quot;Default metric\n&quot;)</a>
<a name="ln9814">{</a>
<a name="ln9815">  int type;</a>
<a name="ln9816">  u_int32_t metric;</a>
<a name="ln9817"> </a>
<a name="ln9818">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln9819">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9820">    {</a>
<a name="ln9821">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9822">      return CMD_WARNING;</a>
<a name="ln9823">    }</a>
<a name="ln9824">  VTY_GET_INTEGER (&quot;metric&quot;, metric, argv[2]);</a>
<a name="ln9825"> </a>
<a name="ln9826">  bgp_redistribute_rmap_set (vty-&gt;index, AFI_IP6, type, argv[1]);</a>
<a name="ln9827">  bgp_redistribute_metric_set (vty-&gt;index, AFI_IP6, type, metric);</a>
<a name="ln9828">  return bgp_redistribute_set (vty-&gt;index, AFI_IP6, type);</a>
<a name="ln9829">}</a>
<a name="ln9830"> </a>
<a name="ln9831">DEFUN (bgp_redistribute_ipv6_metric_rmap,</a>
<a name="ln9832">       bgp_redistribute_ipv6_metric_rmap_cmd,</a>
<a name="ln9833">       &quot;redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt; route-map WORD&quot;,</a>
<a name="ln9834">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9835">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9836">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9837">       &quot;Default metric\n&quot;</a>
<a name="ln9838">       &quot;Route map reference\n&quot;</a>
<a name="ln9839">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9840">{</a>
<a name="ln9841">  int type;</a>
<a name="ln9842">  u_int32_t metric;</a>
<a name="ln9843"> </a>
<a name="ln9844">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln9845">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9846">    {</a>
<a name="ln9847">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9848">      return CMD_WARNING;</a>
<a name="ln9849">    }</a>
<a name="ln9850">  VTY_GET_INTEGER (&quot;metric&quot;, metric, argv[1]);</a>
<a name="ln9851"> </a>
<a name="ln9852">  bgp_redistribute_metric_set (vty-&gt;index, AFI_IP6, type, metric);</a>
<a name="ln9853">  bgp_redistribute_rmap_set (vty-&gt;index, AFI_IP6, type, argv[2]);</a>
<a name="ln9854">  return bgp_redistribute_set (vty-&gt;index, AFI_IP6, type);</a>
<a name="ln9855">}</a>
<a name="ln9856"> </a>
<a name="ln9857">DEFUN (no_bgp_redistribute_ipv6,</a>
<a name="ln9858">       no_bgp_redistribute_ipv6_cmd,</a>
<a name="ln9859">       &quot;no redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD,</a>
<a name="ln9860">       NO_STR</a>
<a name="ln9861">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9862">       QUAGGA_IP6_REDIST_HELP_STR_BGPD)</a>
<a name="ln9863">{</a>
<a name="ln9864">  int type;</a>
<a name="ln9865"> </a>
<a name="ln9866">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln9867">  if (type &lt; 0 || type == ZEBRA_ROUTE_BGP)</a>
<a name="ln9868">    {</a>
<a name="ln9869">      vty_out (vty, &quot;%% Invalid route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln9870">      return CMD_WARNING;</a>
<a name="ln9871">    }</a>
<a name="ln9872"> </a>
<a name="ln9873">  return bgp_redistribute_unset (vty-&gt;index, AFI_IP6, type);</a>
<a name="ln9874">}</a>
<a name="ln9875"> </a>
<a name="ln9876">ALIAS (no_bgp_redistribute_ipv6,</a>
<a name="ln9877">       no_bgp_redistribute_ipv6_rmap_cmd,</a>
<a name="ln9878">       &quot;no redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; route-map WORD&quot;,</a>
<a name="ln9879">       NO_STR</a>
<a name="ln9880">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9881">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9882">       &quot;Route map reference\n&quot;</a>
<a name="ln9883">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9884"> </a>
<a name="ln9885">ALIAS (no_bgp_redistribute_ipv6,</a>
<a name="ln9886">       no_bgp_redistribute_ipv6_metric_cmd,</a>
<a name="ln9887">       &quot;no redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9888">       NO_STR</a>
<a name="ln9889">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9890">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9891">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9892">       &quot;Default metric\n&quot;)</a>
<a name="ln9893"> </a>
<a name="ln9894">ALIAS (no_bgp_redistribute_ipv6,</a>
<a name="ln9895">       no_bgp_redistribute_ipv6_rmap_metric_cmd,</a>
<a name="ln9896">       &quot;no redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; route-map WORD metric &lt;0-4294967295&gt;&quot;,</a>
<a name="ln9897">       NO_STR</a>
<a name="ln9898">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9899">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9900">       &quot;Route map reference\n&quot;</a>
<a name="ln9901">       &quot;Pointer to route-map entries\n&quot;</a>
<a name="ln9902">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9903">       &quot;Default metric\n&quot;)</a>
<a name="ln9904"> </a>
<a name="ln9905">ALIAS (no_bgp_redistribute_ipv6,</a>
<a name="ln9906">       no_bgp_redistribute_ipv6_metric_rmap_cmd,</a>
<a name="ln9907">       &quot;no redistribute &quot; QUAGGA_IP6_REDIST_STR_BGPD &quot; metric &lt;0-4294967295&gt; route-map WORD&quot;,</a>
<a name="ln9908">       NO_STR</a>
<a name="ln9909">       &quot;Redistribute information from another routing protocol\n&quot;</a>
<a name="ln9910">       QUAGGA_IP6_REDIST_HELP_STR_BGPD</a>
<a name="ln9911">       &quot;Metric for redistributed routes\n&quot;</a>
<a name="ln9912">       &quot;Default metric\n&quot;</a>
<a name="ln9913">       &quot;Route map reference\n&quot;</a>
<a name="ln9914">       &quot;Pointer to route-map entries\n&quot;)</a>
<a name="ln9915"> </a>
<a name="ln9916">int</a>
<a name="ln9917">bgp_config_write_redistribute (struct vty *vty, struct bgp *bgp, afi_t afi,</a>
<a name="ln9918">			       safi_t safi, int *write)</a>
<a name="ln9919">{</a>
<a name="ln9920">  int i;</a>
<a name="ln9921"> </a>
<a name="ln9922">  /* Unicast redistribution only.  */</a>
<a name="ln9923">  if (safi != SAFI_UNICAST)</a>
<a name="ln9924">    return 0;</a>
<a name="ln9925"> </a>
<a name="ln9926">  for (i = 0; i &lt; ZEBRA_ROUTE_MAX; i++)</a>
<a name="ln9927">    {</a>
<a name="ln9928">      /* Redistribute BGP does not make sense.  */</a>
<a name="ln9929">      if (bgp-&gt;redist[afi][i] &amp;&amp; i != ZEBRA_ROUTE_BGP)</a>
<a name="ln9930">	{</a>
<a name="ln9931">	  /* Display &quot;address-family&quot; when it is not yet diplayed.  */</a>
<a name="ln9932">	  bgp_config_write_family_header (vty, afi, safi, write);</a>
<a name="ln9933"> </a>
<a name="ln9934">	  /* &quot;redistribute&quot; configuration.  */</a>
<a name="ln9935">	  vty_out (vty, &quot; redistribute %s&quot;, zebra_route_string(i));</a>
<a name="ln9936"> </a>
<a name="ln9937">	  if (bgp-&gt;redist_metric_flag[afi][i])</a>
<a name="ln9938">	    vty_out (vty, &quot; metric %u&quot;, bgp-&gt;redist_metric[afi][i]);</a>
<a name="ln9939"> </a>
<a name="ln9940">	  if (bgp-&gt;rmap[afi][i].name)</a>
<a name="ln9941">	    vty_out (vty, &quot; route-map %s&quot;, bgp-&gt;rmap[afi][i].name);</a>
<a name="ln9942"> </a>
<a name="ln9943">	  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln9944">	}</a>
<a name="ln9945">    }</a>
<a name="ln9946">  return *write;</a>
<a name="ln9947">}</a>
<a name="ln9948"> </a>
<a name="ln9949">/* BGP node structure. */</a>
<a name="ln9950">static struct cmd_node bgp_node =</a>
<a name="ln9951">{</a>
<a name="ln9952">  BGP_NODE,</a>
<a name="ln9953">  &quot;%s(config-router)# &quot;,</a>
<a name="ln9954">  1,</a>
<a name="ln9955">};</a>
<a name="ln9956"> </a>
<a name="ln9957">static struct cmd_node bgp_ipv4_unicast_node =</a>
<a name="ln9958">{</a>
<a name="ln9959">  BGP_IPV4_NODE,</a>
<a name="ln9960">  &quot;%s(config-router-af)# &quot;,</a>
<a name="ln9961">  1,</a>
<a name="ln9962">};</a>
<a name="ln9963"> </a>
<a name="ln9964">static struct cmd_node bgp_ipv4_multicast_node =</a>
<a name="ln9965">{</a>
<a name="ln9966">  BGP_IPV4M_NODE,</a>
<a name="ln9967">  &quot;%s(config-router-af)# &quot;,</a>
<a name="ln9968">  1,</a>
<a name="ln9969">};</a>
<a name="ln9970"> </a>
<a name="ln9971">static struct cmd_node bgp_ipv6_unicast_node =</a>
<a name="ln9972">{</a>
<a name="ln9973">  BGP_IPV6_NODE,</a>
<a name="ln9974">  &quot;%s(config-router-af)# &quot;,</a>
<a name="ln9975">  1,</a>
<a name="ln9976">};</a>
<a name="ln9977"> </a>
<a name="ln9978">static struct cmd_node bgp_ipv6_multicast_node =</a>
<a name="ln9979">{</a>
<a name="ln9980">  BGP_IPV6M_NODE,</a>
<a name="ln9981">  &quot;%s(config-router-af)# &quot;,</a>
<a name="ln9982">  1,</a>
<a name="ln9983">};</a>
<a name="ln9984"> </a>
<a name="ln9985">static struct cmd_node bgp_vpnv4_node =</a>
<a name="ln9986">{</a>
<a name="ln9987">  BGP_VPNV4_NODE,</a>
<a name="ln9988">  &quot;%s(config-router-af)# &quot;,</a>
<a name="ln9989">  1</a>
<a name="ln9990">};</a>
<a name="ln9991"> </a>
<a name="ln9992">static struct cmd_node bgp_vpnv6_node =</a>
<a name="ln9993">{</a>
<a name="ln9994">  BGP_VPNV6_NODE,</a>
<a name="ln9995">  &quot;%s(config-router-af-vpnv6)# &quot;,</a>
<a name="ln9996">  1</a>
<a name="ln9997">};</a>
<a name="ln9998"> </a>
<a name="ln9999">static struct cmd_node bgp_encap_node =</a>
<a name="ln10000">{</a>
<a name="ln10001">  BGP_ENCAP_NODE,</a>
<a name="ln10002">  &quot;%s(config-router-af-encap)# &quot;,</a>
<a name="ln10003">  1</a>
<a name="ln10004">};</a>
<a name="ln10005"> </a>
<a name="ln10006">static struct cmd_node bgp_encapv6_node =</a>
<a name="ln10007">{</a>
<a name="ln10008">  BGP_ENCAPV6_NODE,</a>
<a name="ln10009">  &quot;%s(config-router-af-encapv6)# &quot;,</a>
<a name="ln10010">  1</a>
<a name="ln10011">};</a>
<a name="ln10012"> </a>
<a name="ln10013">static void community_list_vty (void);</a>
<a name="ln10014"> </a>
<a name="ln10015">void</a>
<a name="ln10016">bgp_vty_init (void)</a>
<a name="ln10017">{</a>
<a name="ln10018">  /* Install bgp top node. */</a>
<a name="ln10019">  install_node (&amp;bgp_node, bgp_config_write);</a>
<a name="ln10020">  install_node (&amp;bgp_ipv4_unicast_node, NULL);</a>
<a name="ln10021">  install_node (&amp;bgp_ipv4_multicast_node, NULL);</a>
<a name="ln10022">  install_node (&amp;bgp_ipv6_unicast_node, NULL);</a>
<a name="ln10023">  install_node (&amp;bgp_ipv6_multicast_node, NULL);</a>
<a name="ln10024">  install_node (&amp;bgp_vpnv4_node, NULL);</a>
<a name="ln10025">  install_node (&amp;bgp_vpnv6_node, NULL);</a>
<a name="ln10026">  install_node (&amp;bgp_encap_node, NULL);</a>
<a name="ln10027">  install_node (&amp;bgp_encapv6_node, NULL);</a>
<a name="ln10028"> </a>
<a name="ln10029">  /* Install default VTY commands to new nodes.  */</a>
<a name="ln10030">  install_default (BGP_NODE);</a>
<a name="ln10031">  install_default (BGP_IPV4_NODE);</a>
<a name="ln10032">  install_default (BGP_IPV4M_NODE);</a>
<a name="ln10033">  install_default (BGP_IPV6_NODE);</a>
<a name="ln10034">  install_default (BGP_IPV6M_NODE);</a>
<a name="ln10035">  install_default (BGP_VPNV4_NODE);</a>
<a name="ln10036">  install_default (BGP_VPNV6_NODE);</a>
<a name="ln10037">  install_default (BGP_ENCAP_NODE);</a>
<a name="ln10038">  install_default (BGP_ENCAPV6_NODE);</a>
<a name="ln10039">  </a>
<a name="ln10040">  /* &quot;bgp multiple-instance&quot; commands. */</a>
<a name="ln10041">  install_element (CONFIG_NODE, &amp;bgp_multiple_instance_cmd);</a>
<a name="ln10042">  install_element (CONFIG_NODE, &amp;no_bgp_multiple_instance_cmd);</a>
<a name="ln10043"> </a>
<a name="ln10044">  /* &quot;bgp config-type&quot; commands. */</a>
<a name="ln10045">  install_element (CONFIG_NODE, &amp;bgp_config_type_cmd);</a>
<a name="ln10046">  install_element (CONFIG_NODE, &amp;no_bgp_config_type_cmd);</a>
<a name="ln10047"> </a>
<a name="ln10048">  /* Dummy commands (Currently not supported) */</a>
<a name="ln10049">  install_element (BGP_NODE, &amp;no_synchronization_cmd);</a>
<a name="ln10050">  install_element (BGP_NODE, &amp;no_auto_summary_cmd);</a>
<a name="ln10051"> </a>
<a name="ln10052">  /* &quot;router bgp&quot; commands. */</a>
<a name="ln10053">  install_element (CONFIG_NODE, &amp;router_bgp_cmd);</a>
<a name="ln10054">  install_element (CONFIG_NODE, &amp;router_bgp_view_cmd);</a>
<a name="ln10055"> </a>
<a name="ln10056">  /* &quot;no router bgp&quot; commands. */</a>
<a name="ln10057">  install_element (CONFIG_NODE, &amp;no_router_bgp_cmd);</a>
<a name="ln10058">  install_element (CONFIG_NODE, &amp;no_router_bgp_view_cmd);</a>
<a name="ln10059"> </a>
<a name="ln10060">  /* &quot;bgp router-id&quot; commands. */</a>
<a name="ln10061">  install_element (BGP_NODE, &amp;bgp_router_id_cmd);</a>
<a name="ln10062">  install_element (BGP_NODE, &amp;no_bgp_router_id_cmd);</a>
<a name="ln10063">  install_element (BGP_NODE, &amp;no_bgp_router_id_val_cmd);</a>
<a name="ln10064"> </a>
<a name="ln10065">  /* &quot;bgp cluster-id&quot; commands. */</a>
<a name="ln10066">  install_element (BGP_NODE, &amp;bgp_cluster_id_cmd);</a>
<a name="ln10067">  install_element (BGP_NODE, &amp;bgp_cluster_id32_cmd);</a>
<a name="ln10068">  install_element (BGP_NODE, &amp;no_bgp_cluster_id_cmd);</a>
<a name="ln10069">  install_element (BGP_NODE, &amp;no_bgp_cluster_id_arg_cmd);</a>
<a name="ln10070"> </a>
<a name="ln10071">  /* &quot;bgp confederation&quot; commands. */</a>
<a name="ln10072">  install_element (BGP_NODE, &amp;bgp_confederation_identifier_cmd);</a>
<a name="ln10073">  install_element (BGP_NODE, &amp;no_bgp_confederation_identifier_cmd);</a>
<a name="ln10074">  install_element (BGP_NODE, &amp;no_bgp_confederation_identifier_arg_cmd);</a>
<a name="ln10075"> </a>
<a name="ln10076">  /* &quot;bgp confederation peers&quot; commands. */</a>
<a name="ln10077">  install_element (BGP_NODE, &amp;bgp_confederation_peers_cmd);</a>
<a name="ln10078">  install_element (BGP_NODE, &amp;no_bgp_confederation_peers_cmd);</a>
<a name="ln10079"> </a>
<a name="ln10080">  /* &quot;maximum-paths&quot; commands. */</a>
<a name="ln10081">  install_element (BGP_NODE, &amp;bgp_maxpaths_cmd);</a>
<a name="ln10082">  install_element (BGP_NODE, &amp;no_bgp_maxpaths_cmd);</a>
<a name="ln10083">  install_element (BGP_NODE, &amp;no_bgp_maxpaths_arg_cmd);</a>
<a name="ln10084">  install_element (BGP_IPV4_NODE, &amp;bgp_maxpaths_cmd);</a>
<a name="ln10085">  install_element (BGP_IPV4_NODE, &amp;no_bgp_maxpaths_cmd);</a>
<a name="ln10086">  install_element (BGP_IPV4_NODE, &amp;no_bgp_maxpaths_arg_cmd);</a>
<a name="ln10087">  install_element (BGP_IPV6_NODE, &amp;bgp_maxpaths_cmd);</a>
<a name="ln10088">  install_element (BGP_IPV6_NODE, &amp;no_bgp_maxpaths_cmd);</a>
<a name="ln10089">  install_element (BGP_IPV6_NODE, &amp;no_bgp_maxpaths_arg_cmd);</a>
<a name="ln10090">  install_element (BGP_NODE, &amp;bgp_maxpaths_ibgp_cmd);</a>
<a name="ln10091">  install_element (BGP_NODE, &amp;no_bgp_maxpaths_ibgp_cmd);</a>
<a name="ln10092">  install_element (BGP_NODE, &amp;no_bgp_maxpaths_ibgp_arg_cmd);</a>
<a name="ln10093">  install_element (BGP_IPV4_NODE, &amp;bgp_maxpaths_ibgp_cmd);</a>
<a name="ln10094">  install_element (BGP_IPV4_NODE, &amp;no_bgp_maxpaths_ibgp_cmd);</a>
<a name="ln10095">  install_element (BGP_IPV4_NODE, &amp;no_bgp_maxpaths_ibgp_arg_cmd);</a>
<a name="ln10096">  install_element (BGP_IPV6_NODE, &amp;bgp_maxpaths_ibgp_cmd);</a>
<a name="ln10097">  install_element (BGP_IPV6_NODE, &amp;no_bgp_maxpaths_ibgp_cmd);</a>
<a name="ln10098">  install_element (BGP_IPV6_NODE, &amp;no_bgp_maxpaths_ibgp_arg_cmd);</a>
<a name="ln10099"> </a>
<a name="ln10100">  /* &quot;timers bgp&quot; commands. */</a>
<a name="ln10101">  install_element (BGP_NODE, &amp;bgp_timers_cmd);</a>
<a name="ln10102">  install_element (BGP_NODE, &amp;no_bgp_timers_cmd);</a>
<a name="ln10103">  install_element (BGP_NODE, &amp;no_bgp_timers_arg_cmd);</a>
<a name="ln10104"> </a>
<a name="ln10105">  /* &quot;bgp client-to-client reflection&quot; commands */</a>
<a name="ln10106">  install_element (BGP_NODE, &amp;no_bgp_client_to_client_reflection_cmd);</a>
<a name="ln10107">  install_element (BGP_NODE, &amp;bgp_client_to_client_reflection_cmd);</a>
<a name="ln10108"> </a>
<a name="ln10109">  /* &quot;bgp always-compare-med&quot; commands */</a>
<a name="ln10110">  install_element (BGP_NODE, &amp;bgp_always_compare_med_cmd);</a>
<a name="ln10111">  install_element (BGP_NODE, &amp;no_bgp_always_compare_med_cmd);</a>
<a name="ln10112">  </a>
<a name="ln10113">  /* &quot;bgp deterministic-med&quot; commands */</a>
<a name="ln10114">  install_element (BGP_NODE, &amp;bgp_deterministic_med_cmd);</a>
<a name="ln10115">  install_element (BGP_NODE, &amp;no_bgp_deterministic_med_cmd);</a>
<a name="ln10116"> </a>
<a name="ln10117">  /* &quot;bgp graceful-restart&quot; commands */</a>
<a name="ln10118">  install_element (BGP_NODE, &amp;bgp_graceful_restart_cmd);</a>
<a name="ln10119">  install_element (BGP_NODE, &amp;no_bgp_graceful_restart_cmd);</a>
<a name="ln10120">  install_element (BGP_NODE, &amp;bgp_graceful_restart_stalepath_time_cmd);</a>
<a name="ln10121">  install_element (BGP_NODE, &amp;no_bgp_graceful_restart_stalepath_time_cmd);</a>
<a name="ln10122">  install_element (BGP_NODE, &amp;no_bgp_graceful_restart_stalepath_time_val_cmd);</a>
<a name="ln10123">  install_element (BGP_NODE, &amp;bgp_graceful_restart_restart_time_cmd);</a>
<a name="ln10124">  install_element (BGP_NODE, &amp;no_bgp_graceful_restart_restart_time_cmd);</a>
<a name="ln10125">  install_element (BGP_NODE, &amp;no_bgp_graceful_restart_restart_time_val_cmd);</a>
<a name="ln10126"> </a>
<a name="ln10127">  /* &quot;bgp fast-external-failover&quot; commands */</a>
<a name="ln10128">  install_element (BGP_NODE, &amp;bgp_fast_external_failover_cmd);</a>
<a name="ln10129">  install_element (BGP_NODE, &amp;no_bgp_fast_external_failover_cmd);</a>
<a name="ln10130"> </a>
<a name="ln10131">  /* &quot;bgp enforce-first-as&quot; commands */</a>
<a name="ln10132">  install_element (BGP_NODE, &amp;bgp_enforce_first_as_cmd);</a>
<a name="ln10133">  install_element (BGP_NODE, &amp;no_bgp_enforce_first_as_cmd);</a>
<a name="ln10134"> </a>
<a name="ln10135">  /* &quot;bgp bestpath compare-routerid&quot; commands */</a>
<a name="ln10136">  install_element (BGP_NODE, &amp;bgp_bestpath_compare_router_id_cmd);</a>
<a name="ln10137">  install_element (BGP_NODE, &amp;no_bgp_bestpath_compare_router_id_cmd);</a>
<a name="ln10138"> </a>
<a name="ln10139">  /* &quot;bgp bestpath as-path ignore&quot; commands */</a>
<a name="ln10140">  install_element (BGP_NODE, &amp;bgp_bestpath_aspath_ignore_cmd);</a>
<a name="ln10141">  install_element (BGP_NODE, &amp;no_bgp_bestpath_aspath_ignore_cmd);</a>
<a name="ln10142"> </a>
<a name="ln10143">  /* &quot;bgp bestpath as-path confed&quot; commands */</a>
<a name="ln10144">  install_element (BGP_NODE, &amp;bgp_bestpath_aspath_confed_cmd);</a>
<a name="ln10145">  install_element (BGP_NODE, &amp;no_bgp_bestpath_aspath_confed_cmd);</a>
<a name="ln10146"> </a>
<a name="ln10147">  /* &quot;bgp bestpath as-path multipath-relax&quot; commands */</a>
<a name="ln10148">  install_element (BGP_NODE, &amp;bgp_bestpath_aspath_multipath_relax_cmd);</a>
<a name="ln10149">  install_element (BGP_NODE, &amp;no_bgp_bestpath_aspath_multipath_relax_cmd);</a>
<a name="ln10150"> </a>
<a name="ln10151">  /* &quot;bgp log-neighbor-changes&quot; commands */</a>
<a name="ln10152">  install_element (BGP_NODE, &amp;bgp_log_neighbor_changes_cmd);</a>
<a name="ln10153">  install_element (BGP_NODE, &amp;no_bgp_log_neighbor_changes_cmd);</a>
<a name="ln10154"> </a>
<a name="ln10155">  /* &quot;bgp bestpath med&quot; commands */</a>
<a name="ln10156">  install_element (BGP_NODE, &amp;bgp_bestpath_med_cmd);</a>
<a name="ln10157">  install_element (BGP_NODE, &amp;bgp_bestpath_med2_cmd);</a>
<a name="ln10158">  install_element (BGP_NODE, &amp;bgp_bestpath_med3_cmd);</a>
<a name="ln10159">  install_element (BGP_NODE, &amp;no_bgp_bestpath_med_cmd);</a>
<a name="ln10160">  install_element (BGP_NODE, &amp;no_bgp_bestpath_med2_cmd);</a>
<a name="ln10161">  install_element (BGP_NODE, &amp;no_bgp_bestpath_med3_cmd);</a>
<a name="ln10162"> </a>
<a name="ln10163">  /* &quot;no bgp default ipv4-unicast&quot; commands. */</a>
<a name="ln10164">  install_element (BGP_NODE, &amp;no_bgp_default_ipv4_unicast_cmd);</a>
<a name="ln10165">  install_element (BGP_NODE, &amp;bgp_default_ipv4_unicast_cmd);</a>
<a name="ln10166">  </a>
<a name="ln10167">  /* &quot;bgp network import-check&quot; commands. */</a>
<a name="ln10168">  install_element (BGP_NODE, &amp;bgp_network_import_check_cmd);</a>
<a name="ln10169">  install_element (BGP_NODE, &amp;no_bgp_network_import_check_cmd);</a>
<a name="ln10170"> </a>
<a name="ln10171">  /* &quot;bgp default local-preference&quot; commands. */</a>
<a name="ln10172">  install_element (BGP_NODE, &amp;bgp_default_local_preference_cmd);</a>
<a name="ln10173">  install_element (BGP_NODE, &amp;no_bgp_default_local_preference_cmd);</a>
<a name="ln10174">  install_element (BGP_NODE, &amp;no_bgp_default_local_preference_val_cmd);</a>
<a name="ln10175"> </a>
<a name="ln10176">  /* bgp ibgp-allow-policy-mods command */</a>
<a name="ln10177">  install_element (BGP_NODE, &amp;bgp_rr_allow_outbound_policy_cmd);</a>
<a name="ln10178">  install_element (BGP_NODE, &amp;no_bgp_rr_allow_outbound_policy_cmd);</a>
<a name="ln10179"> </a>
<a name="ln10180">  /* &quot;neighbor remote-as&quot; commands. */</a>
<a name="ln10181">  install_element (BGP_NODE, &amp;neighbor_remote_as_cmd);</a>
<a name="ln10182">  install_element (BGP_NODE, &amp;no_neighbor_cmd);</a>
<a name="ln10183">  install_element (BGP_NODE, &amp;no_neighbor_remote_as_cmd);</a>
<a name="ln10184"> </a>
<a name="ln10185">  /* &quot;neighbor peer-group&quot; commands. */</a>
<a name="ln10186">  install_element (BGP_NODE, &amp;neighbor_peer_group_cmd);</a>
<a name="ln10187">  install_element (BGP_NODE, &amp;no_neighbor_peer_group_cmd);</a>
<a name="ln10188">  install_element (BGP_NODE, &amp;no_neighbor_peer_group_remote_as_cmd);</a>
<a name="ln10189"> </a>
<a name="ln10190">  /* &quot;neighbor local-as&quot; commands. */</a>
<a name="ln10191">  install_element (BGP_NODE, &amp;neighbor_local_as_cmd);</a>
<a name="ln10192">  install_element (BGP_NODE, &amp;neighbor_local_as_no_prepend_cmd);</a>
<a name="ln10193">  install_element (BGP_NODE, &amp;neighbor_local_as_no_prepend_replace_as_cmd);</a>
<a name="ln10194">  install_element (BGP_NODE, &amp;no_neighbor_local_as_cmd);</a>
<a name="ln10195">  install_element (BGP_NODE, &amp;no_neighbor_local_as_val_cmd);</a>
<a name="ln10196">  install_element (BGP_NODE, &amp;no_neighbor_local_as_val2_cmd);</a>
<a name="ln10197">  install_element (BGP_NODE, &amp;no_neighbor_local_as_val3_cmd);</a>
<a name="ln10198"> </a>
<a name="ln10199">  /* &quot;neighbor password&quot; commands. */</a>
<a name="ln10200">  install_element (BGP_NODE, &amp;neighbor_password_cmd);</a>
<a name="ln10201">  install_element (BGP_NODE, &amp;no_neighbor_password_cmd);</a>
<a name="ln10202"> </a>
<a name="ln10203">  /* &quot;neighbor activate&quot; commands. */</a>
<a name="ln10204">  install_element (BGP_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10205">  install_element (BGP_IPV4_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10206">  install_element (BGP_IPV4M_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10207">  install_element (BGP_IPV6_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10208">  install_element (BGP_IPV6M_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10209">  install_element (BGP_VPNV4_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10210">  install_element (BGP_VPNV6_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10211">  install_element (BGP_ENCAP_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10212">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_activate_cmd);</a>
<a name="ln10213"> </a>
<a name="ln10214">  /* &quot;no neighbor activate&quot; commands. */</a>
<a name="ln10215">  install_element (BGP_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10216">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10217">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10218">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10219">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10220">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10221">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10222">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10223">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_activate_cmd);</a>
<a name="ln10224"> </a>
<a name="ln10225">  /* &quot;neighbor peer-group set&quot; commands. */</a>
<a name="ln10226">  install_element (BGP_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10227">  install_element (BGP_IPV4_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10228">  install_element (BGP_IPV4M_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10229">  install_element (BGP_IPV6_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10230">  install_element (BGP_IPV6M_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10231">  install_element (BGP_VPNV4_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10232">  install_element (BGP_VPNV6_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10233">  install_element (BGP_ENCAP_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10234">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_set_peer_group_cmd);</a>
<a name="ln10235">  </a>
<a name="ln10236">  /* &quot;no neighbor peer-group unset&quot; commands. */</a>
<a name="ln10237">  install_element (BGP_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10238">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10239">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10240">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10241">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10242">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10243">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10244">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10245">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_set_peer_group_cmd);</a>
<a name="ln10246">  </a>
<a name="ln10247">  /* &quot;neighbor softreconfiguration inbound&quot; commands.*/</a>
<a name="ln10248">  install_element (BGP_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10249">  install_element (BGP_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10250">  install_element (BGP_IPV4_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10251">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10252">  install_element (BGP_IPV4M_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10253">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10254">  install_element (BGP_IPV6_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10255">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10256">  install_element (BGP_IPV6M_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10257">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10258">  install_element (BGP_VPNV4_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10259">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10260">  install_element (BGP_VPNV6_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10261">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10262">  install_element (BGP_ENCAP_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10263">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10264">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10265">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_soft_reconfiguration_cmd);</a>
<a name="ln10266"> </a>
<a name="ln10267">  /* &quot;neighbor attribute-unchanged&quot; commands.  */</a>
<a name="ln10268">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10269">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10270">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10271">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10272">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10273">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10274">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10275">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10276">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10277">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10278">  install_element (BGP_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10279">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10280">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10281">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10282">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10283">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10284">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10285">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10286">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10287">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10288">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10289">  install_element (BGP_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10290">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10291">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10292">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10293">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10294">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10295">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10296">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10297">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10298">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10299">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10300">  install_element (BGP_IPV4_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10301">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10302">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10303">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10304">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10305">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10306">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10307">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10308">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10309">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10310">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10311">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10312">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10313">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10314">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10315">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10316">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10317">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10318">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10319">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10320">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10321">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10322">  install_element (BGP_IPV4M_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10323">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10324">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10325">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10326">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10327">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10328">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10329">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10330">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10331">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10332">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10333">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10334">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10335">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10336">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10337">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10338">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10339">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10340">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10341">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10342">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10343">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10344">  install_element (BGP_IPV6_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10345">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10346">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10347">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10348">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10349">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10350">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10351">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10352">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10353">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10354">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10355">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10356">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10357">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10358">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10359">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10360">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10361">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10362">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10363">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10364">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10365">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10366">  install_element (BGP_IPV6M_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10367">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10368">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10369">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10370">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10371">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10372">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10373">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10374">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10375">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10376">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10377">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10378">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10379">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10380">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10381">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10382">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10383">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10384">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10385">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10386">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10387">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10388">  install_element (BGP_VPNV4_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10389">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10390">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10391">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10392">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10393">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10394">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10395">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10396">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10397">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10398">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10399">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10400"> </a>
<a name="ln10401">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10402">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10403">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10404">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10405">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10406">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10407">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10408">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10409">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10410">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10411">  install_element (BGP_VPNV6_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10412">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10413">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10414">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10415">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10416">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10417">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10418">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10419">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10420">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10421">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10422">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10423"> </a>
<a name="ln10424">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10425">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10426">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10427">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10428">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10429">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10430">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10431">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10432">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10433">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10434">  install_element (BGP_ENCAP_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10435">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10436">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10437">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10438">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10439">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10440">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10441">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10442">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10443">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10444">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10445">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10446"> </a>
<a name="ln10447">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged_cmd);</a>
<a name="ln10448">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged1_cmd);</a>
<a name="ln10449">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged2_cmd);</a>
<a name="ln10450">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged3_cmd);</a>
<a name="ln10451">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged4_cmd);</a>
<a name="ln10452">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged5_cmd);</a>
<a name="ln10453">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged6_cmd);</a>
<a name="ln10454">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged7_cmd);</a>
<a name="ln10455">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged8_cmd);</a>
<a name="ln10456">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged9_cmd);</a>
<a name="ln10457">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_attr_unchanged10_cmd);</a>
<a name="ln10458">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged_cmd);</a>
<a name="ln10459">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged1_cmd);</a>
<a name="ln10460">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged2_cmd);</a>
<a name="ln10461">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged3_cmd);</a>
<a name="ln10462">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged4_cmd);</a>
<a name="ln10463">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged5_cmd);</a>
<a name="ln10464">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged6_cmd);</a>
<a name="ln10465">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged7_cmd);</a>
<a name="ln10466">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged8_cmd);</a>
<a name="ln10467">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged9_cmd);</a>
<a name="ln10468">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_attr_unchanged10_cmd);</a>
<a name="ln10469"> </a>
<a name="ln10470">  /* &quot;nexthop-local unchanged&quot; commands */</a>
<a name="ln10471">  install_element (BGP_IPV6_NODE, &amp;neighbor_nexthop_local_unchanged_cmd);</a>
<a name="ln10472">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_nexthop_local_unchanged_cmd);</a>
<a name="ln10473"> </a>
<a name="ln10474">  /* &quot;transparent-as&quot; and &quot;transparent-nexthop&quot; for old version</a>
<a name="ln10475">     compatibility.  */</a>
<a name="ln10476">  install_element (BGP_NODE, &amp;neighbor_transparent_as_cmd);</a>
<a name="ln10477">  install_element (BGP_NODE, &amp;neighbor_transparent_nexthop_cmd);</a>
<a name="ln10478"> </a>
<a name="ln10479">  /* &quot;neighbor next-hop-self&quot; commands. */</a>
<a name="ln10480">  install_element (BGP_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10481">  install_element (BGP_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10482">  install_element (BGP_IPV4_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10483">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10484">  install_element (BGP_IPV4M_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10485">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10486">  install_element (BGP_IPV6_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10487">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10488">  install_element (BGP_IPV6M_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10489">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10490">  install_element (BGP_VPNV4_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10491">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10492">  install_element (BGP_VPNV6_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10493">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10494">  install_element (BGP_ENCAP_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10495">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10496">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_nexthop_self_cmd);</a>
<a name="ln10497">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_nexthop_self_cmd);</a>
<a name="ln10498"> </a>
<a name="ln10499">  /* &quot;neighbor remove-private-AS&quot; commands. */</a>
<a name="ln10500">  install_element (BGP_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10501">  install_element (BGP_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10502">  install_element (BGP_IPV4_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10503">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10504">  install_element (BGP_IPV4M_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10505">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10506">  install_element (BGP_IPV6_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10507">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10508">  install_element (BGP_IPV6M_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10509">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10510">  install_element (BGP_VPNV4_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10511">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10512">  install_element (BGP_VPNV6_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10513">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10514">  install_element (BGP_ENCAP_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10515">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10516">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_remove_private_as_cmd);</a>
<a name="ln10517">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_remove_private_as_cmd);</a>
<a name="ln10518"> </a>
<a name="ln10519">  /* &quot;neighbor send-community&quot; commands.*/</a>
<a name="ln10520">  install_element (BGP_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10521">  install_element (BGP_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10522">  install_element (BGP_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10523">  install_element (BGP_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10524">  install_element (BGP_IPV4_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10525">  install_element (BGP_IPV4_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10526">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10527">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10528">  install_element (BGP_IPV4M_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10529">  install_element (BGP_IPV4M_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10530">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10531">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10532">  install_element (BGP_IPV6_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10533">  install_element (BGP_IPV6_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10534">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10535">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10536">  install_element (BGP_IPV6M_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10537">  install_element (BGP_IPV6M_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10538">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10539">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10540">  install_element (BGP_VPNV4_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10541">  install_element (BGP_VPNV4_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10542">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10543">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10544">  install_element (BGP_VPNV6_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10545">  install_element (BGP_VPNV6_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10546">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10547">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10548">  install_element (BGP_ENCAP_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10549">  install_element (BGP_ENCAP_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10550">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10551">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10552">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_send_community_cmd);</a>
<a name="ln10553">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_send_community_type_cmd);</a>
<a name="ln10554">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_send_community_cmd);</a>
<a name="ln10555">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_send_community_type_cmd);</a>
<a name="ln10556"> </a>
<a name="ln10557">  /* &quot;neighbor route-reflector&quot; commands.*/</a>
<a name="ln10558">  install_element (BGP_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10559">  install_element (BGP_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10560">  install_element (BGP_IPV4_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10561">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10562">  install_element (BGP_IPV4M_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10563">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10564">  install_element (BGP_IPV6_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10565">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10566">  install_element (BGP_IPV6M_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10567">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10568">  install_element (BGP_VPNV4_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10569">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10570">  install_element (BGP_VPNV6_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10571">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10572">  install_element (BGP_ENCAP_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10573">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10574">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_route_reflector_client_cmd);</a>
<a name="ln10575">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_route_reflector_client_cmd);</a>
<a name="ln10576"> </a>
<a name="ln10577">  /* &quot;neighbor route-server&quot; commands.*/</a>
<a name="ln10578">  install_element (BGP_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10579">  install_element (BGP_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10580">  install_element (BGP_IPV4_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10581">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10582">  install_element (BGP_IPV4M_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10583">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10584">  install_element (BGP_IPV6_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10585">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10586">  install_element (BGP_IPV6M_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10587">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10588">  install_element (BGP_VPNV4_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10589">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10590">  install_element (BGP_VPNV6_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10591">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10592">  install_element (BGP_ENCAP_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10593">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10594">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_route_server_client_cmd);</a>
<a name="ln10595">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_route_server_client_cmd);</a>
<a name="ln10596"> </a>
<a name="ln10597">  /* &quot;neighbor passive&quot; commands. */</a>
<a name="ln10598">  install_element (BGP_NODE, &amp;neighbor_passive_cmd);</a>
<a name="ln10599">  install_element (BGP_NODE, &amp;no_neighbor_passive_cmd);</a>
<a name="ln10600"> </a>
<a name="ln10601">  /* &quot;neighbor shutdown&quot; commands. */</a>
<a name="ln10602">  install_element (BGP_NODE, &amp;neighbor_shutdown_cmd);</a>
<a name="ln10603">  install_element (BGP_NODE, &amp;no_neighbor_shutdown_cmd);</a>
<a name="ln10604"> </a>
<a name="ln10605">  /* Deprecated &quot;neighbor capability route-refresh&quot; commands.*/</a>
<a name="ln10606">  install_element (BGP_NODE, &amp;neighbor_capability_route_refresh_cmd);</a>
<a name="ln10607">  install_element (BGP_NODE, &amp;no_neighbor_capability_route_refresh_cmd);</a>
<a name="ln10608"> </a>
<a name="ln10609">  /* &quot;neighbor capability orf prefix-list&quot; commands.*/</a>
<a name="ln10610">  install_element (BGP_NODE, &amp;neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10611">  install_element (BGP_NODE, &amp;no_neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10612">  install_element (BGP_IPV4_NODE, &amp;neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10613">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10614">  install_element (BGP_IPV4M_NODE, &amp;neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10615">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10616">  install_element (BGP_IPV6_NODE, &amp;neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10617">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10618">  install_element (BGP_IPV6M_NODE, &amp;neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10619">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_capability_orf_prefix_cmd);</a>
<a name="ln10620"> </a>
<a name="ln10621">  /* &quot;neighbor capability dynamic&quot; commands.*/</a>
<a name="ln10622">  install_element (BGP_NODE, &amp;neighbor_capability_dynamic_cmd);</a>
<a name="ln10623">  install_element (BGP_NODE, &amp;no_neighbor_capability_dynamic_cmd);</a>
<a name="ln10624"> </a>
<a name="ln10625">  /* &quot;neighbor dont-capability-negotiate&quot; commands. */</a>
<a name="ln10626">  install_element (BGP_NODE, &amp;neighbor_dont_capability_negotiate_cmd);</a>
<a name="ln10627">  install_element (BGP_NODE, &amp;no_neighbor_dont_capability_negotiate_cmd);</a>
<a name="ln10628"> </a>
<a name="ln10629">  /* &quot;neighbor ebgp-multihop&quot; commands. */</a>
<a name="ln10630">  install_element (BGP_NODE, &amp;neighbor_ebgp_multihop_cmd);</a>
<a name="ln10631">  install_element (BGP_NODE, &amp;neighbor_ebgp_multihop_ttl_cmd);</a>
<a name="ln10632">  install_element (BGP_NODE, &amp;no_neighbor_ebgp_multihop_cmd);</a>
<a name="ln10633">  install_element (BGP_NODE, &amp;no_neighbor_ebgp_multihop_ttl_cmd);</a>
<a name="ln10634"> </a>
<a name="ln10635">  /* &quot;neighbor disable-connected-check&quot; commands.  */</a>
<a name="ln10636">  install_element (BGP_NODE, &amp;neighbor_disable_connected_check_cmd);</a>
<a name="ln10637">  install_element (BGP_NODE, &amp;no_neighbor_disable_connected_check_cmd);</a>
<a name="ln10638">  install_element (BGP_NODE, &amp;neighbor_enforce_multihop_cmd);</a>
<a name="ln10639">  install_element (BGP_NODE, &amp;no_neighbor_enforce_multihop_cmd);</a>
<a name="ln10640"> </a>
<a name="ln10641">  /* &quot;neighbor description&quot; commands. */</a>
<a name="ln10642">  install_element (BGP_NODE, &amp;neighbor_description_cmd);</a>
<a name="ln10643">  install_element (BGP_NODE, &amp;no_neighbor_description_cmd);</a>
<a name="ln10644">  install_element (BGP_NODE, &amp;no_neighbor_description_val_cmd);</a>
<a name="ln10645"> </a>
<a name="ln10646">  /* &quot;neighbor update-source&quot; commands. &quot;*/</a>
<a name="ln10647">  install_element (BGP_NODE, &amp;neighbor_update_source_cmd);</a>
<a name="ln10648">  install_element (BGP_NODE, &amp;no_neighbor_update_source_cmd);</a>
<a name="ln10649"> </a>
<a name="ln10650">  /* &quot;neighbor default-originate&quot; commands. */</a>
<a name="ln10651">  install_element (BGP_NODE, &amp;neighbor_default_originate_cmd);</a>
<a name="ln10652">  install_element (BGP_NODE, &amp;neighbor_default_originate_rmap_cmd);</a>
<a name="ln10653">  install_element (BGP_NODE, &amp;no_neighbor_default_originate_cmd);</a>
<a name="ln10654">  install_element (BGP_NODE, &amp;no_neighbor_default_originate_rmap_cmd);</a>
<a name="ln10655">  install_element (BGP_IPV4_NODE, &amp;neighbor_default_originate_cmd);</a>
<a name="ln10656">  install_element (BGP_IPV4_NODE, &amp;neighbor_default_originate_rmap_cmd);</a>
<a name="ln10657">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_default_originate_cmd);</a>
<a name="ln10658">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_default_originate_rmap_cmd);</a>
<a name="ln10659">  install_element (BGP_IPV4M_NODE, &amp;neighbor_default_originate_cmd);</a>
<a name="ln10660">  install_element (BGP_IPV4M_NODE, &amp;neighbor_default_originate_rmap_cmd);</a>
<a name="ln10661">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_default_originate_cmd);</a>
<a name="ln10662">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_default_originate_rmap_cmd);</a>
<a name="ln10663">  install_element (BGP_IPV6_NODE, &amp;neighbor_default_originate_cmd);</a>
<a name="ln10664">  install_element (BGP_IPV6_NODE, &amp;neighbor_default_originate_rmap_cmd);</a>
<a name="ln10665">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_default_originate_cmd);</a>
<a name="ln10666">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_default_originate_rmap_cmd);</a>
<a name="ln10667">  install_element (BGP_IPV6M_NODE, &amp;neighbor_default_originate_cmd);</a>
<a name="ln10668">  install_element (BGP_IPV6M_NODE, &amp;neighbor_default_originate_rmap_cmd);</a>
<a name="ln10669">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_default_originate_cmd);</a>
<a name="ln10670">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_default_originate_rmap_cmd);</a>
<a name="ln10671"> </a>
<a name="ln10672">  /* &quot;neighbor port&quot; commands. */</a>
<a name="ln10673">  install_element (BGP_NODE, &amp;neighbor_port_cmd);</a>
<a name="ln10674">  install_element (BGP_NODE, &amp;no_neighbor_port_cmd);</a>
<a name="ln10675">  install_element (BGP_NODE, &amp;no_neighbor_port_val_cmd);</a>
<a name="ln10676"> </a>
<a name="ln10677">  /* &quot;neighbor weight&quot; commands. */</a>
<a name="ln10678">  install_element (BGP_NODE, &amp;neighbor_weight_cmd);</a>
<a name="ln10679">  install_element (BGP_NODE, &amp;no_neighbor_weight_cmd);</a>
<a name="ln10680">  install_element (BGP_NODE, &amp;no_neighbor_weight_val_cmd);</a>
<a name="ln10681"> </a>
<a name="ln10682">  /* &quot;neighbor override-capability&quot; commands. */</a>
<a name="ln10683">  install_element (BGP_NODE, &amp;neighbor_override_capability_cmd);</a>
<a name="ln10684">  install_element (BGP_NODE, &amp;no_neighbor_override_capability_cmd);</a>
<a name="ln10685"> </a>
<a name="ln10686">  /* &quot;neighbor strict-capability-match&quot; commands. */</a>
<a name="ln10687">  install_element (BGP_NODE, &amp;neighbor_strict_capability_cmd);</a>
<a name="ln10688">  install_element (BGP_NODE, &amp;no_neighbor_strict_capability_cmd);</a>
<a name="ln10689"> </a>
<a name="ln10690">  /* &quot;neighbor timers&quot; commands. */</a>
<a name="ln10691">  install_element (BGP_NODE, &amp;neighbor_timers_cmd);</a>
<a name="ln10692">  install_element (BGP_NODE, &amp;no_neighbor_timers_cmd);</a>
<a name="ln10693"> </a>
<a name="ln10694">  /* &quot;neighbor timers connect&quot; commands. */</a>
<a name="ln10695">  install_element (BGP_NODE, &amp;neighbor_timers_connect_cmd);</a>
<a name="ln10696">  install_element (BGP_NODE, &amp;no_neighbor_timers_connect_cmd);</a>
<a name="ln10697">  install_element (BGP_NODE, &amp;no_neighbor_timers_connect_val_cmd);</a>
<a name="ln10698"> </a>
<a name="ln10699">  /* &quot;neighbor advertisement-interval&quot; commands. */</a>
<a name="ln10700">  install_element (BGP_NODE, &amp;neighbor_advertise_interval_cmd);</a>
<a name="ln10701">  install_element (BGP_NODE, &amp;no_neighbor_advertise_interval_cmd);</a>
<a name="ln10702">  install_element (BGP_NODE, &amp;no_neighbor_advertise_interval_val_cmd);</a>
<a name="ln10703"> </a>
<a name="ln10704">  /* &quot;neighbor version&quot; commands. */</a>
<a name="ln10705">  install_element (BGP_NODE, &amp;neighbor_version_cmd);</a>
<a name="ln10706"> </a>
<a name="ln10707">  /* &quot;neighbor interface&quot; commands. */</a>
<a name="ln10708">  install_element (BGP_NODE, &amp;neighbor_interface_cmd);</a>
<a name="ln10709">  install_element (BGP_NODE, &amp;no_neighbor_interface_cmd);</a>
<a name="ln10710"> </a>
<a name="ln10711">  /* &quot;neighbor distribute&quot; commands. */</a>
<a name="ln10712">  install_element (BGP_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10713">  install_element (BGP_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10714">  install_element (BGP_IPV4_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10715">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10716">  install_element (BGP_IPV4M_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10717">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10718">  install_element (BGP_IPV6_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10719">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10720">  install_element (BGP_IPV6M_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10721">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10722">  install_element (BGP_VPNV4_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10723">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10724">  install_element (BGP_VPNV6_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10725">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10726">  install_element (BGP_ENCAP_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10727">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10728">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_distribute_list_cmd);</a>
<a name="ln10729">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_distribute_list_cmd);</a>
<a name="ln10730"> </a>
<a name="ln10731">  /* &quot;neighbor prefix-list&quot; commands. */</a>
<a name="ln10732">  install_element (BGP_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10733">  install_element (BGP_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10734">  install_element (BGP_IPV4_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10735">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10736">  install_element (BGP_IPV4M_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10737">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10738">  install_element (BGP_IPV6_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10739">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10740">  install_element (BGP_IPV6M_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10741">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10742">  install_element (BGP_VPNV4_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10743">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10744">  install_element (BGP_VPNV6_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10745">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10746">  install_element (BGP_ENCAP_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10747">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10748">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_prefix_list_cmd);</a>
<a name="ln10749">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_prefix_list_cmd);</a>
<a name="ln10750"> </a>
<a name="ln10751">  /* &quot;neighbor filter-list&quot; commands. */</a>
<a name="ln10752">  install_element (BGP_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10753">  install_element (BGP_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10754">  install_element (BGP_IPV4_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10755">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10756">  install_element (BGP_IPV4M_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10757">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10758">  install_element (BGP_IPV6_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10759">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10760">  install_element (BGP_IPV6M_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10761">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10762">  install_element (BGP_VPNV4_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10763">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10764">  install_element (BGP_VPNV6_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10765">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10766">  install_element (BGP_ENCAP_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10767">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10768">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_filter_list_cmd);</a>
<a name="ln10769">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_filter_list_cmd);</a>
<a name="ln10770"> </a>
<a name="ln10771">  /* &quot;neighbor route-map&quot; commands. */</a>
<a name="ln10772">  install_element (BGP_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10773">  install_element (BGP_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10774">  install_element (BGP_IPV4_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10775">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10776">  install_element (BGP_IPV4M_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10777">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10778">  install_element (BGP_IPV6_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10779">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10780">  install_element (BGP_IPV6M_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10781">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10782">  install_element (BGP_VPNV4_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10783">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10784">  install_element (BGP_VPNV6_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10785">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10786">  install_element (BGP_ENCAP_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10787">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10788">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_route_map_cmd);</a>
<a name="ln10789">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_route_map_cmd);</a>
<a name="ln10790"> </a>
<a name="ln10791">  /* &quot;neighbor unsuppress-map&quot; commands. */</a>
<a name="ln10792">  install_element (BGP_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10793">  install_element (BGP_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10794">  install_element (BGP_IPV4_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10795">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10796">  install_element (BGP_IPV4M_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10797">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10798">  install_element (BGP_IPV6_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10799">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10800">  install_element (BGP_IPV6M_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10801">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10802">  install_element (BGP_VPNV4_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10803">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10804">  install_element (BGP_VPNV6_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10805">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10806">  install_element (BGP_ENCAP_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10807">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10808">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_unsuppress_map_cmd);</a>
<a name="ln10809">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_unsuppress_map_cmd);</a>
<a name="ln10810"> </a>
<a name="ln10811">  /* &quot;neighbor maximum-prefix&quot; commands. */</a>
<a name="ln10812">  install_element (BGP_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10813">  install_element (BGP_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10814">  install_element (BGP_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10815">  install_element (BGP_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10816">  install_element (BGP_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10817">  install_element (BGP_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10818">  install_element (BGP_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10819">  install_element (BGP_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10820">  install_element (BGP_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10821">  install_element (BGP_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10822">  install_element (BGP_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10823">  install_element (BGP_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10824">  install_element (BGP_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10825">  install_element (BGP_IPV4_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10826">  install_element (BGP_IPV4_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10827">  install_element (BGP_IPV4_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10828">  install_element (BGP_IPV4_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10829">  install_element (BGP_IPV4_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10830">  install_element (BGP_IPV4_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10831">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10832">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10833">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10834">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10835">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10836">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10837">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10838">  install_element (BGP_IPV4M_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10839">  install_element (BGP_IPV4M_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10840">  install_element (BGP_IPV4M_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10841">  install_element (BGP_IPV4M_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10842">  install_element (BGP_IPV4M_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10843">  install_element (BGP_IPV4M_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10844">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10845">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10846">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10847">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10848">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10849">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10850">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10851">  install_element (BGP_IPV6_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10852">  install_element (BGP_IPV6_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10853">  install_element (BGP_IPV6_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10854">  install_element (BGP_IPV6_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10855">  install_element (BGP_IPV6_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10856">  install_element (BGP_IPV6_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10857">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10858">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10859">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10860">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10861">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10862">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10863">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10864">  install_element (BGP_IPV6M_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10865">  install_element (BGP_IPV6M_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10866">  install_element (BGP_IPV6M_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10867">  install_element (BGP_IPV6M_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10868">  install_element (BGP_IPV6M_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10869">  install_element (BGP_IPV6M_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10870">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10871">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10872">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10873">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10874">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10875">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10876">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10877">  install_element (BGP_VPNV4_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10878">  install_element (BGP_VPNV4_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10879">  install_element (BGP_VPNV4_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10880">  install_element (BGP_VPNV4_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10881">  install_element (BGP_VPNV4_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10882">  install_element (BGP_VPNV4_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10883">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10884">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10885">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10886">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10887">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10888">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10889">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10890"> </a>
<a name="ln10891">  install_element (BGP_VPNV6_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10892">  install_element (BGP_VPNV6_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10893">  install_element (BGP_VPNV6_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10894">  install_element (BGP_VPNV6_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10895">  install_element (BGP_VPNV6_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10896">  install_element (BGP_VPNV6_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10897">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10898">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10899">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10900">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10901">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10902">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10903">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10904"> </a>
<a name="ln10905">  install_element (BGP_ENCAP_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10906">  install_element (BGP_ENCAP_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10907">  install_element (BGP_ENCAP_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10908">  install_element (BGP_ENCAP_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10909">  install_element (BGP_ENCAP_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10910">  install_element (BGP_ENCAP_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10911">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10912">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10913">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10914">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10915">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10916">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10917">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10918"> </a>
<a name="ln10919">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_maximum_prefix_cmd);</a>
<a name="ln10920">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10921">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10922">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10923">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10924">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10925">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_maximum_prefix_cmd);</a>
<a name="ln10926">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_maximum_prefix_val_cmd);</a>
<a name="ln10927">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_cmd);</a>
<a name="ln10928">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_maximum_prefix_warning_cmd);</a>
<a name="ln10929">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_warning_cmd);</a>
<a name="ln10930">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_maximum_prefix_restart_cmd);</a>
<a name="ln10931">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_maximum_prefix_threshold_restart_cmd);</a>
<a name="ln10932"> </a>
<a name="ln10933">  /* &quot;neighbor allowas-in&quot; */</a>
<a name="ln10934">  install_element (BGP_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10935">  install_element (BGP_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10936">  install_element (BGP_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10937">  install_element (BGP_IPV4_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10938">  install_element (BGP_IPV4_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10939">  install_element (BGP_IPV4_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10940">  install_element (BGP_IPV4M_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10941">  install_element (BGP_IPV4M_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10942">  install_element (BGP_IPV4M_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10943">  install_element (BGP_IPV6_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10944">  install_element (BGP_IPV6_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10945">  install_element (BGP_IPV6_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10946">  install_element (BGP_IPV6M_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10947">  install_element (BGP_IPV6M_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10948">  install_element (BGP_IPV6M_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10949">  install_element (BGP_VPNV4_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10950">  install_element (BGP_VPNV4_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10951">  install_element (BGP_VPNV4_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10952">  install_element (BGP_VPNV6_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10953">  install_element (BGP_VPNV6_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10954">  install_element (BGP_VPNV6_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10955">  install_element (BGP_ENCAP_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10956">  install_element (BGP_ENCAP_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10957">  install_element (BGP_ENCAP_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10958">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_allowas_in_cmd);</a>
<a name="ln10959">  install_element (BGP_ENCAPV6_NODE, &amp;neighbor_allowas_in_arg_cmd);</a>
<a name="ln10960">  install_element (BGP_ENCAPV6_NODE, &amp;no_neighbor_allowas_in_cmd);</a>
<a name="ln10961"> </a>
<a name="ln10962">  /* address-family commands. */</a>
<a name="ln10963">  install_element (BGP_NODE, &amp;address_family_ipv4_cmd);</a>
<a name="ln10964">  install_element (BGP_NODE, &amp;address_family_ipv4_safi_cmd);</a>
<a name="ln10965">  install_element (BGP_NODE, &amp;address_family_ipv6_cmd);</a>
<a name="ln10966">  install_element (BGP_NODE, &amp;address_family_ipv6_safi_cmd);</a>
<a name="ln10967">  install_element (BGP_NODE, &amp;address_family_vpnv4_cmd);</a>
<a name="ln10968">  install_element (BGP_NODE, &amp;address_family_vpnv4_unicast_cmd);</a>
<a name="ln10969"> </a>
<a name="ln10970">  install_element (BGP_NODE, &amp;address_family_vpnv6_cmd);</a>
<a name="ln10971">  install_element (BGP_NODE, &amp;address_family_vpnv6_unicast_cmd);</a>
<a name="ln10972"> </a>
<a name="ln10973">  install_element (BGP_NODE, &amp;address_family_encap_cmd);</a>
<a name="ln10974">  install_element (BGP_NODE, &amp;address_family_encapv4_cmd);</a>
<a name="ln10975">  install_element (BGP_NODE, &amp;address_family_encapv6_cmd);</a>
<a name="ln10976"> </a>
<a name="ln10977">  /* &quot;exit-address-family&quot; command. */</a>
<a name="ln10978">  install_element (BGP_IPV4_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10979">  install_element (BGP_IPV4M_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10980">  install_element (BGP_IPV6_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10981">  install_element (BGP_IPV6M_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10982">  install_element (BGP_VPNV4_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10983">  install_element (BGP_VPNV6_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10984">  install_element (BGP_ENCAP_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10985">  install_element (BGP_ENCAPV6_NODE, &amp;exit_address_family_cmd);</a>
<a name="ln10986"> </a>
<a name="ln10987">  /* &quot;clear ip bgp commands&quot; */</a>
<a name="ln10988">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_cmd);</a>
<a name="ln10989">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_cmd);</a>
<a name="ln10990">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_cmd);</a>
<a name="ln10991">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_cmd);</a>
<a name="ln10992">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_cmd);</a>
<a name="ln10993">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_cmd);</a>
<a name="ln10994">  install_element (ENABLE_NODE, &amp;clear_bgp_all_cmd);</a>
<a name="ln10995">  install_element (ENABLE_NODE, &amp;clear_bgp_instance_all_cmd);</a>
<a name="ln10996">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_cmd);</a>
<a name="ln10997">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_cmd);</a>
<a name="ln10998">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_cmd);</a>
<a name="ln10999">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_group_cmd);</a>
<a name="ln11000">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_group_cmd);</a>
<a name="ln11001">  install_element (ENABLE_NODE, &amp;clear_bgp_external_cmd);</a>
<a name="ln11002">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_external_cmd);</a>
<a name="ln11003">  install_element (ENABLE_NODE, &amp;clear_bgp_as_cmd);</a>
<a name="ln11004">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_as_cmd);</a>
<a name="ln11005"> </a>
<a name="ln11006">  /* &quot;clear ip bgp neighbor soft in&quot; */</a>
<a name="ln11007">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_soft_in_cmd);</a>
<a name="ln11008">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_soft_in_cmd);</a>
<a name="ln11009">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_in_cmd);</a>
<a name="ln11010">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_in_prefix_filter_cmd);</a>
<a name="ln11011">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_in_prefix_filter_cmd);</a>
<a name="ln11012">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_soft_in_cmd);</a>
<a name="ln11013">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_in_cmd);</a>
<a name="ln11014">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_in_prefix_filter_cmd);</a>
<a name="ln11015">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_soft_in_cmd);</a>
<a name="ln11016">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_in_cmd);</a>
<a name="ln11017">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_in_prefix_filter_cmd);</a>
<a name="ln11018">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_soft_in_cmd);</a>
<a name="ln11019">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_in_cmd);</a>
<a name="ln11020">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_in_prefix_filter_cmd);</a>
<a name="ln11021">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_soft_in_cmd);</a>
<a name="ln11022">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_in_cmd);</a>
<a name="ln11023">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_in_prefix_filter_cmd);</a>
<a name="ln11024">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_ipv4_soft_in_cmd);</a>
<a name="ln11025">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_ipv4_soft_in_cmd);</a>
<a name="ln11026">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_ipv4_in_cmd);</a>
<a name="ln11027">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_ipv4_in_prefix_filter_cmd);</a>
<a name="ln11028">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_ipv4_in_prefix_filter_cmd);</a>
<a name="ln11029">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_ipv4_soft_in_cmd);</a>
<a name="ln11030">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_ipv4_in_cmd);</a>
<a name="ln11031">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_ipv4_in_prefix_filter_cmd);</a>
<a name="ln11032">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_ipv4_soft_in_cmd);</a>
<a name="ln11033">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_ipv4_in_cmd);</a>
<a name="ln11034">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_ipv4_in_prefix_filter_cmd);</a>
<a name="ln11035">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_ipv4_soft_in_cmd);</a>
<a name="ln11036">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_ipv4_in_cmd);</a>
<a name="ln11037">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_ipv4_in_prefix_filter_cmd);</a>
<a name="ln11038">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_ipv4_soft_in_cmd);</a>
<a name="ln11039">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_ipv4_in_cmd);</a>
<a name="ln11040">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_ipv4_in_prefix_filter_cmd);</a>
<a name="ln11041">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_vpnv4_soft_in_cmd);</a>
<a name="ln11042">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_vpnv4_in_cmd);</a>
<a name="ln11043">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_vpnv4_soft_in_cmd);</a>
<a name="ln11044">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_vpnv4_in_cmd);</a>
<a name="ln11045">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_vpnv4_soft_in_cmd);</a>
<a name="ln11046">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_vpnv4_in_cmd);</a>
<a name="ln11047">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_encap_soft_in_cmd);</a>
<a name="ln11048">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_encap_in_cmd);</a>
<a name="ln11049">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_encap_soft_in_cmd);</a>
<a name="ln11050">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_encap_in_cmd);</a>
<a name="ln11051">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_encap_soft_in_cmd);</a>
<a name="ln11052">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_encap_in_cmd);</a>
<a name="ln11053">  install_element (ENABLE_NODE, &amp;clear_bgp_all_soft_in_cmd);</a>
<a name="ln11054">  install_element (ENABLE_NODE, &amp;clear_bgp_instance_all_soft_in_cmd);</a>
<a name="ln11055">  install_element (ENABLE_NODE, &amp;clear_bgp_all_in_cmd);</a>
<a name="ln11056">  install_element (ENABLE_NODE, &amp;clear_bgp_all_in_prefix_filter_cmd);</a>
<a name="ln11057">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_soft_in_cmd);</a>
<a name="ln11058">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_in_cmd);</a>
<a name="ln11059">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_in_prefix_filter_cmd);</a>
<a name="ln11060">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_group_soft_in_cmd);</a>
<a name="ln11061">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_group_in_cmd);</a>
<a name="ln11062">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_group_in_prefix_filter_cmd);</a>
<a name="ln11063">  install_element (ENABLE_NODE, &amp;clear_bgp_external_soft_in_cmd);</a>
<a name="ln11064">  install_element (ENABLE_NODE, &amp;clear_bgp_external_in_cmd);</a>
<a name="ln11065">  install_element (ENABLE_NODE, &amp;clear_bgp_external_in_prefix_filter_cmd);</a>
<a name="ln11066">  install_element (ENABLE_NODE, &amp;clear_bgp_as_soft_in_cmd);</a>
<a name="ln11067">  install_element (ENABLE_NODE, &amp;clear_bgp_as_in_cmd);</a>
<a name="ln11068">  install_element (ENABLE_NODE, &amp;clear_bgp_as_in_prefix_filter_cmd);</a>
<a name="ln11069">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_soft_in_cmd);</a>
<a name="ln11070">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_in_cmd);</a>
<a name="ln11071">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_in_prefix_filter_cmd);</a>
<a name="ln11072">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_soft_in_cmd);</a>
<a name="ln11073">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_in_cmd);</a>
<a name="ln11074">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_in_prefix_filter_cmd);</a>
<a name="ln11075">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_group_soft_in_cmd);</a>
<a name="ln11076">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_group_in_cmd);</a>
<a name="ln11077">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_group_in_prefix_filter_cmd);</a>
<a name="ln11078">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_external_soft_in_cmd);</a>
<a name="ln11079">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_external_in_cmd);</a>
<a name="ln11080">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_external_in_prefix_filter_cmd);</a>
<a name="ln11081">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_as_soft_in_cmd);</a>
<a name="ln11082">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_as_in_cmd);</a>
<a name="ln11083">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_as_in_prefix_filter_cmd);</a>
<a name="ln11084"> </a>
<a name="ln11085">  /* clear ip bgp prefix  */</a>
<a name="ln11086">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_prefix_cmd);</a>
<a name="ln11087">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_safi_prefix_cmd);</a>
<a name="ln11088"> </a>
<a name="ln11089">  /* &quot;clear ip bgp neighbor soft out&quot; */</a>
<a name="ln11090">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_soft_out_cmd);</a>
<a name="ln11091">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_soft_out_cmd);</a>
<a name="ln11092">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_out_cmd);</a>
<a name="ln11093">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_soft_out_cmd);</a>
<a name="ln11094">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_out_cmd);</a>
<a name="ln11095">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_soft_out_cmd);</a>
<a name="ln11096">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_out_cmd);</a>
<a name="ln11097">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_soft_out_cmd);</a>
<a name="ln11098">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_out_cmd);</a>
<a name="ln11099">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_soft_out_cmd);</a>
<a name="ln11100">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_out_cmd);</a>
<a name="ln11101">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_ipv4_soft_out_cmd);</a>
<a name="ln11102">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_ipv4_soft_out_cmd);</a>
<a name="ln11103">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_ipv4_out_cmd);</a>
<a name="ln11104">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_ipv4_soft_out_cmd);</a>
<a name="ln11105">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_ipv4_out_cmd);</a>
<a name="ln11106">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_ipv4_soft_out_cmd);</a>
<a name="ln11107">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_ipv4_out_cmd);</a>
<a name="ln11108">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_ipv4_soft_out_cmd);</a>
<a name="ln11109">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_ipv4_out_cmd);</a>
<a name="ln11110">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_ipv4_soft_out_cmd);</a>
<a name="ln11111">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_ipv4_out_cmd);</a>
<a name="ln11112">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_vpnv4_soft_out_cmd);</a>
<a name="ln11113">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_vpnv4_out_cmd);</a>
<a name="ln11114">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_vpnv4_soft_out_cmd);</a>
<a name="ln11115">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_vpnv4_out_cmd);</a>
<a name="ln11116">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_vpnv4_soft_out_cmd);</a>
<a name="ln11117">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_vpnv4_out_cmd);</a>
<a name="ln11118">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_encap_soft_out_cmd);</a>
<a name="ln11119">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_encap_out_cmd);</a>
<a name="ln11120">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_encap_soft_out_cmd);</a>
<a name="ln11121">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_encap_out_cmd);</a>
<a name="ln11122">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_encap_soft_out_cmd);</a>
<a name="ln11123">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_encap_out_cmd);</a>
<a name="ln11124">  install_element (ENABLE_NODE, &amp;clear_bgp_all_soft_out_cmd);</a>
<a name="ln11125">  install_element (ENABLE_NODE, &amp;clear_bgp_instance_all_soft_out_cmd);</a>
<a name="ln11126">  install_element (ENABLE_NODE, &amp;clear_bgp_all_out_cmd);</a>
<a name="ln11127">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_soft_out_cmd);</a>
<a name="ln11128">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_out_cmd);</a>
<a name="ln11129">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_group_soft_out_cmd);</a>
<a name="ln11130">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_group_out_cmd);</a>
<a name="ln11131">  install_element (ENABLE_NODE, &amp;clear_bgp_external_soft_out_cmd);</a>
<a name="ln11132">  install_element (ENABLE_NODE, &amp;clear_bgp_external_out_cmd);</a>
<a name="ln11133">  install_element (ENABLE_NODE, &amp;clear_bgp_as_soft_out_cmd);</a>
<a name="ln11134">  install_element (ENABLE_NODE, &amp;clear_bgp_as_out_cmd);</a>
<a name="ln11135">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_soft_out_cmd);</a>
<a name="ln11136">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_out_cmd);</a>
<a name="ln11137">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_soft_out_cmd);</a>
<a name="ln11138">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_out_cmd);</a>
<a name="ln11139">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_group_soft_out_cmd);</a>
<a name="ln11140">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_group_out_cmd);</a>
<a name="ln11141">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_external_soft_out_cmd);</a>
<a name="ln11142">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_external_out_cmd);</a>
<a name="ln11143">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_as_soft_out_cmd);</a>
<a name="ln11144">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_as_out_cmd);</a>
<a name="ln11145"> </a>
<a name="ln11146">  /* &quot;clear ip bgp neighbor soft&quot; */</a>
<a name="ln11147">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_soft_cmd);</a>
<a name="ln11148">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_soft_cmd);</a>
<a name="ln11149">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_soft_cmd);</a>
<a name="ln11150">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_soft_cmd);</a>
<a name="ln11151">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_soft_cmd);</a>
<a name="ln11152">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_soft_cmd);</a>
<a name="ln11153">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_ipv4_soft_cmd);</a>
<a name="ln11154">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_ipv4_soft_cmd);</a>
<a name="ln11155">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_ipv4_soft_cmd);</a>
<a name="ln11156">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_group_ipv4_soft_cmd);</a>
<a name="ln11157">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_external_ipv4_soft_cmd);</a>
<a name="ln11158">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_ipv4_soft_cmd);</a>
<a name="ln11159">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_vpnv4_soft_cmd);</a>
<a name="ln11160">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_vpnv4_soft_cmd);</a>
<a name="ln11161">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_vpnv4_soft_cmd);</a>
<a name="ln11162">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_encap_soft_cmd);</a>
<a name="ln11163">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_encap_soft_cmd);</a>
<a name="ln11164">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_as_encap_soft_cmd);</a>
<a name="ln11165">  install_element (ENABLE_NODE, &amp;clear_bgp_all_soft_cmd);</a>
<a name="ln11166">  install_element (ENABLE_NODE, &amp;clear_bgp_instance_all_soft_cmd);</a>
<a name="ln11167">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_soft_cmd);</a>
<a name="ln11168">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_group_soft_cmd);</a>
<a name="ln11169">  install_element (ENABLE_NODE, &amp;clear_bgp_external_soft_cmd);</a>
<a name="ln11170">  install_element (ENABLE_NODE, &amp;clear_bgp_as_soft_cmd);</a>
<a name="ln11171">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_soft_cmd);</a>
<a name="ln11172">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_soft_cmd);</a>
<a name="ln11173">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_group_soft_cmd);</a>
<a name="ln11174">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_external_soft_cmd);</a>
<a name="ln11175">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_as_soft_cmd);</a>
<a name="ln11176"> </a>
<a name="ln11177">  /* &quot;clear ip bgp neighbor rsclient&quot; */</a>
<a name="ln11178">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_all_rsclient_cmd);</a>
<a name="ln11179">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_all_rsclient_cmd);</a>
<a name="ln11180">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_peer_rsclient_cmd);</a>
<a name="ln11181">  install_element (ENABLE_NODE, &amp;clear_ip_bgp_instance_peer_rsclient_cmd);</a>
<a name="ln11182">  install_element (ENABLE_NODE, &amp;clear_bgp_all_rsclient_cmd);</a>
<a name="ln11183">  install_element (ENABLE_NODE, &amp;clear_bgp_instance_all_rsclient_cmd);</a>
<a name="ln11184">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_all_rsclient_cmd);</a>
<a name="ln11185">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_instance_all_rsclient_cmd);</a>
<a name="ln11186">  install_element (ENABLE_NODE, &amp;clear_bgp_peer_rsclient_cmd);</a>
<a name="ln11187">  install_element (ENABLE_NODE, &amp;clear_bgp_instance_peer_rsclient_cmd);</a>
<a name="ln11188">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_peer_rsclient_cmd);</a>
<a name="ln11189">  install_element (ENABLE_NODE, &amp;clear_bgp_ipv6_instance_peer_rsclient_cmd);</a>
<a name="ln11190"> </a>
<a name="ln11191">  /* &quot;show ip bgp summary&quot; commands. */</a>
<a name="ln11192">  install_element (VIEW_NODE, &amp;show_bgp_summary_cmd);</a>
<a name="ln11193">  install_element (RESTRICTED_NODE, &amp;show_bgp_summary_cmd);</a>
<a name="ln11194"> </a>
<a name="ln11195">  install_element (VIEW_NODE, &amp;show_bgp_summary_1w_cmd);</a>
<a name="ln11196">  install_element (RESTRICTED_NODE, &amp;show_bgp_summary_1w_cmd);</a>
<a name="ln11197"> </a>
<a name="ln11198">  install_element (VIEW_NODE, &amp;show_bgp_ipv4_safi_summary_cmd);</a>
<a name="ln11199">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv4_safi_summary_cmd);</a>
<a name="ln11200">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv4_summary_cmd);</a>
<a name="ln11201"> </a>
<a name="ln11202">  install_element (VIEW_NODE, &amp;show_bgp_ipv4_vpn_summary_cmd);</a>
<a name="ln11203">  install_element (VIEW_NODE, &amp;show_bgp_ipv4_encap_summary_cmd);</a>
<a name="ln11204">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_vpn_summary_cmd);</a>
<a name="ln11205">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_encap_summary_cmd);</a>
<a name="ln11206"> </a>
<a name="ln11207">  install_element (VIEW_NODE, &amp;show_bgp_instance_summary_cmd);</a>
<a name="ln11208">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_safi_summary_cmd);</a>
<a name="ln11209">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv6_summary_cmd);</a>
<a name="ln11210">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv6_safi_summary_cmd);</a>
<a name="ln11211"> </a>
<a name="ln11212">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv4_safi_summary_cmd);</a>
<a name="ln11213">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv4_summary_cmd);</a>
<a name="ln11214">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv4_safi_summary_cmd);</a>
<a name="ln11215"> </a>
<a name="ln11216">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv4_vpn_summary_cmd);</a>
<a name="ln11217">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv4_encap_summary_cmd);</a>
<a name="ln11218">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv6_vpn_summary_cmd);</a>
<a name="ln11219">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv6_encap_summary_cmd);</a>
<a name="ln11220"> </a>
<a name="ln11221">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_summary_cmd);</a>
<a name="ln11222">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv6_safi_summary_cmd);</a>
<a name="ln11223">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv6_summary_cmd);</a>
<a name="ln11224">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv6_safi_summary_cmd);</a>
<a name="ln11225"> </a>
<a name="ln11226">  /* &quot;show ip bgp neighbors&quot; commands. */</a>
<a name="ln11227">  install_element (VIEW_NODE, &amp;show_bgp_instance_neighbors_cmd);</a>
<a name="ln11228"> </a>
<a name="ln11229">  install_element (VIEW_NODE, &amp;show_bgp_neighbors_cmd);</a>
<a name="ln11230">  install_element (VIEW_NODE, &amp;show_bgp_neighbors_peer_cmd);</a>
<a name="ln11231">  install_element (VIEW_NODE, &amp;show_bgp_instance_neighbors_peer_cmd);</a>
<a name="ln11232">  install_element (RESTRICTED_NODE, &amp;show_bgp_neighbors_peer_cmd);</a>
<a name="ln11233">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_neighbors_peer_cmd);</a>
<a name="ln11234">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv6_neighbors_cmd);</a>
<a name="ln11235">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv6_neighbors_peer_cmd);</a>
<a name="ln11236">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv6_neighbors_peer_cmd);</a>
<a name="ln11237"> </a>
<a name="ln11238">  /* &quot;show ip bgp rsclient&quot; commands. */</a>
<a name="ln11239">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv4_safi_rsclient_summary_cmd);</a>
<a name="ln11240">  install_element (VIEW_NODE, &amp;show_bgp_ipv4_safi_rsclient_summary_cmd);</a>
<a name="ln11241">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv4_safi_rsclient_summary_cmd);</a>
<a name="ln11242">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv4_safi_rsclient_summary_cmd);</a>
<a name="ln11243"> </a>
<a name="ln11244">  install_element (VIEW_NODE, &amp;show_bgp_rsclient_summary_cmd);</a>
<a name="ln11245">  install_element (VIEW_NODE, &amp;show_bgp_instance_rsclient_summary_cmd);</a>
<a name="ln11246">  install_element (RESTRICTED_NODE, &amp;show_bgp_rsclient_summary_cmd);</a>
<a name="ln11247">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_rsclient_summary_cmd);</a>
<a name="ln11248"> </a>
<a name="ln11249">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_rsclient_summary_cmd);</a>
<a name="ln11250">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv6_rsclient_summary_cmd);</a>
<a name="ln11251">  install_element (VIEW_NODE, &amp;show_bgp_instance_ipv6_safi_rsclient_summary_cmd);</a>
<a name="ln11252">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_safi_rsclient_summary_cmd);</a>
<a name="ln11253">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv6_rsclient_summary_cmd);</a>
<a name="ln11254">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv6_rsclient_summary_cmd);</a>
<a name="ln11255">  install_element (RESTRICTED_NODE, &amp;show_bgp_instance_ipv6_safi_rsclient_summary_cmd);</a>
<a name="ln11256">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv6_safi_rsclient_summary_cmd);</a>
<a name="ln11257"> </a>
<a name="ln11258">  /* &quot;show ip bgp paths&quot; commands. */</a>
<a name="ln11259">  install_element (VIEW_NODE, &amp;show_bgp_ipv4_paths_cmd);</a>
<a name="ln11260"> </a>
<a name="ln11261">  /* &quot;show ip bgp community&quot; commands. */</a>
<a name="ln11262">  install_element (VIEW_NODE, &amp;show_ip_bgp_community_info_cmd);</a>
<a name="ln11263"> </a>
<a name="ln11264">  /* &quot;show ip bgp large-community&quot; commands. */</a>
<a name="ln11265">  install_element (VIEW_NODE, &amp;show_ip_bgp_lcommunity_info_cmd);</a>
<a name="ln11266"> </a>
<a name="ln11267">  /* &quot;show ip bgp attribute-info&quot; commands. */</a>
<a name="ln11268">  install_element (VIEW_NODE, &amp;show_ip_bgp_attr_info_cmd);</a>
<a name="ln11269"> </a>
<a name="ln11270">  /* &quot;redistribute&quot; commands.  */</a>
<a name="ln11271">  install_element (BGP_NODE, &amp;bgp_redistribute_ipv4_cmd);</a>
<a name="ln11272">  install_element (BGP_NODE, &amp;no_bgp_redistribute_ipv4_cmd);</a>
<a name="ln11273">  install_element (BGP_NODE, &amp;bgp_redistribute_ipv4_rmap_cmd);</a>
<a name="ln11274">  install_element (BGP_NODE, &amp;no_bgp_redistribute_ipv4_rmap_cmd);</a>
<a name="ln11275">  install_element (BGP_NODE, &amp;bgp_redistribute_ipv4_metric_cmd);</a>
<a name="ln11276">  install_element (BGP_NODE, &amp;no_bgp_redistribute_ipv4_metric_cmd);</a>
<a name="ln11277">  install_element (BGP_NODE, &amp;bgp_redistribute_ipv4_rmap_metric_cmd);</a>
<a name="ln11278">  install_element (BGP_NODE, &amp;bgp_redistribute_ipv4_metric_rmap_cmd);</a>
<a name="ln11279">  install_element (BGP_NODE, &amp;no_bgp_redistribute_ipv4_rmap_metric_cmd);</a>
<a name="ln11280">  install_element (BGP_NODE, &amp;no_bgp_redistribute_ipv4_metric_rmap_cmd);</a>
<a name="ln11281">  install_element (BGP_IPV6_NODE, &amp;bgp_redistribute_ipv6_cmd);</a>
<a name="ln11282">  install_element (BGP_IPV6_NODE, &amp;no_bgp_redistribute_ipv6_cmd);</a>
<a name="ln11283">  install_element (BGP_IPV6_NODE, &amp;bgp_redistribute_ipv6_rmap_cmd);</a>
<a name="ln11284">  install_element (BGP_IPV6_NODE, &amp;no_bgp_redistribute_ipv6_rmap_cmd);</a>
<a name="ln11285">  install_element (BGP_IPV6_NODE, &amp;bgp_redistribute_ipv6_metric_cmd);</a>
<a name="ln11286">  install_element (BGP_IPV6_NODE, &amp;no_bgp_redistribute_ipv6_metric_cmd);</a>
<a name="ln11287">  install_element (BGP_IPV6_NODE, &amp;bgp_redistribute_ipv6_rmap_metric_cmd);</a>
<a name="ln11288">  install_element (BGP_IPV6_NODE, &amp;bgp_redistribute_ipv6_metric_rmap_cmd);</a>
<a name="ln11289">  install_element (BGP_IPV6_NODE, &amp;no_bgp_redistribute_ipv6_rmap_metric_cmd);</a>
<a name="ln11290">  install_element (BGP_IPV6_NODE, &amp;no_bgp_redistribute_ipv6_metric_rmap_cmd);</a>
<a name="ln11291"> </a>
<a name="ln11292">  /* ttl_security commands */</a>
<a name="ln11293">  install_element (BGP_NODE, &amp;neighbor_ttl_security_cmd);</a>
<a name="ln11294">  install_element (BGP_NODE, &amp;no_neighbor_ttl_security_cmd);</a>
<a name="ln11295"> </a>
<a name="ln11296">  /* &quot;show bgp memory&quot; commands. */</a>
<a name="ln11297">  install_element (VIEW_NODE, &amp;show_bgp_memory_cmd);</a>
<a name="ln11298">  install_element (RESTRICTED_NODE, &amp;show_bgp_memory_cmd);</a>
<a name="ln11299">  </a>
<a name="ln11300">  /* &quot;show bgp views&quot; commands. */</a>
<a name="ln11301">  install_element (VIEW_NODE, &amp;show_bgp_views_cmd);</a>
<a name="ln11302">  install_element (RESTRICTED_NODE, &amp;show_bgp_views_cmd);</a>
<a name="ln11303">  </a>
<a name="ln11304">  /* non afi/safi forms of commands */</a>
<a name="ln11305">  install_element (VIEW_NODE, &amp;show_ip_bgp_summary_cmd);</a>
<a name="ln11306">  install_element (VIEW_NODE, &amp;show_ip_bgp_instance_summary_cmd);</a>
<a name="ln11307">  install_element (VIEW_NODE, &amp;show_ip_bgp_ipv4_summary_cmd);</a>
<a name="ln11308">  install_element (VIEW_NODE, &amp;show_ip_bgp_instance_ipv4_summary_cmd);</a>
<a name="ln11309">  install_element (VIEW_NODE, &amp;show_ip_bgp_vpnv4_all_summary_cmd);</a>
<a name="ln11310">  install_element (VIEW_NODE, &amp;show_ip_bgp_vpnv4_rd_summary_cmd);</a>
<a name="ln11311">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_summary_cmd);</a>
<a name="ln11312">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_summary_cmd);</a>
<a name="ln11313">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_instance_summary_cmd);</a>
<a name="ln11314">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_ipv4_summary_cmd);</a>
<a name="ln11315">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_instance_ipv4_summary_cmd);</a>
<a name="ln11316">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_vpnv4_all_summary_cmd);</a>
<a name="ln11317">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_vpnv4_rd_summary_cmd);</a>
<a name="ln11318">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv6_summary_cmd);</a>
<a name="ln11319">  install_element (VIEW_NODE, &amp;show_ip_bgp_neighbors_cmd);</a>
<a name="ln11320">  install_element (VIEW_NODE, &amp;show_ip_bgp_ipv4_neighbors_cmd);</a>
<a name="ln11321">  install_element (VIEW_NODE, &amp;show_ip_bgp_neighbors_peer_cmd);</a>
<a name="ln11322">  install_element (VIEW_NODE, &amp;show_ip_bgp_ipv4_neighbors_peer_cmd);</a>
<a name="ln11323">  install_element (VIEW_NODE, &amp;show_ip_bgp_vpnv4_all_neighbors_cmd);</a>
<a name="ln11324">  install_element (VIEW_NODE, &amp;show_ip_bgp_vpnv4_rd_neighbors_cmd);</a>
<a name="ln11325">  install_element (VIEW_NODE, &amp;show_ip_bgp_vpnv4_all_neighbors_peer_cmd);</a>
<a name="ln11326">  install_element (VIEW_NODE, &amp;show_ip_bgp_vpnv4_rd_neighbors_peer_cmd);</a>
<a name="ln11327">  install_element (VIEW_NODE, &amp;show_ip_bgp_instance_neighbors_cmd);</a>
<a name="ln11328">  install_element (VIEW_NODE, &amp;show_ip_bgp_instance_neighbors_peer_cmd);</a>
<a name="ln11329">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_neighbors_peer_cmd);</a>
<a name="ln11330">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_ipv4_neighbors_peer_cmd);</a>
<a name="ln11331">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_vpnv4_all_neighbors_peer_cmd);</a>
<a name="ln11332">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_vpnv4_rd_neighbors_peer_cmd);</a>
<a name="ln11333">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_instance_neighbors_peer_cmd);</a>
<a name="ln11334">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_neighbors_cmd);</a>
<a name="ln11335">  install_element (VIEW_NODE, &amp;show_bgp_ipv6_neighbors_peer_cmd);</a>
<a name="ln11336">  install_element (RESTRICTED_NODE, &amp;show_bgp_ipv6_neighbors_peer_cmd);</a>
<a name="ln11337">  install_element (VIEW_NODE, &amp;show_ipv6_bgp_summary_cmd);</a>
<a name="ln11338">  install_element (VIEW_NODE, &amp;show_ipv6_mbgp_summary_cmd);</a>
<a name="ln11339">  install_element (VIEW_NODE, &amp;show_ip_bgp_rsclient_summary_cmd);</a>
<a name="ln11340">  install_element (VIEW_NODE, &amp;show_ip_bgp_instance_rsclient_summary_cmd);</a>
<a name="ln11341">  install_element (VIEW_NODE, &amp;show_ip_bgp_ipv4_rsclient_summary_cmd);</a>
<a name="ln11342">  install_element (VIEW_NODE, &amp;show_ip_bgp_instance_ipv4_rsclient_summary_cmd);</a>
<a name="ln11343">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_rsclient_summary_cmd);</a>
<a name="ln11344">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_instance_rsclient_summary_cmd);</a>
<a name="ln11345">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_ipv4_rsclient_summary_cmd);</a>
<a name="ln11346">  install_element (RESTRICTED_NODE, &amp;show_ip_bgp_instance_ipv4_rsclient_summary_cmd);</a>
<a name="ln11347">  install_element (VIEW_NODE, &amp;show_ip_bgp_paths_cmd);</a>
<a name="ln11348">  install_element (VIEW_NODE, &amp;show_ip_bgp_ipv4_paths_cmd);</a>
<a name="ln11349">  /* Community-list. */</a>
<a name="ln11350">  community_list_vty ();</a>
<a name="ln11351">}</a>
<a name="ln11352"> </a>
<a name="ln11353">#include &quot;memory.h&quot;</a>
<a name="ln11354">#include &quot;bgp_regex.h&quot;</a>
<a name="ln11355">#include &quot;bgp_clist.h&quot;</a>
<a name="ln11356">#include &quot;bgp_ecommunity.h&quot;</a>
<a name="ln11357"> </a>
<a name="ln11358">/* VTY functions.  */</a>
<a name="ln11359"> </a>
<a name="ln11360">/* Direction value to string conversion.  */</a>
<a name="ln11361">static const char *</a>
<a name="ln11362">community_direct_str (int direct)</a>
<a name="ln11363">{</a>
<a name="ln11364">  switch (direct)</a>
<a name="ln11365">    {</a>
<a name="ln11366">    case COMMUNITY_DENY:</a>
<a name="ln11367">      return &quot;deny&quot;;</a>
<a name="ln11368">    case COMMUNITY_PERMIT:</a>
<a name="ln11369">      return &quot;permit&quot;;</a>
<a name="ln11370">    default:</a>
<a name="ln11371">      return &quot;unknown&quot;;</a>
<a name="ln11372">    }</a>
<a name="ln11373">}</a>
<a name="ln11374"> </a>
<a name="ln11375">/* Display error string.  */</a>
<a name="ln11376">static void</a>
<a name="ln11377">community_list_perror (struct vty *vty, int ret)</a>
<a name="ln11378">{</a>
<a name="ln11379">  switch (ret)</a>
<a name="ln11380">    {</a>
<a name="ln11381">    case COMMUNITY_LIST_ERR_CANT_FIND_LIST:</a>
<a name="ln11382">      vty_out (vty, &quot;%% Can't find community-list%s&quot;, VTY_NEWLINE);</a>
<a name="ln11383">      break;</a>
<a name="ln11384">    case COMMUNITY_LIST_ERR_MALFORMED_VAL:</a>
<a name="ln11385">      vty_out (vty, &quot;%% Malformed community-list value%s&quot;, VTY_NEWLINE);</a>
<a name="ln11386">      break;</a>
<a name="ln11387">    case COMMUNITY_LIST_ERR_STANDARD_CONFLICT:</a>
<a name="ln11388">      vty_out (vty, &quot;%% Community name conflict, previously defined as standard community%s&quot;, VTY_NEWLINE);</a>
<a name="ln11389">      break;</a>
<a name="ln11390">    case COMMUNITY_LIST_ERR_EXPANDED_CONFLICT:</a>
<a name="ln11391">      vty_out (vty, &quot;%% Community name conflict, previously defined as expanded community%s&quot;, VTY_NEWLINE);</a>
<a name="ln11392">      break;</a>
<a name="ln11393">    }</a>
<a name="ln11394">}</a>
<a name="ln11395"> </a>
<a name="ln11396">/* VTY interface for community_set() function.  */</a>
<a name="ln11397">static int</a>
<a name="ln11398">community_list_set_vty (struct vty *vty, int argc, const char **argv, </a>
<a name="ln11399">                        int style, int reject_all_digit_name)</a>
<a name="ln11400">{</a>
<a name="ln11401">  int ret;</a>
<a name="ln11402">  int direct;</a>
<a name="ln11403">  char *str;</a>
<a name="ln11404"> </a>
<a name="ln11405">  /* Check the list type. */</a>
<a name="ln11406">  if (strncmp (argv[1], &quot;p&quot;, 1) == 0)</a>
<a name="ln11407">    direct = COMMUNITY_PERMIT;</a>
<a name="ln11408">  else if (strncmp (argv[1], &quot;d&quot;, 1) == 0)</a>
<a name="ln11409">    direct = COMMUNITY_DENY;</a>
<a name="ln11410">  else</a>
<a name="ln11411">    {</a>
<a name="ln11412">      vty_out (vty, &quot;%% Matching condition must be permit or deny%s&quot;,</a>
<a name="ln11413">	       VTY_NEWLINE);</a>
<a name="ln11414">      return CMD_WARNING;</a>
<a name="ln11415">    }</a>
<a name="ln11416"> </a>
<a name="ln11417">  /* All digit name check.  */</a>
<a name="ln11418">  if (reject_all_digit_name &amp;&amp; all_digit (argv[0]))</a>
<a name="ln11419">    {</a>
<a name="ln11420">      vty_out (vty, &quot;%% Community name cannot have all digits%s&quot;, VTY_NEWLINE);</a>
<a name="ln11421">      return CMD_WARNING;</a>
<a name="ln11422">    }</a>
<a name="ln11423"> </a>
<a name="ln11424">  /* Concat community string argument.  */</a>
<a name="ln11425">  if (argc &gt; 1)</a>
<a name="ln11426">    str = argv_concat (argv, argc, 2);</a>
<a name="ln11427">  else</a>
<a name="ln11428">    str = NULL;</a>
<a name="ln11429"> </a>
<a name="ln11430">  /* When community_list_set() return nevetive value, it means</a>
<a name="ln11431">     malformed community string.  */</a>
<a name="ln11432">  ret = community_list_set (bgp_clist, argv[0], str, direct, style);</a>
<a name="ln11433"> </a>
<a name="ln11434">  /* Free temporary community list string allocated by</a>
<a name="ln11435">     argv_concat().  */</a>
<a name="ln11436">  if (str)</a>
<a name="ln11437">    XFREE (MTYPE_TMP, str);</a>
<a name="ln11438"> </a>
<a name="ln11439">  if (ret &lt; 0)</a>
<a name="ln11440">    {</a>
<a name="ln11441">      /* Display error string.  */</a>
<a name="ln11442">      community_list_perror (vty, ret);</a>
<a name="ln11443">      return CMD_WARNING;</a>
<a name="ln11444">    }</a>
<a name="ln11445"> </a>
<a name="ln11446">  return CMD_SUCCESS;</a>
<a name="ln11447">}</a>
<a name="ln11448"> </a>
<a name="ln11449">/* Communiyt-list entry delete.  */</a>
<a name="ln11450">static int</a>
<a name="ln11451">community_list_unset_vty (struct vty *vty, int argc, const char **argv,</a>
<a name="ln11452">			  int style)</a>
<a name="ln11453">{</a>
<a name="ln11454">  int ret;</a>
<a name="ln11455">  int direct = 0;</a>
<a name="ln11456">  char *str = NULL;</a>
<a name="ln11457"> </a>
<a name="ln11458">  if (argc &gt; 1)</a>
<a name="ln11459">    {</a>
<a name="ln11460">      /* Check the list direct. */</a>
<a name="ln11461">      if (strncmp (argv[1], &quot;p&quot;, 1) == 0)</a>
<a name="ln11462">	direct = COMMUNITY_PERMIT;</a>
<a name="ln11463">      else if (strncmp (argv[1], &quot;d&quot;, 1) == 0)</a>
<a name="ln11464">	direct = COMMUNITY_DENY;</a>
<a name="ln11465">      else</a>
<a name="ln11466">	{</a>
<a name="ln11467">	  vty_out (vty, &quot;%% Matching condition must be permit or deny%s&quot;,</a>
<a name="ln11468">		   VTY_NEWLINE);</a>
<a name="ln11469">	  return CMD_WARNING;</a>
<a name="ln11470">	}</a>
<a name="ln11471"> </a>
<a name="ln11472">      /* Concat community string argument.  */</a>
<a name="ln11473">      str = argv_concat (argv, argc, 2);</a>
<a name="ln11474">    }</a>
<a name="ln11475"> </a>
<a name="ln11476">  /* Unset community list.  */</a>
<a name="ln11477">  ret = community_list_unset (bgp_clist, argv[0], str, direct, style);</a>
<a name="ln11478"> </a>
<a name="ln11479">  /* Free temporary community list string allocated by</a>
<a name="ln11480">     argv_concat().  */</a>
<a name="ln11481">  if (str)</a>
<a name="ln11482">    XFREE (MTYPE_TMP, str);</a>
<a name="ln11483"> </a>
<a name="ln11484">  if (ret &lt; 0)</a>
<a name="ln11485">    {</a>
<a name="ln11486">      community_list_perror (vty, ret);</a>
<a name="ln11487">      return CMD_WARNING;</a>
<a name="ln11488">    }</a>
<a name="ln11489"> </a>
<a name="ln11490">  return CMD_SUCCESS;</a>
<a name="ln11491">}</a>
<a name="ln11492"> </a>
<a name="ln11493">/* &quot;community-list&quot; keyword help string.  */</a>
<a name="ln11494">#define COMMUNITY_LIST_STR &quot;Add a community list entry\n&quot;</a>
<a name="ln11495">#define COMMUNITY_VAL_STR  &quot;Community number in aa:nn format or internet|local-AS|no-advertise|no-export\n&quot;</a>
<a name="ln11496"> </a>
<a name="ln11497">DEFUN (ip_community_list_standard,</a>
<a name="ln11498">       ip_community_list_standard_cmd,</a>
<a name="ln11499">       &quot;ip community-list &lt;1-99&gt; (deny|permit) .AA:NN&quot;,</a>
<a name="ln11500">       IP_STR</a>
<a name="ln11501">       COMMUNITY_LIST_STR</a>
<a name="ln11502">       &quot;Community list number (standard)\n&quot;</a>
<a name="ln11503">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11504">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11505">       COMMUNITY_VAL_STR)</a>
<a name="ln11506">{</a>
<a name="ln11507">  return community_list_set_vty (vty, argc, argv, COMMUNITY_LIST_STANDARD, 0);</a>
<a name="ln11508">}</a>
<a name="ln11509"> </a>
<a name="ln11510">ALIAS (ip_community_list_standard,</a>
<a name="ln11511">       ip_community_list_standard2_cmd,</a>
<a name="ln11512">       &quot;ip community-list &lt;1-99&gt; (deny|permit)&quot;,</a>
<a name="ln11513">       IP_STR</a>
<a name="ln11514">       COMMUNITY_LIST_STR</a>
<a name="ln11515">       &quot;Community list number (standard)\n&quot;</a>
<a name="ln11516">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11517">       &quot;Specify community to accept\n&quot;)</a>
<a name="ln11518"> </a>
<a name="ln11519">DEFUN (ip_community_list_expanded,</a>
<a name="ln11520">       ip_community_list_expanded_cmd,</a>
<a name="ln11521">       &quot;ip community-list &lt;100-500&gt; (deny|permit) .LINE&quot;,</a>
<a name="ln11522">       IP_STR</a>
<a name="ln11523">       COMMUNITY_LIST_STR</a>
<a name="ln11524">       &quot;Community list number (expanded)\n&quot;</a>
<a name="ln11525">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11526">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11527">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln11528">{</a>
<a name="ln11529">  return community_list_set_vty (vty, argc, argv, COMMUNITY_LIST_EXPANDED, 0);</a>
<a name="ln11530">}</a>
<a name="ln11531"> </a>
<a name="ln11532">DEFUN (ip_community_list_name_standard,</a>
<a name="ln11533">       ip_community_list_name_standard_cmd,</a>
<a name="ln11534">       &quot;ip community-list standard WORD (deny|permit) .AA:NN&quot;,</a>
<a name="ln11535">       IP_STR</a>
<a name="ln11536">       COMMUNITY_LIST_STR</a>
<a name="ln11537">       &quot;Add a standard community-list entry\n&quot;</a>
<a name="ln11538">       &quot;Community list name\n&quot;</a>
<a name="ln11539">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11540">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11541">       COMMUNITY_VAL_STR)</a>
<a name="ln11542">{</a>
<a name="ln11543">  return community_list_set_vty (vty, argc, argv, COMMUNITY_LIST_STANDARD, 1);</a>
<a name="ln11544">}</a>
<a name="ln11545"> </a>
<a name="ln11546">ALIAS (ip_community_list_name_standard,</a>
<a name="ln11547">       ip_community_list_name_standard2_cmd,</a>
<a name="ln11548">       &quot;ip community-list standard WORD (deny|permit)&quot;,</a>
<a name="ln11549">       IP_STR</a>
<a name="ln11550">       COMMUNITY_LIST_STR</a>
<a name="ln11551">       &quot;Add a standard community-list entry\n&quot;</a>
<a name="ln11552">       &quot;Community list name\n&quot;</a>
<a name="ln11553">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11554">       &quot;Specify community to accept\n&quot;)</a>
<a name="ln11555"> </a>
<a name="ln11556">DEFUN (ip_community_list_name_expanded,</a>
<a name="ln11557">       ip_community_list_name_expanded_cmd,</a>
<a name="ln11558">       &quot;ip community-list expanded WORD (deny|permit) .LINE&quot;,</a>
<a name="ln11559">       IP_STR</a>
<a name="ln11560">       COMMUNITY_LIST_STR</a>
<a name="ln11561">       &quot;Add an expanded community-list entry\n&quot;</a>
<a name="ln11562">       &quot;Community list name\n&quot;</a>
<a name="ln11563">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11564">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11565">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln11566">{</a>
<a name="ln11567">  return community_list_set_vty (vty, argc, argv, COMMUNITY_LIST_EXPANDED, 1);</a>
<a name="ln11568">}</a>
<a name="ln11569"> </a>
<a name="ln11570">DEFUN (no_ip_community_list_standard_all,</a>
<a name="ln11571">       no_ip_community_list_standard_all_cmd,</a>
<a name="ln11572">       &quot;no ip community-list &lt;1-99&gt;&quot;,</a>
<a name="ln11573">       NO_STR</a>
<a name="ln11574">       IP_STR</a>
<a name="ln11575">       COMMUNITY_LIST_STR</a>
<a name="ln11576">       &quot;Community list number (standard)\n&quot;)</a>
<a name="ln11577">{</a>
<a name="ln11578">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_STANDARD);</a>
<a name="ln11579">}</a>
<a name="ln11580"> </a>
<a name="ln11581">DEFUN (no_ip_community_list_expanded_all,</a>
<a name="ln11582">       no_ip_community_list_expanded_all_cmd,</a>
<a name="ln11583">       &quot;no ip community-list &lt;100-500&gt;&quot;,</a>
<a name="ln11584">       NO_STR</a>
<a name="ln11585">       IP_STR</a>
<a name="ln11586">       COMMUNITY_LIST_STR</a>
<a name="ln11587">       &quot;Community list number (expanded)\n&quot;)</a>
<a name="ln11588">{</a>
<a name="ln11589">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_EXPANDED);</a>
<a name="ln11590">}</a>
<a name="ln11591"> </a>
<a name="ln11592">DEFUN (no_ip_community_list_name_standard_all,</a>
<a name="ln11593">       no_ip_community_list_name_standard_all_cmd,</a>
<a name="ln11594">       &quot;no ip community-list standard WORD&quot;,</a>
<a name="ln11595">       NO_STR</a>
<a name="ln11596">       IP_STR</a>
<a name="ln11597">       COMMUNITY_LIST_STR</a>
<a name="ln11598">       &quot;Add a standard community-list entry\n&quot;</a>
<a name="ln11599">       &quot;Community list name\n&quot;)</a>
<a name="ln11600">{</a>
<a name="ln11601">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_STANDARD);</a>
<a name="ln11602">}</a>
<a name="ln11603"> </a>
<a name="ln11604">DEFUN (no_ip_community_list_name_expanded_all,</a>
<a name="ln11605">       no_ip_community_list_name_expanded_all_cmd,</a>
<a name="ln11606">       &quot;no ip community-list expanded WORD&quot;,</a>
<a name="ln11607">       NO_STR</a>
<a name="ln11608">       IP_STR</a>
<a name="ln11609">       COMMUNITY_LIST_STR</a>
<a name="ln11610">       &quot;Add an expanded community-list entry\n&quot;</a>
<a name="ln11611">       &quot;Community list name\n&quot;)</a>
<a name="ln11612">{</a>
<a name="ln11613">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_EXPANDED);</a>
<a name="ln11614">}</a>
<a name="ln11615"> </a>
<a name="ln11616">DEFUN (no_ip_community_list_standard,</a>
<a name="ln11617">       no_ip_community_list_standard_cmd,</a>
<a name="ln11618">       &quot;no ip community-list &lt;1-99&gt; (deny|permit) .AA:NN&quot;,</a>
<a name="ln11619">       NO_STR</a>
<a name="ln11620">       IP_STR</a>
<a name="ln11621">       COMMUNITY_LIST_STR</a>
<a name="ln11622">       &quot;Community list number (standard)\n&quot;</a>
<a name="ln11623">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11624">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11625">       COMMUNITY_VAL_STR)</a>
<a name="ln11626">{</a>
<a name="ln11627">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_STANDARD);</a>
<a name="ln11628">}</a>
<a name="ln11629"> </a>
<a name="ln11630">DEFUN (no_ip_community_list_expanded,</a>
<a name="ln11631">       no_ip_community_list_expanded_cmd,</a>
<a name="ln11632">       &quot;no ip community-list &lt;100-500&gt; (deny|permit) .LINE&quot;,</a>
<a name="ln11633">       NO_STR</a>
<a name="ln11634">       IP_STR</a>
<a name="ln11635">       COMMUNITY_LIST_STR</a>
<a name="ln11636">       &quot;Community list number (expanded)\n&quot;</a>
<a name="ln11637">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11638">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11639">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln11640">{</a>
<a name="ln11641">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_EXPANDED);</a>
<a name="ln11642">}</a>
<a name="ln11643"> </a>
<a name="ln11644">DEFUN (no_ip_community_list_name_standard,</a>
<a name="ln11645">       no_ip_community_list_name_standard_cmd,</a>
<a name="ln11646">       &quot;no ip community-list standard WORD (deny|permit) .AA:NN&quot;,</a>
<a name="ln11647">       NO_STR</a>
<a name="ln11648">       IP_STR</a>
<a name="ln11649">       COMMUNITY_LIST_STR</a>
<a name="ln11650">       &quot;Specify a standard community-list\n&quot;</a>
<a name="ln11651">       &quot;Community list name\n&quot;</a>
<a name="ln11652">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11653">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11654">       COMMUNITY_VAL_STR)</a>
<a name="ln11655">{</a>
<a name="ln11656">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_STANDARD);</a>
<a name="ln11657">}</a>
<a name="ln11658"> </a>
<a name="ln11659">DEFUN (no_ip_community_list_name_expanded,</a>
<a name="ln11660">       no_ip_community_list_name_expanded_cmd,</a>
<a name="ln11661">       &quot;no ip community-list expanded WORD (deny|permit) .LINE&quot;,</a>
<a name="ln11662">       NO_STR</a>
<a name="ln11663">       IP_STR</a>
<a name="ln11664">       COMMUNITY_LIST_STR</a>
<a name="ln11665">       &quot;Specify an expanded community-list\n&quot;</a>
<a name="ln11666">       &quot;Community list name\n&quot;</a>
<a name="ln11667">       &quot;Specify community to reject\n&quot;</a>
<a name="ln11668">       &quot;Specify community to accept\n&quot;</a>
<a name="ln11669">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln11670">{</a>
<a name="ln11671">  return community_list_unset_vty (vty, argc, argv, COMMUNITY_LIST_EXPANDED);</a>
<a name="ln11672">}</a>
<a name="ln11673"> </a>
<a name="ln11674">static void</a>
<a name="ln11675">community_list_show (struct vty *vty, struct community_list *list)</a>
<a name="ln11676">{</a>
<a name="ln11677">  struct community_entry *entry;</a>
<a name="ln11678"> </a>
<a name="ln11679">  for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln11680">    {</a>
<a name="ln11681">      if (entry == list-&gt;head)</a>
<a name="ln11682">	{</a>
<a name="ln11683">	  if (all_digit (list-&gt;name))</a>
<a name="ln11684">	    vty_out (vty, &quot;Community %s list %s%s&quot;,</a>
<a name="ln11685">		     entry-&gt;style == COMMUNITY_LIST_STANDARD ?</a>
<a name="ln11686">		     &quot;standard&quot; : &quot;(expanded) access&quot;,</a>
<a name="ln11687">		     list-&gt;name, VTY_NEWLINE);</a>
<a name="ln11688">	  else</a>
<a name="ln11689">	    vty_out (vty, &quot;Named Community %s list %s%s&quot;,</a>
<a name="ln11690">		     entry-&gt;style == COMMUNITY_LIST_STANDARD ?</a>
<a name="ln11691">		     &quot;standard&quot; : &quot;expanded&quot;,</a>
<a name="ln11692">		     list-&gt;name, VTY_NEWLINE);</a>
<a name="ln11693">	}</a>
<a name="ln11694">      if (entry-&gt;any)</a>
<a name="ln11695">	vty_out (vty, &quot;    %s%s&quot;,</a>
<a name="ln11696">		 community_direct_str (entry-&gt;direct), VTY_NEWLINE);</a>
<a name="ln11697">      else</a>
<a name="ln11698">	vty_out (vty, &quot;    %s %s%s&quot;,</a>
<a name="ln11699">		 community_direct_str (entry-&gt;direct),</a>
<a name="ln11700">		 entry-&gt;style == COMMUNITY_LIST_STANDARD</a>
<a name="ln11701">		 ? community_str (entry-&gt;u.com) : entry-&gt;config,</a>
<a name="ln11702">		 VTY_NEWLINE);</a>
<a name="ln11703">    }</a>
<a name="ln11704">}</a>
<a name="ln11705"> </a>
<a name="ln11706">DEFUN (show_ip_community_list,</a>
<a name="ln11707">       show_ip_community_list_cmd,</a>
<a name="ln11708">       &quot;show ip community-list&quot;,</a>
<a name="ln11709">       SHOW_STR</a>
<a name="ln11710">       IP_STR</a>
<a name="ln11711">       &quot;List community-list\n&quot;)</a>
<a name="ln11712">{</a>
<a name="ln11713">  struct community_list *list;</a>
<a name="ln11714">  struct community_list_master *cm;</a>
<a name="ln11715"> </a>
<a name="ln11716">  cm = community_list_master_lookup (bgp_clist, COMMUNITY_LIST_MASTER);</a>
<a name="ln11717">  if (! cm)</a>
<a name="ln11718">    return CMD_SUCCESS;</a>
<a name="ln11719"> </a>
<a name="ln11720">  for (list = cm-&gt;num.head; list; list = list-&gt;next)</a>
<a name="ln11721">    community_list_show (vty, list);</a>
<a name="ln11722"> </a>
<a name="ln11723">  for (list = cm-&gt;str.head; list; list = list-&gt;next)</a>
<a name="ln11724">    community_list_show (vty, list);</a>
<a name="ln11725"> </a>
<a name="ln11726">  return CMD_SUCCESS;</a>
<a name="ln11727">}</a>
<a name="ln11728"> </a>
<a name="ln11729">DEFUN (show_ip_community_list_arg,</a>
<a name="ln11730">       show_ip_community_list_arg_cmd,</a>
<a name="ln11731">       &quot;show ip community-list (&lt;1-500&gt;|WORD)&quot;,</a>
<a name="ln11732">       SHOW_STR</a>
<a name="ln11733">       IP_STR</a>
<a name="ln11734">       &quot;List community-list\n&quot;</a>
<a name="ln11735">       &quot;Community-list number\n&quot;</a>
<a name="ln11736">       &quot;Community-list name\n&quot;)</a>
<a name="ln11737">{</a>
<a name="ln11738">  struct community_list *list;</a>
<a name="ln11739"> </a>
<a name="ln11740">  list = community_list_lookup (bgp_clist, argv[0], COMMUNITY_LIST_MASTER);</a>
<a name="ln11741">  if (! list)</a>
<a name="ln11742">    {</a>
<a name="ln11743">      vty_out (vty, &quot;%% Can't find community-list%s&quot;, VTY_NEWLINE);</a>
<a name="ln11744">      return CMD_WARNING;</a>
<a name="ln11745">    }</a>
<a name="ln11746"> </a>
<a name="ln11747">  community_list_show (vty, list);</a>
<a name="ln11748"> </a>
<a name="ln11749">  return CMD_SUCCESS;</a>
<a name="ln11750">}</a>
<a name="ln11751"> </a>
<a name="ln11752">/*</a>
<a name="ln11753"> * Large Community code.</a>
<a name="ln11754"> */</a>
<a name="ln11755">static int</a>
<a name="ln11756">lcommunity_list_set_vty (struct vty *vty, int argc, const char **argv,</a>
<a name="ln11757">			 int style, int reject_all_digit_name)</a>
<a name="ln11758">{</a>
<a name="ln11759">  int ret;</a>
<a name="ln11760">  int direct;</a>
<a name="ln11761">  char *str;</a>
<a name="ln11762"> </a>
<a name="ln11763">  /* Check the list type. */</a>
<a name="ln11764">  if (strncmp (argv[1], &quot;p&quot;, 1) == 0)</a>
<a name="ln11765">    direct = COMMUNITY_PERMIT;</a>
<a name="ln11766">  else if (strncmp (argv[1], &quot;d&quot;, 1) == 0)</a>
<a name="ln11767">    direct = COMMUNITY_DENY;</a>
<a name="ln11768">  else</a>
<a name="ln11769">    {</a>
<a name="ln11770">      vty_out (vty, &quot;%% Matching condition must be permit or deny%s&quot;,</a>
<a name="ln11771">	       VTY_NEWLINE);</a>
<a name="ln11772">      return CMD_WARNING;</a>
<a name="ln11773">    }</a>
<a name="ln11774"> </a>
<a name="ln11775">  /* All digit name check.  */</a>
<a name="ln11776">  if (reject_all_digit_name &amp;&amp; all_digit (argv[0]))</a>
<a name="ln11777">    {</a>
<a name="ln11778">      vty_out (vty, &quot;%% Community name cannot have all digits%s&quot;, VTY_NEWLINE);</a>
<a name="ln11779">      return CMD_WARNING;</a>
<a name="ln11780">    }</a>
<a name="ln11781"> </a>
<a name="ln11782">  /* Concat community string argument.  */</a>
<a name="ln11783">  if (argc &gt; 1)</a>
<a name="ln11784">    str = argv_concat (argv, argc, 2);</a>
<a name="ln11785">  else</a>
<a name="ln11786">    str = NULL;</a>
<a name="ln11787"> </a>
<a name="ln11788">  ret = lcommunity_list_set (bgp_clist, argv[0], str, direct, style);</a>
<a name="ln11789"> </a>
<a name="ln11790">  /* Free temporary community list string allocated by</a>
<a name="ln11791">     argv_concat().  */</a>
<a name="ln11792">  if (str)</a>
<a name="ln11793">    XFREE (MTYPE_TMP, str);</a>
<a name="ln11794"> </a>
<a name="ln11795">  if (ret &lt; 0)</a>
<a name="ln11796">    {</a>
<a name="ln11797">      community_list_perror (vty, ret);</a>
<a name="ln11798">      return CMD_WARNING;</a>
<a name="ln11799">    }</a>
<a name="ln11800">  return CMD_SUCCESS;</a>
<a name="ln11801">}</a>
<a name="ln11802"> </a>
<a name="ln11803">static int</a>
<a name="ln11804">lcommunity_list_unset_vty (struct vty *vty, int argc, const char **argv,</a>
<a name="ln11805">			   int style)</a>
<a name="ln11806">{</a>
<a name="ln11807">  int ret;</a>
<a name="ln11808">  int direct = 0;</a>
<a name="ln11809">  char *str = NULL;</a>
<a name="ln11810"> </a>
<a name="ln11811">  if (argc &gt; 1)</a>
<a name="ln11812">    {</a>
<a name="ln11813">      /* Check the list direct. */</a>
<a name="ln11814">      if (strncmp (argv[1], &quot;p&quot;, 1) == 0)</a>
<a name="ln11815">	direct = COMMUNITY_PERMIT;</a>
<a name="ln11816">      else if (strncmp (argv[1], &quot;d&quot;, 1) == 0)</a>
<a name="ln11817">	direct = COMMUNITY_DENY;</a>
<a name="ln11818">      else</a>
<a name="ln11819">	{</a>
<a name="ln11820">	  vty_out (vty, &quot;%% Matching condition must be permit or deny%s&quot;,</a>
<a name="ln11821">		   VTY_NEWLINE);</a>
<a name="ln11822">	  return CMD_WARNING;</a>
<a name="ln11823">	}</a>
<a name="ln11824"> </a>
<a name="ln11825">      /* Concat community string argument.  */</a>
<a name="ln11826">      str = argv_concat (argv, argc, 2);</a>
<a name="ln11827">    }</a>
<a name="ln11828"> </a>
<a name="ln11829">  /* Unset community list.  */</a>
<a name="ln11830">  ret = lcommunity_list_unset (bgp_clist, argv[0], str, direct, style);</a>
<a name="ln11831"> </a>
<a name="ln11832">  /* Free temporary community list string allocated by</a>
<a name="ln11833">     argv_concat().  */</a>
<a name="ln11834">  if (str)</a>
<a name="ln11835">    XFREE (MTYPE_TMP, str);</a>
<a name="ln11836"> </a>
<a name="ln11837">  if (ret &lt; 0)</a>
<a name="ln11838">    {</a>
<a name="ln11839">      community_list_perror (vty, ret);</a>
<a name="ln11840">      return CMD_WARNING;</a>
<a name="ln11841">    }</a>
<a name="ln11842"> </a>
<a name="ln11843">  return CMD_SUCCESS;</a>
<a name="ln11844">}</a>
<a name="ln11845"> </a>
<a name="ln11846">/* &quot;large-community-list&quot; keyword help string.  */</a>
<a name="ln11847">#define LCOMMUNITY_LIST_STR &quot;Add a large community list entry\n&quot;</a>
<a name="ln11848">#define LCOMMUNITY_VAL_STR  &quot;large community in 'aa:bb:cc' format\n&quot;</a>
<a name="ln11849"> </a>
<a name="ln11850">DEFUN (ip_lcommunity_list_standard,</a>
<a name="ln11851">       ip_lcommunity_list_standard_cmd,</a>
<a name="ln11852">       &quot;ip large-community-list &lt;1-99&gt; (deny|permit) .AA:BB:CC&quot;,</a>
<a name="ln11853">       IP_STR</a>
<a name="ln11854">       LCOMMUNITY_LIST_STR</a>
<a name="ln11855">       &quot;Large Community list number (standard)\n&quot;</a>
<a name="ln11856">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11857">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln11858">       LCOMMUNITY_VAL_STR)</a>
<a name="ln11859">{</a>
<a name="ln11860">  return lcommunity_list_set_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_STANDARD, 0);</a>
<a name="ln11861">}</a>
<a name="ln11862"> </a>
<a name="ln11863">ALIAS (ip_lcommunity_list_standard,</a>
<a name="ln11864">       ip_lcommunity_list_standard2_cmd,</a>
<a name="ln11865">       &quot;ip large-community-list &lt;1-99&gt; (deny|permit)&quot;,</a>
<a name="ln11866">       IP_STR</a>
<a name="ln11867">       LCOMMUNITY_LIST_STR</a>
<a name="ln11868">       &quot;Large Community list number (standard)\n&quot;</a>
<a name="ln11869">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11870">       &quot;Specify large community to accept\n&quot;)</a>
<a name="ln11871"> </a>
<a name="ln11872">DEFUN (ip_lcommunity_list_expanded,</a>
<a name="ln11873">       ip_lcommunity_list_expanded_cmd,</a>
<a name="ln11874">       &quot;ip large-community-list &lt;100-500&gt; (deny|permit) .LINE&quot;,</a>
<a name="ln11875">       IP_STR</a>
<a name="ln11876">       LCOMMUNITY_LIST_STR</a>
<a name="ln11877">       &quot;Large Community list number (expanded)\n&quot;</a>
<a name="ln11878">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11879">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln11880">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln11881">{</a>
<a name="ln11882">  return lcommunity_list_set_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_EXPANDED, 0);</a>
<a name="ln11883">}</a>
<a name="ln11884"> </a>
<a name="ln11885">DEFUN (ip_lcommunity_list_name_standard,</a>
<a name="ln11886">       ip_lcommunity_list_name_standard_cmd,</a>
<a name="ln11887">       &quot;ip large-community-list standard WORD (deny|permit) .AA:BB.CC&quot;,</a>
<a name="ln11888">       IP_STR</a>
<a name="ln11889">       LCOMMUNITY_LIST_STR</a>
<a name="ln11890">       &quot;Specify standard large-community-list\n&quot;</a>
<a name="ln11891">       &quot;Large Community list name\n&quot;</a>
<a name="ln11892">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11893">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln11894">       LCOMMUNITY_VAL_STR)</a>
<a name="ln11895">{</a>
<a name="ln11896">  return lcommunity_list_set_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_STANDARD, 1);</a>
<a name="ln11897">}</a>
<a name="ln11898"> </a>
<a name="ln11899">ALIAS (ip_lcommunity_list_name_standard,</a>
<a name="ln11900">       ip_lcommunity_list_name_standard2_cmd,</a>
<a name="ln11901">       &quot;ip large-community-list standard WORD (deny|permit)&quot;,</a>
<a name="ln11902">       IP_STR</a>
<a name="ln11903">       LCOMMUNITY_LIST_STR</a>
<a name="ln11904">       &quot;Specify standard large-community-list\n&quot;</a>
<a name="ln11905">       &quot;Large Community list name\n&quot;</a>
<a name="ln11906">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11907">       &quot;Specify large community to accept\n&quot;)</a>
<a name="ln11908"> </a>
<a name="ln11909">DEFUN (ip_lcommunity_list_name_expanded,</a>
<a name="ln11910">       ip_lcommunity_list_name_expanded_cmd,</a>
<a name="ln11911">       &quot;ip large-community-list expanded WORD (deny|permit) .LINE&quot;,</a>
<a name="ln11912">       IP_STR</a>
<a name="ln11913">       LCOMMUNITY_LIST_STR</a>
<a name="ln11914">       &quot;Specify expanded large-community-list\n&quot;</a>
<a name="ln11915">       &quot;Large Community list name\n&quot;</a>
<a name="ln11916">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11917">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln11918">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln11919">{</a>
<a name="ln11920">  return lcommunity_list_set_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_EXPANDED, 1);</a>
<a name="ln11921">}</a>
<a name="ln11922"> </a>
<a name="ln11923">DEFUN (no_ip_lcommunity_list_standard_all,</a>
<a name="ln11924">       no_ip_lcommunity_list_standard_all_cmd,</a>
<a name="ln11925">       &quot;no ip large-community-list &lt;1-99&gt;&quot;,</a>
<a name="ln11926">       NO_STR</a>
<a name="ln11927">       IP_STR</a>
<a name="ln11928">       LCOMMUNITY_LIST_STR</a>
<a name="ln11929">       &quot;Large Community list number (standard)\n&quot;)</a>
<a name="ln11930">{</a>
<a name="ln11931">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_STANDARD);</a>
<a name="ln11932">}</a>
<a name="ln11933"> </a>
<a name="ln11934">DEFUN (no_ip_lcommunity_list_expanded_all,</a>
<a name="ln11935">       no_ip_lcommunity_list_expanded_all_cmd,</a>
<a name="ln11936">       &quot;no ip large-community-list &lt;100-500&gt;&quot;,</a>
<a name="ln11937">       NO_STR</a>
<a name="ln11938">       IP_STR</a>
<a name="ln11939">       LCOMMUNITY_LIST_STR</a>
<a name="ln11940">       &quot;Large Community list number (expanded)\n&quot;)</a>
<a name="ln11941">{</a>
<a name="ln11942">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_EXPANDED);</a>
<a name="ln11943">}</a>
<a name="ln11944"> </a>
<a name="ln11945">DEFUN (no_ip_lcommunity_list_name_standard_all,</a>
<a name="ln11946">       no_ip_lcommunity_list_name_standard_all_cmd,</a>
<a name="ln11947">       &quot;no ip large-community-list standard WORD&quot;,</a>
<a name="ln11948">       NO_STR</a>
<a name="ln11949">       IP_STR</a>
<a name="ln11950">       LCOMMUNITY_LIST_STR</a>
<a name="ln11951">       &quot;Specify standard large-community-list\n&quot;</a>
<a name="ln11952">       &quot;Large Community list name\n&quot;)</a>
<a name="ln11953">{</a>
<a name="ln11954">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_STANDARD);</a>
<a name="ln11955">}</a>
<a name="ln11956"> </a>
<a name="ln11957">DEFUN (no_ip_lcommunity_list_name_expanded_all,</a>
<a name="ln11958">       no_ip_lcommunity_list_name_expanded_all_cmd,</a>
<a name="ln11959">       &quot;no ip large-community-list expanded WORD&quot;,</a>
<a name="ln11960">       NO_STR</a>
<a name="ln11961">       IP_STR</a>
<a name="ln11962">       LCOMMUNITY_LIST_STR</a>
<a name="ln11963">       &quot;Specify expanded large-community-list\n&quot;</a>
<a name="ln11964">       &quot;Large Community list name\n&quot;)</a>
<a name="ln11965">{</a>
<a name="ln11966">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_EXPANDED);</a>
<a name="ln11967">}</a>
<a name="ln11968"> </a>
<a name="ln11969">DEFUN (no_ip_lcommunity_list_standard,</a>
<a name="ln11970">       no_ip_lcommunity_list_standard_cmd,</a>
<a name="ln11971">       &quot;no ip large-community-list &lt;1-99&gt; (deny|permit) .AA:.AA:NN&quot;,</a>
<a name="ln11972">       NO_STR</a>
<a name="ln11973">       IP_STR</a>
<a name="ln11974">       LCOMMUNITY_LIST_STR</a>
<a name="ln11975">       &quot;Large Community list number (standard)\n&quot;</a>
<a name="ln11976">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11977">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln11978">       LCOMMUNITY_VAL_STR)</a>
<a name="ln11979">{</a>
<a name="ln11980">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_STANDARD);</a>
<a name="ln11981">}</a>
<a name="ln11982"> </a>
<a name="ln11983">DEFUN (no_ip_lcommunity_list_expanded,</a>
<a name="ln11984">       no_ip_lcommunity_list_expanded_cmd,</a>
<a name="ln11985">       &quot;no ip large-community-list &lt;100-500&gt; (deny|permit) .LINE&quot;,</a>
<a name="ln11986">       NO_STR</a>
<a name="ln11987">       IP_STR</a>
<a name="ln11988">       LCOMMUNITY_LIST_STR</a>
<a name="ln11989">       &quot;Large Community list number (expanded)\n&quot;</a>
<a name="ln11990">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln11991">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln11992">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln11993">{</a>
<a name="ln11994">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_EXPANDED);</a>
<a name="ln11995">}</a>
<a name="ln11996"> </a>
<a name="ln11997">DEFUN (no_ip_lcommunity_list_name_standard,</a>
<a name="ln11998">       no_ip_lcommunity_list_name_standard_cmd,</a>
<a name="ln11999">       &quot;no ip large-community-list standard WORD (deny|permit) .AA:.AA:NN&quot;,</a>
<a name="ln12000">       NO_STR</a>
<a name="ln12001">       IP_STR</a>
<a name="ln12002">       LCOMMUNITY_LIST_STR</a>
<a name="ln12003">       &quot;Specify standard large-community-list\n&quot;</a>
<a name="ln12004">       &quot;Large Community list name\n&quot;</a>
<a name="ln12005">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln12006">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln12007">       LCOMMUNITY_VAL_STR)</a>
<a name="ln12008">{</a>
<a name="ln12009">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_STANDARD);</a>
<a name="ln12010">}</a>
<a name="ln12011"> </a>
<a name="ln12012">DEFUN (no_ip_lcommunity_list_name_expanded,</a>
<a name="ln12013">       no_ip_lcommunity_list_name_expanded_cmd,</a>
<a name="ln12014">       &quot;no ip large-community-list expanded WORD (deny|permit) .LINE&quot;,</a>
<a name="ln12015">       NO_STR</a>
<a name="ln12016">       IP_STR</a>
<a name="ln12017">       LCOMMUNITY_LIST_STR</a>
<a name="ln12018">       &quot;Specify expanded large-community-list\n&quot;</a>
<a name="ln12019">       &quot;Large community list name\n&quot;</a>
<a name="ln12020">       &quot;Specify large community to reject\n&quot;</a>
<a name="ln12021">       &quot;Specify large community to accept\n&quot;</a>
<a name="ln12022">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln12023">{</a>
<a name="ln12024">  return lcommunity_list_unset_vty (vty, argc, argv, LARGE_COMMUNITY_LIST_EXPANDED);</a>
<a name="ln12025">}</a>
<a name="ln12026"> </a>
<a name="ln12027">static void</a>
<a name="ln12028">lcommunity_list_show (struct vty *vty, struct community_list *list)</a>
<a name="ln12029">{</a>
<a name="ln12030">  struct community_entry *entry;</a>
<a name="ln12031"> </a>
<a name="ln12032">  for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12033">    {</a>
<a name="ln12034">      if (entry == list-&gt;head)</a>
<a name="ln12035">	{</a>
<a name="ln12036">	  if (all_digit (list-&gt;name))</a>
<a name="ln12037">	    vty_out (vty, &quot;Large community %s list %s%s&quot;,</a>
<a name="ln12038">		     entry-&gt;style == EXTCOMMUNITY_LIST_STANDARD ?</a>
<a name="ln12039">		     &quot;standard&quot; : &quot;(expanded) access&quot;,</a>
<a name="ln12040">		     list-&gt;name, VTY_NEWLINE);</a>
<a name="ln12041">	  else</a>
<a name="ln12042">	    vty_out (vty, &quot;Named large community %s list %s%s&quot;,</a>
<a name="ln12043">		     entry-&gt;style == EXTCOMMUNITY_LIST_STANDARD ?</a>
<a name="ln12044">		     &quot;standard&quot; : &quot;expanded&quot;,</a>
<a name="ln12045">		     list-&gt;name, VTY_NEWLINE);</a>
<a name="ln12046">	}</a>
<a name="ln12047">      if (entry-&gt;any)</a>
<a name="ln12048">	vty_out (vty, &quot;    %s%s&quot;,</a>
<a name="ln12049">		 community_direct_str (entry-&gt;direct), VTY_NEWLINE);</a>
<a name="ln12050">      else</a>
<a name="ln12051">	vty_out (vty, &quot;    %s %s%s&quot;,</a>
<a name="ln12052">		 community_direct_str (entry-&gt;direct),</a>
<a name="ln12053">		 entry-&gt;style == EXTCOMMUNITY_LIST_STANDARD ?</a>
<a name="ln12054">		 entry-&gt;u.ecom-&gt;str : entry-&gt;config,</a>
<a name="ln12055">		 VTY_NEWLINE);</a>
<a name="ln12056">    }</a>
<a name="ln12057">}</a>
<a name="ln12058"> </a>
<a name="ln12059">DEFUN (show_ip_lcommunity_list,</a>
<a name="ln12060">       show_ip_lcommunity_list_cmd,</a>
<a name="ln12061">       &quot;show ip large-community-list&quot;,</a>
<a name="ln12062">       SHOW_STR</a>
<a name="ln12063">       IP_STR</a>
<a name="ln12064">       &quot;List large-community list\n&quot;)</a>
<a name="ln12065">{</a>
<a name="ln12066">  struct community_list *list;</a>
<a name="ln12067">  struct community_list_master *cm;</a>
<a name="ln12068"> </a>
<a name="ln12069">  cm = community_list_master_lookup (bgp_clist, LARGE_COMMUNITY_LIST_MASTER);</a>
<a name="ln12070">  if (! cm)</a>
<a name="ln12071">    return CMD_SUCCESS;</a>
<a name="ln12072"> </a>
<a name="ln12073">  for (list = cm-&gt;num.head; list; list = list-&gt;next)</a>
<a name="ln12074">    lcommunity_list_show (vty, list);</a>
<a name="ln12075"> </a>
<a name="ln12076">  for (list = cm-&gt;str.head; list; list = list-&gt;next)</a>
<a name="ln12077">    lcommunity_list_show (vty, list);</a>
<a name="ln12078"> </a>
<a name="ln12079">  return CMD_SUCCESS;</a>
<a name="ln12080">}</a>
<a name="ln12081"> </a>
<a name="ln12082">DEFUN (show_ip_lcommunity_list_arg,</a>
<a name="ln12083">       show_ip_lcommunity_list_arg_cmd,</a>
<a name="ln12084">       &quot;show ip large-community-list (&lt;1-500&gt;|WORD)&quot;,</a>
<a name="ln12085">       SHOW_STR</a>
<a name="ln12086">       IP_STR</a>
<a name="ln12087">       &quot;List large-community list\n&quot;</a>
<a name="ln12088">       &quot;large-community-list number\n&quot;</a>
<a name="ln12089">       &quot;large-community-list name\n&quot;)</a>
<a name="ln12090">{</a>
<a name="ln12091">  struct community_list *list;</a>
<a name="ln12092"> </a>
<a name="ln12093">  list = community_list_lookup (bgp_clist, argv[0], LARGE_COMMUNITY_LIST_MASTER);</a>
<a name="ln12094">  if (! list)</a>
<a name="ln12095">    {</a>
<a name="ln12096">      vty_out (vty, &quot;%% Can't find extcommunity-list%s&quot;, VTY_NEWLINE);</a>
<a name="ln12097">      return CMD_WARNING;</a>
<a name="ln12098">    }</a>
<a name="ln12099"> </a>
<a name="ln12100">  lcommunity_list_show (vty, list);</a>
<a name="ln12101"> </a>
<a name="ln12102">  return CMD_SUCCESS;</a>
<a name="ln12103">}</a>
<a name="ln12104"> </a>
<a name="ln12105">static int</a>
<a name="ln12106">extcommunity_list_set_vty (struct vty *vty, int argc, const char **argv, </a>
<a name="ln12107">                           int style, int reject_all_digit_name)</a>
<a name="ln12108">{</a>
<a name="ln12109">  int ret;</a>
<a name="ln12110">  int direct;</a>
<a name="ln12111">  char *str;</a>
<a name="ln12112"> </a>
<a name="ln12113">  /* Check the list type. */</a>
<a name="ln12114">  if (strncmp (argv[1], &quot;p&quot;, 1) == 0)</a>
<a name="ln12115">    direct = COMMUNITY_PERMIT;</a>
<a name="ln12116">  else if (strncmp (argv[1], &quot;d&quot;, 1) == 0)</a>
<a name="ln12117">    direct = COMMUNITY_DENY;</a>
<a name="ln12118">  else</a>
<a name="ln12119">    {</a>
<a name="ln12120">      vty_out (vty, &quot;%% Matching condition must be permit or deny%s&quot;,</a>
<a name="ln12121">	       VTY_NEWLINE);</a>
<a name="ln12122">      return CMD_WARNING;</a>
<a name="ln12123">    }</a>
<a name="ln12124"> </a>
<a name="ln12125">  /* All digit name check.  */</a>
<a name="ln12126">  if (reject_all_digit_name &amp;&amp; all_digit (argv[0]))</a>
<a name="ln12127">    {</a>
<a name="ln12128">      vty_out (vty, &quot;%% Community name cannot have all digits%s&quot;, VTY_NEWLINE);</a>
<a name="ln12129">      return CMD_WARNING;</a>
<a name="ln12130">    }</a>
<a name="ln12131"> </a>
<a name="ln12132">  /* Concat community string argument.  */</a>
<a name="ln12133">  if (argc &gt; 1)</a>
<a name="ln12134">    str = argv_concat (argv, argc, 2);</a>
<a name="ln12135">  else</a>
<a name="ln12136">    str = NULL;</a>
<a name="ln12137"> </a>
<a name="ln12138">  ret = extcommunity_list_set (bgp_clist, argv[0], str, direct, style);</a>
<a name="ln12139"> </a>
<a name="ln12140">  /* Free temporary community list string allocated by</a>
<a name="ln12141">     argv_concat().  */</a>
<a name="ln12142">  if (str)</a>
<a name="ln12143">    XFREE (MTYPE_TMP, str);</a>
<a name="ln12144"> </a>
<a name="ln12145">  if (ret &lt; 0)</a>
<a name="ln12146">    {</a>
<a name="ln12147">      community_list_perror (vty, ret);</a>
<a name="ln12148">      return CMD_WARNING;</a>
<a name="ln12149">    }</a>
<a name="ln12150">  return CMD_SUCCESS;</a>
<a name="ln12151">}</a>
<a name="ln12152"> </a>
<a name="ln12153">static int</a>
<a name="ln12154">extcommunity_list_unset_vty (struct vty *vty, int argc, const char **argv,</a>
<a name="ln12155">			     int style)</a>
<a name="ln12156">{</a>
<a name="ln12157">  int ret;</a>
<a name="ln12158">  int direct = 0;</a>
<a name="ln12159">  char *str = NULL;</a>
<a name="ln12160"> </a>
<a name="ln12161">  if (argc &gt; 1)</a>
<a name="ln12162">    {</a>
<a name="ln12163">      /* Check the list direct. */</a>
<a name="ln12164">      if (strncmp (argv[1], &quot;p&quot;, 1) == 0)</a>
<a name="ln12165">	direct = COMMUNITY_PERMIT;</a>
<a name="ln12166">      else if (strncmp (argv[1], &quot;d&quot;, 1) == 0)</a>
<a name="ln12167">	direct = COMMUNITY_DENY;</a>
<a name="ln12168">      else</a>
<a name="ln12169">	{</a>
<a name="ln12170">	  vty_out (vty, &quot;%% Matching condition must be permit or deny%s&quot;,</a>
<a name="ln12171">		   VTY_NEWLINE);</a>
<a name="ln12172">	  return CMD_WARNING;</a>
<a name="ln12173">	}</a>
<a name="ln12174"> </a>
<a name="ln12175">      /* Concat community string argument.  */</a>
<a name="ln12176">      str = argv_concat (argv, argc, 2);</a>
<a name="ln12177">    }</a>
<a name="ln12178"> </a>
<a name="ln12179">  /* Unset community list.  */</a>
<a name="ln12180">  ret = extcommunity_list_unset (bgp_clist, argv[0], str, direct, style);</a>
<a name="ln12181"> </a>
<a name="ln12182">  /* Free temporary community list string allocated by</a>
<a name="ln12183">     argv_concat().  */</a>
<a name="ln12184">  if (str)</a>
<a name="ln12185">    XFREE (MTYPE_TMP, str);</a>
<a name="ln12186"> </a>
<a name="ln12187">  if (ret &lt; 0)</a>
<a name="ln12188">    {</a>
<a name="ln12189">      community_list_perror (vty, ret);</a>
<a name="ln12190">      return CMD_WARNING;</a>
<a name="ln12191">    }</a>
<a name="ln12192"> </a>
<a name="ln12193">  return CMD_SUCCESS;</a>
<a name="ln12194">}</a>
<a name="ln12195"> </a>
<a name="ln12196">/* &quot;extcommunity-list&quot; keyword help string.  */</a>
<a name="ln12197">#define EXTCOMMUNITY_LIST_STR &quot;Add a extended community list entry\n&quot;</a>
<a name="ln12198">#define EXTCOMMUNITY_VAL_STR  &quot;Extended community attribute in 'rt aa:nn_or_IPaddr:nn' OR 'soo aa:nn_or_IPaddr:nn' format\n&quot;</a>
<a name="ln12199"> </a>
<a name="ln12200">DEFUN (ip_extcommunity_list_standard,</a>
<a name="ln12201">       ip_extcommunity_list_standard_cmd,</a>
<a name="ln12202">       &quot;ip extcommunity-list &lt;1-99&gt; (deny|permit) .AA:NN&quot;,</a>
<a name="ln12203">       IP_STR</a>
<a name="ln12204">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12205">       &quot;Extended Community list number (standard)\n&quot;</a>
<a name="ln12206">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12207">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12208">       EXTCOMMUNITY_VAL_STR)</a>
<a name="ln12209">{</a>
<a name="ln12210">  return extcommunity_list_set_vty (vty, argc, argv, EXTCOMMUNITY_LIST_STANDARD, 0);</a>
<a name="ln12211">}</a>
<a name="ln12212"> </a>
<a name="ln12213">ALIAS (ip_extcommunity_list_standard,</a>
<a name="ln12214">       ip_extcommunity_list_standard2_cmd,</a>
<a name="ln12215">       &quot;ip extcommunity-list &lt;1-99&gt; (deny|permit)&quot;,</a>
<a name="ln12216">       IP_STR</a>
<a name="ln12217">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12218">       &quot;Extended Community list number (standard)\n&quot;</a>
<a name="ln12219">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12220">       &quot;Specify community to accept\n&quot;)</a>
<a name="ln12221"> </a>
<a name="ln12222">DEFUN (ip_extcommunity_list_expanded,</a>
<a name="ln12223">       ip_extcommunity_list_expanded_cmd,</a>
<a name="ln12224">       &quot;ip extcommunity-list &lt;100-500&gt; (deny|permit) .LINE&quot;,</a>
<a name="ln12225">       IP_STR</a>
<a name="ln12226">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12227">       &quot;Extended Community list number (expanded)\n&quot;</a>
<a name="ln12228">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12229">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12230">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln12231">{</a>
<a name="ln12232">  return extcommunity_list_set_vty (vty, argc, argv, EXTCOMMUNITY_LIST_EXPANDED, 0);</a>
<a name="ln12233">}</a>
<a name="ln12234"> </a>
<a name="ln12235">DEFUN (ip_extcommunity_list_name_standard,</a>
<a name="ln12236">       ip_extcommunity_list_name_standard_cmd,</a>
<a name="ln12237">       &quot;ip extcommunity-list standard WORD (deny|permit) .AA:NN&quot;,</a>
<a name="ln12238">       IP_STR</a>
<a name="ln12239">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12240">       &quot;Specify standard extcommunity-list\n&quot;</a>
<a name="ln12241">       &quot;Extended Community list name\n&quot;</a>
<a name="ln12242">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12243">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12244">       EXTCOMMUNITY_VAL_STR)</a>
<a name="ln12245">{</a>
<a name="ln12246">  return extcommunity_list_set_vty (vty, argc, argv, EXTCOMMUNITY_LIST_STANDARD, 1);</a>
<a name="ln12247">}</a>
<a name="ln12248"> </a>
<a name="ln12249">ALIAS (ip_extcommunity_list_name_standard,</a>
<a name="ln12250">       ip_extcommunity_list_name_standard2_cmd,</a>
<a name="ln12251">       &quot;ip extcommunity-list standard WORD (deny|permit)&quot;,</a>
<a name="ln12252">       IP_STR</a>
<a name="ln12253">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12254">       &quot;Specify standard extcommunity-list\n&quot;</a>
<a name="ln12255">       &quot;Extended Community list name\n&quot;</a>
<a name="ln12256">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12257">       &quot;Specify community to accept\n&quot;)</a>
<a name="ln12258"> </a>
<a name="ln12259">DEFUN (ip_extcommunity_list_name_expanded,</a>
<a name="ln12260">       ip_extcommunity_list_name_expanded_cmd,</a>
<a name="ln12261">       &quot;ip extcommunity-list expanded WORD (deny|permit) .LINE&quot;,</a>
<a name="ln12262">       IP_STR</a>
<a name="ln12263">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12264">       &quot;Specify expanded extcommunity-list\n&quot;</a>
<a name="ln12265">       &quot;Extended Community list name\n&quot;</a>
<a name="ln12266">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12267">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12268">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln12269">{</a>
<a name="ln12270">  return extcommunity_list_set_vty (vty, argc, argv, EXTCOMMUNITY_LIST_EXPANDED, 1);</a>
<a name="ln12271">}</a>
<a name="ln12272"> </a>
<a name="ln12273">DEFUN (no_ip_extcommunity_list_standard_all,</a>
<a name="ln12274">       no_ip_extcommunity_list_standard_all_cmd,</a>
<a name="ln12275">       &quot;no ip extcommunity-list &lt;1-99&gt;&quot;,</a>
<a name="ln12276">       NO_STR</a>
<a name="ln12277">       IP_STR</a>
<a name="ln12278">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12279">       &quot;Extended Community list number (standard)\n&quot;)</a>
<a name="ln12280">{</a>
<a name="ln12281">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_STANDARD);</a>
<a name="ln12282">}</a>
<a name="ln12283"> </a>
<a name="ln12284">DEFUN (no_ip_extcommunity_list_expanded_all,</a>
<a name="ln12285">       no_ip_extcommunity_list_expanded_all_cmd,</a>
<a name="ln12286">       &quot;no ip extcommunity-list &lt;100-500&gt;&quot;,</a>
<a name="ln12287">       NO_STR</a>
<a name="ln12288">       IP_STR</a>
<a name="ln12289">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12290">       &quot;Extended Community list number (expanded)\n&quot;)</a>
<a name="ln12291">{</a>
<a name="ln12292">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_EXPANDED);</a>
<a name="ln12293">}</a>
<a name="ln12294"> </a>
<a name="ln12295">DEFUN (no_ip_extcommunity_list_name_standard_all,</a>
<a name="ln12296">       no_ip_extcommunity_list_name_standard_all_cmd,</a>
<a name="ln12297">       &quot;no ip extcommunity-list standard WORD&quot;,</a>
<a name="ln12298">       NO_STR</a>
<a name="ln12299">       IP_STR</a>
<a name="ln12300">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12301">       &quot;Specify standard extcommunity-list\n&quot;</a>
<a name="ln12302">       &quot;Extended Community list name\n&quot;)</a>
<a name="ln12303">{</a>
<a name="ln12304">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_STANDARD);</a>
<a name="ln12305">}</a>
<a name="ln12306"> </a>
<a name="ln12307">DEFUN (no_ip_extcommunity_list_name_expanded_all,</a>
<a name="ln12308">       no_ip_extcommunity_list_name_expanded_all_cmd,</a>
<a name="ln12309">       &quot;no ip extcommunity-list expanded WORD&quot;,</a>
<a name="ln12310">       NO_STR</a>
<a name="ln12311">       IP_STR</a>
<a name="ln12312">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12313">       &quot;Specify expanded extcommunity-list\n&quot;</a>
<a name="ln12314">       &quot;Extended Community list name\n&quot;)</a>
<a name="ln12315">{</a>
<a name="ln12316">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_EXPANDED);</a>
<a name="ln12317">}</a>
<a name="ln12318"> </a>
<a name="ln12319">DEFUN (no_ip_extcommunity_list_standard,</a>
<a name="ln12320">       no_ip_extcommunity_list_standard_cmd,</a>
<a name="ln12321">       &quot;no ip extcommunity-list &lt;1-99&gt; (deny|permit) .AA:NN&quot;,</a>
<a name="ln12322">       NO_STR</a>
<a name="ln12323">       IP_STR</a>
<a name="ln12324">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12325">       &quot;Extended Community list number (standard)\n&quot;</a>
<a name="ln12326">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12327">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12328">       EXTCOMMUNITY_VAL_STR)</a>
<a name="ln12329">{</a>
<a name="ln12330">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_STANDARD);</a>
<a name="ln12331">}</a>
<a name="ln12332"> </a>
<a name="ln12333">DEFUN (no_ip_extcommunity_list_expanded,</a>
<a name="ln12334">       no_ip_extcommunity_list_expanded_cmd,</a>
<a name="ln12335">       &quot;no ip extcommunity-list &lt;100-500&gt; (deny|permit) .LINE&quot;,</a>
<a name="ln12336">       NO_STR</a>
<a name="ln12337">       IP_STR</a>
<a name="ln12338">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12339">       &quot;Extended Community list number (expanded)\n&quot;</a>
<a name="ln12340">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12341">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12342">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln12343">{</a>
<a name="ln12344">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_EXPANDED);</a>
<a name="ln12345">}</a>
<a name="ln12346"> </a>
<a name="ln12347">DEFUN (no_ip_extcommunity_list_name_standard,</a>
<a name="ln12348">       no_ip_extcommunity_list_name_standard_cmd,</a>
<a name="ln12349">       &quot;no ip extcommunity-list standard WORD (deny|permit) .AA:NN&quot;,</a>
<a name="ln12350">       NO_STR</a>
<a name="ln12351">       IP_STR</a>
<a name="ln12352">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12353">       &quot;Specify standard extcommunity-list\n&quot;</a>
<a name="ln12354">       &quot;Extended Community list name\n&quot;</a>
<a name="ln12355">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12356">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12357">       EXTCOMMUNITY_VAL_STR)</a>
<a name="ln12358">{</a>
<a name="ln12359">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_STANDARD);</a>
<a name="ln12360">}</a>
<a name="ln12361"> </a>
<a name="ln12362">DEFUN (no_ip_extcommunity_list_name_expanded,</a>
<a name="ln12363">       no_ip_extcommunity_list_name_expanded_cmd,</a>
<a name="ln12364">       &quot;no ip extcommunity-list expanded WORD (deny|permit) .LINE&quot;,</a>
<a name="ln12365">       NO_STR</a>
<a name="ln12366">       IP_STR</a>
<a name="ln12367">       EXTCOMMUNITY_LIST_STR</a>
<a name="ln12368">       &quot;Specify expanded extcommunity-list\n&quot;</a>
<a name="ln12369">       &quot;Community list name\n&quot;</a>
<a name="ln12370">       &quot;Specify community to reject\n&quot;</a>
<a name="ln12371">       &quot;Specify community to accept\n&quot;</a>
<a name="ln12372">       &quot;An ordered list as a regular-expression\n&quot;)</a>
<a name="ln12373">{</a>
<a name="ln12374">  return extcommunity_list_unset_vty (vty, argc, argv, EXTCOMMUNITY_LIST_EXPANDED);</a>
<a name="ln12375">}</a>
<a name="ln12376"> </a>
<a name="ln12377">static void</a>
<a name="ln12378">extcommunity_list_show (struct vty *vty, struct community_list *list)</a>
<a name="ln12379">{</a>
<a name="ln12380">  struct community_entry *entry;</a>
<a name="ln12381"> </a>
<a name="ln12382">  for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12383">    {</a>
<a name="ln12384">      if (entry == list-&gt;head)</a>
<a name="ln12385">	{</a>
<a name="ln12386">	  if (all_digit (list-&gt;name))</a>
<a name="ln12387">	    vty_out (vty, &quot;Extended community %s list %s%s&quot;,</a>
<a name="ln12388">		     entry-&gt;style == EXTCOMMUNITY_LIST_STANDARD ?</a>
<a name="ln12389">		     &quot;standard&quot; : &quot;(expanded) access&quot;,</a>
<a name="ln12390">		     list-&gt;name, VTY_NEWLINE);</a>
<a name="ln12391">	  else</a>
<a name="ln12392">	    vty_out (vty, &quot;Named extended community %s list %s%s&quot;,</a>
<a name="ln12393">		     entry-&gt;style == EXTCOMMUNITY_LIST_STANDARD ?</a>
<a name="ln12394">		     &quot;standard&quot; : &quot;expanded&quot;,</a>
<a name="ln12395">		     list-&gt;name, VTY_NEWLINE);</a>
<a name="ln12396">	}</a>
<a name="ln12397">      if (entry-&gt;any)</a>
<a name="ln12398">	vty_out (vty, &quot;    %s%s&quot;,</a>
<a name="ln12399">		 community_direct_str (entry-&gt;direct), VTY_NEWLINE);</a>
<a name="ln12400">      else</a>
<a name="ln12401">	vty_out (vty, &quot;    %s %s%s&quot;,</a>
<a name="ln12402">		 community_direct_str (entry-&gt;direct),</a>
<a name="ln12403">		 entry-&gt;style == EXTCOMMUNITY_LIST_STANDARD ?</a>
<a name="ln12404">		 entry-&gt;u.ecom-&gt;str : entry-&gt;config,</a>
<a name="ln12405">		 VTY_NEWLINE);</a>
<a name="ln12406">    }</a>
<a name="ln12407">}</a>
<a name="ln12408"> </a>
<a name="ln12409">DEFUN (show_ip_extcommunity_list,</a>
<a name="ln12410">       show_ip_extcommunity_list_cmd,</a>
<a name="ln12411">       &quot;show ip extcommunity-list&quot;,</a>
<a name="ln12412">       SHOW_STR</a>
<a name="ln12413">       IP_STR</a>
<a name="ln12414">       &quot;List extended-community list\n&quot;)</a>
<a name="ln12415">{</a>
<a name="ln12416">  struct community_list *list;</a>
<a name="ln12417">  struct community_list_master *cm;</a>
<a name="ln12418"> </a>
<a name="ln12419">  cm = community_list_master_lookup (bgp_clist, EXTCOMMUNITY_LIST_MASTER);</a>
<a name="ln12420">  if (! cm)</a>
<a name="ln12421">    return CMD_SUCCESS;</a>
<a name="ln12422"> </a>
<a name="ln12423">  for (list = cm-&gt;num.head; list; list = list-&gt;next)</a>
<a name="ln12424">    extcommunity_list_show (vty, list);</a>
<a name="ln12425"> </a>
<a name="ln12426">  for (list = cm-&gt;str.head; list; list = list-&gt;next)</a>
<a name="ln12427">    extcommunity_list_show (vty, list);</a>
<a name="ln12428"> </a>
<a name="ln12429">  return CMD_SUCCESS;</a>
<a name="ln12430">}</a>
<a name="ln12431"> </a>
<a name="ln12432">DEFUN (show_ip_extcommunity_list_arg,</a>
<a name="ln12433">       show_ip_extcommunity_list_arg_cmd,</a>
<a name="ln12434">       &quot;show ip extcommunity-list (&lt;1-500&gt;|WORD)&quot;,</a>
<a name="ln12435">       SHOW_STR</a>
<a name="ln12436">       IP_STR</a>
<a name="ln12437">       &quot;List extended-community list\n&quot;</a>
<a name="ln12438">       &quot;Extcommunity-list number\n&quot;</a>
<a name="ln12439">       &quot;Extcommunity-list name\n&quot;)</a>
<a name="ln12440">{</a>
<a name="ln12441">  struct community_list *list;</a>
<a name="ln12442"> </a>
<a name="ln12443">  list = community_list_lookup (bgp_clist, argv[0], EXTCOMMUNITY_LIST_MASTER);</a>
<a name="ln12444">  if (! list)</a>
<a name="ln12445">    {</a>
<a name="ln12446">      vty_out (vty, &quot;%% Can't find extcommunity-list%s&quot;, VTY_NEWLINE);</a>
<a name="ln12447">      return CMD_WARNING;</a>
<a name="ln12448">    }</a>
<a name="ln12449"> </a>
<a name="ln12450">  extcommunity_list_show (vty, list);</a>
<a name="ln12451"> </a>
<a name="ln12452">  return CMD_SUCCESS;</a>
<a name="ln12453">}</a>
<a name="ln12454"> </a>
<a name="ln12455">/* Return configuration string of community-list entry.  */</a>
<a name="ln12456">static const char *</a>
<a name="ln12457">community_list_config_str (struct community_entry *entry)</a>
<a name="ln12458">{</a>
<a name="ln12459">  const char *str;</a>
<a name="ln12460"> </a>
<a name="ln12461">  if (entry-&gt;any)</a>
<a name="ln12462">    str = &quot;&quot;;</a>
<a name="ln12463">  else</a>
<a name="ln12464">    {</a>
<a name="ln12465">      if (entry-&gt;style == COMMUNITY_LIST_STANDARD)</a>
<a name="ln12466">	str = community_str (entry-&gt;u.com);</a>
<a name="ln12467">      else</a>
<a name="ln12468">	str = entry-&gt;config;</a>
<a name="ln12469">    }</a>
<a name="ln12470">  return str;</a>
<a name="ln12471">}</a>
<a name="ln12472"> </a>
<a name="ln12473">/* Display community-list and extcommunity-list configuration.  */</a>
<a name="ln12474">static int</a>
<a name="ln12475">community_list_config_write (struct vty *vty)</a>
<a name="ln12476">{</a>
<a name="ln12477">  struct community_list *list;</a>
<a name="ln12478">  struct community_entry *entry;</a>
<a name="ln12479">  struct community_list_master *cm;</a>
<a name="ln12480">  int write = 0;</a>
<a name="ln12481"> </a>
<a name="ln12482">  /* Community-list.  */</a>
<a name="ln12483">  cm = community_list_master_lookup (bgp_clist, COMMUNITY_LIST_MASTER);</a>
<a name="ln12484"> </a>
<a name="ln12485">  for (list = cm-&gt;num.head; list; list = list-&gt;next)</a>
<a name="ln12486">    for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12487">      {</a>
<a name="ln12488">	vty_out (vty, &quot;ip community-list %s %s %s%s&quot;,</a>
<a name="ln12489">		 list-&gt;name, community_direct_str (entry-&gt;direct),</a>
<a name="ln12490">		 community_list_config_str (entry),</a>
<a name="ln12491">		 VTY_NEWLINE);</a>
<a name="ln12492">	write++;</a>
<a name="ln12493">      }</a>
<a name="ln12494">  for (list = cm-&gt;str.head; list; list = list-&gt;next)</a>
<a name="ln12495">    for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12496">      {</a>
<a name="ln12497">	vty_out (vty, &quot;ip community-list %s %s %s %s%s&quot;,</a>
<a name="ln12498">		 entry-&gt;style == COMMUNITY_LIST_STANDARD</a>
<a name="ln12499">		 ? &quot;standard&quot; : &quot;expanded&quot;,</a>
<a name="ln12500">		 list-&gt;name, community_direct_str (entry-&gt;direct),</a>
<a name="ln12501">		 community_list_config_str (entry),</a>
<a name="ln12502">		 VTY_NEWLINE);</a>
<a name="ln12503">	write++;</a>
<a name="ln12504">      }</a>
<a name="ln12505"> </a>
<a name="ln12506">  /* Extcommunity-list.  */</a>
<a name="ln12507">  cm = community_list_master_lookup (bgp_clist, EXTCOMMUNITY_LIST_MASTER);</a>
<a name="ln12508"> </a>
<a name="ln12509">  for (list = cm-&gt;num.head; list; list = list-&gt;next)</a>
<a name="ln12510">    for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12511">      {</a>
<a name="ln12512">	vty_out (vty, &quot;ip extcommunity-list %s %s %s%s&quot;,</a>
<a name="ln12513">		 list-&gt;name, community_direct_str (entry-&gt;direct),</a>
<a name="ln12514">		 community_list_config_str (entry), VTY_NEWLINE);</a>
<a name="ln12515">	write++;</a>
<a name="ln12516">      }</a>
<a name="ln12517">  for (list = cm-&gt;str.head; list; list = list-&gt;next)</a>
<a name="ln12518">    for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12519">      {</a>
<a name="ln12520">	vty_out (vty, &quot;ip extcommunity-list %s %s %s %s%s&quot;,</a>
<a name="ln12521">		 entry-&gt;style == EXTCOMMUNITY_LIST_STANDARD</a>
<a name="ln12522">		 ? &quot;standard&quot; : &quot;expanded&quot;,</a>
<a name="ln12523">		 list-&gt;name, community_direct_str (entry-&gt;direct),</a>
<a name="ln12524">		 community_list_config_str (entry), VTY_NEWLINE);</a>
<a name="ln12525">	write++;</a>
<a name="ln12526">      }</a>
<a name="ln12527"> </a>
<a name="ln12528"> </a>
<a name="ln12529">    /* lcommunity-list.  */</a>
<a name="ln12530">  cm = community_list_master_lookup (bgp_clist, LARGE_COMMUNITY_LIST_MASTER);</a>
<a name="ln12531"> </a>
<a name="ln12532">  for (list = cm-&gt;num.head; list; list = list-&gt;next)</a>
<a name="ln12533">    for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12534">      {</a>
<a name="ln12535">	vty_out (vty, &quot;ip large-community-list %s %s %s%s&quot;,</a>
<a name="ln12536">		 list-&gt;name, community_direct_str (entry-&gt;direct),</a>
<a name="ln12537">		 community_list_config_str (entry), VTY_NEWLINE);</a>
<a name="ln12538">	write++;</a>
<a name="ln12539">      }</a>
<a name="ln12540">  for (list = cm-&gt;str.head; list; list = list-&gt;next)</a>
<a name="ln12541">    for (entry = list-&gt;head; entry; entry = entry-&gt;next)</a>
<a name="ln12542">      {</a>
<a name="ln12543">	vty_out (vty, &quot;ip large-community-list %s %s %s %s%s&quot;,</a>
<a name="ln12544">		 entry-&gt;style == LARGE_COMMUNITY_LIST_STANDARD</a>
<a name="ln12545">		 ? &quot;standard&quot; : &quot;expanded&quot;,</a>
<a name="ln12546">		 list-&gt;name, community_direct_str (entry-&gt;direct),</a>
<a name="ln12547">		 community_list_config_str (entry), VTY_NEWLINE);</a>
<a name="ln12548">	write++;</a>
<a name="ln12549">      }</a>
<a name="ln12550"> </a>
<a name="ln12551">  return write;</a>
<a name="ln12552">}</a>
<a name="ln12553"> </a>
<a name="ln12554">static struct cmd_node community_list_node =</a>
<a name="ln12555">{</a>
<a name="ln12556">  COMMUNITY_LIST_NODE,</a>
<a name="ln12557">  &quot;&quot;,</a>
<a name="ln12558">  1				/* Export to vtysh.  */</a>
<a name="ln12559">};</a>
<a name="ln12560"> </a>
<a name="ln12561">static void</a>
<a name="ln12562">community_list_vty (void)</a>
<a name="ln12563">{</a>
<a name="ln12564">  install_node (&amp;community_list_node, community_list_config_write);</a>
<a name="ln12565"> </a>
<a name="ln12566">  /* Community-list.  */</a>
<a name="ln12567">  install_element (CONFIG_NODE, &amp;ip_community_list_standard_cmd);</a>
<a name="ln12568">  install_element (CONFIG_NODE, &amp;ip_community_list_standard2_cmd);</a>
<a name="ln12569">  install_element (CONFIG_NODE, &amp;ip_community_list_expanded_cmd);</a>
<a name="ln12570">  install_element (CONFIG_NODE, &amp;ip_community_list_name_standard_cmd);</a>
<a name="ln12571">  install_element (CONFIG_NODE, &amp;ip_community_list_name_standard2_cmd);</a>
<a name="ln12572">  install_element (CONFIG_NODE, &amp;ip_community_list_name_expanded_cmd);</a>
<a name="ln12573">  install_element (CONFIG_NODE, &amp;no_ip_community_list_standard_all_cmd);</a>
<a name="ln12574">  install_element (CONFIG_NODE, &amp;no_ip_community_list_expanded_all_cmd);</a>
<a name="ln12575">  install_element (CONFIG_NODE, &amp;no_ip_community_list_name_standard_all_cmd);</a>
<a name="ln12576">  install_element (CONFIG_NODE, &amp;no_ip_community_list_name_expanded_all_cmd);</a>
<a name="ln12577">  install_element (CONFIG_NODE, &amp;no_ip_community_list_standard_cmd);</a>
<a name="ln12578">  install_element (CONFIG_NODE, &amp;no_ip_community_list_expanded_cmd);</a>
<a name="ln12579">  install_element (CONFIG_NODE, &amp;no_ip_community_list_name_standard_cmd);</a>
<a name="ln12580">  install_element (CONFIG_NODE, &amp;no_ip_community_list_name_expanded_cmd);</a>
<a name="ln12581">  install_element (VIEW_NODE, &amp;show_ip_community_list_cmd);</a>
<a name="ln12582">  install_element (VIEW_NODE, &amp;show_ip_community_list_arg_cmd);</a>
<a name="ln12583"> </a>
<a name="ln12584">  /* Extcommunity-list.  */</a>
<a name="ln12585">  install_element (CONFIG_NODE, &amp;ip_extcommunity_list_standard_cmd);</a>
<a name="ln12586">  install_element (CONFIG_NODE, &amp;ip_extcommunity_list_standard2_cmd);</a>
<a name="ln12587">  install_element (CONFIG_NODE, &amp;ip_extcommunity_list_expanded_cmd);</a>
<a name="ln12588">  install_element (CONFIG_NODE, &amp;ip_extcommunity_list_name_standard_cmd);</a>
<a name="ln12589">  install_element (CONFIG_NODE, &amp;ip_extcommunity_list_name_standard2_cmd);</a>
<a name="ln12590">  install_element (CONFIG_NODE, &amp;ip_extcommunity_list_name_expanded_cmd);</a>
<a name="ln12591">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_standard_all_cmd);</a>
<a name="ln12592">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_expanded_all_cmd);</a>
<a name="ln12593">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_name_standard_all_cmd);</a>
<a name="ln12594">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_name_expanded_all_cmd);</a>
<a name="ln12595">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_standard_cmd);</a>
<a name="ln12596">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_expanded_cmd);</a>
<a name="ln12597">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_name_standard_cmd);</a>
<a name="ln12598">  install_element (CONFIG_NODE, &amp;no_ip_extcommunity_list_name_expanded_cmd);</a>
<a name="ln12599">  install_element (VIEW_NODE, &amp;show_ip_extcommunity_list_cmd);</a>
<a name="ln12600">  install_element (VIEW_NODE, &amp;show_ip_extcommunity_list_arg_cmd);</a>
<a name="ln12601"> </a>
<a name="ln12602">  /* Large Community List */</a>
<a name="ln12603">  install_element (CONFIG_NODE, &amp;ip_lcommunity_list_standard_cmd);</a>
<a name="ln12604">  install_element (CONFIG_NODE, &amp;ip_lcommunity_list_standard2_cmd);</a>
<a name="ln12605">  install_element (CONFIG_NODE, &amp;ip_lcommunity_list_expanded_cmd);</a>
<a name="ln12606">  install_element (CONFIG_NODE, &amp;ip_lcommunity_list_name_standard_cmd);</a>
<a name="ln12607">  install_element (CONFIG_NODE, &amp;ip_lcommunity_list_name_standard2_cmd);</a>
<a name="ln12608">  install_element (CONFIG_NODE, &amp;ip_lcommunity_list_name_expanded_cmd);</a>
<a name="ln12609">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_standard_all_cmd);</a>
<a name="ln12610">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_expanded_all_cmd);</a>
<a name="ln12611">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_name_standard_all_cmd);</a>
<a name="ln12612">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_name_expanded_all_cmd);</a>
<a name="ln12613">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_standard_cmd);</a>
<a name="ln12614">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_expanded_cmd);</a>
<a name="ln12615">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_name_standard_cmd);</a>
<a name="ln12616">  install_element (CONFIG_NODE, &amp;no_ip_lcommunity_list_name_expanded_cmd);</a>
<a name="ln12617">  install_element (VIEW_NODE, &amp;show_ip_lcommunity_list_cmd);</a>
<a name="ln12618">  install_element (VIEW_NODE, &amp;show_ip_lcommunity_list_arg_cmd);</a>
<a name="ln12619">}</a>

</code></pre>
<div class="balloon" rel="7"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v1042/" target="_blank">V1042</a> This file is marked with copyleft license, which requires you to open the derived source code.</p></div>
<div class="balloon" rel="1343"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="1391"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2716"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2718"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2720"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2739"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2741"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2761"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2763"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2782"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2784"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2879"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2881"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2883"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2903"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2905"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2925"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2927"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2947"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>
<div class="balloon" rel="2949"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v666/" target="_blank">V666</a> Consider inspecting third argument of the function 'strncmp'. It is possible that the value does not correspond with the length of a string which was passed with the second argument.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
