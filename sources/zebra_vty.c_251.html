
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>zebra_vty.c</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">/* Zebra VTY functions</a>
<a name="ln2"> * Copyright (C) 2002 Kunihiro Ishiguro</a>
<a name="ln3"> *</a>
<a name="ln4"> * This file is part of GNU Zebra.</a>
<a name="ln5"> *</a>
<a name="ln6"> * GNU Zebra is free software; you can redistribute it and/or modify it</a>
<a name="ln7"> * under the terms of the GNU General Public License as published by the</a>
<a name="ln8"> * Free Software Foundation; either version 2, or (at your option) any</a>
<a name="ln9"> * later version.</a>
<a name="ln10"> *</a>
<a name="ln11"> * GNU Zebra is distributed in the hope that it will be useful, but</a>
<a name="ln12"> * WITHOUT ANY WARRANTY; without even the implied warranty of</a>
<a name="ln13"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</a>
<a name="ln14"> * General Public License for more details.</a>
<a name="ln15"> *</a>
<a name="ln16"> * You should have received a copy of the GNU General Public License</a>
<a name="ln17"> * along with GNU Zebra; see the file COPYING.  If not, write to the </a>
<a name="ln18"> * Free Software Foundation, Inc., 59 Temple Place - Suite 330, </a>
<a name="ln19"> * Boston, MA 02111-1307, USA.  </a>
<a name="ln20"> */</a>
<a name="ln21"> </a>
<a name="ln22">#include &lt;zebra.h&gt;</a>
<a name="ln23"> </a>
<a name="ln24">#include &quot;memory.h&quot;</a>
<a name="ln25">#include &quot;if.h&quot;</a>
<a name="ln26">#include &quot;prefix.h&quot;</a>
<a name="ln27">#include &quot;command.h&quot;</a>
<a name="ln28">#include &quot;table.h&quot;</a>
<a name="ln29">#include &quot;rib.h&quot;</a>
<a name="ln30">#include &quot;vrf.h&quot;</a>
<a name="ln31">#include &quot;nexthop.h&quot;</a>
<a name="ln32"> </a>
<a name="ln33">#include &quot;zebra/zserv.h&quot;</a>
<a name="ln34">#include &quot;zebra/zebra_rnh.h&quot;</a>
<a name="ln35"> </a>
<a name="ln36">static int do_show_ip_route(struct vty *vty, safi_t safi, vrf_id_t vrf_id);</a>
<a name="ln37">static void vty_show_ip_route_detail (struct vty *vty, struct route_node *rn,</a>
<a name="ln38">                                      int mcast);</a>
<a name="ln39">static void vty_show_ip_route (struct vty *vty, struct route_node *rn,</a>
<a name="ln40">                               struct rib *rib);</a>
<a name="ln41"> </a>
<a name="ln42">/* General function for static route. */</a>
<a name="ln43">static int</a>
<a name="ln44">zebra_static_ipv4_safi (struct vty *vty, safi_t safi, int add_cmd,</a>
<a name="ln45">			const char *dest_str, const char *mask_str,</a>
<a name="ln46">			const char *gate_str, const char *flag_str,</a>
<a name="ln47">			const char *tag_str, const char *distance_str,</a>
<a name="ln48">			const char *vrf_id_str)</a>
<a name="ln49">{</a>
<a name="ln50">  int ret;</a>
<a name="ln51">  u_char distance;</a>
<a name="ln52">  struct prefix p;</a>
<a name="ln53">  struct in_addr gate;</a>
<a name="ln54">  struct in_addr mask;</a>
<a name="ln55">  const char *ifname;</a>
<a name="ln56">  u_char flag = 0;</a>
<a name="ln57">  route_tag_t tag = 0;</a>
<a name="ln58">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln59">  </a>
<a name="ln60">  ret = str2prefix (dest_str, &amp;p);</a>
<a name="ln61">  if (ret &lt;= 0)</a>
<a name="ln62">    {</a>
<a name="ln63">      vty_out (vty, &quot;%% Malformed address%s&quot;, VTY_NEWLINE);</a>
<a name="ln64">      return CMD_WARNING;</a>
<a name="ln65">    }</a>
<a name="ln66"> </a>
<a name="ln67">  /* Cisco like mask notation. */</a>
<a name="ln68">  if (mask_str)</a>
<a name="ln69">    {</a>
<a name="ln70">      ret = inet_aton (mask_str, &amp;mask);</a>
<a name="ln71">      if (ret == 0)</a>
<a name="ln72">        {</a>
<a name="ln73">          vty_out (vty, &quot;%% Malformed address%s&quot;, VTY_NEWLINE);</a>
<a name="ln74">          return CMD_WARNING;</a>
<a name="ln75">        }</a>
<a name="ln76">      p.prefixlen = ip_masklen (mask);</a>
<a name="ln77">    }</a>
<a name="ln78"> </a>
<a name="ln79">  /* Apply mask for given prefix. */</a>
<a name="ln80">  apply_mask (&amp;p);</a>
<a name="ln81"> </a>
<a name="ln82">  /* Administrative distance. */</a>
<a name="ln83">  if (distance_str)</a>
<a name="ln84">    distance = atoi (distance_str);</a>
<a name="ln85">  else</a>
<a name="ln86">    distance = ZEBRA_STATIC_DISTANCE_DEFAULT;</a>
<a name="ln87"> </a>
<a name="ln88">  /* tag */</a>
<a name="ln89">  if (tag_str)</a>
<a name="ln90">    tag = atoi (tag_str);</a>
<a name="ln91"> </a>
<a name="ln92">  /* VRF id */</a>
<a name="ln93">  if (vrf_id_str)</a>
<a name="ln94">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, vrf_id_str);</a>
<a name="ln95"> </a>
<a name="ln96">  /* tag */</a>
<a name="ln97">  if (tag_str)</a>
<a name="ln98">    tag = atoi(tag_str);</a>
<a name="ln99"> </a>
<a name="ln100">  /* Null0 static route.  */</a>
<a name="ln101">  if ((gate_str != NULL) &amp;&amp; (strncasecmp (gate_str, &quot;Null0&quot;, strlen (gate_str)) == 0))</a>
<a name="ln102">    {</a>
<a name="ln103">      if (flag_str)</a>
<a name="ln104">        {</a>
<a name="ln105">          vty_out (vty, &quot;%% can not have flag %s with Null0%s&quot;, flag_str, VTY_NEWLINE);</a>
<a name="ln106">          return CMD_WARNING;</a>
<a name="ln107">        }</a>
<a name="ln108">      if (add_cmd)</a>
<a name="ln109">        static_add_ipv4_safi (safi, &amp;p, NULL, NULL, ZEBRA_FLAG_BLACKHOLE, tag, distance, vrf_id);</a>
<a name="ln110">      else</a>
<a name="ln111">        static_delete_ipv4_safi (safi, &amp;p, NULL, NULL, tag, distance, vrf_id);</a>
<a name="ln112">      return CMD_SUCCESS;</a>
<a name="ln113">    }</a>
<a name="ln114"> </a>
<a name="ln115">  /* Route flags */</a>
<a name="ln116">  if (flag_str) {</a>
<a name="ln117">    switch(flag_str[0]) {</a>
<a name="ln118">      case 'r':</a>
<a name="ln119">      case 'R': /* XXX */</a>
<a name="ln120">        SET_FLAG (flag, ZEBRA_FLAG_REJECT);</a>
<a name="ln121">        break;</a>
<a name="ln122">      case 'b':</a>
<a name="ln123">      case 'B': /* XXX */</a>
<a name="ln124">        SET_FLAG (flag, ZEBRA_FLAG_BLACKHOLE);</a>
<a name="ln125">        break;</a>
<a name="ln126">      default:</a>
<a name="ln127">        vty_out (vty, &quot;%% Malformed flag %s %s&quot;, flag_str, VTY_NEWLINE);</a>
<a name="ln128">        return CMD_WARNING;</a>
<a name="ln129">    }</a>
<a name="ln130">  }</a>
<a name="ln131"> </a>
<a name="ln132">  if (gate_str == NULL)</a>
<a name="ln133">  {</a>
<a name="ln134">    if (add_cmd)</a>
<a name="ln135">      static_add_ipv4_safi (safi, &amp;p, NULL, NULL, flag, tag, distance, vrf_id);</a>
<a name="ln136">    else</a>
<a name="ln137">      static_delete_ipv4_safi (safi, &amp;p, NULL, NULL, tag, distance, vrf_id);</a>
<a name="ln138"> </a>
<a name="ln139">    return CMD_SUCCESS;</a>
<a name="ln140">  }</a>
<a name="ln141">  </a>
<a name="ln142">  /* When gateway is A.B.C.D format, gate is treated as nexthop</a>
<a name="ln143">     address other case gate is treated as interface name. */</a>
<a name="ln144">  ret = inet_aton (gate_str, &amp;gate);</a>
<a name="ln145">  if (ret)</a>
<a name="ln146">    ifname = NULL;</a>
<a name="ln147">  else</a>
<a name="ln148">    ifname = gate_str;</a>
<a name="ln149"> </a>
<a name="ln150">  if (add_cmd)</a>
<a name="ln151">    static_add_ipv4_safi (safi, &amp;p, ifname ? NULL : &amp;gate, ifname, flag, tag, distance, vrf_id);</a>
<a name="ln152">  else</a>
<a name="ln153">    static_delete_ipv4_safi (safi, &amp;p, ifname ? NULL : &amp;gate, ifname, tag, distance, vrf_id);</a>
<a name="ln154"> </a>
<a name="ln155">  return CMD_SUCCESS;</a>
<a name="ln156">}</a>
<a name="ln157"> </a>
<a name="ln158">/* Static unicast routes for multicast RPF lookup. */</a>
<a name="ln159">DEFUN (ip_mroute_dist,</a>
<a name="ln160">       ip_mroute_dist_cmd,</a>
<a name="ln161">       &quot;ip mroute A.B.C.D/M (A.B.C.D|INTERFACE) &lt;1-255&gt;&quot;,</a>
<a name="ln162">       IP_STR</a>
<a name="ln163">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln164">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln165">       &quot;Nexthop address\n&quot;</a>
<a name="ln166">       &quot;Nexthop interface name\n&quot;</a>
<a name="ln167">       &quot;Distance\n&quot;)</a>
<a name="ln168">{</a>
<a name="ln169">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln170">  return zebra_static_ipv4_safi(vty, SAFI_MULTICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln171">                                NULL, NULL, argc &gt; 2 ? argv[2] : NULL, NULL);</a>
<a name="ln172">}</a>
<a name="ln173"> </a>
<a name="ln174">ALIAS (ip_mroute_dist,</a>
<a name="ln175">       ip_mroute_cmd,</a>
<a name="ln176">       &quot;ip mroute A.B.C.D/M (A.B.C.D|INTERFACE)&quot;,</a>
<a name="ln177">       IP_STR</a>
<a name="ln178">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln179">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln180">       &quot;Nexthop address\n&quot;</a>
<a name="ln181">       &quot;Nexthop interface name\n&quot;)</a>
<a name="ln182"> </a>
<a name="ln183">DEFUN (ip_mroute_dist_vrf,</a>
<a name="ln184">       ip_mroute_dist_vrf_cmd,</a>
<a name="ln185">       &quot;ip mroute A.B.C.D/M (A.B.C.D|INTERFACE) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln186">       IP_STR</a>
<a name="ln187">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln188">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln189">       &quot;Nexthop address\n&quot;</a>
<a name="ln190">       &quot;Nexthop interface name\n&quot;</a>
<a name="ln191">       &quot;Distance\n&quot;</a>
<a name="ln192">       VRF_CMD_HELP_STR)</a>
<a name="ln193">{</a>
<a name="ln194">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln195">  return zebra_static_ipv4_safi(vty, SAFI_MULTICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln196">                                NULL, NULL, argc &gt; 3 ? argv[2] : NULL,</a>
<a name="ln197">                                argc &gt; 3 ? argv[3] : argv[2]);</a>
<a name="ln198">}</a>
<a name="ln199"> </a>
<a name="ln200">ALIAS (ip_mroute_dist_vrf,</a>
<a name="ln201">       ip_mroute_vrf_cmd,</a>
<a name="ln202">       &quot;ip mroute A.B.C.D/M (A.B.C.D|INTERFACE) &quot;VRF_CMD_STR,</a>
<a name="ln203">       IP_STR</a>
<a name="ln204">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln205">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln206">       &quot;Nexthop address\n&quot;</a>
<a name="ln207">       &quot;Nexthop interface name\n&quot;</a>
<a name="ln208">       VRF_CMD_HELP_STR)</a>
<a name="ln209"> </a>
<a name="ln210">DEFUN (no_ip_mroute_dist,</a>
<a name="ln211">       no_ip_mroute_dist_cmd,</a>
<a name="ln212">       &quot;no ip mroute A.B.C.D/M (A.B.C.D|INTERFACE) &lt;1-255&gt;&quot;,</a>
<a name="ln213">       IP_STR</a>
<a name="ln214">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln215">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln216">       &quot;Nexthop address\n&quot;</a>
<a name="ln217">       &quot;Nexthop interface name\n&quot;</a>
<a name="ln218">       &quot;Distance\n&quot;)</a>
<a name="ln219">{</a>
<a name="ln220">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln221">  return zebra_static_ipv4_safi(vty, SAFI_MULTICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln222">                                NULL, NULL, argc &gt; 2 ? argv[2] : NULL, NULL);</a>
<a name="ln223">}</a>
<a name="ln224"> </a>
<a name="ln225">ALIAS (no_ip_mroute_dist,</a>
<a name="ln226">       no_ip_mroute_cmd,</a>
<a name="ln227">       &quot;no ip mroute A.B.C.D/M (A.B.C.D|INTERFACE)&quot;,</a>
<a name="ln228">       NO_STR</a>
<a name="ln229">       IP_STR</a>
<a name="ln230">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln231">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln232">       &quot;Nexthop address\n&quot;</a>
<a name="ln233">       &quot;Nexthop interface name\n&quot;)</a>
<a name="ln234"> </a>
<a name="ln235">DEFUN (no_ip_mroute_dist_vrf,</a>
<a name="ln236">       no_ip_mroute_dist_vrf_cmd,</a>
<a name="ln237">       &quot;no ip mroute A.B.C.D/M (A.B.C.D|INTERFACE) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln238">       IP_STR</a>
<a name="ln239">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln240">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln241">       &quot;Nexthop address\n&quot;</a>
<a name="ln242">       &quot;Nexthop interface name\n&quot;</a>
<a name="ln243">       &quot;Distance\n&quot;</a>
<a name="ln244">       VRF_CMD_HELP_STR)</a>
<a name="ln245">{</a>
<a name="ln246">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln247">  return zebra_static_ipv4_safi(vty, SAFI_MULTICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln248">                                NULL, NULL, argc &gt; 3 ? argv[2] : NULL,</a>
<a name="ln249">                                argc &gt; 3 ? argv[3] : argv[2]);</a>
<a name="ln250">}</a>
<a name="ln251"> </a>
<a name="ln252">ALIAS (no_ip_mroute_dist_vrf,</a>
<a name="ln253">       no_ip_mroute_vrf_cmd,</a>
<a name="ln254">       &quot;no ip mroute A.B.C.D/M (A.B.C.D|INTERFACE) &quot; VRF_CMD_STR,</a>
<a name="ln255">       NO_STR</a>
<a name="ln256">       IP_STR</a>
<a name="ln257">       &quot;Configure static unicast route into MRIB for multicast RPF lookup\n&quot;</a>
<a name="ln258">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln259">       &quot;Nexthop address\n&quot;</a>
<a name="ln260">       &quot;Nexthop interface name\n&quot;</a>
<a name="ln261">       VRF_CMD_HELP_STR)</a>
<a name="ln262"> </a>
<a name="ln263">DEFUN (ip_multicast_mode,</a>
<a name="ln264">       ip_multicast_mode_cmd,</a>
<a name="ln265">       &quot;ip multicast rpf-lookup-mode (urib-only|mrib-only|mrib-then-urib|lower-distance|longer-prefix)&quot;,</a>
<a name="ln266">       IP_STR</a>
<a name="ln267">       &quot;Multicast options\n&quot;</a>
<a name="ln268">       &quot;RPF lookup behavior\n&quot;</a>
<a name="ln269">       &quot;Lookup in unicast RIB only\n&quot;</a>
<a name="ln270">       &quot;Lookup in multicast RIB only\n&quot;</a>
<a name="ln271">       &quot;Try multicast RIB first, fall back to unicast RIB\n&quot;</a>
<a name="ln272">       &quot;Lookup both, use entry with lower distance\n&quot;</a>
<a name="ln273">       &quot;Lookup both, use entry with longer prefix\n&quot;)</a>
<a name="ln274">{</a>
<a name="ln275">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln276"> </a>
<a name="ln277">  if (!strncmp (argv[0], &quot;u&quot;, 1))</a>
<a name="ln278">    multicast_mode_ipv4_set (MCAST_URIB_ONLY);</a>
<a name="ln279">  else if (!strncmp (argv[0], &quot;mrib-o&quot;, 6))</a>
<a name="ln280">    multicast_mode_ipv4_set (MCAST_MRIB_ONLY);</a>
<a name="ln281">  else if (!strncmp (argv[0], &quot;mrib-t&quot;, 6))</a>
<a name="ln282">    multicast_mode_ipv4_set (MCAST_MIX_MRIB_FIRST);</a>
<a name="ln283">  else if (!strncmp (argv[0], &quot;low&quot;, 3))</a>
<a name="ln284">    multicast_mode_ipv4_set (MCAST_MIX_DISTANCE);</a>
<a name="ln285">  else if (!strncmp (argv[0], &quot;lon&quot;, 3))</a>
<a name="ln286">    multicast_mode_ipv4_set (MCAST_MIX_PFXLEN);</a>
<a name="ln287">  else</a>
<a name="ln288">    {</a>
<a name="ln289">      vty_out (vty, &quot;Invalid mode specified%s&quot;, VTY_NEWLINE);</a>
<a name="ln290">      return CMD_WARNING;</a>
<a name="ln291">    }</a>
<a name="ln292"> </a>
<a name="ln293">  return CMD_SUCCESS;</a>
<a name="ln294">}</a>
<a name="ln295"> </a>
<a name="ln296">DEFUN (no_ip_multicast_mode,</a>
<a name="ln297">       no_ip_multicast_mode_cmd,</a>
<a name="ln298">       &quot;no ip multicast rpf-lookup-mode (urib-only|mrib-only|mrib-then-urib|lower-distance|longer-prefix)&quot;,</a>
<a name="ln299">       NO_STR</a>
<a name="ln300">       IP_STR</a>
<a name="ln301">       &quot;Multicast options\n&quot;</a>
<a name="ln302">       &quot;RPF lookup behavior\n&quot;</a>
<a name="ln303">       &quot;Lookup in unicast RIB only\n&quot;</a>
<a name="ln304">       &quot;Lookup in multicast RIB only\n&quot;</a>
<a name="ln305">       &quot;Try multicast RIB first, fall back to unicast RIB\n&quot;</a>
<a name="ln306">       &quot;Lookup both, use entry with lower distance\n&quot;</a>
<a name="ln307">       &quot;Lookup both, use entry with longer prefix\n&quot;)</a>
<a name="ln308">{</a>
<a name="ln309">  multicast_mode_ipv4_set (MCAST_NO_CONFIG);</a>
<a name="ln310">  return CMD_SUCCESS;</a>
<a name="ln311">}</a>
<a name="ln312"> </a>
<a name="ln313">ALIAS (no_ip_multicast_mode,</a>
<a name="ln314">       no_ip_multicast_mode_noarg_cmd,</a>
<a name="ln315">       &quot;no ip multicast rpf-lookup-mode&quot;,</a>
<a name="ln316">       NO_STR</a>
<a name="ln317">       IP_STR</a>
<a name="ln318">       &quot;Multicast options\n&quot;</a>
<a name="ln319">       &quot;RPF lookup behavior\n&quot;)</a>
<a name="ln320"> </a>
<a name="ln321">DEFUN (show_ip_rpf,</a>
<a name="ln322">       show_ip_rpf_cmd,</a>
<a name="ln323">       &quot;show ip rpf&quot;,</a>
<a name="ln324">       SHOW_STR</a>
<a name="ln325">       IP_STR</a>
<a name="ln326">       &quot;Display RPF information for multicast source\n&quot;)</a>
<a name="ln327">{</a>
<a name="ln328">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln329"> </a>
<a name="ln330">  if (argc &gt; 0)</a>
<a name="ln331">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln332"> </a>
<a name="ln333">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln334">  return do_show_ip_route(vty, SAFI_MULTICAST, vrf_id);</a>
<a name="ln335">}</a>
<a name="ln336"> </a>
<a name="ln337">ALIAS (show_ip_rpf,</a>
<a name="ln338">       show_ip_rpf_vrf_cmd,</a>
<a name="ln339">       &quot;show ip rpf &quot; VRF_CMD_STR,</a>
<a name="ln340">       SHOW_STR</a>
<a name="ln341">       IP_STR</a>
<a name="ln342">       &quot;Display RPF information for multicast source\n&quot;</a>
<a name="ln343">       VRF_CMD_HELP_STR)</a>
<a name="ln344"> </a>
<a name="ln345">DEFUN (show_ip_rpf_addr,</a>
<a name="ln346">       show_ip_rpf_addr_cmd,</a>
<a name="ln347">       &quot;show ip rpf A.B.C.D&quot;,</a>
<a name="ln348">       SHOW_STR</a>
<a name="ln349">       IP_STR</a>
<a name="ln350">       &quot;Display RPF information for multicast source\n&quot;</a>
<a name="ln351">       &quot;IP multicast source address (e.g. 10.0.0.0)\n&quot;)</a>
<a name="ln352">{</a>
<a name="ln353">  struct in_addr addr;</a>
<a name="ln354">  struct route_node *rn;</a>
<a name="ln355">  struct rib *rib;</a>
<a name="ln356">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln357">  int ret;</a>
<a name="ln358"> </a>
<a name="ln359">  if (argc &gt; 1)</a>
<a name="ln360">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln361"> </a>
<a name="ln362">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln363"> </a>
<a name="ln364">  ret = inet_aton (argv[0], &amp;addr);</a>
<a name="ln365">  if (ret == 0)</a>
<a name="ln366">    {</a>
<a name="ln367">      vty_out (vty, &quot;%% Malformed address%s&quot;, VTY_NEWLINE);</a>
<a name="ln368">      return CMD_WARNING;</a>
<a name="ln369">    }</a>
<a name="ln370"> </a>
<a name="ln371">  rib = rib_match_ipv4_multicast (addr, &amp;rn, vrf_id);</a>
<a name="ln372"> </a>
<a name="ln373">  if (rib)</a>
<a name="ln374">    vty_show_ip_route_detail (vty, rn, 1);</a>
<a name="ln375">  else</a>
<a name="ln376">    vty_out (vty, &quot;%% No match for RPF lookup%s&quot;, VTY_NEWLINE);</a>
<a name="ln377"> </a>
<a name="ln378">  return CMD_SUCCESS;</a>
<a name="ln379">}</a>
<a name="ln380"> </a>
<a name="ln381">ALIAS (show_ip_rpf_addr,</a>
<a name="ln382">       show_ip_rpf_addr_vrf_cmd,</a>
<a name="ln383">       &quot;show ip rpf A.B.C.D &quot; VRF_CMD_STR,</a>
<a name="ln384">       SHOW_STR</a>
<a name="ln385">       IP_STR</a>
<a name="ln386">       &quot;Display RPF information for multicast source\n&quot;</a>
<a name="ln387">       &quot;IP multicast source address (e.g. 10.0.0.0)\n&quot;</a>
<a name="ln388">       VRF_CMD_HELP_STR)</a>
<a name="ln389"> </a>
<a name="ln390">DEFUN (show_ip_rpf_vrf_all,</a>
<a name="ln391">       show_ip_rpf_vrf_all_cmd,</a>
<a name="ln392">       &quot;show ip rpf &quot; VRF_ALL_CMD_STR,</a>
<a name="ln393">       SHOW_STR</a>
<a name="ln394">       IP_STR</a>
<a name="ln395">       &quot;Display RPF information for multicast source\n&quot;</a>
<a name="ln396">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln397">{</a>
<a name="ln398">  struct zebra_vrf *zvrf;</a>
<a name="ln399">  struct route_table *table;</a>
<a name="ln400">  struct route_node *rn;</a>
<a name="ln401">  struct rib *rib;</a>
<a name="ln402">  vrf_iter_t iter;</a>
<a name="ln403">  int first = 1;</a>
<a name="ln404"> </a>
<a name="ln405">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln406"> </a>
<a name="ln407">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln408">    {</a>
<a name="ln409">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln410">          (table = zvrf-&gt;table[AFI_IP][SAFI_MULTICAST]) == NULL)</a>
<a name="ln411">        continue;</a>
<a name="ln412"> </a>
<a name="ln413">      /* Show all IPv4 routes. */</a>
<a name="ln414">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln415">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln416">          {</a>
<a name="ln417">            if (first)</a>
<a name="ln418">              {</a>
<a name="ln419">                vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln420">                first = 0;</a>
<a name="ln421">              }</a>
<a name="ln422">            vty_show_ip_route (vty, rn, rib);</a>
<a name="ln423">          }</a>
<a name="ln424">    }</a>
<a name="ln425"> </a>
<a name="ln426">  return CMD_SUCCESS;</a>
<a name="ln427">}</a>
<a name="ln428"> </a>
<a name="ln429">DEFUN (show_ip_rpf_addr_vrf_all,</a>
<a name="ln430">       show_ip_rpf_addr_vrf_all_cmd,</a>
<a name="ln431">       &quot;show ip rpf A.B.C.D &quot; VRF_ALL_CMD_STR,</a>
<a name="ln432">       SHOW_STR</a>
<a name="ln433">       IP_STR</a>
<a name="ln434">       &quot;Display RPF information for multicast source\n&quot;</a>
<a name="ln435">       &quot;IP multicast source address (e.g. 10.0.0.0)\n&quot;</a>
<a name="ln436">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln437">{</a>
<a name="ln438">  struct in_addr addr;</a>
<a name="ln439">  struct route_node *rn;</a>
<a name="ln440">  vrf_iter_t iter;</a>
<a name="ln441">  int ret;</a>
<a name="ln442"> </a>
<a name="ln443">  VTY_WARN_EXPERIMENTAL();</a>
<a name="ln444"> </a>
<a name="ln445">  ret = inet_aton (argv[0], &amp;addr);</a>
<a name="ln446">  if (ret == 0)</a>
<a name="ln447">    {</a>
<a name="ln448">      vty_out (vty, &quot;%% Malformed address%s&quot;, VTY_NEWLINE);</a>
<a name="ln449">      return CMD_WARNING;</a>
<a name="ln450">    }</a>
<a name="ln451"> </a>
<a name="ln452">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln453">    {</a>
<a name="ln454">      if (rib_match_ipv4_multicast (addr, &amp;rn, vrf_iter2id (iter)))</a>
<a name="ln455">        vty_show_ip_route_detail (vty, rn, 1);</a>
<a name="ln456">    }</a>
<a name="ln457"> </a>
<a name="ln458">  return CMD_SUCCESS;</a>
<a name="ln459">}</a>
<a name="ln460"> </a>
<a name="ln461">/* Static route configuration.  */</a>
<a name="ln462">DEFUN (ip_route, </a>
<a name="ln463">       ip_route_cmd,</a>
<a name="ln464">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0)&quot;,</a>
<a name="ln465">       IP_STR</a>
<a name="ln466">       &quot;Establish static routes\n&quot;</a>
<a name="ln467">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln468">       &quot;IP gateway address\n&quot;</a>
<a name="ln469">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln470">       &quot;Null interface\n&quot;)</a>
<a name="ln471">{</a>
<a name="ln472">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln473">				 NULL, NULL, NULL, NULL);</a>
<a name="ln474">}</a>
<a name="ln475"> </a>
<a name="ln476">DEFUN (ip_route_tag,</a>
<a name="ln477">       ip_route_tag_cmd,</a>
<a name="ln478">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln479">       IP_STR</a>
<a name="ln480">       &quot;Establish static routes\n&quot;</a>
<a name="ln481">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln482">       &quot;IP gateway address\n&quot;</a>
<a name="ln483">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln484">       &quot;Null interface\n&quot;</a>
<a name="ln485">       &quot;Set tag for this route\n&quot;</a>
<a name="ln486">       &quot;Tag value\n&quot;)</a>
<a name="ln487">{</a>
<a name="ln488">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln489">				 argv[1], NULL, argv[2], NULL, NULL);</a>
<a name="ln490">}</a>
<a name="ln491"> </a>
<a name="ln492">DEFUN (ip_route_tag_vrf,</a>
<a name="ln493">       ip_route_tag_vrf_cmd,</a>
<a name="ln494">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln495">       IP_STR</a>
<a name="ln496">       &quot;Establish static routes\n&quot;</a>
<a name="ln497">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln498">       &quot;IP gateway address\n&quot;</a>
<a name="ln499">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln500">       &quot;Null interface\n&quot;</a>
<a name="ln501">       &quot;Set tag for this route\n&quot;</a>
<a name="ln502">       &quot;Tag value\n&quot;</a>
<a name="ln503">       VRF_CMD_HELP_STR)</a>
<a name="ln504">{</a>
<a name="ln505">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln506">				 argv[1], NULL, argv[2], NULL, argv[3]);</a>
<a name="ln507">}</a>
<a name="ln508"> </a>
<a name="ln509">DEFUN (ip_route_flags,</a>
<a name="ln510">       ip_route_flags_cmd,</a>
<a name="ln511">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole)&quot;,</a>
<a name="ln512">       IP_STR</a>
<a name="ln513">       &quot;Establish static routes\n&quot;</a>
<a name="ln514">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln515">       &quot;IP gateway address\n&quot;</a>
<a name="ln516">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln517">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln518">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln519">{</a>
<a name="ln520">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln521">				 argv[2], NULL, NULL, NULL);</a>
<a name="ln522">}</a>
<a name="ln523"> </a>
<a name="ln524">DEFUN (ip_route_flags_tag,</a>
<a name="ln525">       ip_route_flags_tag_cmd,</a>
<a name="ln526">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln527">       IP_STR</a>
<a name="ln528">       &quot;Establish static routes\n&quot;</a>
<a name="ln529">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln530">       &quot;IP gateway address\n&quot;</a>
<a name="ln531">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln532">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln533">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln534">       &quot;Set tag for this route\n&quot;</a>
<a name="ln535">       &quot;Tag value\n&quot;)</a>
<a name="ln536"> </a>
<a name="ln537">{</a>
<a name="ln538">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln539">				 argv[2], argv[3], NULL, NULL);</a>
<a name="ln540">}</a>
<a name="ln541"> </a>
<a name="ln542">DEFUN (ip_route_flags_tag_vrf,</a>
<a name="ln543">       ip_route_flags_tag_vrf_cmd,</a>
<a name="ln544">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln545">       IP_STR</a>
<a name="ln546">       &quot;Establish static routes\n&quot;</a>
<a name="ln547">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln548">       &quot;IP gateway address\n&quot;</a>
<a name="ln549">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln550">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln551">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln552">       &quot;Set tag for this route\n&quot;</a>
<a name="ln553">       &quot;Tag value\n&quot;</a>
<a name="ln554">       VRF_CMD_HELP_STR)</a>
<a name="ln555">{</a>
<a name="ln556">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln557">				 argv[2], argv[3], NULL, argv[4]);</a>
<a name="ln558">}</a>
<a name="ln559"> </a>
<a name="ln560">DEFUN (ip_route_flags2,</a>
<a name="ln561">       ip_route_flags2_cmd,</a>
<a name="ln562">       &quot;ip route A.B.C.D/M (reject|blackhole)&quot;,</a>
<a name="ln563">       IP_STR</a>
<a name="ln564">       &quot;Establish static routes\n&quot;</a>
<a name="ln565">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln566">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln567">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln568">{</a>
<a name="ln569">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln570">				 NULL, argv[1], NULL, NULL, NULL);</a>
<a name="ln571">}</a>
<a name="ln572"> </a>
<a name="ln573">DEFUN (ip_route_flags2_tag,</a>
<a name="ln574">       ip_route_flags2_tag_cmd,</a>
<a name="ln575">       &quot;ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln576">       IP_STR</a>
<a name="ln577">       &quot;Establish static routes\n&quot;</a>
<a name="ln578">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln579">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln580">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln581">       &quot;Set tag for this route\n&quot;</a>
<a name="ln582">       &quot;Tag value\n&quot;)</a>
<a name="ln583">{</a>
<a name="ln584">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, NULL,</a>
<a name="ln585">				 argv[1], argv[2], NULL, NULL);</a>
<a name="ln586">}</a>
<a name="ln587"> </a>
<a name="ln588">DEFUN (ip_route_flags2_tag_vrf,</a>
<a name="ln589">       ip_route_flags2_tag_vrf_cmd,</a>
<a name="ln590">       &quot;ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln591">       IP_STR</a>
<a name="ln592">       &quot;Establish static routes\n&quot;</a>
<a name="ln593">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln594">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln595">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln596">       &quot;Set tag for this route\n&quot;</a>
<a name="ln597">       &quot;Tag value\n&quot;</a>
<a name="ln598">       VRF_CMD_HELP_STR)</a>
<a name="ln599">{</a>
<a name="ln600">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, NULL,</a>
<a name="ln601">				 argv[1], argv[2], NULL, argv[3]);</a>
<a name="ln602">}</a>
<a name="ln603"> </a>
<a name="ln604">/* Mask as A.B.C.D format.  */</a>
<a name="ln605">DEFUN (ip_route_mask,</a>
<a name="ln606">       ip_route_mask_cmd,</a>
<a name="ln607">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0)&quot;,</a>
<a name="ln608">       IP_STR</a>
<a name="ln609">       &quot;Establish static routes\n&quot;</a>
<a name="ln610">       &quot;IP destination prefix\n&quot;</a>
<a name="ln611">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln612">       &quot;IP gateway address\n&quot;</a>
<a name="ln613">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln614">       &quot;Null interface\n&quot;)</a>
<a name="ln615">{</a>
<a name="ln616">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln617">				 argv[2], NULL, NULL, NULL, NULL);</a>
<a name="ln618">}</a>
<a name="ln619"> </a>
<a name="ln620">DEFUN (ip_route_mask_tag,</a>
<a name="ln621">       ip_route_mask_tag_cmd,</a>
<a name="ln622">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln623">       IP_STR</a>
<a name="ln624">       &quot;Establish static routes\n&quot;</a>
<a name="ln625">       &quot;IP destination prefix\n&quot;</a>
<a name="ln626">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln627">       &quot;IP gateway address\n&quot;</a>
<a name="ln628">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln629">       &quot;Null interface\n&quot;</a>
<a name="ln630">       &quot;Set tag for this route\n&quot;</a>
<a name="ln631">       &quot;Tag value\n&quot;)</a>
<a name="ln632"> </a>
<a name="ln633">{</a>
<a name="ln634">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], argv[2],</a>
<a name="ln635">				 NULL, argv[3], NULL, NULL);</a>
<a name="ln636">}</a>
<a name="ln637"> </a>
<a name="ln638">DEFUN (ip_route_mask_tag_vrf,</a>
<a name="ln639">       ip_route_mask_tag_vrf_cmd,</a>
<a name="ln640">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln641">       IP_STR</a>
<a name="ln642">       &quot;Establish static routes\n&quot;</a>
<a name="ln643">       &quot;IP destination prefix\n&quot;</a>
<a name="ln644">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln645">       &quot;IP gateway address\n&quot;</a>
<a name="ln646">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln647">       &quot;Null interface\n&quot;</a>
<a name="ln648">       &quot;Set tag for this route\n&quot;</a>
<a name="ln649">       &quot;Tag value\n&quot;</a>
<a name="ln650">       VRF_CMD_HELP_STR)</a>
<a name="ln651">{</a>
<a name="ln652">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], argv[2],</a>
<a name="ln653">				 NULL, argv[3], NULL, argv[4]);</a>
<a name="ln654">}</a>
<a name="ln655"> </a>
<a name="ln656">DEFUN (ip_route_mask_flags,</a>
<a name="ln657">       ip_route_mask_flags_cmd,</a>
<a name="ln658">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole)&quot;,</a>
<a name="ln659">       IP_STR</a>
<a name="ln660">       &quot;Establish static routes\n&quot;</a>
<a name="ln661">       &quot;IP destination prefix\n&quot;</a>
<a name="ln662">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln663">       &quot;IP gateway address\n&quot;</a>
<a name="ln664">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln665">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln666">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln667">{</a>
<a name="ln668">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln669">				 argv[2], argv[3], NULL, NULL, NULL);</a>
<a name="ln670">}</a>
<a name="ln671"> </a>
<a name="ln672">DEFUN (ip_route_mask_flags_tag,</a>
<a name="ln673">       ip_route_mask_flags_tag_cmd,</a>
<a name="ln674">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln675">       IP_STR</a>
<a name="ln676">       &quot;Establish static routes\n&quot;</a>
<a name="ln677">       &quot;IP destination prefix\n&quot;</a>
<a name="ln678">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln679">       &quot;IP gateway address\n&quot;</a>
<a name="ln680">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln681">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln682">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln683">       &quot;Set tag for this route\n&quot;</a>
<a name="ln684">       &quot;Tag value\n&quot;)</a>
<a name="ln685">{</a>
<a name="ln686">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln687">				 argv[2], argv[3], argv[4], NULL, NULL);</a>
<a name="ln688">}</a>
<a name="ln689"> </a>
<a name="ln690">DEFUN (ip_route_mask_flags_tag_vrf,</a>
<a name="ln691">       ip_route_mask_flags_tag_vrf_cmd,</a>
<a name="ln692">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln693">       IP_STR</a>
<a name="ln694">       &quot;Establish static routes\n&quot;</a>
<a name="ln695">       &quot;IP destination prefix\n&quot;</a>
<a name="ln696">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln697">       &quot;IP gateway address\n&quot;</a>
<a name="ln698">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln699">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln700">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln701">       &quot;Set tag for this route\n&quot;</a>
<a name="ln702">       &quot;Tag value\n&quot;</a>
<a name="ln703">       VRF_CMD_HELP_STR)</a>
<a name="ln704">{</a>
<a name="ln705">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln706">				 argv[2], argv[3], argv[4], NULL, argv[5]);</a>
<a name="ln707">}</a>
<a name="ln708"> </a>
<a name="ln709">DEFUN (ip_route_mask_flags2,</a>
<a name="ln710">       ip_route_mask_flags2_cmd,</a>
<a name="ln711">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole)&quot;,</a>
<a name="ln712">       IP_STR</a>
<a name="ln713">       &quot;Establish static routes\n&quot;</a>
<a name="ln714">       &quot;IP destination prefix\n&quot;</a>
<a name="ln715">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln716">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln717">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln718">{</a>
<a name="ln719">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln720">				 NULL, argv[2], NULL, NULL, NULL);</a>
<a name="ln721">}</a>
<a name="ln722"> </a>
<a name="ln723">DEFUN (ip_route_mask_flags2_tag,</a>
<a name="ln724">       ip_route_mask_flags2_tag_cmd,</a>
<a name="ln725">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln726">       IP_STR</a>
<a name="ln727">       &quot;Establish static routes\n&quot;</a>
<a name="ln728">       &quot;IP destination prefix\n&quot;</a>
<a name="ln729">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln730">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln731">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln732">       &quot;Set tag for this route\n&quot;</a>
<a name="ln733">       &quot;Tag value\n&quot;)</a>
<a name="ln734">{</a>
<a name="ln735">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], NULL,</a>
<a name="ln736">				 argv[2], argv[3], NULL, NULL);</a>
<a name="ln737">}</a>
<a name="ln738"> </a>
<a name="ln739">DEFUN (ip_route_mask_flags2_tag_vrf,</a>
<a name="ln740">       ip_route_mask_flags2_tag_vrf_cmd,</a>
<a name="ln741">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln742">       IP_STR</a>
<a name="ln743">       &quot;Establish static routes\n&quot;</a>
<a name="ln744">       &quot;IP destination prefix\n&quot;</a>
<a name="ln745">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln746">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln747">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln748">       &quot;Set tag for this route\n&quot;</a>
<a name="ln749">       &quot;Tag value\n&quot;</a>
<a name="ln750">       VRF_CMD_HELP_STR)</a>
<a name="ln751">{</a>
<a name="ln752">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], NULL,</a>
<a name="ln753">				 argv[2], argv[3], NULL, argv[4]);</a>
<a name="ln754">}</a>
<a name="ln755"> </a>
<a name="ln756">/* Distance option value.  */</a>
<a name="ln757">DEFUN (ip_route_distance,</a>
<a name="ln758">       ip_route_distance_cmd,</a>
<a name="ln759">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) &lt;1-255&gt;&quot;,</a>
<a name="ln760">       IP_STR</a>
<a name="ln761">       &quot;Establish static routes\n&quot;</a>
<a name="ln762">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln763">       &quot;IP gateway address\n&quot;</a>
<a name="ln764">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln765">       &quot;Null interface\n&quot;</a>
<a name="ln766">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln767">{</a>
<a name="ln768">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln769">				 argv[1], NULL, NULL, argv[2], NULL);</a>
<a name="ln770">}</a>
<a name="ln771"> </a>
<a name="ln772">DEFUN (ip_route_tag_distance,</a>
<a name="ln773">       ip_route_tag_distance_cmd,</a>
<a name="ln774">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln775">       IP_STR</a>
<a name="ln776">       &quot;Establish static routes\n&quot;</a>
<a name="ln777">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln778">       &quot;IP gateway address\n&quot;</a>
<a name="ln779">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln780">       &quot;Null interface\n&quot;</a>
<a name="ln781">       &quot;Set tag for this route\n&quot;</a>
<a name="ln782">       &quot;Tag value\n&quot;</a>
<a name="ln783">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln784">{</a>
<a name="ln785">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln786">				 argv[1], NULL, argv[2], argv[3], NULL);</a>
<a name="ln787">}</a>
<a name="ln788"> </a>
<a name="ln789">DEFUN (ip_route_tag_distance_vrf,</a>
<a name="ln790">       ip_route_tag_distance_vrf_cmd,</a>
<a name="ln791">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln792">       IP_STR</a>
<a name="ln793">       &quot;Establish static routes\n&quot;</a>
<a name="ln794">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln795">       &quot;IP gateway address\n&quot;</a>
<a name="ln796">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln797">       &quot;Null interface\n&quot;</a>
<a name="ln798">       &quot;Set tag for this route\n&quot;</a>
<a name="ln799">       &quot;Tag value\n&quot;</a>
<a name="ln800">       &quot;Distance value for this route\n&quot;</a>
<a name="ln801">       VRF_CMD_HELP_STR)</a>
<a name="ln802">{</a>
<a name="ln803">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln804">				 argv[1], NULL, argv[2], argv[3], argv[4]);</a>
<a name="ln805">}</a>
<a name="ln806"> </a>
<a name="ln807">DEFUN (ip_route_flags_distance,</a>
<a name="ln808">       ip_route_flags_distance_cmd,</a>
<a name="ln809">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln810">       IP_STR</a>
<a name="ln811">       &quot;Establish static routes\n&quot;</a>
<a name="ln812">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln813">       &quot;IP gateway address\n&quot;</a>
<a name="ln814">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln815">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln816">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln817">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln818">{</a>
<a name="ln819">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln820">				 argv[2], NULL, argv[3], NULL);</a>
<a name="ln821">}</a>
<a name="ln822"> </a>
<a name="ln823">DEFUN (ip_route_flags_tag_distance,</a>
<a name="ln824">       ip_route_flags_tag_distance_cmd,</a>
<a name="ln825">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln826">       IP_STR</a>
<a name="ln827">       &quot;Establish static routes\n&quot;</a>
<a name="ln828">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln829">       &quot;IP gateway address\n&quot;</a>
<a name="ln830">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln831">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln832">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln833">       &quot;Set tag for this route\n&quot;</a>
<a name="ln834">       &quot;Tag value\n&quot;</a>
<a name="ln835">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln836">{</a>
<a name="ln837">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln838">				 argv[2], argv[3], argv[4], NULL);</a>
<a name="ln839">}</a>
<a name="ln840"> </a>
<a name="ln841">DEFUN (ip_route_flags_tag_distance_vrf,</a>
<a name="ln842">       ip_route_flags_tag_distance_vrf_cmd,</a>
<a name="ln843">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln844">       IP_STR</a>
<a name="ln845">       &quot;Establish static routes\n&quot;</a>
<a name="ln846">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln847">       &quot;IP gateway address\n&quot;</a>
<a name="ln848">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln849">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln850">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln851">       &quot;Set tag for this route\n&quot;</a>
<a name="ln852">       &quot;Tag value\n&quot;</a>
<a name="ln853">       &quot;Distance value for this route\n&quot;</a>
<a name="ln854">       VRF_CMD_HELP_STR)</a>
<a name="ln855">{</a>
<a name="ln856">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL, argv[1],</a>
<a name="ln857">				 argv[2], argv[3], argv[4], argv[5]);</a>
<a name="ln858">}</a>
<a name="ln859"> </a>
<a name="ln860">DEFUN (ip_route_flags_distance2,</a>
<a name="ln861">       ip_route_flags_distance2_cmd,</a>
<a name="ln862">       &quot;ip route A.B.C.D/M (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln863">       IP_STR</a>
<a name="ln864">       &quot;Establish static routes\n&quot;</a>
<a name="ln865">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln866">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln867">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln868">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln869">{</a>
<a name="ln870">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln871">				 NULL, argv[1], NULL, argv[2], NULL);</a>
<a name="ln872">}</a>
<a name="ln873"> </a>
<a name="ln874">DEFUN (ip_route_flags_tag_distance2,</a>
<a name="ln875">       ip_route_flags_tag_distance2_cmd,</a>
<a name="ln876">       &quot;ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln877">       IP_STR</a>
<a name="ln878">       &quot;Establish static routes\n&quot;</a>
<a name="ln879">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln880">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln881">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln882">       &quot;Set tag for this route\n&quot;</a>
<a name="ln883">       &quot;Tag value\n&quot;</a>
<a name="ln884">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln885">{</a>
<a name="ln886">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln887">				 NULL, argv[1], argv[2], argv[3], NULL);</a>
<a name="ln888">}</a>
<a name="ln889"> </a>
<a name="ln890">DEFUN (ip_route_flags_tag_distance2_vrf,</a>
<a name="ln891">       ip_route_flags_tag_distance2_vrf_cmd,</a>
<a name="ln892">       &quot;ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln893">       IP_STR</a>
<a name="ln894">       &quot;Establish static routes\n&quot;</a>
<a name="ln895">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln896">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln897">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln898">       &quot;Set tag for this route\n&quot;</a>
<a name="ln899">       &quot;Tag value\n&quot;</a>
<a name="ln900">       &quot;Distance value for this route\n&quot;</a>
<a name="ln901">       VRF_CMD_HELP_STR)</a>
<a name="ln902">{</a>
<a name="ln903">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln904">				 NULL, argv[1], argv[2], argv[3], argv[4]);</a>
<a name="ln905">}</a>
<a name="ln906"> </a>
<a name="ln907">DEFUN (ip_route_mask_distance,</a>
<a name="ln908">       ip_route_mask_distance_cmd,</a>
<a name="ln909">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) &lt;1-255&gt;&quot;,</a>
<a name="ln910">       IP_STR</a>
<a name="ln911">       &quot;Establish static routes\n&quot;</a>
<a name="ln912">       &quot;IP destination prefix\n&quot;</a>
<a name="ln913">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln914">       &quot;IP gateway address\n&quot;</a>
<a name="ln915">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln916">       &quot;Null interface\n&quot;</a>
<a name="ln917">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln918">{</a>
<a name="ln919">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], argv[2],</a>
<a name="ln920">				 NULL, NULL, argv[3], NULL);</a>
<a name="ln921">}</a>
<a name="ln922"> </a>
<a name="ln923">DEFUN (ip_route_mask_tag_distance,</a>
<a name="ln924">       ip_route_mask_tag_distance_cmd,</a>
<a name="ln925">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln926">       IP_STR</a>
<a name="ln927">       &quot;Establish static routes\n&quot;</a>
<a name="ln928">       &quot;IP destination prefix\n&quot;</a>
<a name="ln929">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln930">       &quot;IP gateway address\n&quot;</a>
<a name="ln931">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln932">       &quot;Null interface\n&quot;</a>
<a name="ln933">       &quot;Set tag for this route\n&quot;</a>
<a name="ln934">       &quot;Tag value\n&quot;</a>
<a name="ln935">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln936">{</a>
<a name="ln937">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln938">				 argv[2], NULL, argv[3], argv[4], NULL);</a>
<a name="ln939">}</a>
<a name="ln940"> </a>
<a name="ln941">DEFUN (ip_route_mask_tag_distance_vrf,</a>
<a name="ln942">       ip_route_mask_tag_distance_vrf_cmd,</a>
<a name="ln943">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln944">       IP_STR</a>
<a name="ln945">       &quot;Establish static routes\n&quot;</a>
<a name="ln946">       &quot;IP destination prefix\n&quot;</a>
<a name="ln947">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln948">       &quot;IP gateway address\n&quot;</a>
<a name="ln949">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln950">       &quot;Null interface\n&quot;</a>
<a name="ln951">       &quot;Set tag for this route\n&quot;</a>
<a name="ln952">       &quot;Tag value\n&quot;</a>
<a name="ln953">       &quot;Distance value for this route\n&quot;</a>
<a name="ln954">       VRF_CMD_HELP_STR)</a>
<a name="ln955">{</a>
<a name="ln956">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln957">				 argv[2], NULL, argv[3], argv[4], argv[5]);</a>
<a name="ln958">}</a>
<a name="ln959"> </a>
<a name="ln960"> </a>
<a name="ln961">DEFUN (ip_route_mask_flags_tag_distance,</a>
<a name="ln962">       ip_route_mask_flags_tag_distance_cmd,</a>
<a name="ln963">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole)  tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln964">       IP_STR</a>
<a name="ln965">       &quot;Establish static routes\n&quot;</a>
<a name="ln966">       &quot;IP destination prefix\n&quot;</a>
<a name="ln967">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln968">       &quot;IP gateway address\n&quot;</a>
<a name="ln969">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln970">       &quot;Set tag for this route\n&quot;</a>
<a name="ln971">       &quot;Tag value\n&quot;</a>
<a name="ln972">       &quot;Distance value for this route\n&quot;</a>
<a name="ln973">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln974">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln975">{</a>
<a name="ln976">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], argv[2],</a>
<a name="ln977">				 argv[3], argv[4], argv[5], NULL);</a>
<a name="ln978">}</a>
<a name="ln979"> </a>
<a name="ln980">DEFUN (ip_route_mask_flags_tag_distance_vrf,</a>
<a name="ln981">       ip_route_mask_flags_tag_distance_vrf_cmd,</a>
<a name="ln982">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole)  tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln983">       IP_STR</a>
<a name="ln984">       &quot;Establish static routes\n&quot;</a>
<a name="ln985">       &quot;IP destination prefix\n&quot;</a>
<a name="ln986">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln987">       &quot;IP gateway address\n&quot;</a>
<a name="ln988">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln989">       &quot;Set tag for this route\n&quot;</a>
<a name="ln990">       &quot;Tag value\n&quot;</a>
<a name="ln991">       &quot;Distance value for this route\n&quot;</a>
<a name="ln992">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln993">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln994">       VRF_CMD_HELP_STR)</a>
<a name="ln995">{</a>
<a name="ln996">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], argv[2],</a>
<a name="ln997">				 argv[3], argv[4], argv[5], argv[6]);</a>
<a name="ln998">}</a>
<a name="ln999"> </a>
<a name="ln1000">DEFUN (ip_route_mask_flags_distance,</a>
<a name="ln1001">       ip_route_mask_flags_distance_cmd,</a>
<a name="ln1002">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln1003">       IP_STR</a>
<a name="ln1004">       &quot;Establish static routes\n&quot;</a>
<a name="ln1005">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1006">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1007">       &quot;IP gateway address\n&quot;</a>
<a name="ln1008">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1009">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1010">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1011">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1012">{</a>
<a name="ln1013">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], argv[2],</a>
<a name="ln1014">				 argv[3], NULL, argv[4], NULL);</a>
<a name="ln1015">}</a>
<a name="ln1016"> </a>
<a name="ln1017">DEFUN (ip_route_mask_flags_distance2,</a>
<a name="ln1018">       ip_route_mask_flags_distance2_cmd,</a>
<a name="ln1019">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln1020">       IP_STR</a>
<a name="ln1021">       &quot;Establish static routes\n&quot;</a>
<a name="ln1022">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1023">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1024">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1025">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1026">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1027">{</a>
<a name="ln1028">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln1029">				 NULL, argv[2], NULL, argv[3], NULL);</a>
<a name="ln1030">}</a>
<a name="ln1031"> </a>
<a name="ln1032">DEFUN (ip_route_mask_flags_tag_distance2,</a>
<a name="ln1033">       ip_route_mask_flags_tag_distance2_cmd,</a>
<a name="ln1034">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln1035">       IP_STR</a>
<a name="ln1036">       &quot;Establish static routes\n&quot;</a>
<a name="ln1037">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1038">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1039">       &quot;Set tag for this route\n&quot;</a>
<a name="ln1040">       &quot;Tag value\n&quot;</a>
<a name="ln1041">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1042">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1043">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln1044">{</a>
<a name="ln1045">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], NULL,</a>
<a name="ln1046">				 argv[2], argv[3], argv[4], NULL);</a>
<a name="ln1047">}</a>
<a name="ln1048"> </a>
<a name="ln1049">DEFUN (ip_route_mask_flags_tag_distance2_vrf,</a>
<a name="ln1050">       ip_route_mask_flags_tag_distance2_vrf_cmd,</a>
<a name="ln1051">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1052">       IP_STR</a>
<a name="ln1053">       &quot;Establish static routes\n&quot;</a>
<a name="ln1054">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1055">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1056">       &quot;Set tag for this route\n&quot;</a>
<a name="ln1057">       &quot;Tag value\n&quot;</a>
<a name="ln1058">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1059">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1060">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1061">       VRF_CMD_HELP_STR)</a>
<a name="ln1062">{</a>
<a name="ln1063">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1], NULL,</a>
<a name="ln1064">				 argv[2], argv[3], argv[4], argv[5]);</a>
<a name="ln1065">}</a>
<a name="ln1066"> </a>
<a name="ln1067">DEFUN (no_ip_route, </a>
<a name="ln1068">       no_ip_route_cmd,</a>
<a name="ln1069">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0)&quot;,</a>
<a name="ln1070">       NO_STR</a>
<a name="ln1071">       IP_STR</a>
<a name="ln1072">       &quot;Establish static routes\n&quot;</a>
<a name="ln1073">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1074">       &quot;IP gateway address\n&quot;</a>
<a name="ln1075">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1076">       &quot;Null interface\n&quot;)</a>
<a name="ln1077">{</a>
<a name="ln1078">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL,</a>
<a name="ln1079">				 argv[1], NULL, NULL, NULL, NULL);</a>
<a name="ln1080">}</a>
<a name="ln1081"> </a>
<a name="ln1082">DEFUN (no_ip_route_tag,</a>
<a name="ln1083">       no_ip_route_tag_cmd,</a>
<a name="ln1084">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln1085">       NO_STR</a>
<a name="ln1086">       IP_STR</a>
<a name="ln1087">       &quot;Establish static routes\n&quot;</a>
<a name="ln1088">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1089">       &quot;IP gateway address\n&quot;</a>
<a name="ln1090">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1091">       &quot;Null interface\n&quot;</a>
<a name="ln1092">       &quot;Tag of this route\n&quot;</a>
<a name="ln1093">       &quot;Tag value\n&quot;)</a>
<a name="ln1094">{</a>
<a name="ln1095">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln1096">				 NULL, argv[2], NULL, NULL);</a>
<a name="ln1097">}</a>
<a name="ln1098"> </a>
<a name="ln1099">DEFUN (no_ip_route_tag_vrf,</a>
<a name="ln1100">       no_ip_route_tag_vrf_cmd,</a>
<a name="ln1101">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1102">       NO_STR</a>
<a name="ln1103">       IP_STR</a>
<a name="ln1104">       &quot;Establish static routes\n&quot;</a>
<a name="ln1105">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1106">       &quot;IP gateway address\n&quot;</a>
<a name="ln1107">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1108">       &quot;Null interface\n&quot;</a>
<a name="ln1109">       &quot;Tag of this route\n&quot;</a>
<a name="ln1110">       &quot;Tag value\n&quot;</a>
<a name="ln1111">       VRF_CMD_HELP_STR)</a>
<a name="ln1112">{</a>
<a name="ln1113">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln1114">				 NULL, argv[2], NULL, argv[3]);</a>
<a name="ln1115">}</a>
<a name="ln1116"> </a>
<a name="ln1117">ALIAS (no_ip_route,</a>
<a name="ln1118">       no_ip_route_flags_cmd,</a>
<a name="ln1119">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole)&quot;,</a>
<a name="ln1120">       NO_STR</a>
<a name="ln1121">       IP_STR</a>
<a name="ln1122">       &quot;Establish static routes\n&quot;</a>
<a name="ln1123">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1124">       &quot;IP gateway address\n&quot;</a>
<a name="ln1125">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1126">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1127">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln1128"> </a>
<a name="ln1129">ALIAS (no_ip_route_tag,</a>
<a name="ln1130">       no_ip_route_flags_tag_cmd,</a>
<a name="ln1131">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln1132">       NO_STR</a>
<a name="ln1133">       IP_STR</a>
<a name="ln1134">       &quot;Establish static routes\n&quot;</a>
<a name="ln1135">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1136">       &quot;IP gateway address\n&quot;</a>
<a name="ln1137">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1138">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1139">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1140">       &quot;Tag of this route\n&quot;</a>
<a name="ln1141">       &quot;Tag value\n&quot;)</a>
<a name="ln1142"> </a>
<a name="ln1143">DEFUN (no_ip_route_flags2,</a>
<a name="ln1144">       no_ip_route_flags2_cmd,</a>
<a name="ln1145">       &quot;no ip route A.B.C.D/M (reject|blackhole)&quot;,</a>
<a name="ln1146">       NO_STR</a>
<a name="ln1147">       IP_STR</a>
<a name="ln1148">       &quot;Establish static routes\n&quot;</a>
<a name="ln1149">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1150">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1151">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln1152">{</a>
<a name="ln1153">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL,</a>
<a name="ln1154">				 NULL, NULL, NULL, NULL, NULL);</a>
<a name="ln1155">}</a>
<a name="ln1156"> </a>
<a name="ln1157">DEFUN (no_ip_route_flags2_tag,</a>
<a name="ln1158">       no_ip_route_flags2_tag_cmd,</a>
<a name="ln1159">       &quot;no ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln1160">       NO_STR</a>
<a name="ln1161">       IP_STR</a>
<a name="ln1162">       &quot;Establish static routes\n&quot;</a>
<a name="ln1163">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1164">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1165">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1166">       &quot;Tag of this route\n&quot;</a>
<a name="ln1167">       &quot;Tag value\n&quot;)</a>
<a name="ln1168">{</a>
<a name="ln1169">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, NULL,</a>
<a name="ln1170">				 NULL, argv[1], NULL, NULL);</a>
<a name="ln1171">}</a>
<a name="ln1172"> </a>
<a name="ln1173">DEFUN (no_ip_route_flags2_tag_vrf,</a>
<a name="ln1174">       no_ip_route_flags2_tag_vrf_cmd,</a>
<a name="ln1175">       &quot;no ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1176">       NO_STR</a>
<a name="ln1177">       IP_STR</a>
<a name="ln1178">       &quot;Establish static routes\n&quot;</a>
<a name="ln1179">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1180">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1181">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1182">       &quot;Tag of this route\n&quot;</a>
<a name="ln1183">       &quot;Tag value\n&quot;</a>
<a name="ln1184">       VRF_CMD_HELP_STR)</a>
<a name="ln1185">{</a>
<a name="ln1186">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, NULL,</a>
<a name="ln1187">				 NULL, argv[1], NULL, argv[2]);</a>
<a name="ln1188">}</a>
<a name="ln1189"> </a>
<a name="ln1190">DEFUN (no_ip_route_mask,</a>
<a name="ln1191">       no_ip_route_mask_cmd,</a>
<a name="ln1192">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0)&quot;,</a>
<a name="ln1193">       NO_STR</a>
<a name="ln1194">       IP_STR</a>
<a name="ln1195">       &quot;Establish static routes\n&quot;</a>
<a name="ln1196">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1197">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1198">       &quot;IP gateway address\n&quot;</a>
<a name="ln1199">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1200">       &quot;Null interface\n&quot;)</a>
<a name="ln1201">{</a>
<a name="ln1202">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1203">				 argv[2], NULL, NULL, NULL, NULL);</a>
<a name="ln1204">}</a>
<a name="ln1205"> </a>
<a name="ln1206">DEFUN (no_ip_route_mask_tag,</a>
<a name="ln1207">       no_ip_route_mask_tag_cmd,</a>
<a name="ln1208">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln1209">       NO_STR</a>
<a name="ln1210">       IP_STR</a>
<a name="ln1211">       &quot;Establish static routes\n&quot;</a>
<a name="ln1212">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1213">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1214">       &quot;IP gateway address\n&quot;</a>
<a name="ln1215">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1216">       &quot;Null interface\n&quot;</a>
<a name="ln1217">       &quot;Tag of this route\n&quot;</a>
<a name="ln1218">       &quot;Tag value\n&quot;)</a>
<a name="ln1219">{</a>
<a name="ln1220">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1], argv[2],</a>
<a name="ln1221">				 NULL, argv[3], NULL, NULL);</a>
<a name="ln1222">}</a>
<a name="ln1223"> </a>
<a name="ln1224">ALIAS (no_ip_route_mask,</a>
<a name="ln1225">       no_ip_route_mask_flags_cmd,</a>
<a name="ln1226">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole)&quot;,</a>
<a name="ln1227">       NO_STR</a>
<a name="ln1228">       IP_STR</a>
<a name="ln1229">       &quot;Establish static routes\n&quot;</a>
<a name="ln1230">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1231">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1232">       &quot;IP gateway address\n&quot;</a>
<a name="ln1233">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1234">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1235">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln1236"> </a>
<a name="ln1237">ALIAS (no_ip_route_mask_tag,</a>
<a name="ln1238">       no_ip_route_mask_flags_tag_cmd,</a>
<a name="ln1239">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln1240">       NO_STR</a>
<a name="ln1241">       IP_STR</a>
<a name="ln1242">       &quot;Establish static routes\n&quot;</a>
<a name="ln1243">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1244">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1245">       &quot;IP gateway address\n&quot;</a>
<a name="ln1246">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1247">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1248">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1249">       &quot;Tag of this route\n&quot;</a>
<a name="ln1250">       &quot;Tag value\n&quot;)</a>
<a name="ln1251"> </a>
<a name="ln1252">DEFUN (no_ip_route_mask_flags2,</a>
<a name="ln1253">       no_ip_route_mask_flags2_cmd,</a>
<a name="ln1254">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole)&quot;,</a>
<a name="ln1255">       NO_STR</a>
<a name="ln1256">       IP_STR</a>
<a name="ln1257">       &quot;Establish static routes\n&quot;</a>
<a name="ln1258">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1259">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1260">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1261">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln1262">{</a>
<a name="ln1263">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1264">				 NULL, NULL, NULL, NULL, NULL);</a>
<a name="ln1265">}</a>
<a name="ln1266"> </a>
<a name="ln1267">DEFUN (no_ip_route_mask_flags2_tag,</a>
<a name="ln1268">       no_ip_route_mask_flags2_tag_cmd,</a>
<a name="ln1269">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln1270">       NO_STR</a>
<a name="ln1271">       IP_STR</a>
<a name="ln1272">       &quot;Establish static routes\n&quot;</a>
<a name="ln1273">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1274">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1275">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1276">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1277">       &quot;Tag of this route\n&quot;</a>
<a name="ln1278">       &quot;Tag value\n&quot;)</a>
<a name="ln1279">{</a>
<a name="ln1280">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1281">				 NULL, NULL, argv[2], NULL, NULL);</a>
<a name="ln1282">}</a>
<a name="ln1283"> </a>
<a name="ln1284">DEFUN (no_ip_route_mask_flags2_tag_vrf,</a>
<a name="ln1285">       no_ip_route_mask_flags2_tag_vrf_cmd,</a>
<a name="ln1286">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1287">       NO_STR</a>
<a name="ln1288">       IP_STR</a>
<a name="ln1289">       &quot;Establish static routes\n&quot;</a>
<a name="ln1290">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1291">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1292">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1293">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1294">       &quot;Tag of this route\n&quot;</a>
<a name="ln1295">       &quot;Tag value\n&quot;</a>
<a name="ln1296">       VRF_CMD_HELP_STR)</a>
<a name="ln1297">{</a>
<a name="ln1298">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1299">				 NULL, NULL, argv[2], NULL, argv[3]);</a>
<a name="ln1300">}</a>
<a name="ln1301"> </a>
<a name="ln1302">DEFUN (no_ip_route_distance,</a>
<a name="ln1303">       no_ip_route_distance_cmd,</a>
<a name="ln1304">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) &lt;1-255&gt;&quot;,</a>
<a name="ln1305">       NO_STR</a>
<a name="ln1306">       IP_STR</a>
<a name="ln1307">       &quot;Establish static routes\n&quot;</a>
<a name="ln1308">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1309">       &quot;IP gateway address\n&quot;</a>
<a name="ln1310">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1311">       &quot;Null interface\n&quot;</a>
<a name="ln1312">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1313">{</a>
<a name="ln1314">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL,</a>
<a name="ln1315">				 argv[1], NULL, NULL, argv[2], NULL);</a>
<a name="ln1316">}</a>
<a name="ln1317"> </a>
<a name="ln1318">DEFUN (no_ip_route_tag_distance,</a>
<a name="ln1319">       no_ip_route_tag_distance_cmd,</a>
<a name="ln1320">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln1321">       NO_STR</a>
<a name="ln1322">       IP_STR</a>
<a name="ln1323">       &quot;Establish static routes\n&quot;</a>
<a name="ln1324">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1325">       &quot;IP gateway address\n&quot;</a>
<a name="ln1326">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1327">       &quot;Null interface\n&quot;</a>
<a name="ln1328">       &quot;Tag of this route\n&quot;</a>
<a name="ln1329">       &quot;Tag value\n&quot;</a>
<a name="ln1330">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1331">{</a>
<a name="ln1332">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln1333">				 NULL, argv[2], argv[3], NULL);</a>
<a name="ln1334">}</a>
<a name="ln1335"> </a>
<a name="ln1336">DEFUN (no_ip_route_tag_distance_vrf,</a>
<a name="ln1337">       no_ip_route_tag_distance_vrf_cmd,</a>
<a name="ln1338">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1339">       NO_STR</a>
<a name="ln1340">       IP_STR</a>
<a name="ln1341">       &quot;Establish static routes\n&quot;</a>
<a name="ln1342">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1343">       &quot;IP gateway address\n&quot;</a>
<a name="ln1344">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1345">       &quot;Null interface\n&quot;</a>
<a name="ln1346">       &quot;Tag of this route\n&quot;</a>
<a name="ln1347">       &quot;Tag value\n&quot;</a>
<a name="ln1348">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1349">       VRF_CMD_HELP_STR)</a>
<a name="ln1350">{</a>
<a name="ln1351">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln1352">				 NULL, argv[2], argv[3], argv[4]);</a>
<a name="ln1353">}</a>
<a name="ln1354"> </a>
<a name="ln1355">DEFUN (no_ip_route_flags_distance,</a>
<a name="ln1356">       no_ip_route_flags_distance_cmd,</a>
<a name="ln1357">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln1358">       NO_STR</a>
<a name="ln1359">       IP_STR</a>
<a name="ln1360">       &quot;Establish static routes\n&quot;</a>
<a name="ln1361">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1362">       &quot;IP gateway address\n&quot;</a>
<a name="ln1363">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1364">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1365">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1366">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1367">{</a>
<a name="ln1368">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL,</a>
<a name="ln1369">				 argv[1], argv[2], NULL, argv[3], NULL);</a>
<a name="ln1370">}</a>
<a name="ln1371"> </a>
<a name="ln1372">DEFUN (no_ip_route_flags_tag_distance,</a>
<a name="ln1373">       no_ip_route_flags_tag_distance_cmd,</a>
<a name="ln1374">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln1375">       NO_STR</a>
<a name="ln1376">       IP_STR</a>
<a name="ln1377">       &quot;Establish static routes\n&quot;</a>
<a name="ln1378">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1379">       &quot;IP gateway address\n&quot;</a>
<a name="ln1380">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1381">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1382">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1383">       &quot;Tag of this route\n&quot;</a>
<a name="ln1384">       &quot;Tag value\n&quot;</a>
<a name="ln1385">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1386">{</a>
<a name="ln1387">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln1388">				 argv[2], argv[3], argv[4], NULL);</a>
<a name="ln1389">}</a>
<a name="ln1390"> </a>
<a name="ln1391">DEFUN (no_ip_route_flags_tag_distance_vrf,</a>
<a name="ln1392">       no_ip_route_flags_tag_distance_vrf_cmd,</a>
<a name="ln1393">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1394">       NO_STR</a>
<a name="ln1395">       IP_STR</a>
<a name="ln1396">       &quot;Establish static routes\n&quot;</a>
<a name="ln1397">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1398">       &quot;IP gateway address\n&quot;</a>
<a name="ln1399">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1400">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1401">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1402">       &quot;Tag of this route\n&quot;</a>
<a name="ln1403">       &quot;Tag value\n&quot;</a>
<a name="ln1404">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1405">       VRF_CMD_HELP_STR)</a>
<a name="ln1406">{</a>
<a name="ln1407">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln1408">				 argv[2], argv[3], argv[4], argv[5]);</a>
<a name="ln1409">}</a>
<a name="ln1410"> </a>
<a name="ln1411">DEFUN (no_ip_route_flags_distance2,</a>
<a name="ln1412">       no_ip_route_flags_distance2_cmd,</a>
<a name="ln1413">       &quot;no ip route A.B.C.D/M (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln1414">       NO_STR</a>
<a name="ln1415">       IP_STR</a>
<a name="ln1416">       &quot;Establish static routes\n&quot;</a>
<a name="ln1417">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1418">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1419">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1420">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1421">{</a>
<a name="ln1422">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, NULL,</a>
<a name="ln1423">				 argv[1], NULL, argv[2], NULL);</a>
<a name="ln1424">}</a>
<a name="ln1425"> </a>
<a name="ln1426">DEFUN (no_ip_route_flags_tag_distance2,</a>
<a name="ln1427">       no_ip_route_flags_tag_distance2_cmd,</a>
<a name="ln1428">       &quot;no ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln1429">       NO_STR</a>
<a name="ln1430">       IP_STR</a>
<a name="ln1431">       &quot;Establish static routes\n&quot;</a>
<a name="ln1432">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1433">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1434">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1435">       &quot;Tag of this route\n&quot;</a>
<a name="ln1436">       &quot;Tag value\n&quot;</a>
<a name="ln1437">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1438">{</a>
<a name="ln1439">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, NULL,</a>
<a name="ln1440">				 argv[1], argv[2] , argv[3], NULL);</a>
<a name="ln1441">}</a>
<a name="ln1442"> </a>
<a name="ln1443">DEFUN (no_ip_route_flags_tag_distance2_vrf,</a>
<a name="ln1444">       no_ip_route_flags_tag_distance2_vrf_cmd,</a>
<a name="ln1445">       &quot;no ip route A.B.C.D/M (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1446">       NO_STR</a>
<a name="ln1447">       IP_STR</a>
<a name="ln1448">       &quot;Establish static routes\n&quot;</a>
<a name="ln1449">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1450">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1451">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1452">       &quot;Tag of this route\n&quot;</a>
<a name="ln1453">       &quot;Tag value\n&quot;</a>
<a name="ln1454">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1455">       VRF_CMD_HELP_STR)</a>
<a name="ln1456">{</a>
<a name="ln1457">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, NULL,</a>
<a name="ln1458">				 argv[1], argv[2] , argv[3], argv[4]);</a>
<a name="ln1459">}</a>
<a name="ln1460"> </a>
<a name="ln1461">DEFUN (no_ip_route_mask_distance,</a>
<a name="ln1462">       no_ip_route_mask_distance_cmd,</a>
<a name="ln1463">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) &lt;1-255&gt;&quot;,</a>
<a name="ln1464">       NO_STR</a>
<a name="ln1465">       IP_STR</a>
<a name="ln1466">       &quot;Establish static routes\n&quot;</a>
<a name="ln1467">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1468">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1469">       &quot;IP gateway address\n&quot;</a>
<a name="ln1470">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1471">       &quot;Null interface\n&quot;</a>
<a name="ln1472">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1473">{</a>
<a name="ln1474">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1475">				 argv[2], NULL, NULL, argv[3], NULL);</a>
<a name="ln1476">}</a>
<a name="ln1477"> </a>
<a name="ln1478">DEFUN (no_ip_route_mask_tag_distance,</a>
<a name="ln1479">       no_ip_route_mask_tag_distance_cmd,</a>
<a name="ln1480">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln1481">       NO_STR</a>
<a name="ln1482">       IP_STR</a>
<a name="ln1483">       &quot;Establish static routes\n&quot;</a>
<a name="ln1484">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1485">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1486">       &quot;IP gateway address\n&quot;</a>
<a name="ln1487">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1488">       &quot;Null interface\n&quot;</a>
<a name="ln1489">       &quot;Tag of this route\n&quot;</a>
<a name="ln1490">       &quot;Tag value\n&quot;</a>
<a name="ln1491">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1492">{</a>
<a name="ln1493">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1494">				 argv[2], NULL, argv[3], argv[4], NULL);</a>
<a name="ln1495">}</a>
<a name="ln1496"> </a>
<a name="ln1497">DEFUN (no_ip_route_mask_tag_distance_vrf,</a>
<a name="ln1498">       no_ip_route_mask_tag_distance_vrf_cmd,</a>
<a name="ln1499">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1500">       NO_STR</a>
<a name="ln1501">       IP_STR</a>
<a name="ln1502">       &quot;Establish static routes\n&quot;</a>
<a name="ln1503">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1504">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1505">       &quot;IP gateway address\n&quot;</a>
<a name="ln1506">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1507">       &quot;Null interface\n&quot;</a>
<a name="ln1508">       &quot;Tag of this route\n&quot;</a>
<a name="ln1509">       &quot;Tag value\n&quot;</a>
<a name="ln1510">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1511">       VRF_CMD_HELP_STR)</a>
<a name="ln1512">{</a>
<a name="ln1513">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1514">				 argv[2], NULL, argv[3], argv[4], argv[5]);</a>
<a name="ln1515">}</a>
<a name="ln1516"> </a>
<a name="ln1517">DEFUN (no_ip_route_mask_flags_distance,</a>
<a name="ln1518">       no_ip_route_mask_flags_distance_cmd,</a>
<a name="ln1519">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln1520">       NO_STR</a>
<a name="ln1521">       IP_STR</a>
<a name="ln1522">       &quot;Establish static routes\n&quot;</a>
<a name="ln1523">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1524">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1525">       &quot;IP gateway address\n&quot;</a>
<a name="ln1526">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1527">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1528">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1529">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1530">{</a>
<a name="ln1531">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1532">				 argv[2], argv[3], NULL, argv[4], NULL);</a>
<a name="ln1533">}</a>
<a name="ln1534"> </a>
<a name="ln1535">DEFUN (no_ip_route_mask_flags_tag_distance,</a>
<a name="ln1536">       no_ip_route_mask_flags_tag_distance_cmd,</a>
<a name="ln1537">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln1538">       NO_STR</a>
<a name="ln1539">       IP_STR</a>
<a name="ln1540">       &quot;Establish static routes\n&quot;</a>
<a name="ln1541">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1542">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1543">       &quot;IP gateway address\n&quot;</a>
<a name="ln1544">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1545">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1546">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1547">       &quot;Tag of this route\n&quot;</a>
<a name="ln1548">       &quot;Tag value\n&quot;</a>
<a name="ln1549">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1550">{</a>
<a name="ln1551">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1], argv[2], argv[3],</a>
<a name="ln1552">				 argv[4], argv[5], NULL);</a>
<a name="ln1553">}</a>
<a name="ln1554"> </a>
<a name="ln1555">DEFUN (no_ip_route_mask_flags_tag_distance_vrf,</a>
<a name="ln1556">       no_ip_route_mask_flags_tag_distance_vrf_cmd,</a>
<a name="ln1557">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln1558">       NO_STR</a>
<a name="ln1559">       IP_STR</a>
<a name="ln1560">       &quot;Establish static routes\n&quot;</a>
<a name="ln1561">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1562">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1563">       &quot;IP gateway address\n&quot;</a>
<a name="ln1564">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1565">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1566">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1567">       &quot;Tag of this route\n&quot;</a>
<a name="ln1568">       &quot;Tag value\n&quot;</a>
<a name="ln1569">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1570">       VRF_CMD_HELP_STR)</a>
<a name="ln1571">{</a>
<a name="ln1572">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1], argv[2], argv[3],</a>
<a name="ln1573">				 argv[4], argv[5], argv[6]);</a>
<a name="ln1574">}</a>
<a name="ln1575"> </a>
<a name="ln1576">DEFUN (no_ip_route_mask_flags_distance2,</a>
<a name="ln1577">       no_ip_route_mask_flags_distance2_cmd,</a>
<a name="ln1578">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln1579">       NO_STR</a>
<a name="ln1580">       IP_STR</a>
<a name="ln1581">       &quot;Establish static routes\n&quot;</a>
<a name="ln1582">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1583">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1584">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1585">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1586">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1587">{</a>
<a name="ln1588">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1589">				 NULL, argv[2], NULL, argv[3], NULL);</a>
<a name="ln1590">}</a>
<a name="ln1591"> </a>
<a name="ln1592">DEFUN (ip_route_vrf,</a>
<a name="ln1593">       ip_route_vrf_cmd,</a>
<a name="ln1594">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) &quot; VRF_CMD_STR,</a>
<a name="ln1595">       IP_STR</a>
<a name="ln1596">       &quot;Establish static routes\n&quot;</a>
<a name="ln1597">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1598">       &quot;IP gateway address\n&quot;</a>
<a name="ln1599">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1600">       &quot;Null interface\n&quot;</a>
<a name="ln1601">       VRF_CMD_HELP_STR)</a>
<a name="ln1602">{</a>
<a name="ln1603">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln1604">				 argv[1], NULL, NULL, NULL, argv[2]);</a>
<a name="ln1605">}</a>
<a name="ln1606"> </a>
<a name="ln1607">DEFUN (ip_route_flags_vrf,</a>
<a name="ln1608">       ip_route_flags_vrf_cmd,</a>
<a name="ln1609">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1610">       IP_STR</a>
<a name="ln1611">       &quot;Establish static routes\n&quot;</a>
<a name="ln1612">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1613">       &quot;IP gateway address\n&quot;</a>
<a name="ln1614">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1615">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1616">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1617">       VRF_CMD_HELP_STR)</a>
<a name="ln1618">{</a>
<a name="ln1619">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln1620">				 argv[1], argv[2], NULL, NULL, argv[3]);</a>
<a name="ln1621">}</a>
<a name="ln1622"> </a>
<a name="ln1623">DEFUN (ip_route_flags2_vrf,</a>
<a name="ln1624">       ip_route_flags2_vrf_cmd,</a>
<a name="ln1625">       &quot;ip route A.B.C.D/M (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1626">       IP_STR</a>
<a name="ln1627">       &quot;Establish static routes\n&quot;</a>
<a name="ln1628">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1629">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1630">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1631">       VRF_CMD_HELP_STR)</a>
<a name="ln1632">{</a>
<a name="ln1633">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln1634">				 NULL, argv[1], NULL, NULL, argv[2]);</a>
<a name="ln1635">}</a>
<a name="ln1636"> </a>
<a name="ln1637">/* Mask as A.B.C.D format.  */</a>
<a name="ln1638">DEFUN (ip_route_mask_vrf,</a>
<a name="ln1639">       ip_route_mask_vrf_cmd,</a>
<a name="ln1640">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) &quot; VRF_CMD_STR,</a>
<a name="ln1641">       IP_STR</a>
<a name="ln1642">       &quot;Establish static routes\n&quot;</a>
<a name="ln1643">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1644">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1645">       &quot;IP gateway address\n&quot;</a>
<a name="ln1646">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1647">       &quot;Null interface\n&quot;</a>
<a name="ln1648">       VRF_CMD_HELP_STR)</a>
<a name="ln1649">{</a>
<a name="ln1650">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln1651">				 argv[2], NULL, NULL, NULL, argv[3]);</a>
<a name="ln1652">}</a>
<a name="ln1653"> </a>
<a name="ln1654">DEFUN (ip_route_mask_flags_vrf,</a>
<a name="ln1655">       ip_route_mask_flags_vrf_cmd,</a>
<a name="ln1656">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1657">       IP_STR</a>
<a name="ln1658">       &quot;Establish static routes\n&quot;</a>
<a name="ln1659">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1660">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1661">       &quot;IP gateway address\n&quot;</a>
<a name="ln1662">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1663">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1664">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1665">       VRF_CMD_HELP_STR)</a>
<a name="ln1666">{</a>
<a name="ln1667">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln1668">				 argv[2], argv[3], NULL, NULL, argv[4]);</a>
<a name="ln1669">}</a>
<a name="ln1670"> </a>
<a name="ln1671">DEFUN (ip_route_mask_flags2_vrf,</a>
<a name="ln1672">       ip_route_mask_flags2_vrf_cmd,</a>
<a name="ln1673">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1674">       IP_STR</a>
<a name="ln1675">       &quot;Establish static routes\n&quot;</a>
<a name="ln1676">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1677">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1678">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1679">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1680">       VRF_CMD_HELP_STR)</a>
<a name="ln1681">{</a>
<a name="ln1682">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln1683">				 NULL, argv[2], NULL, NULL, argv[3]);</a>
<a name="ln1684">}</a>
<a name="ln1685"> </a>
<a name="ln1686">/* Distance option value.  */</a>
<a name="ln1687">DEFUN (ip_route_distance_vrf,</a>
<a name="ln1688">       ip_route_distance_vrf_cmd,</a>
<a name="ln1689">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1690">       IP_STR</a>
<a name="ln1691">       &quot;Establish static routes\n&quot;</a>
<a name="ln1692">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1693">       &quot;IP gateway address\n&quot;</a>
<a name="ln1694">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1695">       &quot;Null interface\n&quot;</a>
<a name="ln1696">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1697">       VRF_CMD_HELP_STR)</a>
<a name="ln1698">{</a>
<a name="ln1699">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln1700">				 argv[1], NULL, NULL, argv[2], argv[3]);</a>
<a name="ln1701">}</a>
<a name="ln1702"> </a>
<a name="ln1703">DEFUN (ip_route_flags_distance_vrf,</a>
<a name="ln1704">       ip_route_flags_distance_vrf_cmd,</a>
<a name="ln1705">       &quot;ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1706">       IP_STR</a>
<a name="ln1707">       &quot;Establish static routes\n&quot;</a>
<a name="ln1708">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1709">       &quot;IP gateway address\n&quot;</a>
<a name="ln1710">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1711">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1712">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1713">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1714">       VRF_CMD_HELP_STR)</a>
<a name="ln1715">{</a>
<a name="ln1716">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln1717">				 argv[1], argv[2], NULL, argv[3], argv[4]);</a>
<a name="ln1718">}</a>
<a name="ln1719"> </a>
<a name="ln1720">DEFUN (ip_route_flags_distance2_vrf,</a>
<a name="ln1721">       ip_route_flags_distance2_vrf_cmd,</a>
<a name="ln1722">       &quot;ip route A.B.C.D/M (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1723">       IP_STR</a>
<a name="ln1724">       &quot;Establish static routes\n&quot;</a>
<a name="ln1725">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1726">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1727">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1728">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1729">       VRF_CMD_HELP_STR)</a>
<a name="ln1730">{</a>
<a name="ln1731">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], NULL,</a>
<a name="ln1732">				 NULL, argv[1], NULL, argv[2], argv[3]);</a>
<a name="ln1733">}</a>
<a name="ln1734"> </a>
<a name="ln1735">DEFUN (ip_route_mask_distance_vrf,</a>
<a name="ln1736">       ip_route_mask_distance_vrf_cmd,</a>
<a name="ln1737">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1738">       IP_STR</a>
<a name="ln1739">       &quot;Establish static routes\n&quot;</a>
<a name="ln1740">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1741">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1742">       &quot;IP gateway address\n&quot;</a>
<a name="ln1743">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1744">       &quot;Null interface\n&quot;</a>
<a name="ln1745">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1746">       VRF_CMD_HELP_STR)</a>
<a name="ln1747">{</a>
<a name="ln1748">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln1749">				 argv[2], NULL, NULL, argv[3], argv[4]);</a>
<a name="ln1750">}</a>
<a name="ln1751"> </a>
<a name="ln1752">DEFUN (ip_route_mask_flags_distance_vrf,</a>
<a name="ln1753">       ip_route_mask_flags_distance_vrf_cmd,</a>
<a name="ln1754">       &quot;ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1755">       IP_STR</a>
<a name="ln1756">       &quot;Establish static routes\n&quot;</a>
<a name="ln1757">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1758">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1759">       &quot;IP gateway address\n&quot;</a>
<a name="ln1760">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1761">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1762">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1763">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1764">       VRF_CMD_HELP_STR)</a>
<a name="ln1765">{</a>
<a name="ln1766">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln1767">				 argv[2], argv[3], NULL, argv[4], argv[5]);</a>
<a name="ln1768">}</a>
<a name="ln1769"> </a>
<a name="ln1770">DEFUN (ip_route_mask_flags_distance2_vrf,</a>
<a name="ln1771">       ip_route_mask_flags_distance2_vrf_cmd,</a>
<a name="ln1772">       &quot;ip route A.B.C.D A.B.C.D (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1773">       IP_STR</a>
<a name="ln1774">       &quot;Establish static routes\n&quot;</a>
<a name="ln1775">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1776">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1777">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1778">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1779">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1780">       VRF_CMD_HELP_STR)</a>
<a name="ln1781">{</a>
<a name="ln1782">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 1, argv[0], argv[1],</a>
<a name="ln1783">				 NULL, argv[2], NULL, argv[3], argv[4]);</a>
<a name="ln1784">}</a>
<a name="ln1785"> </a>
<a name="ln1786">DEFUN (no_ip_route_vrf,</a>
<a name="ln1787">       no_ip_route_vrf_cmd,</a>
<a name="ln1788">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) &quot; VRF_CMD_STR,</a>
<a name="ln1789">       NO_STR</a>
<a name="ln1790">       IP_STR</a>
<a name="ln1791">       &quot;Establish static routes\n&quot;</a>
<a name="ln1792">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1793">       &quot;IP gateway address\n&quot;</a>
<a name="ln1794">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1795">       &quot;Null interface\n&quot;</a>
<a name="ln1796">       VRF_CMD_HELP_STR)</a>
<a name="ln1797">{</a>
<a name="ln1798">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0],</a>
<a name="ln1799">				 NULL, argv[1], NULL, NULL, NULL,</a>
<a name="ln1800">				 (argc &gt; 3) ? argv[3] : argv[2]);</a>
<a name="ln1801">}</a>
<a name="ln1802"> </a>
<a name="ln1803">ALIAS (no_ip_route_vrf,</a>
<a name="ln1804">       no_ip_route_flags_vrf_cmd,</a>
<a name="ln1805">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1806">       NO_STR</a>
<a name="ln1807">       IP_STR</a>
<a name="ln1808">       &quot;Establish static routes\n&quot;</a>
<a name="ln1809">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1810">       &quot;IP gateway address\n&quot;</a>
<a name="ln1811">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1812">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1813">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1814">       VRF_CMD_HELP_STR)</a>
<a name="ln1815"> </a>
<a name="ln1816">DEFUN (no_ip_route_flags2_vrf,</a>
<a name="ln1817">       no_ip_route_flags2_vrf_cmd,</a>
<a name="ln1818">       &quot;no ip route A.B.C.D/M (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1819">       NO_STR</a>
<a name="ln1820">       IP_STR</a>
<a name="ln1821">       &quot;Establish static routes\n&quot;</a>
<a name="ln1822">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1823">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1824">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1825">       VRF_CMD_HELP_STR)</a>
<a name="ln1826">{</a>
<a name="ln1827">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0],</a>
<a name="ln1828">				 NULL, NULL, NULL, NULL, NULL, argv[2]);</a>
<a name="ln1829">}</a>
<a name="ln1830"> </a>
<a name="ln1831">DEFUN (no_ip_route_mask_vrf,</a>
<a name="ln1832">       no_ip_route_mask_vrf_cmd,</a>
<a name="ln1833">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) &quot; VRF_CMD_STR,</a>
<a name="ln1834">       NO_STR</a>
<a name="ln1835">       IP_STR</a>
<a name="ln1836">       &quot;Establish static routes\n&quot;</a>
<a name="ln1837">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1838">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1839">       &quot;IP gateway address\n&quot;</a>
<a name="ln1840">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1841">       &quot;Null interface\n&quot;</a>
<a name="ln1842">       VRF_CMD_HELP_STR)</a>
<a name="ln1843">{</a>
<a name="ln1844">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1845">				 argv[2], NULL, NULL, NULL,</a>
<a name="ln1846">				 (argc &gt; 4) ? argv[4] : argv[3]);</a>
<a name="ln1847">}</a>
<a name="ln1848"> </a>
<a name="ln1849">ALIAS (no_ip_route_mask_vrf,</a>
<a name="ln1850">       no_ip_route_mask_flags_vrf_cmd,</a>
<a name="ln1851">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1852">       NO_STR</a>
<a name="ln1853">       IP_STR</a>
<a name="ln1854">       &quot;Establish static routes\n&quot;</a>
<a name="ln1855">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1856">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1857">       &quot;IP gateway address\n&quot;</a>
<a name="ln1858">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1859">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1860">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1861">       VRF_CMD_HELP_STR)</a>
<a name="ln1862"> </a>
<a name="ln1863">DEFUN (no_ip_route_mask_flags2_vrf,</a>
<a name="ln1864">       no_ip_route_mask_flags2_vrf_cmd,</a>
<a name="ln1865">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln1866">       NO_STR</a>
<a name="ln1867">       IP_STR</a>
<a name="ln1868">       &quot;Establish static routes\n&quot;</a>
<a name="ln1869">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1870">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1871">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1872">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1873">       VRF_CMD_HELP_STR)</a>
<a name="ln1874">{</a>
<a name="ln1875">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1876">				 NULL, NULL, NULL, NULL, argv[2]);</a>
<a name="ln1877">}</a>
<a name="ln1878"> </a>
<a name="ln1879">DEFUN (no_ip_route_distance_vrf,</a>
<a name="ln1880">       no_ip_route_distance_vrf_cmd,</a>
<a name="ln1881">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE|null0) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1882">       NO_STR</a>
<a name="ln1883">       IP_STR</a>
<a name="ln1884">       &quot;Establish static routes\n&quot;</a>
<a name="ln1885">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1886">       &quot;IP gateway address\n&quot;</a>
<a name="ln1887">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1888">       &quot;Null interface\n&quot;</a>
<a name="ln1889">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1890">       VRF_CMD_HELP_STR)</a>
<a name="ln1891">{</a>
<a name="ln1892">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL,</a>
<a name="ln1893">				 argv[1], NULL, NULL, argv[2], argv[3]);</a>
<a name="ln1894">}</a>
<a name="ln1895"> </a>
<a name="ln1896">DEFUN (no_ip_route_flags_distance_vrf,</a>
<a name="ln1897">       no_ip_route_flags_distance_vrf_cmd,</a>
<a name="ln1898">       &quot;no ip route A.B.C.D/M (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1899">       NO_STR</a>
<a name="ln1900">       IP_STR</a>
<a name="ln1901">       &quot;Establish static routes\n&quot;</a>
<a name="ln1902">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1903">       &quot;IP gateway address\n&quot;</a>
<a name="ln1904">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1905">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1906">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1907">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1908">       VRF_CMD_HELP_STR)</a>
<a name="ln1909">{</a>
<a name="ln1910">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, argv[1],</a>
<a name="ln1911">				 argv[2], NULL, argv[3], argv[4]);</a>
<a name="ln1912">}</a>
<a name="ln1913"> </a>
<a name="ln1914">DEFUN (no_ip_route_flags_distance2_vrf,</a>
<a name="ln1915">       no_ip_route_flags_distance2_vrf_cmd,</a>
<a name="ln1916">       &quot;no ip route A.B.C.D/M (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1917">       NO_STR</a>
<a name="ln1918">       IP_STR</a>
<a name="ln1919">       &quot;Establish static routes\n&quot;</a>
<a name="ln1920">       &quot;IP destination prefix (e.g. 10.0.0.0/8)\n&quot;</a>
<a name="ln1921">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1922">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1923">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1924">       VRF_CMD_HELP_STR)</a>
<a name="ln1925">{</a>
<a name="ln1926">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], NULL, NULL,</a>
<a name="ln1927">				 argv[1], NULL, argv[2], argv[3]);</a>
<a name="ln1928">}</a>
<a name="ln1929"> </a>
<a name="ln1930">DEFUN (no_ip_route_mask_distance_vrf,</a>
<a name="ln1931">       no_ip_route_mask_distance_vrf_cmd,</a>
<a name="ln1932">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE|null0) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1933">       NO_STR</a>
<a name="ln1934">       IP_STR</a>
<a name="ln1935">       &quot;Establish static routes\n&quot;</a>
<a name="ln1936">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1937">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1938">       &quot;IP gateway address\n&quot;</a>
<a name="ln1939">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1940">       &quot;Null interface\n&quot;</a>
<a name="ln1941">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1942">       VRF_CMD_HELP_STR)</a>
<a name="ln1943">{</a>
<a name="ln1944">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1],</a>
<a name="ln1945">				 argv[2], NULL, NULL, argv[3], argv[4]);</a>
<a name="ln1946">}</a>
<a name="ln1947"> </a>
<a name="ln1948">DEFUN (no_ip_route_mask_flags_distance_vrf,</a>
<a name="ln1949">       no_ip_route_mask_flags_distance_vrf_cmd,</a>
<a name="ln1950">       &quot;no ip route A.B.C.D A.B.C.D (A.B.C.D|INTERFACE) (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1951">       NO_STR</a>
<a name="ln1952">       IP_STR</a>
<a name="ln1953">       &quot;Establish static routes\n&quot;</a>
<a name="ln1954">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1955">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1956">       &quot;IP gateway address\n&quot;</a>
<a name="ln1957">       &quot;IP gateway interface name\n&quot;</a>
<a name="ln1958">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1959">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1960">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1961">       VRF_CMD_HELP_STR)</a>
<a name="ln1962">{</a>
<a name="ln1963">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1], argv[2],</a>
<a name="ln1964">				 argv[3], NULL, argv[4], argv[5]);</a>
<a name="ln1965">}</a>
<a name="ln1966"> </a>
<a name="ln1967">DEFUN (no_ip_route_mask_flags_distance2_vrf,</a>
<a name="ln1968">       no_ip_route_mask_flags_distance2_vrf_cmd,</a>
<a name="ln1969">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln1970">       NO_STR</a>
<a name="ln1971">       IP_STR</a>
<a name="ln1972">       &quot;Establish static routes\n&quot;</a>
<a name="ln1973">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1974">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1975">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1976">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1977">       &quot;Distance value for this route\n&quot;</a>
<a name="ln1978">       VRF_CMD_HELP_STR)</a>
<a name="ln1979">{</a>
<a name="ln1980">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1], NULL,</a>
<a name="ln1981">                                 argv[2], NULL, argv[3], argv[4]);</a>
<a name="ln1982">}</a>
<a name="ln1983"> </a>
<a name="ln1984">DEFUN (no_ip_route_mask_flags_tag_distance2,</a>
<a name="ln1985">       no_ip_route_mask_flags_tag_distance2_cmd,</a>
<a name="ln1986">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln1987">       NO_STR</a>
<a name="ln1988">       IP_STR</a>
<a name="ln1989">       &quot;Establish static routes\n&quot;</a>
<a name="ln1990">       &quot;IP destination prefix\n&quot;</a>
<a name="ln1991">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln1992">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln1993">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln1994">       &quot;Tag of this route\n&quot;</a>
<a name="ln1995">       &quot;Tag value\n&quot;</a>
<a name="ln1996">       &quot;Distance value for this route\n&quot;)</a>
<a name="ln1997">{</a>
<a name="ln1998">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1], NULL,</a>
<a name="ln1999">				 argv[2], argv[3], argv[4], NULL);</a>
<a name="ln2000">}</a>
<a name="ln2001"> </a>
<a name="ln2002">DEFUN (no_ip_route_mask_flags_tag_distance2_vrf,</a>
<a name="ln2003">       no_ip_route_mask_flags_tag_distance2_vrf_cmd,</a>
<a name="ln2004">       &quot;no ip route A.B.C.D A.B.C.D (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln2005">       NO_STR</a>
<a name="ln2006">       IP_STR</a>
<a name="ln2007">       &quot;Establish static routes\n&quot;</a>
<a name="ln2008">       &quot;IP destination prefix\n&quot;</a>
<a name="ln2009">       &quot;IP destination prefix mask\n&quot;</a>
<a name="ln2010">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln2011">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln2012">       &quot;Tag of this route\n&quot;</a>
<a name="ln2013">       &quot;Tag value\n&quot;</a>
<a name="ln2014">       &quot;Distance value for this route\n&quot;</a>
<a name="ln2015">       VRF_CMD_HELP_STR)</a>
<a name="ln2016">{</a>
<a name="ln2017">  return zebra_static_ipv4_safi (vty, SAFI_UNICAST, 0, argv[0], argv[1], NULL,</a>
<a name="ln2018">				 argv[2], argv[3], argv[4], argv[5]);</a>
<a name="ln2019">}</a>
<a name="ln2020"> </a>
<a name="ln2021">char *proto_rm[AFI_MAX][ZEBRA_ROUTE_MAX+1];	/* &quot;any&quot; == ZEBRA_ROUTE_MAX */</a>
<a name="ln2022"> </a>
<a name="ln2023">DEFUN (ip_protocol,</a>
<a name="ln2024">       ip_protocol_cmd,</a>
<a name="ln2025">       &quot;ip protocol PROTO route-map ROUTE-MAP&quot;,</a>
<a name="ln2026">       NO_STR</a>
<a name="ln2027">       &quot;Apply route map to PROTO\n&quot;</a>
<a name="ln2028">       &quot;Protocol name\n&quot;</a>
<a name="ln2029">       &quot;Route map name\n&quot;)</a>
<a name="ln2030">{</a>
<a name="ln2031">  int i;</a>
<a name="ln2032"> </a>
<a name="ln2033">  if (strcasecmp(argv[0], &quot;any&quot;) == 0)</a>
<a name="ln2034">    i = ZEBRA_ROUTE_MAX;</a>
<a name="ln2035">  else</a>
<a name="ln2036">    i = proto_name2num(argv[0]);</a>
<a name="ln2037">  if (i &lt; 0)</a>
<a name="ln2038">    {</a>
<a name="ln2039">      vty_out (vty, &quot;invalid protocol name \&quot;%s\&quot;%s&quot;, argv[0] ? argv[0] : &quot;&quot;,</a>
<a name="ln2040">               VTY_NEWLINE);</a>
<a name="ln2041">      return CMD_WARNING;</a>
<a name="ln2042">    }</a>
<a name="ln2043">  if (proto_rm[AFI_IP][i])</a>
<a name="ln2044">    XFREE (MTYPE_ROUTE_MAP_NAME, proto_rm[AFI_IP][i]);</a>
<a name="ln2045">  proto_rm[AFI_IP][i] = XSTRDUP (MTYPE_ROUTE_MAP_NAME, argv[1]);</a>
<a name="ln2046">  return CMD_SUCCESS;</a>
<a name="ln2047">}</a>
<a name="ln2048"> </a>
<a name="ln2049">DEFUN (no_ip_protocol,</a>
<a name="ln2050">       no_ip_protocol_cmd,</a>
<a name="ln2051">       &quot;no ip protocol PROTO&quot;,</a>
<a name="ln2052">       NO_STR</a>
<a name="ln2053">       &quot;Remove route map from PROTO\n&quot;</a>
<a name="ln2054">       &quot;Protocol name\n&quot;)</a>
<a name="ln2055">{</a>
<a name="ln2056">  int i;</a>
<a name="ln2057"> </a>
<a name="ln2058">  if (strcasecmp(argv[0], &quot;any&quot;) == 0)</a>
<a name="ln2059">    i = ZEBRA_ROUTE_MAX;</a>
<a name="ln2060">  else</a>
<a name="ln2061">    i = proto_name2num(argv[0]);</a>
<a name="ln2062">  if (i &lt; 0)</a>
<a name="ln2063">    {</a>
<a name="ln2064">      vty_out (vty, &quot;invalid protocol name \&quot;%s\&quot;%s&quot;, argv[0] ? argv[0] : &quot;&quot;,</a>
<a name="ln2065">               VTY_NEWLINE);</a>
<a name="ln2066">     return CMD_WARNING;</a>
<a name="ln2067">    }</a>
<a name="ln2068">  if (proto_rm[AFI_IP][i])</a>
<a name="ln2069">    XFREE (MTYPE_ROUTE_MAP_NAME, proto_rm[AFI_IP][i]);</a>
<a name="ln2070">  proto_rm[AFI_IP][i] = NULL;</a>
<a name="ln2071">  return CMD_SUCCESS;</a>
<a name="ln2072">}</a>
<a name="ln2073"> </a>
<a name="ln2074">/* New RIB.  Detailed information for IPv4 route. */</a>
<a name="ln2075">static void</a>
<a name="ln2076">vty_show_ip_route_detail (struct vty *vty, struct route_node *rn, int mcast)</a>
<a name="ln2077">{</a>
<a name="ln2078">  struct rib *rib;</a>
<a name="ln2079">  struct nexthop *nexthop, *tnexthop;</a>
<a name="ln2080">  int recursing;</a>
<a name="ln2081">  char buf[PREFIX_STRLEN];</a>
<a name="ln2082"> </a>
<a name="ln2083">  RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2084">    {</a>
<a name="ln2085">      const char *mcast_info = &quot;&quot;;</a>
<a name="ln2086">      if (mcast)</a>
<a name="ln2087">        {</a>
<a name="ln2088">          rib_table_info_t *info = rn-&gt;table-&gt;info;</a>
<a name="ln2089">          mcast_info = (info-&gt;safi == SAFI_MULTICAST)</a>
<a name="ln2090">                       ? &quot; using Multicast RIB&quot;</a>
<a name="ln2091">                       : &quot; using Unicast RIB&quot;;</a>
<a name="ln2092">        }</a>
<a name="ln2093">      vty_out (vty, &quot;Routing entry for %s%s%s&quot;,</a>
<a name="ln2094">               prefix2str (&amp;rn-&gt;p, buf, sizeof(buf)), mcast_info,</a>
<a name="ln2095">              VTY_NEWLINE);</a>
<a name="ln2096">      vty_out (vty, &quot;  Known via \&quot;%s\&quot;&quot;, zebra_route_string (rib-&gt;type));</a>
<a name="ln2097">      vty_out (vty, &quot;, distance %u, metric %u&quot;, rib-&gt;distance, rib-&gt;metric);</a>
<a name="ln2098">      if (rib-&gt;mtu)</a>
<a name="ln2099">        vty_out (vty, &quot;, mtu %u&quot;, rib-&gt;mtu);</a>
<a name="ln2100">      vty_out (vty, &quot;, tag %d&quot;, rib-&gt;tag);</a>
<a name="ln2101">      vty_out (vty, &quot;, vrf %u&quot;, rib-&gt;vrf_id);</a>
<a name="ln2102">      if (CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_SELECTED))</a>
<a name="ln2103">        vty_out (vty, &quot;, best&quot;);</a>
<a name="ln2104">      if (CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_FIB_OVERRIDE))</a>
<a name="ln2105">        vty_out (vty, &quot;, fib-override&quot;);</a>
<a name="ln2106">      if (CHECK_FLAG (rib-&gt;status, RIB_ENTRY_SELECTED_FIB))</a>
<a name="ln2107">        vty_out (vty, &quot;, fib&quot;);</a>
<a name="ln2108">      if (rib-&gt;refcnt)</a>
<a name="ln2109">        vty_out (vty, &quot;, refcnt %ld&quot;, rib-&gt;refcnt);</a>
<a name="ln2110">      if (CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_BLACKHOLE))</a>
<a name="ln2111">       vty_out (vty, &quot;, blackhole&quot;);</a>
<a name="ln2112">      if (CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_REJECT))</a>
<a name="ln2113">       vty_out (vty, &quot;, reject&quot;);</a>
<a name="ln2114">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln2115"> </a>
<a name="ln2116">#define ONE_DAY_SECOND 60*60*24</a>
<a name="ln2117">#define ONE_WEEK_SECOND 60*60*24*7</a>
<a name="ln2118">      if (rib-&gt;type == ZEBRA_ROUTE_RIP</a>
<a name="ln2119">          || rib-&gt;type == ZEBRA_ROUTE_RIPNG</a>
<a name="ln2120">          || rib-&gt;type == ZEBRA_ROUTE_OSPF</a>
<a name="ln2121">          || rib-&gt;type == ZEBRA_ROUTE_OSPF6</a>
<a name="ln2122">          || rib-&gt;type == ZEBRA_ROUTE_BABEL</a>
<a name="ln2123">          || rib-&gt;type == ZEBRA_ROUTE_ISIS</a>
<a name="ln2124">          || rib-&gt;type == ZEBRA_ROUTE_NHRP</a>
<a name="ln2125">          || rib-&gt;type == ZEBRA_ROUTE_BGP)</a>
<a name="ln2126">	{</a>
<a name="ln2127">	  time_t uptime;</a>
<a name="ln2128">	  struct tm *tm;</a>
<a name="ln2129"> </a>
<a name="ln2130">	  uptime = time (NULL);</a>
<a name="ln2131">	  uptime -= rib-&gt;uptime;</a>
<a name="ln2132">	  tm = gmtime (&amp;uptime);</a>
<a name="ln2133"> </a>
<a name="ln2134">	  vty_out (vty, &quot;  Last update &quot;);</a>
<a name="ln2135"> </a>
<a name="ln2136">	  if (uptime &lt; ONE_DAY_SECOND)</a>
<a name="ln2137">	    vty_out (vty,  &quot;%02d:%02d:%02d&quot;, </a>
<a name="ln2138">		     tm-&gt;tm_hour, tm-&gt;tm_min, tm-&gt;tm_sec);</a>
<a name="ln2139">	  else if (uptime &lt; ONE_WEEK_SECOND)</a>
<a name="ln2140">	    vty_out (vty, &quot;%dd%02dh%02dm&quot;, </a>
<a name="ln2141">		     tm-&gt;tm_yday, tm-&gt;tm_hour, tm-&gt;tm_min);</a>
<a name="ln2142">	  else</a>
<a name="ln2143">	    vty_out (vty, &quot;%02dw%dd%02dh&quot;, </a>
<a name="ln2144">		     tm-&gt;tm_yday/7,</a>
<a name="ln2145">		     tm-&gt;tm_yday - ((tm-&gt;tm_yday/7) * 7), tm-&gt;tm_hour);</a>
<a name="ln2146">	  vty_out (vty, &quot; ago%s&quot;, VTY_NEWLINE);</a>
<a name="ln2147">	}</a>
<a name="ln2148"> </a>
<a name="ln2149">      for (ALL_NEXTHOPS_RO(rib-&gt;nexthop, nexthop, tnexthop, recursing))</a>
<a name="ln2150">        {</a>
<a name="ln2151">          vty_out (vty, &quot;  %c%c%s&quot;,</a>
<a name="ln2152">                   CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_ACTIVE) ? '&gt;' : ' ',</a>
<a name="ln2153">                   CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_FIB) ? '*' : ' ',</a>
<a name="ln2154">                   recursing ? &quot;  &quot; : &quot;&quot;);</a>
<a name="ln2155"> </a>
<a name="ln2156">          switch (nexthop-&gt;type)</a>
<a name="ln2157">            {</a>
<a name="ln2158">            case NEXTHOP_TYPE_IPV4:</a>
<a name="ln2159">            case NEXTHOP_TYPE_IPV4_IFINDEX:</a>
<a name="ln2160">              vty_out (vty, &quot; %s&quot;, inet_ntoa (nexthop-&gt;gate.ipv4));</a>
<a name="ln2161">              if (nexthop-&gt;ifindex)</a>
<a name="ln2162">                vty_out (vty, &quot;, via %s&quot;,</a>
<a name="ln2163">                         ifindex2ifname_vrf (nexthop-&gt;ifindex, rib-&gt;vrf_id));</a>
<a name="ln2164">              break;</a>
<a name="ln2165">            case NEXTHOP_TYPE_IPV6:</a>
<a name="ln2166">            case NEXTHOP_TYPE_IPV6_IFINDEX:</a>
<a name="ln2167">            case NEXTHOP_TYPE_IPV6_IFNAME:</a>
<a name="ln2168">              vty_out (vty, &quot; %s&quot;,</a>
<a name="ln2169">                       inet_ntop (AF_INET6, &amp;nexthop-&gt;gate.ipv6, buf, sizeof(buf)));</a>
<a name="ln2170">              if (nexthop-&gt;type == NEXTHOP_TYPE_IPV6_IFNAME)</a>
<a name="ln2171">                vty_out (vty, &quot;, %s&quot;, nexthop-&gt;ifname);</a>
<a name="ln2172">              else if (nexthop-&gt;ifindex)</a>
<a name="ln2173">                vty_out (vty, &quot;, via %s&quot;,</a>
<a name="ln2174">                         ifindex2ifname_vrf (nexthop-&gt;ifindex, rib-&gt;vrf_id));</a>
<a name="ln2175">              break;</a>
<a name="ln2176">            case NEXTHOP_TYPE_IFINDEX:</a>
<a name="ln2177">              vty_out (vty, &quot; directly connected, %s&quot;,</a>
<a name="ln2178">                       ifindex2ifname_vrf (nexthop-&gt;ifindex, rib-&gt;vrf_id));</a>
<a name="ln2179">              break;</a>
<a name="ln2180">            case NEXTHOP_TYPE_IFNAME:</a>
<a name="ln2181">              vty_out (vty, &quot; directly connected, %s&quot;, nexthop-&gt;ifname);</a>
<a name="ln2182">              break;</a>
<a name="ln2183">            case NEXTHOP_TYPE_BLACKHOLE:</a>
<a name="ln2184">              vty_out (vty, &quot; directly connected, Null0&quot;);</a>
<a name="ln2185">              break;</a>
<a name="ln2186">            default:</a>
<a name="ln2187">              break;</a>
<a name="ln2188">            }</a>
<a name="ln2189">          if (! CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_ACTIVE))</a>
<a name="ln2190">            vty_out (vty, &quot; inactive&quot;);</a>
<a name="ln2191"> </a>
<a name="ln2192">          if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_ONLINK))</a>
<a name="ln2193">            vty_out (vty, &quot; onlink&quot;);</a>
<a name="ln2194"> </a>
<a name="ln2195">          if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_RECURSIVE))</a>
<a name="ln2196">            vty_out (vty, &quot; (recursive)&quot;);</a>
<a name="ln2197"> </a>
<a name="ln2198">          switch (nexthop-&gt;type)</a>
<a name="ln2199">            {</a>
<a name="ln2200">            case NEXTHOP_TYPE_IPV4:</a>
<a name="ln2201">            case NEXTHOP_TYPE_IPV4_IFINDEX:</a>
<a name="ln2202">            case NEXTHOP_TYPE_IPV4_IFNAME:</a>
<a name="ln2203">              if (nexthop-&gt;src.ipv4.s_addr)</a>
<a name="ln2204">                {</a>
<a name="ln2205">                  if (inet_ntop(AF_INET, &amp;nexthop-&gt;src.ipv4, buf, sizeof buf))</a>
<a name="ln2206">                    vty_out (vty, &quot;, src %s&quot;, buf);</a>
<a name="ln2207">                }</a>
<a name="ln2208">              break;</a>
<a name="ln2209">#ifdef HAVE_IPV6</a>
<a name="ln2210">            case NEXTHOP_TYPE_IPV6:</a>
<a name="ln2211">            case NEXTHOP_TYPE_IPV6_IFINDEX:</a>
<a name="ln2212">            case NEXTHOP_TYPE_IPV6_IFNAME:</a>
<a name="ln2213">              if (!IPV6_ADDR_SAME(&amp;nexthop-&gt;src.ipv6, &amp;in6addr_any))</a>
<a name="ln2214">                {</a>
<a name="ln2215">                  if (inet_ntop(AF_INET6, &amp;nexthop-&gt;src.ipv6, buf, sizeof buf))</a>
<a name="ln2216">                    vty_out (vty, &quot;, src %s&quot;, buf);</a>
<a name="ln2217">                }</a>
<a name="ln2218">              break;</a>
<a name="ln2219">#endif /* HAVE_IPV6 */</a>
<a name="ln2220">            default:</a>
<a name="ln2221">               break;</a>
<a name="ln2222">            }</a>
<a name="ln2223">          vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln2224">        }</a>
<a name="ln2225">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln2226">    }</a>
<a name="ln2227">}</a>
<a name="ln2228"> </a>
<a name="ln2229">static void</a>
<a name="ln2230">vty_show_ip_route (struct vty *vty, struct route_node *rn, struct rib *rib)</a>
<a name="ln2231">{</a>
<a name="ln2232">  struct nexthop *nexthop, *tnexthop;</a>
<a name="ln2233">  int recursing;</a>
<a name="ln2234">  int len = 0;</a>
<a name="ln2235">  char buf[BUFSIZ];</a>
<a name="ln2236"> </a>
<a name="ln2237">  /* Nexthop information. */</a>
<a name="ln2238">  for (ALL_NEXTHOPS_RO(rib-&gt;nexthop, nexthop, tnexthop, recursing))</a>
<a name="ln2239">    {</a>
<a name="ln2240">      if (nexthop == rib-&gt;nexthop)</a>
<a name="ln2241">	{</a>
<a name="ln2242">	  /* Prefix information. */</a>
<a name="ln2243">	  len = vty_out (vty, &quot;%c%c%c %s&quot;,</a>
<a name="ln2244">			 zebra_route_char (rib-&gt;type),</a>
<a name="ln2245">			 CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_SELECTED)</a>
<a name="ln2246">			 ? '&gt;' : ' ',</a>
<a name="ln2247">			 CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_FIB)</a>
<a name="ln2248">			 ? '*' : ' ',</a>
<a name="ln2249">			 prefix2str (&amp;rn-&gt;p, buf, sizeof buf));</a>
<a name="ln2250">		</a>
<a name="ln2251">	  /* Distance and metric display. */</a>
<a name="ln2252">	  if (rib-&gt;type != ZEBRA_ROUTE_CONNECT </a>
<a name="ln2253">	      &amp;&amp; rib-&gt;type != ZEBRA_ROUTE_KERNEL)</a>
<a name="ln2254">	    len += vty_out (vty, &quot; [%d/%d]&quot;, rib-&gt;distance,</a>
<a name="ln2255">			    rib-&gt;metric);</a>
<a name="ln2256"> </a>
<a name="ln2257">          if (rib-&gt;vrf_id != VRF_DEFAULT)</a>
<a name="ln2258">            len += vty_out (vty, &quot; [vrf %u]&quot;, rib-&gt;vrf_id);</a>
<a name="ln2259">	}</a>
<a name="ln2260">      else</a>
<a name="ln2261">	vty_out (vty, &quot;  %c%*c&quot;,</a>
<a name="ln2262">		 CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_FIB)</a>
<a name="ln2263">		 ? '*' : ' ',</a>
<a name="ln2264">		 len - 3 + (2 * recursing), ' ');</a>
<a name="ln2265"> </a>
<a name="ln2266">      switch (nexthop-&gt;type)</a>
<a name="ln2267">        {</a>
<a name="ln2268">        case NEXTHOP_TYPE_IPV4:</a>
<a name="ln2269">        case NEXTHOP_TYPE_IPV4_IFINDEX:</a>
<a name="ln2270">          vty_out (vty, &quot; via %s&quot;, inet_ntoa (nexthop-&gt;gate.ipv4));</a>
<a name="ln2271">          if (nexthop-&gt;ifindex)</a>
<a name="ln2272">            vty_out (vty, &quot;, %s&quot;,</a>
<a name="ln2273">                     ifindex2ifname_vrf (nexthop-&gt;ifindex, rib-&gt;vrf_id));</a>
<a name="ln2274">          break;</a>
<a name="ln2275">        case NEXTHOP_TYPE_IPV6:</a>
<a name="ln2276">        case NEXTHOP_TYPE_IPV6_IFINDEX:</a>
<a name="ln2277">        case NEXTHOP_TYPE_IPV6_IFNAME:</a>
<a name="ln2278">          vty_out (vty, &quot; via %s&quot;,</a>
<a name="ln2279">                   inet_ntop (AF_INET6, &amp;nexthop-&gt;gate.ipv6, buf, BUFSIZ));</a>
<a name="ln2280">          if (nexthop-&gt;type == NEXTHOP_TYPE_IPV6_IFNAME)</a>
<a name="ln2281">            vty_out (vty, &quot;, %s&quot;, nexthop-&gt;ifname);</a>
<a name="ln2282">          else if (nexthop-&gt;ifindex)</a>
<a name="ln2283">            vty_out (vty, &quot;, %s&quot;,</a>
<a name="ln2284">                     ifindex2ifname_vrf (nexthop-&gt;ifindex, rib-&gt;vrf_id));</a>
<a name="ln2285">          break;</a>
<a name="ln2286">        case NEXTHOP_TYPE_IFINDEX:</a>
<a name="ln2287">          vty_out (vty, &quot; is directly connected, %s&quot;,</a>
<a name="ln2288">                   ifindex2ifname_vrf (nexthop-&gt;ifindex, rib-&gt;vrf_id));</a>
<a name="ln2289">          break;</a>
<a name="ln2290">        case NEXTHOP_TYPE_IFNAME:</a>
<a name="ln2291">          vty_out (vty, &quot; is directly connected, %s&quot;, nexthop-&gt;ifname);</a>
<a name="ln2292">          break;</a>
<a name="ln2293">        case NEXTHOP_TYPE_BLACKHOLE:</a>
<a name="ln2294">          vty_out (vty, &quot; is directly connected, Null0&quot;);</a>
<a name="ln2295">          break;</a>
<a name="ln2296">        default:</a>
<a name="ln2297">          break;</a>
<a name="ln2298">        }</a>
<a name="ln2299">      if (! CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_ACTIVE))</a>
<a name="ln2300">        vty_out (vty, &quot; inactive&quot;);</a>
<a name="ln2301"> </a>
<a name="ln2302">      if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_ONLINK))</a>
<a name="ln2303">        vty_out (vty, &quot; onlink&quot;);</a>
<a name="ln2304"> </a>
<a name="ln2305">      if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_RECURSIVE))</a>
<a name="ln2306">        vty_out (vty, &quot; (recursive)&quot;);</a>
<a name="ln2307"> </a>
<a name="ln2308">      switch (nexthop-&gt;type)</a>
<a name="ln2309">        {</a>
<a name="ln2310">          case NEXTHOP_TYPE_IPV4:</a>
<a name="ln2311">          case NEXTHOP_TYPE_IPV4_IFINDEX:</a>
<a name="ln2312">          case NEXTHOP_TYPE_IPV4_IFNAME:</a>
<a name="ln2313">            if (nexthop-&gt;src.ipv4.s_addr)</a>
<a name="ln2314">              {</a>
<a name="ln2315">                if (inet_ntop(AF_INET, &amp;nexthop-&gt;src.ipv4, buf, sizeof buf))</a>
<a name="ln2316">                  vty_out (vty, &quot;, src %s&quot;, buf);</a>
<a name="ln2317">              }</a>
<a name="ln2318">            break;</a>
<a name="ln2319">#ifdef HAVE_IPV6</a>
<a name="ln2320">          case NEXTHOP_TYPE_IPV6:</a>
<a name="ln2321">          case NEXTHOP_TYPE_IPV6_IFINDEX:</a>
<a name="ln2322">          case NEXTHOP_TYPE_IPV6_IFNAME:</a>
<a name="ln2323">            if (!IPV6_ADDR_SAME(&amp;nexthop-&gt;src.ipv6, &amp;in6addr_any))</a>
<a name="ln2324">              {</a>
<a name="ln2325">                if (inet_ntop(AF_INET6, &amp;nexthop-&gt;src.ipv6, buf, sizeof buf))</a>
<a name="ln2326">                  vty_out (vty, &quot;, src %s&quot;, buf);</a>
<a name="ln2327">              }</a>
<a name="ln2328">            break;</a>
<a name="ln2329">#endif /* HAVE_IPV6 */</a>
<a name="ln2330">          default:</a>
<a name="ln2331">            break;</a>
<a name="ln2332">        }</a>
<a name="ln2333"> </a>
<a name="ln2334">      if (CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_BLACKHOLE))</a>
<a name="ln2335">               vty_out (vty, &quot;, bh&quot;);</a>
<a name="ln2336">      if (CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_REJECT))</a>
<a name="ln2337">               vty_out (vty, &quot;, rej&quot;);</a>
<a name="ln2338"> </a>
<a name="ln2339">      if (rib-&gt;type == ZEBRA_ROUTE_RIP</a>
<a name="ln2340">          || rib-&gt;type == ZEBRA_ROUTE_RIPNG</a>
<a name="ln2341">          || rib-&gt;type == ZEBRA_ROUTE_OSPF</a>
<a name="ln2342">          || rib-&gt;type == ZEBRA_ROUTE_OSPF6</a>
<a name="ln2343">          || rib-&gt;type == ZEBRA_ROUTE_BABEL</a>
<a name="ln2344">          || rib-&gt;type == ZEBRA_ROUTE_ISIS</a>
<a name="ln2345">          || rib-&gt;type == ZEBRA_ROUTE_NHRP</a>
<a name="ln2346">          || rib-&gt;type == ZEBRA_ROUTE_BGP)</a>
<a name="ln2347">	{</a>
<a name="ln2348">	  time_t uptime;</a>
<a name="ln2349">	  struct tm *tm;</a>
<a name="ln2350"> </a>
<a name="ln2351">	  uptime = time (NULL);</a>
<a name="ln2352">	  uptime -= rib-&gt;uptime;</a>
<a name="ln2353">	  tm = gmtime (&amp;uptime);</a>
<a name="ln2354"> </a>
<a name="ln2355">#define ONE_DAY_SECOND 60*60*24</a>
<a name="ln2356">#define ONE_WEEK_SECOND 60*60*24*7</a>
<a name="ln2357"> </a>
<a name="ln2358">	  if (uptime &lt; ONE_DAY_SECOND)</a>
<a name="ln2359">	    vty_out (vty,  &quot;, %02d:%02d:%02d&quot;, </a>
<a name="ln2360">		     tm-&gt;tm_hour, tm-&gt;tm_min, tm-&gt;tm_sec);</a>
<a name="ln2361">	  else if (uptime &lt; ONE_WEEK_SECOND)</a>
<a name="ln2362">	    vty_out (vty, &quot;, %dd%02dh%02dm&quot;, </a>
<a name="ln2363">		     tm-&gt;tm_yday, tm-&gt;tm_hour, tm-&gt;tm_min);</a>
<a name="ln2364">	  else</a>
<a name="ln2365">	    vty_out (vty, &quot;, %02dw%dd%02dh&quot;, </a>
<a name="ln2366">		     tm-&gt;tm_yday/7,</a>
<a name="ln2367">		     tm-&gt;tm_yday - ((tm-&gt;tm_yday/7) * 7), tm-&gt;tm_hour);</a>
<a name="ln2368">	}</a>
<a name="ln2369">      vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln2370">    }</a>
<a name="ln2371">}</a>
<a name="ln2372"> </a>
<a name="ln2373">DEFUN (show_ip_route,</a>
<a name="ln2374">       show_ip_route_cmd,</a>
<a name="ln2375">       &quot;show ip route&quot;,</a>
<a name="ln2376">       SHOW_STR</a>
<a name="ln2377">       IP_STR</a>
<a name="ln2378">       &quot;IP routing table\n&quot;)</a>
<a name="ln2379">{</a>
<a name="ln2380">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2381"> </a>
<a name="ln2382">  if (argc &gt; 0)</a>
<a name="ln2383">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln2384"> </a>
<a name="ln2385">  return do_show_ip_route(vty, SAFI_UNICAST, vrf_id);</a>
<a name="ln2386">}</a>
<a name="ln2387"> </a>
<a name="ln2388">static int do_show_ip_route(struct vty *vty, safi_t safi, vrf_id_t vrf_id)</a>
<a name="ln2389">{</a>
<a name="ln2390">  struct route_table *table;</a>
<a name="ln2391">  struct route_node *rn;</a>
<a name="ln2392">  struct rib *rib;</a>
<a name="ln2393">  int first = 1;</a>
<a name="ln2394"> </a>
<a name="ln2395">  table = zebra_vrf_table (AFI_IP, safi, vrf_id);</a>
<a name="ln2396">  if (! table)</a>
<a name="ln2397">    return CMD_SUCCESS;</a>
<a name="ln2398"> </a>
<a name="ln2399">  /* Show all IPv4 routes. */</a>
<a name="ln2400">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln2401">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2402">      {</a>
<a name="ln2403">	if (first)</a>
<a name="ln2404">	  {</a>
<a name="ln2405">	    vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln2406">	    first = 0;</a>
<a name="ln2407">	  }</a>
<a name="ln2408">	vty_show_ip_route (vty, rn, rib);</a>
<a name="ln2409">      }</a>
<a name="ln2410">  return CMD_SUCCESS;</a>
<a name="ln2411">}</a>
<a name="ln2412"> </a>
<a name="ln2413">ALIAS (show_ip_route,</a>
<a name="ln2414">       show_ip_route_vrf_cmd,</a>
<a name="ln2415">       &quot;show ip route &quot; VRF_CMD_STR,</a>
<a name="ln2416">       SHOW_STR</a>
<a name="ln2417">       IP_STR</a>
<a name="ln2418">       &quot;IP routing table\n&quot;</a>
<a name="ln2419">       VRF_CMD_HELP_STR)</a>
<a name="ln2420"> </a>
<a name="ln2421">DEFUN (show_ip_nht,</a>
<a name="ln2422">       show_ip_nht_cmd,</a>
<a name="ln2423">       &quot;show ip nht&quot;,</a>
<a name="ln2424">       SHOW_STR</a>
<a name="ln2425">       IP_STR</a>
<a name="ln2426">       &quot;IP nexthop tracking table\n&quot;)</a>
<a name="ln2427">{</a>
<a name="ln2428">  zebra_print_rnh_table(0, AF_INET, vty);</a>
<a name="ln2429">  return CMD_SUCCESS;</a>
<a name="ln2430">}</a>
<a name="ln2431"> </a>
<a name="ln2432">DEFUN (show_ipv6_nht,</a>
<a name="ln2433">       show_ipv6_nht_cmd,</a>
<a name="ln2434">       &quot;show ipv6 nht&quot;,</a>
<a name="ln2435">       SHOW_STR</a>
<a name="ln2436">       IP_STR</a>
<a name="ln2437">       &quot;IPv6 nexthop tracking table\n&quot;)</a>
<a name="ln2438">{</a>
<a name="ln2439">  zebra_print_rnh_table(0, AF_INET6, vty);</a>
<a name="ln2440">  return CMD_SUCCESS;</a>
<a name="ln2441">}</a>
<a name="ln2442"> </a>
<a name="ln2443">DEFUN (show_ip_route_tag,</a>
<a name="ln2444">       show_ip_route_tag_cmd,</a>
<a name="ln2445">       &quot;show ip route tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln2446">       SHOW_STR</a>
<a name="ln2447">       IP_STR</a>
<a name="ln2448">       &quot;IP routing table\n&quot;</a>
<a name="ln2449">       &quot;Show only routes with tag\n&quot;</a>
<a name="ln2450">       &quot;Tag value\n&quot;)</a>
<a name="ln2451">{</a>
<a name="ln2452">  struct route_table *table;</a>
<a name="ln2453">  struct route_node *rn;</a>
<a name="ln2454">  struct rib *rib;</a>
<a name="ln2455">  int first = 1;</a>
<a name="ln2456">  route_tag_t tag = 0;</a>
<a name="ln2457">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2458"> </a>
<a name="ln2459">  if (argv[0])</a>
<a name="ln2460">    tag = atoi(argv[0]);</a>
<a name="ln2461"> </a>
<a name="ln2462">  if (argc == 2)</a>
<a name="ln2463">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln2464"> </a>
<a name="ln2465">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2466">  if (! table)</a>
<a name="ln2467">    return CMD_SUCCESS;</a>
<a name="ln2468"> </a>
<a name="ln2469">  /* Show all IPv4 routes with matching tag value. */</a>
<a name="ln2470">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln2471">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2472">      {</a>
<a name="ln2473">        if (rib-&gt;tag != tag)</a>
<a name="ln2474">          continue;</a>
<a name="ln2475"> </a>
<a name="ln2476">        if (first)</a>
<a name="ln2477">          {</a>
<a name="ln2478">            vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln2479">            first = 0;</a>
<a name="ln2480">          }</a>
<a name="ln2481">        vty_show_ip_route (vty, rn, rib);</a>
<a name="ln2482">      }</a>
<a name="ln2483">  return CMD_SUCCESS;</a>
<a name="ln2484">}</a>
<a name="ln2485"> </a>
<a name="ln2486">ALIAS (show_ip_route_tag,</a>
<a name="ln2487">       show_ip_route_tag_vrf_cmd,</a>
<a name="ln2488">       &quot;show ip route tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln2489">       SHOW_STR</a>
<a name="ln2490">       IP_STR</a>
<a name="ln2491">       &quot;IP routing table\n&quot;</a>
<a name="ln2492">       &quot;Show only routes with tag\n&quot;</a>
<a name="ln2493">       &quot;Tag value\n&quot;</a>
<a name="ln2494">       VRF_CMD_HELP_STR)</a>
<a name="ln2495"> </a>
<a name="ln2496">DEFUN (show_ip_route_prefix_longer,</a>
<a name="ln2497">       show_ip_route_prefix_longer_cmd,</a>
<a name="ln2498">       &quot;show ip route A.B.C.D/M longer-prefixes&quot;,</a>
<a name="ln2499">       SHOW_STR</a>
<a name="ln2500">       IP_STR</a>
<a name="ln2501">       &quot;IP routing table\n&quot;</a>
<a name="ln2502">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;</a>
<a name="ln2503">       &quot;Show route matching the specified Network/Mask pair only\n&quot;)</a>
<a name="ln2504">{</a>
<a name="ln2505">  struct route_table *table;</a>
<a name="ln2506">  struct route_node *rn;</a>
<a name="ln2507">  struct rib *rib;</a>
<a name="ln2508">  struct prefix p;</a>
<a name="ln2509">  int ret;</a>
<a name="ln2510">  int first = 1;</a>
<a name="ln2511">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2512"> </a>
<a name="ln2513">  ret = str2prefix (argv[0], &amp;p);</a>
<a name="ln2514">  if (! ret)</a>
<a name="ln2515">    {</a>
<a name="ln2516">      vty_out (vty, &quot;%% Malformed Prefix%s&quot;, VTY_NEWLINE);</a>
<a name="ln2517">      return CMD_WARNING;</a>
<a name="ln2518">    }</a>
<a name="ln2519"> </a>
<a name="ln2520">  if (argc &gt; 1)</a>
<a name="ln2521">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln2522"> </a>
<a name="ln2523">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2524">  if (! table)</a>
<a name="ln2525">    return CMD_SUCCESS;</a>
<a name="ln2526"> </a>
<a name="ln2527">  /* Show matched type IPv4 routes. */</a>
<a name="ln2528">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln2529">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2530">      if (prefix_match (&amp;p, &amp;rn-&gt;p))</a>
<a name="ln2531">	{</a>
<a name="ln2532">	  if (first)</a>
<a name="ln2533">	    {</a>
<a name="ln2534">	      vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln2535">	      first = 0;</a>
<a name="ln2536">	    }</a>
<a name="ln2537">	  vty_show_ip_route (vty, rn, rib);</a>
<a name="ln2538">	}</a>
<a name="ln2539">  return CMD_SUCCESS;</a>
<a name="ln2540">}</a>
<a name="ln2541"> </a>
<a name="ln2542">ALIAS (show_ip_route_prefix_longer,</a>
<a name="ln2543">       show_ip_route_prefix_longer_vrf_cmd,</a>
<a name="ln2544">       &quot;show ip route A.B.C.D/M longer-prefixes &quot; VRF_CMD_STR,</a>
<a name="ln2545">       SHOW_STR</a>
<a name="ln2546">       IP_STR</a>
<a name="ln2547">       &quot;IP routing table\n&quot;</a>
<a name="ln2548">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;</a>
<a name="ln2549">       &quot;Show route matching the specified Network/Mask pair only\n&quot;</a>
<a name="ln2550">       VRF_CMD_HELP_STR)</a>
<a name="ln2551"> </a>
<a name="ln2552">DEFUN (show_ip_route_supernets,</a>
<a name="ln2553">       show_ip_route_supernets_cmd,</a>
<a name="ln2554">       &quot;show ip route supernets-only&quot;,</a>
<a name="ln2555">       SHOW_STR</a>
<a name="ln2556">       IP_STR</a>
<a name="ln2557">       &quot;IP routing table\n&quot;</a>
<a name="ln2558">       &quot;Show supernet entries only\n&quot;)</a>
<a name="ln2559">{</a>
<a name="ln2560">  struct route_table *table;</a>
<a name="ln2561">  struct route_node *rn;</a>
<a name="ln2562">  struct rib *rib;</a>
<a name="ln2563">  u_int32_t addr;</a>
<a name="ln2564">  int first = 1;</a>
<a name="ln2565">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2566"> </a>
<a name="ln2567">  if (argc &gt; 0)</a>
<a name="ln2568">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln2569"> </a>
<a name="ln2570">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2571">  if (! table)</a>
<a name="ln2572">    return CMD_SUCCESS;</a>
<a name="ln2573"> </a>
<a name="ln2574">  /* Show matched type IPv4 routes. */</a>
<a name="ln2575">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln2576">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2577">      {</a>
<a name="ln2578">	addr = ntohl (rn-&gt;p.u.prefix4.s_addr);</a>
<a name="ln2579"> </a>
<a name="ln2580">	if ((IN_CLASSC (addr) &amp;&amp; rn-&gt;p.prefixlen &lt; 24)</a>
<a name="ln2581">	   || (IN_CLASSB (addr) &amp;&amp; rn-&gt;p.prefixlen &lt; 16)</a>
<a name="ln2582">	   || (IN_CLASSA (addr) &amp;&amp; rn-&gt;p.prefixlen &lt; 8))</a>
<a name="ln2583">	  {</a>
<a name="ln2584">	    if (first)</a>
<a name="ln2585">	      {</a>
<a name="ln2586">		vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln2587">		first = 0;</a>
<a name="ln2588">	      }</a>
<a name="ln2589">	    vty_show_ip_route (vty, rn, rib);</a>
<a name="ln2590">	  }</a>
<a name="ln2591">      }</a>
<a name="ln2592">  return CMD_SUCCESS;</a>
<a name="ln2593">}</a>
<a name="ln2594"> </a>
<a name="ln2595">ALIAS (show_ip_route_supernets,</a>
<a name="ln2596">       show_ip_route_supernets_vrf_cmd,</a>
<a name="ln2597">       &quot;show ip route supernets-only &quot; VRF_CMD_STR,</a>
<a name="ln2598">       SHOW_STR</a>
<a name="ln2599">       IP_STR</a>
<a name="ln2600">       &quot;IP routing table\n&quot;</a>
<a name="ln2601">       &quot;Show supernet entries only\n&quot;</a>
<a name="ln2602">       VRF_CMD_HELP_STR)</a>
<a name="ln2603"> </a>
<a name="ln2604">DEFUN (show_ip_route_protocol,</a>
<a name="ln2605">       show_ip_route_protocol_cmd,</a>
<a name="ln2606">       &quot;show ip route &quot; QUAGGA_IP_REDIST_STR_ZEBRA,</a>
<a name="ln2607">       SHOW_STR</a>
<a name="ln2608">       IP_STR</a>
<a name="ln2609">       &quot;IP routing table\n&quot;</a>
<a name="ln2610">       QUAGGA_IP_REDIST_HELP_STR_ZEBRA)</a>
<a name="ln2611">{</a>
<a name="ln2612">  int type;</a>
<a name="ln2613">  struct route_table *table;</a>
<a name="ln2614">  struct route_node *rn;</a>
<a name="ln2615">  struct rib *rib;</a>
<a name="ln2616">  int first = 1;</a>
<a name="ln2617">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2618"> </a>
<a name="ln2619">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln2620">  if (type &lt; 0)</a>
<a name="ln2621">    {</a>
<a name="ln2622">      vty_out (vty, &quot;Unknown route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln2623">      return CMD_WARNING;</a>
<a name="ln2624">    }</a>
<a name="ln2625"> </a>
<a name="ln2626">  if (argc &gt; 1)</a>
<a name="ln2627">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln2628"> </a>
<a name="ln2629">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2630">  if (! table)</a>
<a name="ln2631">    return CMD_SUCCESS;</a>
<a name="ln2632"> </a>
<a name="ln2633">  /* Show matched type IPv4 routes. */</a>
<a name="ln2634">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln2635">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2636">      if (rib-&gt;type == type)</a>
<a name="ln2637">	{</a>
<a name="ln2638">	  if (first)</a>
<a name="ln2639">	    {</a>
<a name="ln2640">	      vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln2641">	      first = 0;</a>
<a name="ln2642">	    }</a>
<a name="ln2643">	  vty_show_ip_route (vty, rn, rib);</a>
<a name="ln2644">	}</a>
<a name="ln2645">  return CMD_SUCCESS;</a>
<a name="ln2646">}</a>
<a name="ln2647"> </a>
<a name="ln2648">ALIAS (show_ip_route_protocol,</a>
<a name="ln2649">       show_ip_route_protocol_vrf_cmd,</a>
<a name="ln2650">       &quot;show ip route &quot; QUAGGA_IP_REDIST_STR_ZEBRA &quot; &quot; VRF_CMD_STR,</a>
<a name="ln2651">       SHOW_STR</a>
<a name="ln2652">       IP_STR</a>
<a name="ln2653">       &quot;IP routing table\n&quot;</a>
<a name="ln2654">       QUAGGA_IP_REDIST_HELP_STR_ZEBRA</a>
<a name="ln2655">       VRF_CMD_HELP_STR)</a>
<a name="ln2656"> </a>
<a name="ln2657">DEFUN (show_ip_route_addr,</a>
<a name="ln2658">       show_ip_route_addr_cmd,</a>
<a name="ln2659">       &quot;show ip route A.B.C.D&quot;,</a>
<a name="ln2660">       SHOW_STR</a>
<a name="ln2661">       IP_STR</a>
<a name="ln2662">       &quot;IP routing table\n&quot;</a>
<a name="ln2663">       &quot;Network in the IP routing table to display\n&quot;)</a>
<a name="ln2664">{</a>
<a name="ln2665">  int ret;</a>
<a name="ln2666">  struct prefix_ipv4 p;</a>
<a name="ln2667">  struct route_table *table;</a>
<a name="ln2668">  struct route_node *rn;</a>
<a name="ln2669">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2670"> </a>
<a name="ln2671">  ret = str2prefix_ipv4 (argv[0], &amp;p);</a>
<a name="ln2672">  if (ret &lt;= 0)</a>
<a name="ln2673">    {</a>
<a name="ln2674">      vty_out (vty, &quot;%% Malformed IPv4 address%s&quot;, VTY_NEWLINE);</a>
<a name="ln2675">      return CMD_WARNING;</a>
<a name="ln2676">    }</a>
<a name="ln2677"> </a>
<a name="ln2678">  if (argc &gt; 1)</a>
<a name="ln2679">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln2680"> </a>
<a name="ln2681">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2682">  if (! table)</a>
<a name="ln2683">    return CMD_SUCCESS;</a>
<a name="ln2684"> </a>
<a name="ln2685">  rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln2686">  if (! rn)</a>
<a name="ln2687">    {</a>
<a name="ln2688">      vty_out (vty, &quot;%% Network not in table%s&quot;, VTY_NEWLINE);</a>
<a name="ln2689">      return CMD_WARNING;</a>
<a name="ln2690">    }</a>
<a name="ln2691"> </a>
<a name="ln2692">  vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln2693"> </a>
<a name="ln2694">  route_unlock_node (rn);</a>
<a name="ln2695"> </a>
<a name="ln2696">  return CMD_SUCCESS;</a>
<a name="ln2697">}</a>
<a name="ln2698"> </a>
<a name="ln2699">ALIAS (show_ip_route_addr,</a>
<a name="ln2700">       show_ip_route_addr_vrf_cmd,</a>
<a name="ln2701">       &quot;show ip route A.B.C.D &quot; VRF_CMD_STR,</a>
<a name="ln2702">       SHOW_STR</a>
<a name="ln2703">       IP_STR</a>
<a name="ln2704">       &quot;IP routing table\n&quot;</a>
<a name="ln2705">       &quot;Network in the IP routing table to display\n&quot;</a>
<a name="ln2706">       VRF_CMD_HELP_STR)</a>
<a name="ln2707"> </a>
<a name="ln2708">DEFUN (show_ip_route_prefix,</a>
<a name="ln2709">       show_ip_route_prefix_cmd,</a>
<a name="ln2710">       &quot;show ip route A.B.C.D/M&quot;,</a>
<a name="ln2711">       SHOW_STR</a>
<a name="ln2712">       IP_STR</a>
<a name="ln2713">       &quot;IP routing table\n&quot;</a>
<a name="ln2714">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;)</a>
<a name="ln2715">{</a>
<a name="ln2716">  int ret;</a>
<a name="ln2717">  struct prefix_ipv4 p;</a>
<a name="ln2718">  struct route_table *table;</a>
<a name="ln2719">  struct route_node *rn;</a>
<a name="ln2720">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2721"> </a>
<a name="ln2722">  ret = str2prefix_ipv4 (argv[0], &amp;p);</a>
<a name="ln2723">  if (ret &lt;= 0)</a>
<a name="ln2724">    {</a>
<a name="ln2725">      vty_out (vty, &quot;%% Malformed IPv4 address%s&quot;, VTY_NEWLINE);</a>
<a name="ln2726">      return CMD_WARNING;</a>
<a name="ln2727">    }</a>
<a name="ln2728"> </a>
<a name="ln2729">  if (argc &gt; 1)</a>
<a name="ln2730">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln2731"> </a>
<a name="ln2732">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2733">  if (! table)</a>
<a name="ln2734">    return CMD_SUCCESS;</a>
<a name="ln2735"> </a>
<a name="ln2736">  rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln2737">  if (! rn || rn-&gt;p.prefixlen != p.prefixlen)</a>
<a name="ln2738">    {</a>
<a name="ln2739">      vty_out (vty, &quot;%% Network not in table%s&quot;, VTY_NEWLINE);</a>
<a name="ln2740">      if (rn)</a>
<a name="ln2741">        route_unlock_node (rn);</a>
<a name="ln2742">      return CMD_WARNING;</a>
<a name="ln2743">    }</a>
<a name="ln2744"> </a>
<a name="ln2745">  vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln2746"> </a>
<a name="ln2747">  route_unlock_node (rn);</a>
<a name="ln2748"> </a>
<a name="ln2749">  return CMD_SUCCESS;</a>
<a name="ln2750">}</a>
<a name="ln2751"> </a>
<a name="ln2752">ALIAS (show_ip_route_prefix,</a>
<a name="ln2753">       show_ip_route_prefix_vrf_cmd,</a>
<a name="ln2754">       &quot;show ip route A.B.C.D/M &quot; VRF_CMD_STR,</a>
<a name="ln2755">       SHOW_STR</a>
<a name="ln2756">       IP_STR</a>
<a name="ln2757">       &quot;IP routing table\n&quot;</a>
<a name="ln2758">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;</a>
<a name="ln2759">       VRF_CMD_HELP_STR)</a>
<a name="ln2760"> </a>
<a name="ln2761">static void</a>
<a name="ln2762">vty_show_ip_route_summary (struct vty *vty, struct route_table *table)</a>
<a name="ln2763">{</a>
<a name="ln2764">  struct route_node *rn;</a>
<a name="ln2765">  struct rib *rib;</a>
<a name="ln2766">  struct nexthop *nexthop;</a>
<a name="ln2767">#define ZEBRA_ROUTE_IBGP  ZEBRA_ROUTE_MAX</a>
<a name="ln2768">#define ZEBRA_ROUTE_TOTAL (ZEBRA_ROUTE_IBGP + 1)</a>
<a name="ln2769">  u_int32_t rib_cnt[ZEBRA_ROUTE_TOTAL + 1];</a>
<a name="ln2770">  u_int32_t fib_cnt[ZEBRA_ROUTE_TOTAL + 1];</a>
<a name="ln2771">  u_int32_t i;</a>
<a name="ln2772"> </a>
<a name="ln2773">  memset (&amp;rib_cnt, 0, sizeof(rib_cnt));</a>
<a name="ln2774">  memset (&amp;fib_cnt, 0, sizeof(fib_cnt));</a>
<a name="ln2775">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln2776">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2777">      for (nexthop = rib-&gt;nexthop; nexthop; nexthop = nexthop-&gt;next)</a>
<a name="ln2778">        {</a>
<a name="ln2779">	  rib_cnt[ZEBRA_ROUTE_TOTAL]++;</a>
<a name="ln2780">	  rib_cnt[rib-&gt;type]++;</a>
<a name="ln2781">	  if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_FIB)</a>
<a name="ln2782">	      || nexthop_has_fib_child(nexthop))</a>
<a name="ln2783">	    {</a>
<a name="ln2784">	      fib_cnt[ZEBRA_ROUTE_TOTAL]++;</a>
<a name="ln2785">	      fib_cnt[rib-&gt;type]++;</a>
<a name="ln2786">	    }</a>
<a name="ln2787">	  if (rib-&gt;type == ZEBRA_ROUTE_BGP &amp;&amp; </a>
<a name="ln2788">	      CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_IBGP)) </a>
<a name="ln2789">	    {</a>
<a name="ln2790">	      rib_cnt[ZEBRA_ROUTE_IBGP]++;</a>
<a name="ln2791">	      if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_FIB)</a>
<a name="ln2792">		  || nexthop_has_fib_child(nexthop))</a>
<a name="ln2793">		fib_cnt[ZEBRA_ROUTE_IBGP]++;</a>
<a name="ln2794">	    }</a>
<a name="ln2795">	}</a>
<a name="ln2796"> </a>
<a name="ln2797">  vty_out (vty, &quot;%-20s %-20s %s  (vrf %u)%s&quot;,</a>
<a name="ln2798">           &quot;Route Source&quot;, &quot;Routes&quot;, &quot;FIB&quot;,</a>
<a name="ln2799">           ((rib_table_info_t *)table-&gt;info)-&gt;zvrf-&gt;vrf_id,</a>
<a name="ln2800">           VTY_NEWLINE);</a>
<a name="ln2801"> </a>
<a name="ln2802">  for (i = 0; i &lt; ZEBRA_ROUTE_MAX; i++) </a>
<a name="ln2803">    {</a>
<a name="ln2804">      if (rib_cnt[i] &gt; 0)</a>
<a name="ln2805">	{</a>
<a name="ln2806">	  if (i == ZEBRA_ROUTE_BGP)</a>
<a name="ln2807">	    {</a>
<a name="ln2808">	      vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, &quot;ebgp&quot;, </a>
<a name="ln2809">		       rib_cnt[ZEBRA_ROUTE_BGP] - rib_cnt[ZEBRA_ROUTE_IBGP],</a>
<a name="ln2810">		       fib_cnt[ZEBRA_ROUTE_BGP] - fib_cnt[ZEBRA_ROUTE_IBGP],</a>
<a name="ln2811">		       VTY_NEWLINE);</a>
<a name="ln2812">	      vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, &quot;ibgp&quot;, </a>
<a name="ln2813">		       rib_cnt[ZEBRA_ROUTE_IBGP], fib_cnt[ZEBRA_ROUTE_IBGP],</a>
<a name="ln2814">		       VTY_NEWLINE);</a>
<a name="ln2815">	    }</a>
<a name="ln2816">	  else </a>
<a name="ln2817">	    vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, zebra_route_string(i), </a>
<a name="ln2818">		     rib_cnt[i], fib_cnt[i], VTY_NEWLINE);</a>
<a name="ln2819">	}</a>
<a name="ln2820">    }</a>
<a name="ln2821"> </a>
<a name="ln2822">  vty_out (vty, &quot;------%s&quot;, VTY_NEWLINE);</a>
<a name="ln2823">  vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, &quot;Totals&quot;, rib_cnt[ZEBRA_ROUTE_TOTAL], </a>
<a name="ln2824">	   fib_cnt[ZEBRA_ROUTE_TOTAL], VTY_NEWLINE);  </a>
<a name="ln2825">  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln2826">}</a>
<a name="ln2827"> </a>
<a name="ln2828">/*</a>
<a name="ln2829"> * Implementation of the ip route summary prefix command.</a>
<a name="ln2830"> *</a>
<a name="ln2831"> * This command prints the primary prefixes that have been installed by various</a>
<a name="ln2832"> * protocols on the box.</a>
<a name="ln2833"> *</a>
<a name="ln2834"> */</a>
<a name="ln2835">static void</a>
<a name="ln2836">vty_show_ip_route_summary_prefix (struct vty *vty, struct route_table *table)</a>
<a name="ln2837">{</a>
<a name="ln2838">  struct route_node *rn;</a>
<a name="ln2839">  struct rib *rib;</a>
<a name="ln2840">  struct nexthop *nexthop;</a>
<a name="ln2841">#define ZEBRA_ROUTE_IBGP  ZEBRA_ROUTE_MAX</a>
<a name="ln2842">#define ZEBRA_ROUTE_TOTAL (ZEBRA_ROUTE_IBGP + 1)</a>
<a name="ln2843">  u_int32_t rib_cnt[ZEBRA_ROUTE_TOTAL + 1];</a>
<a name="ln2844">  u_int32_t fib_cnt[ZEBRA_ROUTE_TOTAL + 1];</a>
<a name="ln2845">  u_int32_t i;</a>
<a name="ln2846">  int       cnt;</a>
<a name="ln2847"> </a>
<a name="ln2848">  memset (&amp;rib_cnt, 0, sizeof(rib_cnt));</a>
<a name="ln2849">  memset (&amp;fib_cnt, 0, sizeof(fib_cnt));</a>
<a name="ln2850">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln2851">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln2852">      {</a>
<a name="ln2853"> </a>
<a name="ln2854">       /*</a>
<a name="ln2855">        * In case of ECMP, count only once.</a>
<a name="ln2856">        */</a>
<a name="ln2857">       cnt = 0;</a>
<a name="ln2858">       for (nexthop = rib-&gt;nexthop; (!cnt &amp;&amp; nexthop); nexthop = nexthop-&gt;next)</a>
<a name="ln2859">         {</a>
<a name="ln2860">          cnt++;</a>
<a name="ln2861">          rib_cnt[ZEBRA_ROUTE_TOTAL]++;</a>
<a name="ln2862">          rib_cnt[rib-&gt;type]++;</a>
<a name="ln2863">          if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_FIB))</a>
<a name="ln2864">	        {</a>
<a name="ln2865">	         fib_cnt[ZEBRA_ROUTE_TOTAL]++;</a>
<a name="ln2866">             fib_cnt[rib-&gt;type]++;</a>
<a name="ln2867">            }</a>
<a name="ln2868">	      if (rib-&gt;type == ZEBRA_ROUTE_BGP &amp;&amp;</a>
<a name="ln2869">	          CHECK_FLAG (rib-&gt;flags, ZEBRA_FLAG_IBGP))</a>
<a name="ln2870">            {</a>
<a name="ln2871">	         rib_cnt[ZEBRA_ROUTE_IBGP]++;</a>
<a name="ln2872">		     if (CHECK_FLAG (nexthop-&gt;flags, NEXTHOP_FLAG_FIB))</a>
<a name="ln2873">		        fib_cnt[ZEBRA_ROUTE_IBGP]++;</a>
<a name="ln2874">            }</a>
<a name="ln2875">	     }</a>
<a name="ln2876">      }</a>
<a name="ln2877"> </a>
<a name="ln2878">  vty_out (vty, &quot;%-20s %-20s %s  (vrf %u)%s&quot;,</a>
<a name="ln2879">           &quot;Route Source&quot;, &quot;Prefix Routes&quot;, &quot;FIB&quot;,</a>
<a name="ln2880">           ((rib_table_info_t *)table-&gt;info)-&gt;zvrf-&gt;vrf_id,</a>
<a name="ln2881">           VTY_NEWLINE);</a>
<a name="ln2882"> </a>
<a name="ln2883">  for (i = 0; i &lt; ZEBRA_ROUTE_MAX; i++)</a>
<a name="ln2884">    {</a>
<a name="ln2885">      if (rib_cnt[i] &gt; 0)</a>
<a name="ln2886">	{</a>
<a name="ln2887">	  if (i == ZEBRA_ROUTE_BGP)</a>
<a name="ln2888">	    {</a>
<a name="ln2889">	      vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, &quot;ebgp&quot;,</a>
<a name="ln2890">		       rib_cnt[ZEBRA_ROUTE_BGP] - rib_cnt[ZEBRA_ROUTE_IBGP],</a>
<a name="ln2891">		       fib_cnt[ZEBRA_ROUTE_BGP] - fib_cnt[ZEBRA_ROUTE_IBGP],</a>
<a name="ln2892">		       VTY_NEWLINE);</a>
<a name="ln2893">	      vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, &quot;ibgp&quot;,</a>
<a name="ln2894">		       rib_cnt[ZEBRA_ROUTE_IBGP], fib_cnt[ZEBRA_ROUTE_IBGP],</a>
<a name="ln2895">		       VTY_NEWLINE);</a>
<a name="ln2896">	    }</a>
<a name="ln2897">	  else</a>
<a name="ln2898">	    vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, zebra_route_string(i),</a>
<a name="ln2899">		     rib_cnt[i], fib_cnt[i], VTY_NEWLINE);</a>
<a name="ln2900">	}</a>
<a name="ln2901">    }</a>
<a name="ln2902"> </a>
<a name="ln2903">  vty_out (vty, &quot;------%s&quot;, VTY_NEWLINE);</a>
<a name="ln2904">  vty_out (vty, &quot;%-20s %-20d %-20d %s&quot;, &quot;Totals&quot;, rib_cnt[ZEBRA_ROUTE_TOTAL],</a>
<a name="ln2905">	   fib_cnt[ZEBRA_ROUTE_TOTAL], VTY_NEWLINE);</a>
<a name="ln2906">  vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln2907">}</a>
<a name="ln2908"> </a>
<a name="ln2909">/* Show route summary.  */</a>
<a name="ln2910">DEFUN (show_ip_route_summary,</a>
<a name="ln2911">       show_ip_route_summary_cmd,</a>
<a name="ln2912">       &quot;show ip route summary&quot;,</a>
<a name="ln2913">       SHOW_STR</a>
<a name="ln2914">       IP_STR</a>
<a name="ln2915">       &quot;IP routing table\n&quot;</a>
<a name="ln2916">       &quot;Summary of all routes\n&quot;)</a>
<a name="ln2917">{</a>
<a name="ln2918">  struct route_table *table;</a>
<a name="ln2919">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2920"> </a>
<a name="ln2921">  if (argc &gt; 0)</a>
<a name="ln2922">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln2923"> </a>
<a name="ln2924">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2925">  if (! table)</a>
<a name="ln2926">    return CMD_SUCCESS;</a>
<a name="ln2927"> </a>
<a name="ln2928">  vty_show_ip_route_summary (vty, table);</a>
<a name="ln2929"> </a>
<a name="ln2930">  return CMD_SUCCESS;</a>
<a name="ln2931">}</a>
<a name="ln2932"> </a>
<a name="ln2933">ALIAS (show_ip_route_summary,</a>
<a name="ln2934">       show_ip_route_summary_vrf_cmd,</a>
<a name="ln2935">       &quot;show ip route summary &quot; VRF_CMD_STR,</a>
<a name="ln2936">       SHOW_STR</a>
<a name="ln2937">       IP_STR</a>
<a name="ln2938">       &quot;IP routing table\n&quot;</a>
<a name="ln2939">       &quot;Summary of all routes\n&quot;</a>
<a name="ln2940">       VRF_CMD_HELP_STR)</a>
<a name="ln2941"> </a>
<a name="ln2942">/* Show route summary prefix.  */</a>
<a name="ln2943">DEFUN (show_ip_route_summary_prefix,</a>
<a name="ln2944">       show_ip_route_summary_prefix_cmd,</a>
<a name="ln2945">       &quot;show ip route summary prefix&quot;,</a>
<a name="ln2946">       SHOW_STR</a>
<a name="ln2947">       IP_STR</a>
<a name="ln2948">       &quot;IP routing table\n&quot;</a>
<a name="ln2949">       &quot;Summary of all routes\n&quot;</a>
<a name="ln2950">       &quot;Prefix routes\n&quot;)</a>
<a name="ln2951">{</a>
<a name="ln2952">  struct route_table *table;</a>
<a name="ln2953">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln2954"> </a>
<a name="ln2955">  if (argc &gt; 0)</a>
<a name="ln2956">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln2957"> </a>
<a name="ln2958">  table = zebra_vrf_table (AFI_IP, SAFI_UNICAST, vrf_id);</a>
<a name="ln2959">  if (! table)</a>
<a name="ln2960">    return CMD_SUCCESS;</a>
<a name="ln2961"> </a>
<a name="ln2962">  vty_show_ip_route_summary_prefix (vty, table);</a>
<a name="ln2963"> </a>
<a name="ln2964">  return CMD_SUCCESS;</a>
<a name="ln2965">}</a>
<a name="ln2966"> </a>
<a name="ln2967">ALIAS (show_ip_route_summary_prefix,</a>
<a name="ln2968">       show_ip_route_summary_prefix_vrf_cmd,</a>
<a name="ln2969">       &quot;show ip route summary prefix &quot; VRF_CMD_STR,</a>
<a name="ln2970">       SHOW_STR</a>
<a name="ln2971">       IP_STR</a>
<a name="ln2972">       &quot;IP routing table\n&quot;</a>
<a name="ln2973">       &quot;Summary of all routes\n&quot;</a>
<a name="ln2974">       &quot;Prefix routes\n&quot;</a>
<a name="ln2975">       VRF_CMD_HELP_STR)</a>
<a name="ln2976"> </a>
<a name="ln2977">DEFUN (show_ip_route_vrf_all,</a>
<a name="ln2978">       show_ip_route_vrf_all_cmd,</a>
<a name="ln2979">       &quot;show ip route &quot; VRF_ALL_CMD_STR,</a>
<a name="ln2980">       SHOW_STR</a>
<a name="ln2981">       IP_STR</a>
<a name="ln2982">       &quot;IP routing table\n&quot;</a>
<a name="ln2983">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln2984">{</a>
<a name="ln2985">  struct route_table *table;</a>
<a name="ln2986">  struct route_node *rn;</a>
<a name="ln2987">  struct rib *rib;</a>
<a name="ln2988">  struct zebra_vrf *zvrf;</a>
<a name="ln2989">  vrf_iter_t iter;</a>
<a name="ln2990">  int first = 1;</a>
<a name="ln2991"> </a>
<a name="ln2992">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln2993">    {</a>
<a name="ln2994">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln2995">          (table = zvrf-&gt;table[AFI_IP][SAFI_UNICAST]) == NULL)</a>
<a name="ln2996">        continue;</a>
<a name="ln2997"> </a>
<a name="ln2998">      /* Show all IPv4 routes. */</a>
<a name="ln2999">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln3000">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln3001">          {</a>
<a name="ln3002">            if (first)</a>
<a name="ln3003">              {</a>
<a name="ln3004">                vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln3005">                first = 0;</a>
<a name="ln3006">              }</a>
<a name="ln3007">            vty_show_ip_route (vty, rn, rib);</a>
<a name="ln3008">          }</a>
<a name="ln3009">    }</a>
<a name="ln3010"> </a>
<a name="ln3011">  return CMD_SUCCESS;</a>
<a name="ln3012">}</a>
<a name="ln3013"> </a>
<a name="ln3014">DEFUN (show_ip_route_prefix_longer_vrf_all,</a>
<a name="ln3015">       show_ip_route_prefix_longer_vrf_all_cmd,</a>
<a name="ln3016">       &quot;show ip route A.B.C.D/M longer-prefixes &quot; VRF_ALL_CMD_STR,</a>
<a name="ln3017">       SHOW_STR</a>
<a name="ln3018">       IP_STR</a>
<a name="ln3019">       &quot;IP routing table\n&quot;</a>
<a name="ln3020">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;</a>
<a name="ln3021">       &quot;Show route matching the specified Network/Mask pair only\n&quot;</a>
<a name="ln3022">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln3023">{</a>
<a name="ln3024">  struct route_table *table;</a>
<a name="ln3025">  struct route_node *rn;</a>
<a name="ln3026">  struct rib *rib;</a>
<a name="ln3027">  struct prefix p;</a>
<a name="ln3028">  struct zebra_vrf *zvrf;</a>
<a name="ln3029">  vrf_iter_t iter;</a>
<a name="ln3030">  int ret;</a>
<a name="ln3031">  int first = 1;</a>
<a name="ln3032"> </a>
<a name="ln3033">  ret = str2prefix (argv[0], &amp;p);</a>
<a name="ln3034">  if (! ret)</a>
<a name="ln3035">    {</a>
<a name="ln3036">      vty_out (vty, &quot;%% Malformed Prefix%s&quot;, VTY_NEWLINE);</a>
<a name="ln3037">      return CMD_WARNING;</a>
<a name="ln3038">    }</a>
<a name="ln3039"> </a>
<a name="ln3040">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3041">    {</a>
<a name="ln3042">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln3043">          (table = zvrf-&gt;table[AFI_IP][SAFI_UNICAST]) == NULL)</a>
<a name="ln3044">        continue;</a>
<a name="ln3045"> </a>
<a name="ln3046">      /* Show matched type IPv4 routes. */</a>
<a name="ln3047">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln3048">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln3049">          if (prefix_match (&amp;p, &amp;rn-&gt;p))</a>
<a name="ln3050">            {</a>
<a name="ln3051">              if (first)</a>
<a name="ln3052">                {</a>
<a name="ln3053">                  vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln3054">                  first = 0;</a>
<a name="ln3055">                }</a>
<a name="ln3056">              vty_show_ip_route (vty, rn, rib);</a>
<a name="ln3057">            }</a>
<a name="ln3058">    }</a>
<a name="ln3059"> </a>
<a name="ln3060">  return CMD_SUCCESS;</a>
<a name="ln3061">}</a>
<a name="ln3062"> </a>
<a name="ln3063">DEFUN (show_ip_route_supernets_vrf_all,</a>
<a name="ln3064">       show_ip_route_supernets_vrf_all_cmd,</a>
<a name="ln3065">       &quot;show ip route supernets-only &quot; VRF_ALL_CMD_STR,</a>
<a name="ln3066">       SHOW_STR</a>
<a name="ln3067">       IP_STR</a>
<a name="ln3068">       &quot;IP routing table\n&quot;</a>
<a name="ln3069">       &quot;Show supernet entries only\n&quot;</a>
<a name="ln3070">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln3071">{</a>
<a name="ln3072">  struct route_table *table;</a>
<a name="ln3073">  struct route_node *rn;</a>
<a name="ln3074">  struct rib *rib;</a>
<a name="ln3075">  struct zebra_vrf *zvrf;</a>
<a name="ln3076">  vrf_iter_t iter;</a>
<a name="ln3077">  u_int32_t addr;</a>
<a name="ln3078">  int first = 1;</a>
<a name="ln3079"> </a>
<a name="ln3080">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3081">    {</a>
<a name="ln3082">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln3083">          (table = zvrf-&gt;table[AFI_IP][SAFI_UNICAST]) == NULL)</a>
<a name="ln3084">        continue;</a>
<a name="ln3085"> </a>
<a name="ln3086">      /* Show matched type IPv4 routes. */</a>
<a name="ln3087">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln3088">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln3089">          {</a>
<a name="ln3090">            addr = ntohl (rn-&gt;p.u.prefix4.s_addr);</a>
<a name="ln3091"> </a>
<a name="ln3092">            if ((IN_CLASSC (addr) &amp;&amp; rn-&gt;p.prefixlen &lt; 24)</a>
<a name="ln3093">               || (IN_CLASSB (addr) &amp;&amp; rn-&gt;p.prefixlen &lt; 16)</a>
<a name="ln3094">               || (IN_CLASSA (addr) &amp;&amp; rn-&gt;p.prefixlen &lt; 8))</a>
<a name="ln3095">              {</a>
<a name="ln3096">                if (first)</a>
<a name="ln3097">                  {</a>
<a name="ln3098">                    vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln3099">                    first = 0;</a>
<a name="ln3100">                  }</a>
<a name="ln3101">                vty_show_ip_route (vty, rn, rib);</a>
<a name="ln3102">              }</a>
<a name="ln3103">          }</a>
<a name="ln3104">    }</a>
<a name="ln3105"> </a>
<a name="ln3106">  return CMD_SUCCESS;</a>
<a name="ln3107">}</a>
<a name="ln3108"> </a>
<a name="ln3109">DEFUN (show_ip_route_protocol_vrf_all,</a>
<a name="ln3110">       show_ip_route_protocol_vrf_all_cmd,</a>
<a name="ln3111">       &quot;show ip route &quot; QUAGGA_IP_REDIST_STR_ZEBRA &quot; &quot; VRF_ALL_CMD_STR,</a>
<a name="ln3112">       SHOW_STR</a>
<a name="ln3113">       IP_STR</a>
<a name="ln3114">       &quot;IP routing table\n&quot;</a>
<a name="ln3115">       QUAGGA_IP_REDIST_HELP_STR_ZEBRA</a>
<a name="ln3116">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln3117">{</a>
<a name="ln3118">  int type;</a>
<a name="ln3119">  struct route_table *table;</a>
<a name="ln3120">  struct route_node *rn;</a>
<a name="ln3121">  struct rib *rib;</a>
<a name="ln3122">  struct zebra_vrf *zvrf;</a>
<a name="ln3123">  vrf_iter_t iter;</a>
<a name="ln3124">  int first = 1;</a>
<a name="ln3125"> </a>
<a name="ln3126">  type = proto_redistnum (AFI_IP, argv[0]);</a>
<a name="ln3127">  if (type &lt; 0)</a>
<a name="ln3128">    {</a>
<a name="ln3129">      vty_out (vty, &quot;Unknown route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln3130">      return CMD_WARNING;</a>
<a name="ln3131">    }</a>
<a name="ln3132"> </a>
<a name="ln3133">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3134">    {</a>
<a name="ln3135">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln3136">          (table = zvrf-&gt;table[AFI_IP][SAFI_UNICAST]) == NULL)</a>
<a name="ln3137">        continue;</a>
<a name="ln3138"> </a>
<a name="ln3139">      /* Show matched type IPv4 routes. */</a>
<a name="ln3140">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln3141">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln3142">          if (rib-&gt;type == type)</a>
<a name="ln3143">            {</a>
<a name="ln3144">              if (first)</a>
<a name="ln3145">                {</a>
<a name="ln3146">                  vty_out (vty, SHOW_ROUTE_V4_HEADER);</a>
<a name="ln3147">                  first = 0;</a>
<a name="ln3148">                }</a>
<a name="ln3149">              vty_show_ip_route (vty, rn, rib);</a>
<a name="ln3150">            }</a>
<a name="ln3151">    }</a>
<a name="ln3152"> </a>
<a name="ln3153">  return CMD_SUCCESS;</a>
<a name="ln3154">}</a>
<a name="ln3155"> </a>
<a name="ln3156">DEFUN (show_ip_route_addr_vrf_all,</a>
<a name="ln3157">       show_ip_route_addr_vrf_all_cmd,</a>
<a name="ln3158">       &quot;show ip route A.B.C.D &quot; VRF_ALL_CMD_STR,</a>
<a name="ln3159">       SHOW_STR</a>
<a name="ln3160">       IP_STR</a>
<a name="ln3161">       &quot;IP routing table\n&quot;</a>
<a name="ln3162">       &quot;Network in the IP routing table to display\n&quot;</a>
<a name="ln3163">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln3164">{</a>
<a name="ln3165">  int ret;</a>
<a name="ln3166">  struct prefix_ipv4 p;</a>
<a name="ln3167">  struct route_table *table;</a>
<a name="ln3168">  struct route_node *rn;</a>
<a name="ln3169">  struct zebra_vrf *zvrf;</a>
<a name="ln3170">  vrf_iter_t iter;</a>
<a name="ln3171"> </a>
<a name="ln3172">  ret = str2prefix_ipv4 (argv[0], &amp;p);</a>
<a name="ln3173">  if (ret &lt;= 0)</a>
<a name="ln3174">    {</a>
<a name="ln3175">      vty_out (vty, &quot;%% Malformed IPv4 address%s&quot;, VTY_NEWLINE);</a>
<a name="ln3176">      return CMD_WARNING;</a>
<a name="ln3177">    }</a>
<a name="ln3178"> </a>
<a name="ln3179">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3180">    {</a>
<a name="ln3181">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln3182">          (table = zvrf-&gt;table[AFI_IP][SAFI_UNICAST]) == NULL)</a>
<a name="ln3183">        continue;</a>
<a name="ln3184"> </a>
<a name="ln3185">      rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln3186">      if (! rn)</a>
<a name="ln3187">        continue;</a>
<a name="ln3188"> </a>
<a name="ln3189">      vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln3190"> </a>
<a name="ln3191">      route_unlock_node (rn);</a>
<a name="ln3192">    }</a>
<a name="ln3193"> </a>
<a name="ln3194">  return CMD_SUCCESS;</a>
<a name="ln3195">}</a>
<a name="ln3196"> </a>
<a name="ln3197">DEFUN (show_ip_route_prefix_vrf_all,</a>
<a name="ln3198">       show_ip_route_prefix_vrf_all_cmd,</a>
<a name="ln3199">       &quot;show ip route A.B.C.D/M &quot; VRF_ALL_CMD_STR,</a>
<a name="ln3200">       SHOW_STR</a>
<a name="ln3201">       IP_STR</a>
<a name="ln3202">       &quot;IP routing table\n&quot;</a>
<a name="ln3203">       &quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;</a>
<a name="ln3204">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln3205">{</a>
<a name="ln3206">  int ret;</a>
<a name="ln3207">  struct prefix_ipv4 p;</a>
<a name="ln3208">  struct route_table *table;</a>
<a name="ln3209">  struct route_node *rn;</a>
<a name="ln3210">  struct zebra_vrf *zvrf;</a>
<a name="ln3211">  vrf_iter_t iter;</a>
<a name="ln3212"> </a>
<a name="ln3213">  ret = str2prefix_ipv4 (argv[0], &amp;p);</a>
<a name="ln3214">  if (ret &lt;= 0)</a>
<a name="ln3215">    {</a>
<a name="ln3216">      vty_out (vty, &quot;%% Malformed IPv4 address%s&quot;, VTY_NEWLINE);</a>
<a name="ln3217">      return CMD_WARNING;</a>
<a name="ln3218">    }</a>
<a name="ln3219"> </a>
<a name="ln3220">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3221">    {</a>
<a name="ln3222">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln3223">          (table = zvrf-&gt;table[AFI_IP][SAFI_UNICAST]) == NULL)</a>
<a name="ln3224">        continue;</a>
<a name="ln3225"> </a>
<a name="ln3226">      rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln3227">      if (! rn)</a>
<a name="ln3228">        continue;</a>
<a name="ln3229">      if (rn-&gt;p.prefixlen != p.prefixlen)</a>
<a name="ln3230">        {</a>
<a name="ln3231">          route_unlock_node (rn);</a>
<a name="ln3232">          continue;</a>
<a name="ln3233">        }</a>
<a name="ln3234"> </a>
<a name="ln3235">      vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln3236"> </a>
<a name="ln3237">      route_unlock_node (rn);</a>
<a name="ln3238">    }</a>
<a name="ln3239"> </a>
<a name="ln3240">  return CMD_SUCCESS;</a>
<a name="ln3241">}</a>
<a name="ln3242"> </a>
<a name="ln3243">DEFUN (show_ip_route_summary_vrf_all,</a>
<a name="ln3244">       show_ip_route_summary_vrf_all_cmd,</a>
<a name="ln3245">       &quot;show ip route summary &quot; VRF_ALL_CMD_STR,</a>
<a name="ln3246">       SHOW_STR</a>
<a name="ln3247">       IP_STR</a>
<a name="ln3248">       &quot;IP routing table\n&quot;</a>
<a name="ln3249">       &quot;Summary of all routes\n&quot;</a>
<a name="ln3250">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln3251">{</a>
<a name="ln3252">  struct zebra_vrf *zvrf;</a>
<a name="ln3253">  vrf_iter_t iter;</a>
<a name="ln3254"> </a>
<a name="ln3255">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3256">    if ((zvrf = vrf_iter2info (iter)) != NULL)</a>
<a name="ln3257">      vty_show_ip_route_summary (vty, zvrf-&gt;table[AFI_IP][SAFI_UNICAST]);</a>
<a name="ln3258"> </a>
<a name="ln3259">  return CMD_SUCCESS;</a>
<a name="ln3260">}</a>
<a name="ln3261"> </a>
<a name="ln3262">DEFUN (show_ip_route_summary_prefix_vrf_all,</a>
<a name="ln3263">       show_ip_route_summary_prefix_vrf_all_cmd,</a>
<a name="ln3264">       &quot;show ip route summary prefix &quot; VRF_ALL_CMD_STR,</a>
<a name="ln3265">       SHOW_STR</a>
<a name="ln3266">       IP_STR</a>
<a name="ln3267">       &quot;IP routing table\n&quot;</a>
<a name="ln3268">       &quot;Summary of all routes\n&quot;</a>
<a name="ln3269">       &quot;Prefix routes\n&quot;</a>
<a name="ln3270">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln3271">{</a>
<a name="ln3272">  struct zebra_vrf *zvrf;</a>
<a name="ln3273">  vrf_iter_t iter;</a>
<a name="ln3274"> </a>
<a name="ln3275">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3276">    if ((zvrf = vrf_iter2info (iter)) != NULL)</a>
<a name="ln3277">      vty_show_ip_route_summary_prefix (vty, zvrf-&gt;table[AFI_IP][SAFI_UNICAST]);</a>
<a name="ln3278"> </a>
<a name="ln3279">  return CMD_SUCCESS;</a>
<a name="ln3280">}</a>
<a name="ln3281"> </a>
<a name="ln3282">/* Write IPv4 static route configuration. */</a>
<a name="ln3283">static int</a>
<a name="ln3284">static_config_ipv4 (struct vty *vty, safi_t safi, const char *cmd)</a>
<a name="ln3285">{</a>
<a name="ln3286">  struct route_node *rn;</a>
<a name="ln3287">  struct static_route *si;  </a>
<a name="ln3288">  struct route_table *stable;</a>
<a name="ln3289">  struct zebra_vrf *zvrf;</a>
<a name="ln3290">  vrf_iter_t iter;</a>
<a name="ln3291">  int write;</a>
<a name="ln3292"> </a>
<a name="ln3293">  write = 0;</a>
<a name="ln3294"> </a>
<a name="ln3295">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln3296">    {</a>
<a name="ln3297">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln3298">          (stable = zvrf-&gt;stable[AFI_IP][safi]) == NULL)</a>
<a name="ln3299">        continue;</a>
<a name="ln3300"> </a>
<a name="ln3301">      for (rn = route_top (stable); rn; rn = route_next (rn))</a>
<a name="ln3302">        for (si = rn-&gt;info; si; si = si-&gt;next)</a>
<a name="ln3303">          {</a>
<a name="ln3304">            vty_out (vty, &quot;%s %s/%d&quot;, cmd, inet_ntoa (rn-&gt;p.u.prefix4),</a>
<a name="ln3305">                     rn-&gt;p.prefixlen);</a>
<a name="ln3306"> </a>
<a name="ln3307">            switch (si-&gt;type)</a>
<a name="ln3308">              {</a>
<a name="ln3309">                case STATIC_IPV4_GATEWAY:</a>
<a name="ln3310">                  vty_out (vty, &quot; %s&quot;, inet_ntoa (si-&gt;addr.ipv4));</a>
<a name="ln3311">                  break;</a>
<a name="ln3312">                case STATIC_IPV4_IFNAME:</a>
<a name="ln3313">                  vty_out (vty, &quot; %s&quot;, si-&gt;ifname);</a>
<a name="ln3314">                  break;</a>
<a name="ln3315">                case STATIC_IPV4_BLACKHOLE:</a>
<a name="ln3316">                  vty_out (vty, &quot; Null0&quot;);</a>
<a name="ln3317">                  break;</a>
<a name="ln3318">              }</a>
<a name="ln3319"> </a>
<a name="ln3320">            /* flags are incompatible with STATIC_IPV4_BLACKHOLE */</a>
<a name="ln3321">            if (si-&gt;type != STATIC_IPV4_BLACKHOLE)</a>
<a name="ln3322">              {</a>
<a name="ln3323">                if (CHECK_FLAG(si-&gt;flags, ZEBRA_FLAG_REJECT))</a>
<a name="ln3324">                  vty_out (vty, &quot; %s&quot;, &quot;reject&quot;);</a>
<a name="ln3325"> </a>
<a name="ln3326">                if (CHECK_FLAG(si-&gt;flags, ZEBRA_FLAG_BLACKHOLE))</a>
<a name="ln3327">                  vty_out (vty, &quot; %s&quot;, &quot;blackhole&quot;);</a>
<a name="ln3328">              }</a>
<a name="ln3329"> </a>
<a name="ln3330">	    if (si-&gt;tag)</a>
<a name="ln3331">	      vty_out (vty, &quot; tag %d&quot;, si-&gt;tag);</a>
<a name="ln3332"> </a>
<a name="ln3333">            if (si-&gt;distance != ZEBRA_STATIC_DISTANCE_DEFAULT)</a>
<a name="ln3334">              vty_out (vty, &quot; %d&quot;, si-&gt;distance);</a>
<a name="ln3335"> </a>
<a name="ln3336">            if (si-&gt;vrf_id != VRF_DEFAULT)</a>
<a name="ln3337">              vty_out (vty, &quot; vrf %u&quot;, si-&gt;vrf_id);</a>
<a name="ln3338"> </a>
<a name="ln3339">            vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln3340"> </a>
<a name="ln3341">            write = 1;</a>
<a name="ln3342">          }</a>
<a name="ln3343">    }</a>
<a name="ln3344">  return write;</a>
<a name="ln3345">}</a>
<a name="ln3346"> </a>
<a name="ln3347">DEFUN (show_ip_protocol,</a>
<a name="ln3348">       show_ip_protocol_cmd,</a>
<a name="ln3349">       &quot;show ip protocol&quot;,</a>
<a name="ln3350">        SHOW_STR</a>
<a name="ln3351">        IP_STR</a>
<a name="ln3352">       &quot;IP protocol filtering status\n&quot;)</a>
<a name="ln3353">{</a>
<a name="ln3354">    int i; </a>
<a name="ln3355"> </a>
<a name="ln3356">    vty_out(vty, &quot;Protocol    : route-map %s&quot;, VTY_NEWLINE);</a>
<a name="ln3357">    vty_out(vty, &quot;------------------------%s&quot;, VTY_NEWLINE);</a>
<a name="ln3358">    for (i=0;i&lt;ZEBRA_ROUTE_MAX;i++)</a>
<a name="ln3359">    {</a>
<a name="ln3360">        if (proto_rm[AFI_IP][i])</a>
<a name="ln3361">          vty_out (vty, &quot;%-10s  : %-10s%s&quot;, zebra_route_string(i),</a>
<a name="ln3362">					proto_rm[AFI_IP][i],</a>
<a name="ln3363">					VTY_NEWLINE);</a>
<a name="ln3364">        else</a>
<a name="ln3365">          vty_out (vty, &quot;%-10s  : none%s&quot;, zebra_route_string(i), VTY_NEWLINE);</a>
<a name="ln3366">    }</a>
<a name="ln3367">    if (proto_rm[AFI_IP][i])</a>
<a name="ln3368">      vty_out (vty, &quot;%-10s  : %-10s%s&quot;, &quot;any&quot;, proto_rm[AFI_IP][i],</a>
<a name="ln3369">					VTY_NEWLINE);</a>
<a name="ln3370">    else</a>
<a name="ln3371">      vty_out (vty, &quot;%-10s  : none%s&quot;, &quot;any&quot;, VTY_NEWLINE);</a>
<a name="ln3372"> </a>
<a name="ln3373">    return CMD_SUCCESS;</a>
<a name="ln3374">}</a>
<a name="ln3375"> </a>
<a name="ln3376">/* General fucntion for IPv6 static route. */</a>
<a name="ln3377">static int</a>
<a name="ln3378">static_ipv6_func (struct vty *vty, int add_cmd, const char *dest_str,</a>
<a name="ln3379">		  const char *gate_str, const char *ifname,</a>
<a name="ln3380">		  const char *flag_str, const char *tag_str,</a>
<a name="ln3381">		  const char *distance_str, const char *vrf_id_str)</a>
<a name="ln3382">{</a>
<a name="ln3383">  int ret;</a>
<a name="ln3384">  u_char distance;</a>
<a name="ln3385">  struct prefix p;</a>
<a name="ln3386">  struct in6_addr *gate = NULL;</a>
<a name="ln3387">  struct in6_addr gate_addr;</a>
<a name="ln3388">  u_char type = 0;</a>
<a name="ln3389">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln3390">  u_char flag = 0;</a>
<a name="ln3391">  route_tag_t tag = 0;</a>
<a name="ln3392">  </a>
<a name="ln3393">  ret = str2prefix (dest_str, &amp;p);</a>
<a name="ln3394">  if (ret &lt;= 0)</a>
<a name="ln3395">    {</a>
<a name="ln3396">      vty_out (vty, &quot;%% Malformed address%s&quot;, VTY_NEWLINE);</a>
<a name="ln3397">      return CMD_WARNING;</a>
<a name="ln3398">    }</a>
<a name="ln3399"> </a>
<a name="ln3400">  /* Apply mask for given prefix. */</a>
<a name="ln3401">  apply_mask (&amp;p);</a>
<a name="ln3402"> </a>
<a name="ln3403">  /* Route flags */</a>
<a name="ln3404">  if (flag_str) {</a>
<a name="ln3405">    switch(flag_str[0]) {</a>
<a name="ln3406">      case 'r':</a>
<a name="ln3407">      case 'R': /* XXX */</a>
<a name="ln3408">        SET_FLAG (flag, ZEBRA_FLAG_REJECT);</a>
<a name="ln3409">        break;</a>
<a name="ln3410">      case 'b':</a>
<a name="ln3411">      case 'B': /* XXX */</a>
<a name="ln3412">        SET_FLAG (flag, ZEBRA_FLAG_BLACKHOLE);</a>
<a name="ln3413">        break;</a>
<a name="ln3414">      default:</a>
<a name="ln3415">        vty_out (vty, &quot;%% Malformed flag %s %s&quot;, flag_str, VTY_NEWLINE);</a>
<a name="ln3416">        return CMD_WARNING;</a>
<a name="ln3417">    }</a>
<a name="ln3418">  }</a>
<a name="ln3419"> </a>
<a name="ln3420">  /* Administrative distance. */</a>
<a name="ln3421">  if (distance_str)</a>
<a name="ln3422">    distance = atoi (distance_str);</a>
<a name="ln3423">  else</a>
<a name="ln3424">    distance = ZEBRA_STATIC_DISTANCE_DEFAULT;</a>
<a name="ln3425"> </a>
<a name="ln3426">  /* tag */</a>
<a name="ln3427">  if (tag_str)</a>
<a name="ln3428">    tag = atoi (tag_str);</a>
<a name="ln3429"> </a>
<a name="ln3430">  /* tag */</a>
<a name="ln3431">  if (tag_str)</a>
<a name="ln3432">    tag = atoi(tag_str);</a>
<a name="ln3433"> </a>
<a name="ln3434">  /* When gateway is valid IPv6 addrees, then gate is treated as</a>
<a name="ln3435">     nexthop address other case gate is treated as interface name. */</a>
<a name="ln3436">  ret = inet_pton (AF_INET6, gate_str, &amp;gate_addr);</a>
<a name="ln3437"> </a>
<a name="ln3438">  if (ifname)</a>
<a name="ln3439">    {</a>
<a name="ln3440">      /* When ifname is specified.  It must be come with gateway</a>
<a name="ln3441">         address. */</a>
<a name="ln3442">      if (ret != 1)</a>
<a name="ln3443">	{</a>
<a name="ln3444">	  vty_out (vty, &quot;%% Malformed address%s&quot;, VTY_NEWLINE);</a>
<a name="ln3445">	  return CMD_WARNING;</a>
<a name="ln3446">	}</a>
<a name="ln3447">      type = STATIC_IPV6_GATEWAY_IFNAME;</a>
<a name="ln3448">      gate = &amp;gate_addr;</a>
<a name="ln3449">    }</a>
<a name="ln3450">  else</a>
<a name="ln3451">    {</a>
<a name="ln3452">      if (ret == 1)</a>
<a name="ln3453">	{</a>
<a name="ln3454">	  type = STATIC_IPV6_GATEWAY;</a>
<a name="ln3455">	  gate = &amp;gate_addr;</a>
<a name="ln3456">	}</a>
<a name="ln3457">      else</a>
<a name="ln3458">	{</a>
<a name="ln3459">	  type = STATIC_IPV6_IFNAME;</a>
<a name="ln3460">	  ifname = gate_str;</a>
<a name="ln3461">	}</a>
<a name="ln3462">    }</a>
<a name="ln3463"> </a>
<a name="ln3464">  /* VRF id */</a>
<a name="ln3465">  if (vrf_id_str)</a>
<a name="ln3466">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, vrf_id_str);</a>
<a name="ln3467"> </a>
<a name="ln3468">  if (add_cmd)</a>
<a name="ln3469">    static_add_ipv6 (&amp;p, type, gate, ifname, flag, tag, distance, vrf_id);</a>
<a name="ln3470">  else</a>
<a name="ln3471">    static_delete_ipv6 (&amp;p, type, gate, ifname, tag, distance, vrf_id);</a>
<a name="ln3472"> </a>
<a name="ln3473">  return CMD_SUCCESS;</a>
<a name="ln3474">}</a>
<a name="ln3475"> </a>
<a name="ln3476">DEFUN (ipv6_route,</a>
<a name="ln3477">       ipv6_route_cmd,</a>
<a name="ln3478">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE)&quot;,</a>
<a name="ln3479">       IP_STR</a>
<a name="ln3480">       &quot;Establish static routes\n&quot;</a>
<a name="ln3481">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3482">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3483">       &quot;IPv6 gateway interface name\n&quot;)</a>
<a name="ln3484">{</a>
<a name="ln3485">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, NULL,</a>
<a name="ln3486">                           NULL, NULL);</a>
<a name="ln3487">}</a>
<a name="ln3488"> </a>
<a name="ln3489">DEFUN (ipv6_route_tag,</a>
<a name="ln3490">       ipv6_route_tag_cmd,</a>
<a name="ln3491">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3492">       IP_STR</a>
<a name="ln3493">       &quot;Establish static routes\n&quot;</a>
<a name="ln3494">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3495">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3496">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3497">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3498">       &quot;Tag value\n&quot;)</a>
<a name="ln3499">{</a>
<a name="ln3500">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, argv[2], NULL, NULL);</a>
<a name="ln3501">}</a>
<a name="ln3502"> </a>
<a name="ln3503">DEFUN (ipv6_route_tag_vrf,</a>
<a name="ln3504">       ipv6_route_tag_vrf_cmd,</a>
<a name="ln3505">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3506">       IP_STR</a>
<a name="ln3507">       &quot;Establish static routes\n&quot;</a>
<a name="ln3508">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3509">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3510">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3511">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3512">       &quot;Tag value\n&quot;</a>
<a name="ln3513">       VRF_CMD_HELP_STR)</a>
<a name="ln3514">{</a>
<a name="ln3515">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, argv[2], NULL, argv[3]);</a>
<a name="ln3516">}</a>
<a name="ln3517"> </a>
<a name="ln3518">DEFUN (ipv6_route_flags,</a>
<a name="ln3519">       ipv6_route_flags_cmd,</a>
<a name="ln3520">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole)&quot;,</a>
<a name="ln3521">       IP_STR</a>
<a name="ln3522">       &quot;Establish static routes\n&quot;</a>
<a name="ln3523">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3524">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3525">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3526">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3527">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln3528">{</a>
<a name="ln3529">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], NULL,</a>
<a name="ln3530">                           NULL, NULL);</a>
<a name="ln3531">}</a>
<a name="ln3532"> </a>
<a name="ln3533">DEFUN (ipv6_route_flags_tag,</a>
<a name="ln3534">       ipv6_route_flags_tag_cmd,</a>
<a name="ln3535">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3536">       IP_STR</a>
<a name="ln3537">       &quot;Establish static routes\n&quot;</a>
<a name="ln3538">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3539">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3540">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3541">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3542">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3543">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3544">       &quot;Tag value\n&quot;)</a>
<a name="ln3545">{</a>
<a name="ln3546">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], argv[3], NULL, NULL);</a>
<a name="ln3547">}</a>
<a name="ln3548"> </a>
<a name="ln3549">DEFUN (ipv6_route_flags_tag_vrf,</a>
<a name="ln3550">       ipv6_route_flags_tag_vrf_cmd,</a>
<a name="ln3551">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3552">       IP_STR</a>
<a name="ln3553">       &quot;Establish static routes\n&quot;</a>
<a name="ln3554">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3555">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3556">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3557">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3558">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3559">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3560">       &quot;Tag value\n&quot;</a>
<a name="ln3561">       VRF_CMD_HELP_STR)</a>
<a name="ln3562">{</a>
<a name="ln3563">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], argv[3], NULL, argv[4]);</a>
<a name="ln3564">}</a>
<a name="ln3565"> </a>
<a name="ln3566">DEFUN (ipv6_route_ifname,</a>
<a name="ln3567">       ipv6_route_ifname_cmd,</a>
<a name="ln3568">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE&quot;,</a>
<a name="ln3569">       IP_STR</a>
<a name="ln3570">       &quot;Establish static routes\n&quot;</a>
<a name="ln3571">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3572">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3573">       &quot;IPv6 gateway interface name\n&quot;)</a>
<a name="ln3574">{</a>
<a name="ln3575">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, NULL,</a>
<a name="ln3576">                           NULL, NULL);</a>
<a name="ln3577">}</a>
<a name="ln3578"> </a>
<a name="ln3579">DEFUN (ipv6_route_ifname_tag,</a>
<a name="ln3580">       ipv6_route_ifname_tag_cmd,</a>
<a name="ln3581">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3582">       IP_STR</a>
<a name="ln3583">       &quot;Establish static routes\n&quot;</a>
<a name="ln3584">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3585">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3586">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3587">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3588">       &quot;Tag value\n&quot;)</a>
<a name="ln3589">{</a>
<a name="ln3590">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, argv[3], NULL, NULL);</a>
<a name="ln3591">}</a>
<a name="ln3592"> </a>
<a name="ln3593">DEFUN (ipv6_route_ifname_tag_vrf,</a>
<a name="ln3594">       ipv6_route_ifname_tag_vrf_cmd,</a>
<a name="ln3595">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3596">       IP_STR</a>
<a name="ln3597">       &quot;Establish static routes\n&quot;</a>
<a name="ln3598">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3599">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3600">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3601">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3602">       &quot;Tag value\n&quot;</a>
<a name="ln3603">       VRF_CMD_HELP_STR)</a>
<a name="ln3604">{</a>
<a name="ln3605">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, argv[3], NULL, argv[4]);</a>
<a name="ln3606">}</a>
<a name="ln3607"> </a>
<a name="ln3608">DEFUN (ipv6_route_ifname_flags,</a>
<a name="ln3609">       ipv6_route_ifname_flags_cmd,</a>
<a name="ln3610">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole)&quot;,</a>
<a name="ln3611">       IP_STR</a>
<a name="ln3612">       &quot;Establish static routes\n&quot;</a>
<a name="ln3613">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3614">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3615">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3616">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3617">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln3618">{</a>
<a name="ln3619">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], NULL,</a>
<a name="ln3620">                           NULL, NULL);</a>
<a name="ln3621">}</a>
<a name="ln3622"> </a>
<a name="ln3623">DEFUN (ipv6_route_ifname_flags_tag,</a>
<a name="ln3624">       ipv6_route_ifname_flags_tag_cmd,</a>
<a name="ln3625">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3626">       IP_STR</a>
<a name="ln3627">       &quot;Establish static routes\n&quot;</a>
<a name="ln3628">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3629">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3630">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3631">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3632">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3633">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3634">       &quot;Tag value\n&quot;)</a>
<a name="ln3635">{</a>
<a name="ln3636">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], argv[4], NULL, NULL);</a>
<a name="ln3637">}</a>
<a name="ln3638"> </a>
<a name="ln3639">DEFUN (ipv6_route_ifname_flags_tag_vrf,</a>
<a name="ln3640">       ipv6_route_ifname_flags_tag_vrf_cmd,</a>
<a name="ln3641">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3642">       IP_STR</a>
<a name="ln3643">       &quot;Establish static routes\n&quot;</a>
<a name="ln3644">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3645">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3646">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3647">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3648">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3649">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3650">       &quot;Tag value\n&quot;</a>
<a name="ln3651">       VRF_CMD_HELP_STR)</a>
<a name="ln3652">{</a>
<a name="ln3653">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], argv[4], NULL, argv[5]);</a>
<a name="ln3654">}</a>
<a name="ln3655"> </a>
<a name="ln3656">DEFUN (ipv6_route_pref,</a>
<a name="ln3657">       ipv6_route_pref_cmd,</a>
<a name="ln3658">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) &lt;1-255&gt;&quot;,</a>
<a name="ln3659">       IP_STR</a>
<a name="ln3660">       &quot;Establish static routes\n&quot;</a>
<a name="ln3661">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3662">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3663">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3664">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3665">{</a>
<a name="ln3666">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, NULL, argv[2],</a>
<a name="ln3667">                           NULL);</a>
<a name="ln3668">}</a>
<a name="ln3669"> </a>
<a name="ln3670">DEFUN (ipv6_route_pref_tag,</a>
<a name="ln3671">       ipv6_route_pref_tag_cmd,</a>
<a name="ln3672">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln3673">       IP_STR</a>
<a name="ln3674">       &quot;Establish static routes\n&quot;</a>
<a name="ln3675">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3676">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3677">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3678">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3679">       &quot;Tag value\n&quot;</a>
<a name="ln3680">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3681">{</a>
<a name="ln3682">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, argv[2], argv[3], NULL);</a>
<a name="ln3683">}</a>
<a name="ln3684"> </a>
<a name="ln3685">DEFUN (ipv6_route_pref_tag_vrf,</a>
<a name="ln3686">       ipv6_route_pref_tag_vrf_cmd,</a>
<a name="ln3687">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3688">       IP_STR</a>
<a name="ln3689">       &quot;Establish static routes\n&quot;</a>
<a name="ln3690">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3691">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3692">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3693">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3694">       &quot;Tag value\n&quot;</a>
<a name="ln3695">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln3696">       VRF_CMD_HELP_STR)</a>
<a name="ln3697">{</a>
<a name="ln3698">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, argv[2], argv[3], argv[4]);</a>
<a name="ln3699">}</a>
<a name="ln3700"> </a>
<a name="ln3701">DEFUN (ipv6_route_flags_pref,</a>
<a name="ln3702">       ipv6_route_flags_pref_cmd,</a>
<a name="ln3703">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln3704">       IP_STR</a>
<a name="ln3705">       &quot;Establish static routes\n&quot;</a>
<a name="ln3706">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3707">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3708">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3709">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3710">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3711">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3712">{</a>
<a name="ln3713">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], NULL, argv[3],</a>
<a name="ln3714">                           NULL);</a>
<a name="ln3715">}</a>
<a name="ln3716"> </a>
<a name="ln3717">DEFUN (ipv6_route_flags_pref_tag,</a>
<a name="ln3718">       ipv6_route_flags_pref_tag_cmd,</a>
<a name="ln3719">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln3720">       IP_STR</a>
<a name="ln3721">       &quot;Establish static routes\n&quot;</a>
<a name="ln3722">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3723">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3724">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3725">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3726">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3727">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3728">       &quot;Tag value\n&quot;</a>
<a name="ln3729">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3730">{</a>
<a name="ln3731">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], argv[3], argv[4], NULL);</a>
<a name="ln3732">}</a>
<a name="ln3733"> </a>
<a name="ln3734">DEFUN (ipv6_route_flags_pref_tag_vrf,</a>
<a name="ln3735">       ipv6_route_flags_pref_tag_vrf_cmd,</a>
<a name="ln3736">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3737">       IP_STR</a>
<a name="ln3738">       &quot;Establish static routes\n&quot;</a>
<a name="ln3739">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3740">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3741">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3742">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3743">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3744">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3745">       &quot;Tag value\n&quot;</a>
<a name="ln3746">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln3747">       VRF_CMD_HELP_STR)</a>
<a name="ln3748">{</a>
<a name="ln3749">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], argv[3], argv[4], argv[5]);</a>
<a name="ln3750">}</a>
<a name="ln3751"> </a>
<a name="ln3752">DEFUN (ipv6_route_ifname_pref,</a>
<a name="ln3753">       ipv6_route_ifname_pref_cmd,</a>
<a name="ln3754">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE &lt;1-255&gt;&quot;,</a>
<a name="ln3755">       IP_STR</a>
<a name="ln3756">       &quot;Establish static routes\n&quot;</a>
<a name="ln3757">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3758">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3759">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3760">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3761">{</a>
<a name="ln3762">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, NULL, argv[3],</a>
<a name="ln3763">                           NULL);</a>
<a name="ln3764">}</a>
<a name="ln3765"> </a>
<a name="ln3766">DEFUN (ipv6_route_ifname_pref_tag,</a>
<a name="ln3767">       ipv6_route_ifname_pref_tag_cmd,</a>
<a name="ln3768">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln3769">       IP_STR</a>
<a name="ln3770">       &quot;Establish static routes\n&quot;</a>
<a name="ln3771">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3772">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3773">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3774">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3775">       &quot;Tag value\n&quot;</a>
<a name="ln3776">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3777">{</a>
<a name="ln3778">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, argv[3], argv[4], NULL);</a>
<a name="ln3779">}</a>
<a name="ln3780"> </a>
<a name="ln3781">DEFUN (ipv6_route_ifname_pref_tag_vrf,</a>
<a name="ln3782">       ipv6_route_ifname_pref_tag_vrf_cmd,</a>
<a name="ln3783">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3784">       IP_STR</a>
<a name="ln3785">       &quot;Establish static routes\n&quot;</a>
<a name="ln3786">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3787">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3788">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3789">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3790">       &quot;Tag value\n&quot;</a>
<a name="ln3791">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln3792">       VRF_CMD_HELP_STR)</a>
<a name="ln3793">{</a>
<a name="ln3794">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, argv[3], argv[4], argv[5]);</a>
<a name="ln3795">}</a>
<a name="ln3796"> </a>
<a name="ln3797">DEFUN (ipv6_route_ifname_flags_pref,</a>
<a name="ln3798">       ipv6_route_ifname_flags_pref_cmd,</a>
<a name="ln3799">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln3800">       IP_STR</a>
<a name="ln3801">       &quot;Establish static routes\n&quot;</a>
<a name="ln3802">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3803">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3804">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3805">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3806">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3807">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3808">{</a>
<a name="ln3809">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], NULL, argv[4],</a>
<a name="ln3810">                           NULL);</a>
<a name="ln3811">}</a>
<a name="ln3812"> </a>
<a name="ln3813">DEFUN (ipv6_route_ifname_flags_pref_tag,</a>
<a name="ln3814">       ipv6_route_ifname_flags_pref_tag_cmd,</a>
<a name="ln3815">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln3816">       IP_STR</a>
<a name="ln3817">       &quot;Establish static routes\n&quot;</a>
<a name="ln3818">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3819">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3820">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3821">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3822">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3823">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3824">       &quot;Tag value\n&quot;</a>
<a name="ln3825">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln3826">{</a>
<a name="ln3827">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], argv[4], argv[5], NULL);</a>
<a name="ln3828">}</a>
<a name="ln3829"> </a>
<a name="ln3830">DEFUN (ipv6_route_ifname_flags_pref_tag_vrf,</a>
<a name="ln3831">       ipv6_route_ifname_flags_pref_tag_vrf_cmd,</a>
<a name="ln3832">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3833">       IP_STR</a>
<a name="ln3834">       &quot;Establish static routes\n&quot;</a>
<a name="ln3835">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3836">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3837">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3838">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3839">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3840">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3841">       &quot;Tag value\n&quot;</a>
<a name="ln3842">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln3843">       VRF_CMD_HELP_STR)</a>
<a name="ln3844">{</a>
<a name="ln3845">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], argv[4], argv[5], argv[6]);</a>
<a name="ln3846">}</a>
<a name="ln3847"> </a>
<a name="ln3848">DEFUN (no_ipv6_route,</a>
<a name="ln3849">       no_ipv6_route_cmd,</a>
<a name="ln3850">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE)&quot;,</a>
<a name="ln3851">       NO_STR</a>
<a name="ln3852">       IP_STR</a>
<a name="ln3853">       &quot;Establish static routes\n&quot;</a>
<a name="ln3854">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3855">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3856">       &quot;IPv6 gateway interface name\n&quot;)</a>
<a name="ln3857">{</a>
<a name="ln3858">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, NULL, NULL,</a>
<a name="ln3859">                           NULL);</a>
<a name="ln3860">}</a>
<a name="ln3861"> </a>
<a name="ln3862">DEFUN (no_ipv6_route_tag,</a>
<a name="ln3863">       no_ipv6_route_tag_cmd,</a>
<a name="ln3864">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3865">       NO_STR</a>
<a name="ln3866">       IP_STR</a>
<a name="ln3867">       &quot;Establish static routes\n&quot;</a>
<a name="ln3868">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3869">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3870">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3871">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3872">       &quot;Tag value\n&quot;)</a>
<a name="ln3873">{</a>
<a name="ln3874">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, argv[2], NULL, NULL);</a>
<a name="ln3875">}</a>
<a name="ln3876"> </a>
<a name="ln3877">DEFUN (no_ipv6_route_tag_vrf,</a>
<a name="ln3878">       no_ipv6_route_tag_vrf_cmd,</a>
<a name="ln3879">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3880">       NO_STR</a>
<a name="ln3881">       IP_STR</a>
<a name="ln3882">       &quot;Establish static routes\n&quot;</a>
<a name="ln3883">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3884">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3885">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3886">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3887">       &quot;Tag value\n&quot;</a>
<a name="ln3888">       VRF_CMD_HELP_STR)</a>
<a name="ln3889">{</a>
<a name="ln3890">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, argv[2], NULL, argv[3]);</a>
<a name="ln3891">}</a>
<a name="ln3892"> </a>
<a name="ln3893">ALIAS (no_ipv6_route,</a>
<a name="ln3894">       no_ipv6_route_flags_cmd,</a>
<a name="ln3895">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole)&quot;,</a>
<a name="ln3896">       NO_STR</a>
<a name="ln3897">       IP_STR</a>
<a name="ln3898">       &quot;Establish static routes\n&quot;</a>
<a name="ln3899">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3900">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3901">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3902">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3903">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln3904"> </a>
<a name="ln3905">ALIAS (no_ipv6_route_tag,</a>
<a name="ln3906">       no_ipv6_route_flags_tag_cmd,</a>
<a name="ln3907">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3908">       NO_STR</a>
<a name="ln3909">       IP_STR</a>
<a name="ln3910">       &quot;Establish static routes\n&quot;</a>
<a name="ln3911">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3912">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3913">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3914">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3915">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3916">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3917">       &quot;Tag value\n&quot;)</a>
<a name="ln3918"> </a>
<a name="ln3919">DEFUN (no_ipv6_route_ifname,</a>
<a name="ln3920">       no_ipv6_route_ifname_cmd,</a>
<a name="ln3921">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE&quot;,</a>
<a name="ln3922">       NO_STR</a>
<a name="ln3923">       IP_STR</a>
<a name="ln3924">       &quot;Establish static routes\n&quot;</a>
<a name="ln3925">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3926">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3927">       &quot;IPv6 gateway interface name\n&quot;)</a>
<a name="ln3928">{</a>
<a name="ln3929">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, NULL, NULL,</a>
<a name="ln3930">                           NULL);</a>
<a name="ln3931">}</a>
<a name="ln3932"> </a>
<a name="ln3933">DEFUN (no_ipv6_route_ifname_tag,</a>
<a name="ln3934">       no_ipv6_route_ifname_tag_cmd,</a>
<a name="ln3935">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3936">       NO_STR</a>
<a name="ln3937">       IP_STR</a>
<a name="ln3938">       &quot;Establish static routes\n&quot;</a>
<a name="ln3939">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3940">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3941">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3942">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3943">       &quot;Tag value\n&quot;)</a>
<a name="ln3944">{</a>
<a name="ln3945">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, argv[3], NULL, NULL);</a>
<a name="ln3946">}</a>
<a name="ln3947"> </a>
<a name="ln3948">DEFUN (no_ipv6_route_ifname_tag_vrf,</a>
<a name="ln3949">       no_ipv6_route_ifname_tag_vrf_cmd,</a>
<a name="ln3950">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln3951">       NO_STR</a>
<a name="ln3952">       IP_STR</a>
<a name="ln3953">       &quot;Establish static routes\n&quot;</a>
<a name="ln3954">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3955">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3956">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3957">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3958">       &quot;Tag value\n&quot;</a>
<a name="ln3959">       VRF_CMD_HELP_STR)</a>
<a name="ln3960">{</a>
<a name="ln3961">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, argv[3], NULL, argv[4]);</a>
<a name="ln3962">}</a>
<a name="ln3963"> </a>
<a name="ln3964">ALIAS (no_ipv6_route_ifname,</a>
<a name="ln3965">       no_ipv6_route_ifname_flags_cmd,</a>
<a name="ln3966">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole)&quot;,</a>
<a name="ln3967">       NO_STR</a>
<a name="ln3968">       IP_STR</a>
<a name="ln3969">       &quot;Establish static routes\n&quot;</a>
<a name="ln3970">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3971">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3972">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3973">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3974">       &quot;Silently discard pkts when matched\n&quot;)</a>
<a name="ln3975"> </a>
<a name="ln3976">ALIAS (no_ipv6_route_ifname_tag,</a>
<a name="ln3977">       no_ipv6_route_ifname_flags_tag_cmd,</a>
<a name="ln3978">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln3979">       NO_STR</a>
<a name="ln3980">       IP_STR</a>
<a name="ln3981">       &quot;Establish static routes\n&quot;</a>
<a name="ln3982">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3983">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3984">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3985">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln3986">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln3987">       &quot;Set tag for this route\n&quot;</a>
<a name="ln3988">       &quot;Tag value\n&quot;)</a>
<a name="ln3989"> </a>
<a name="ln3990">DEFUN (no_ipv6_route_pref,</a>
<a name="ln3991">       no_ipv6_route_pref_cmd,</a>
<a name="ln3992">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) &lt;1-255&gt;&quot;,</a>
<a name="ln3993">       NO_STR</a>
<a name="ln3994">       IP_STR</a>
<a name="ln3995">       &quot;Establish static routes\n&quot;</a>
<a name="ln3996">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln3997">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln3998">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln3999">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4000">{</a>
<a name="ln4001">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, NULL, argv[2],</a>
<a name="ln4002">                           NULL);</a>
<a name="ln4003">}</a>
<a name="ln4004"> </a>
<a name="ln4005">DEFUN (no_ipv6_route_pref_tag,</a>
<a name="ln4006">       no_ipv6_route_pref_tag_cmd,</a>
<a name="ln4007">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln4008">       NO_STR</a>
<a name="ln4009">       IP_STR</a>
<a name="ln4010">       &quot;Establish static routes\n&quot;</a>
<a name="ln4011">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4012">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4013">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4014">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4015">       &quot;Tag value\n&quot;</a>
<a name="ln4016">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4017">{</a>
<a name="ln4018">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, argv[2], argv[3], NULL);</a>
<a name="ln4019">}</a>
<a name="ln4020"> </a>
<a name="ln4021">DEFUN (no_ipv6_route_pref_tag_vrf,</a>
<a name="ln4022">       no_ipv6_route_pref_tag_vrf_cmd,</a>
<a name="ln4023">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln4024">       NO_STR</a>
<a name="ln4025">       IP_STR</a>
<a name="ln4026">       &quot;Establish static routes\n&quot;</a>
<a name="ln4027">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4028">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4029">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4030">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4031">       &quot;Tag value\n&quot;</a>
<a name="ln4032">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4033">       VRF_CMD_HELP_STR)</a>
<a name="ln4034">{</a>
<a name="ln4035">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, argv[2], argv[3], argv[4]);</a>
<a name="ln4036">}</a>
<a name="ln4037"> </a>
<a name="ln4038">DEFUN (no_ipv6_route_flags_pref,</a>
<a name="ln4039">       no_ipv6_route_flags_pref_cmd,</a>
<a name="ln4040">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln4041">       NO_STR</a>
<a name="ln4042">       IP_STR</a>
<a name="ln4043">       &quot;Establish static routes\n&quot;</a>
<a name="ln4044">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4045">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4046">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4047">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4048">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4049">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4050">{</a>
<a name="ln4051">  /* We do not care about argv[2] */</a>
<a name="ln4052">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, argv[2], NULL, argv[3],</a>
<a name="ln4053">                           NULL);</a>
<a name="ln4054">}</a>
<a name="ln4055"> </a>
<a name="ln4056">DEFUN (no_ipv6_route_flags_pref_tag,</a>
<a name="ln4057">       no_ipv6_route_flags_pref_tag_cmd,</a>
<a name="ln4058">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln4059">       NO_STR</a>
<a name="ln4060">       IP_STR</a>
<a name="ln4061">       &quot;Establish static routes\n&quot;</a>
<a name="ln4062">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4063">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4064">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4065">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4066">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4067">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4068">       &quot;Tag value\n&quot;</a>
<a name="ln4069">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4070">{</a>
<a name="ln4071">  /* We do not care about argv[2] */</a>
<a name="ln4072">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, argv[2], argv[3], argv[4], NULL);</a>
<a name="ln4073">}</a>
<a name="ln4074"> </a>
<a name="ln4075">DEFUN (no_ipv6_route_flags_pref_tag_vrf,</a>
<a name="ln4076">       no_ipv6_route_flags_pref_tag_vrf_cmd,</a>
<a name="ln4077">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln4078">       NO_STR</a>
<a name="ln4079">       IP_STR</a>
<a name="ln4080">       &quot;Establish static routes\n&quot;</a>
<a name="ln4081">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4082">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4083">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4084">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4085">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4086">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4087">       &quot;Tag value\n&quot;</a>
<a name="ln4088">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4089">       VRF_CMD_HELP_STR)</a>
<a name="ln4090">{</a>
<a name="ln4091">  /* We do not care about argv[2] */</a>
<a name="ln4092">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, argv[2], argv[3], argv[4], argv[5]);</a>
<a name="ln4093">}</a>
<a name="ln4094"> </a>
<a name="ln4095">DEFUN (no_ipv6_route_ifname_pref,</a>
<a name="ln4096">       no_ipv6_route_ifname_pref_cmd,</a>
<a name="ln4097">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE &lt;1-255&gt;&quot;,</a>
<a name="ln4098">       NO_STR</a>
<a name="ln4099">       IP_STR</a>
<a name="ln4100">       &quot;Establish static routes\n&quot;</a>
<a name="ln4101">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4102">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4103">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4104">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4105">{</a>
<a name="ln4106">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, NULL, argv[3],</a>
<a name="ln4107">                           NULL);</a>
<a name="ln4108">}</a>
<a name="ln4109"> </a>
<a name="ln4110">DEFUN (no_ipv6_route_ifname_pref_tag,</a>
<a name="ln4111">       no_ipv6_route_ifname_pref_tag_cmd,</a>
<a name="ln4112">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln4113">       NO_STR</a>
<a name="ln4114">       IP_STR</a>
<a name="ln4115">       &quot;Establish static routes\n&quot;</a>
<a name="ln4116">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4117">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4118">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4119">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4120">       &quot;Tag value\n&quot;</a>
<a name="ln4121">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4122">{</a>
<a name="ln4123">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, argv[3], argv[4], NULL);</a>
<a name="ln4124">}</a>
<a name="ln4125"> </a>
<a name="ln4126">DEFUN (no_ipv6_route_ifname_pref_tag_vrf,</a>
<a name="ln4127">       no_ipv6_route_ifname_pref_tag_vrf_cmd,</a>
<a name="ln4128">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln4129">       NO_STR</a>
<a name="ln4130">       IP_STR</a>
<a name="ln4131">       &quot;Establish static routes\n&quot;</a>
<a name="ln4132">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4133">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4134">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4135">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4136">       &quot;Tag value\n&quot;</a>
<a name="ln4137">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4138">       VRF_CMD_HELP_STR)</a>
<a name="ln4139">{</a>
<a name="ln4140">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, argv[3], argv[4], argv[5]);</a>
<a name="ln4141">}</a>
<a name="ln4142"> </a>
<a name="ln4143">DEFUN (no_ipv6_route_ifname_flags_pref,</a>
<a name="ln4144">       no_ipv6_route_ifname_flags_pref_cmd,</a>
<a name="ln4145">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) &lt;1-255&gt;&quot;,</a>
<a name="ln4146">       NO_STR</a>
<a name="ln4147">       IP_STR</a>
<a name="ln4148">       &quot;Establish static routes\n&quot;</a>
<a name="ln4149">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4150">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4151">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4152">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4153">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4154">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4155">{</a>
<a name="ln4156">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], argv[3], NULL, argv[4],</a>
<a name="ln4157">                           NULL);</a>
<a name="ln4158">}</a>
<a name="ln4159"> </a>
<a name="ln4160">DEFUN (no_ipv6_route_ifname_flags_pref_tag,</a>
<a name="ln4161">       no_ipv6_route_ifname_flags_pref_tag_cmd,</a>
<a name="ln4162">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot;,</a>
<a name="ln4163">       NO_STR</a>
<a name="ln4164">       IP_STR</a>
<a name="ln4165">       &quot;Establish static routes\n&quot;</a>
<a name="ln4166">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4167">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4168">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4169">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4170">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4171">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4172">       &quot;Tag value\n&quot;</a>
<a name="ln4173">       &quot;Distance value for this prefix\n&quot;)</a>
<a name="ln4174">{</a>
<a name="ln4175">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], argv[3], argv[4], argv[5], NULL);</a>
<a name="ln4176">}</a>
<a name="ln4177"> </a>
<a name="ln4178">DEFUN (no_ipv6_route_ifname_flags_pref_tag_vrf,</a>
<a name="ln4179">       no_ipv6_route_ifname_flags_pref_tag_vrf_cmd,</a>
<a name="ln4180">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) tag &lt;1-4294967295&gt; &lt;1-255&gt;&quot; VRF_CMD_STR,</a>
<a name="ln4181">       NO_STR</a>
<a name="ln4182">       IP_STR</a>
<a name="ln4183">       &quot;Establish static routes\n&quot;</a>
<a name="ln4184">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4185">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4186">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4187">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4188">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4189">       &quot;Set tag for this route\n&quot;</a>
<a name="ln4190">       &quot;Tag value\n&quot;</a>
<a name="ln4191">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4192">       VRF_CMD_HELP_STR)</a>
<a name="ln4193">{</a>
<a name="ln4194">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], argv[3], argv[4], argv[5], argv[6]);</a>
<a name="ln4195">}</a>
<a name="ln4196"> </a>
<a name="ln4197">DEFUN (ipv6_route_vrf,</a>
<a name="ln4198">       ipv6_route_vrf_cmd,</a>
<a name="ln4199">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) &quot; VRF_CMD_STR,</a>
<a name="ln4200">       IP_STR</a>
<a name="ln4201">       &quot;Establish static routes\n&quot;</a>
<a name="ln4202">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4203">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4204">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4205">       VRF_CMD_HELP_STR)</a>
<a name="ln4206">{</a>
<a name="ln4207">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, NULL, NULL,</a>
<a name="ln4208">                           argv[2]);</a>
<a name="ln4209">}</a>
<a name="ln4210"> </a>
<a name="ln4211">DEFUN (ipv6_route_flags_vrf,</a>
<a name="ln4212">       ipv6_route_flags_vrf_cmd,</a>
<a name="ln4213">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln4214">       IP_STR</a>
<a name="ln4215">       &quot;Establish static routes\n&quot;</a>
<a name="ln4216">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4217">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4218">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4219">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4220">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4221">       VRF_CMD_HELP_STR)</a>
<a name="ln4222">{</a>
<a name="ln4223">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], NULL, NULL,</a>
<a name="ln4224">                           argv[3]);</a>
<a name="ln4225">}</a>
<a name="ln4226"> </a>
<a name="ln4227">DEFUN (ipv6_route_ifname_vrf,</a>
<a name="ln4228">       ipv6_route_ifname_vrf_cmd,</a>
<a name="ln4229">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE &quot; VRF_CMD_STR,</a>
<a name="ln4230">       IP_STR</a>
<a name="ln4231">       &quot;Establish static routes\n&quot;</a>
<a name="ln4232">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4233">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4234">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4235">       VRF_CMD_HELP_STR)</a>
<a name="ln4236">{</a>
<a name="ln4237">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, NULL, NULL,</a>
<a name="ln4238">                           argv[3]);</a>
<a name="ln4239">}</a>
<a name="ln4240"> </a>
<a name="ln4241">DEFUN (ipv6_route_ifname_flags_vrf,</a>
<a name="ln4242">       ipv6_route_ifname_flags_vrf_cmd,</a>
<a name="ln4243">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln4244">       IP_STR</a>
<a name="ln4245">       &quot;Establish static routes\n&quot;</a>
<a name="ln4246">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4247">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4248">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4249">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4250">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4251">       VRF_CMD_HELP_STR)</a>
<a name="ln4252">{</a>
<a name="ln4253">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], NULL, NULL,</a>
<a name="ln4254">                           argv[4]);</a>
<a name="ln4255">}</a>
<a name="ln4256"> </a>
<a name="ln4257">DEFUN (ipv6_route_pref_vrf,</a>
<a name="ln4258">       ipv6_route_pref_vrf_cmd,</a>
<a name="ln4259">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4260">       IP_STR</a>
<a name="ln4261">       &quot;Establish static routes\n&quot;</a>
<a name="ln4262">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4263">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4264">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4265">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4266">       VRF_CMD_HELP_STR)</a>
<a name="ln4267">{</a>
<a name="ln4268">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, NULL, NULL, argv[2],</a>
<a name="ln4269">                           argv[3]);</a>
<a name="ln4270">}</a>
<a name="ln4271"> </a>
<a name="ln4272">DEFUN (ipv6_route_flags_pref_vrf,</a>
<a name="ln4273">       ipv6_route_flags_pref_vrf_cmd,</a>
<a name="ln4274">       &quot;ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4275">       IP_STR</a>
<a name="ln4276">       &quot;Establish static routes\n&quot;</a>
<a name="ln4277">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4278">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4279">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4280">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4281">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4282">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4283">       VRF_CMD_HELP_STR)</a>
<a name="ln4284">{</a>
<a name="ln4285">  return static_ipv6_func (vty, 1, argv[0], argv[1], NULL, argv[2], NULL, argv[3],</a>
<a name="ln4286">                           argv[4]);</a>
<a name="ln4287">}</a>
<a name="ln4288"> </a>
<a name="ln4289">DEFUN (ipv6_route_ifname_pref_vrf,</a>
<a name="ln4290">       ipv6_route_ifname_pref_vrf_cmd,</a>
<a name="ln4291">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4292">       IP_STR</a>
<a name="ln4293">       &quot;Establish static routes\n&quot;</a>
<a name="ln4294">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4295">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4296">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4297">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4298">       VRF_CMD_HELP_STR)</a>
<a name="ln4299">{</a>
<a name="ln4300">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], NULL, NULL, argv[3],</a>
<a name="ln4301">                           argv[4]);</a>
<a name="ln4302">}</a>
<a name="ln4303"> </a>
<a name="ln4304">DEFUN (ipv6_route_ifname_flags_pref_vrf,</a>
<a name="ln4305">       ipv6_route_ifname_flags_pref_vrf_cmd,</a>
<a name="ln4306">       &quot;ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4307">       IP_STR</a>
<a name="ln4308">       &quot;Establish static routes\n&quot;</a>
<a name="ln4309">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4310">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4311">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4312">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4313">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4314">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4315">       VRF_CMD_HELP_STR)</a>
<a name="ln4316">{</a>
<a name="ln4317">  return static_ipv6_func (vty, 1, argv[0], argv[1], argv[2], argv[3], NULL, argv[4],</a>
<a name="ln4318">                           argv[5]);</a>
<a name="ln4319">}</a>
<a name="ln4320"> </a>
<a name="ln4321">DEFUN (no_ipv6_route_vrf,</a>
<a name="ln4322">       no_ipv6_route_vrf_cmd,</a>
<a name="ln4323">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) &quot; VRF_CMD_STR,</a>
<a name="ln4324">       NO_STR</a>
<a name="ln4325">       IP_STR</a>
<a name="ln4326">       &quot;Establish static routes\n&quot;</a>
<a name="ln4327">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4328">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4329">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4330">       VRF_CMD_HELP_STR)</a>
<a name="ln4331">{</a>
<a name="ln4332">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, NULL, NULL,</a>
<a name="ln4333">                           (argc &gt; 3) ? argv[3] : argv[2]);</a>
<a name="ln4334">}</a>
<a name="ln4335"> </a>
<a name="ln4336">ALIAS (no_ipv6_route_vrf,</a>
<a name="ln4337">       no_ipv6_route_flags_vrf_cmd,</a>
<a name="ln4338">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln4339">       NO_STR</a>
<a name="ln4340">       IP_STR</a>
<a name="ln4341">       &quot;Establish static routes\n&quot;</a>
<a name="ln4342">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4343">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4344">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4345">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4346">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4347">       VRF_CMD_HELP_STR)</a>
<a name="ln4348"> </a>
<a name="ln4349">DEFUN (no_ipv6_route_ifname_vrf,</a>
<a name="ln4350">       no_ipv6_route_ifname_vrf_cmd,</a>
<a name="ln4351">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE &quot; VRF_CMD_STR,</a>
<a name="ln4352">       NO_STR</a>
<a name="ln4353">       IP_STR</a>
<a name="ln4354">       &quot;Establish static routes\n&quot;</a>
<a name="ln4355">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4356">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4357">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4358">       VRF_CMD_HELP_STR)</a>
<a name="ln4359">{</a>
<a name="ln4360">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, NULL, NULL,</a>
<a name="ln4361">                           (argc &gt; 4) ? argv[4] : argv[3]);</a>
<a name="ln4362">}</a>
<a name="ln4363"> </a>
<a name="ln4364">ALIAS (no_ipv6_route_ifname_vrf,</a>
<a name="ln4365">       no_ipv6_route_ifname_flags_vrf_cmd,</a>
<a name="ln4366">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) &quot; VRF_CMD_STR,</a>
<a name="ln4367">       NO_STR</a>
<a name="ln4368">       IP_STR</a>
<a name="ln4369">       &quot;Establish static routes\n&quot;</a>
<a name="ln4370">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4371">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4372">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4373">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4374">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4375">       VRF_CMD_HELP_STR)</a>
<a name="ln4376"> </a>
<a name="ln4377">DEFUN (no_ipv6_route_pref_vrf,</a>
<a name="ln4378">       no_ipv6_route_pref_vrf_cmd,</a>
<a name="ln4379">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4380">       NO_STR</a>
<a name="ln4381">       IP_STR</a>
<a name="ln4382">       &quot;Establish static routes\n&quot;</a>
<a name="ln4383">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4384">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4385">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4386">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4387">       VRF_CMD_HELP_STR)</a>
<a name="ln4388">{</a>
<a name="ln4389">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, NULL, NULL, argv[2],</a>
<a name="ln4390">                           argv[3]);</a>
<a name="ln4391">}</a>
<a name="ln4392"> </a>
<a name="ln4393">DEFUN (no_ipv6_route_flags_pref_vrf,</a>
<a name="ln4394">       no_ipv6_route_flags_pref_vrf_cmd,</a>
<a name="ln4395">       &quot;no ipv6 route X:X::X:X/M (X:X::X:X|INTERFACE) (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4396">       NO_STR</a>
<a name="ln4397">       IP_STR</a>
<a name="ln4398">       &quot;Establish static routes\n&quot;</a>
<a name="ln4399">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4400">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4401">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4402">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4403">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4404">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4405">       VRF_CMD_HELP_STR)</a>
<a name="ln4406">{</a>
<a name="ln4407">  /* We do not care about argv[2] */</a>
<a name="ln4408">  return static_ipv6_func (vty, 0, argv[0], argv[1], NULL, argv[2], NULL, argv[3],</a>
<a name="ln4409">                           argv[4]);</a>
<a name="ln4410">}</a>
<a name="ln4411"> </a>
<a name="ln4412">DEFUN (no_ipv6_route_ifname_pref_vrf,</a>
<a name="ln4413">       no_ipv6_route_ifname_pref_vrf_cmd,</a>
<a name="ln4414">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4415">       NO_STR</a>
<a name="ln4416">       IP_STR</a>
<a name="ln4417">       &quot;Establish static routes\n&quot;</a>
<a name="ln4418">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4419">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4420">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4421">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4422">       VRF_CMD_HELP_STR)</a>
<a name="ln4423">{</a>
<a name="ln4424">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], NULL, NULL, argv[3],</a>
<a name="ln4425">                           argv[4]);</a>
<a name="ln4426">}</a>
<a name="ln4427"> </a>
<a name="ln4428">DEFUN (no_ipv6_route_ifname_flags_pref_vrf,</a>
<a name="ln4429">       no_ipv6_route_ifname_flags_pref_vrf_cmd,</a>
<a name="ln4430">       &quot;no ipv6 route X:X::X:X/M X:X::X:X INTERFACE (reject|blackhole) &lt;1-255&gt; &quot; VRF_CMD_STR,</a>
<a name="ln4431">       NO_STR</a>
<a name="ln4432">       IP_STR</a>
<a name="ln4433">       &quot;Establish static routes\n&quot;</a>
<a name="ln4434">       &quot;IPv6 destination prefix (e.g. 3ffe:506::/32)\n&quot;</a>
<a name="ln4435">       &quot;IPv6 gateway address\n&quot;</a>
<a name="ln4436">       &quot;IPv6 gateway interface name\n&quot;</a>
<a name="ln4437">       &quot;Emit an ICMP unreachable when matched\n&quot;</a>
<a name="ln4438">       &quot;Silently discard pkts when matched\n&quot;</a>
<a name="ln4439">       &quot;Distance value for this prefix\n&quot;</a>
<a name="ln4440">       VRF_CMD_HELP_STR)</a>
<a name="ln4441">{</a>
<a name="ln4442">  return static_ipv6_func (vty, 0, argv[0], argv[1], argv[2], argv[3], NULL, argv[4],</a>
<a name="ln4443">                           argv[5]);</a>
<a name="ln4444">}</a>
<a name="ln4445"> </a>
<a name="ln4446">DEFUN (show_ipv6_route,</a>
<a name="ln4447">       show_ipv6_route_cmd,</a>
<a name="ln4448">       &quot;show ipv6 route&quot;,</a>
<a name="ln4449">       SHOW_STR</a>
<a name="ln4450">       IP_STR</a>
<a name="ln4451">       &quot;IPv6 routing table\n&quot;)</a>
<a name="ln4452">{</a>
<a name="ln4453">  struct route_table *table;</a>
<a name="ln4454">  struct route_node *rn;</a>
<a name="ln4455">  struct rib *rib;</a>
<a name="ln4456">  int first = 1;</a>
<a name="ln4457">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4458"> </a>
<a name="ln4459">  if (argc &gt; 0)</a>
<a name="ln4460">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln4461"> </a>
<a name="ln4462">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4463">  if (! table)</a>
<a name="ln4464">    return CMD_SUCCESS;</a>
<a name="ln4465"> </a>
<a name="ln4466">  /* Show all IPv6 route. */</a>
<a name="ln4467">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4468">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4469">      {</a>
<a name="ln4470">	if (first)</a>
<a name="ln4471">	  {</a>
<a name="ln4472">	    vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4473">	    first = 0;</a>
<a name="ln4474">	  }</a>
<a name="ln4475">	vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4476">      }</a>
<a name="ln4477">  return CMD_SUCCESS;</a>
<a name="ln4478">}</a>
<a name="ln4479"> </a>
<a name="ln4480">ALIAS (show_ipv6_route,</a>
<a name="ln4481">       show_ipv6_route_vrf_cmd,</a>
<a name="ln4482">       &quot;show ipv6 route &quot; VRF_CMD_STR,</a>
<a name="ln4483">       SHOW_STR</a>
<a name="ln4484">       IP_STR</a>
<a name="ln4485">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4486">       VRF_CMD_HELP_STR)</a>
<a name="ln4487"> </a>
<a name="ln4488">DEFUN (show_ipv6_route_tag,</a>
<a name="ln4489">       show_ipv6_route_tag_cmd,</a>
<a name="ln4490">       &quot;show ipv6 route tag &lt;1-4294967295&gt;&quot;,</a>
<a name="ln4491">       SHOW_STR</a>
<a name="ln4492">       IP_STR</a>
<a name="ln4493">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4494">       &quot;Show only routes with tag\n&quot;</a>
<a name="ln4495">       &quot;Tag value\n&quot;)</a>
<a name="ln4496">{</a>
<a name="ln4497">  struct route_table *table;</a>
<a name="ln4498">  struct route_node *rn;</a>
<a name="ln4499">  struct rib *rib;</a>
<a name="ln4500">  int first = 1;</a>
<a name="ln4501">  route_tag_t tag = 0;</a>
<a name="ln4502">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4503"> </a>
<a name="ln4504">  if (argv[0])</a>
<a name="ln4505">    tag = atoi(argv[0]);</a>
<a name="ln4506"> </a>
<a name="ln4507">  if (argc == 2)</a>
<a name="ln4508">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln4509"> </a>
<a name="ln4510">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4511">  if (! table)</a>
<a name="ln4512">    return CMD_SUCCESS;</a>
<a name="ln4513"> </a>
<a name="ln4514">  /* Show all IPv6 routes with matching tag value. */</a>
<a name="ln4515">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4516">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4517">      {</a>
<a name="ln4518">        if (rib-&gt;tag != tag)</a>
<a name="ln4519">          continue;</a>
<a name="ln4520"> </a>
<a name="ln4521">	if (first)</a>
<a name="ln4522">	  {</a>
<a name="ln4523">	    vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4524">	    first = 0;</a>
<a name="ln4525">	  }</a>
<a name="ln4526">	vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4527">      }</a>
<a name="ln4528">  return CMD_SUCCESS;</a>
<a name="ln4529">}</a>
<a name="ln4530"> </a>
<a name="ln4531">ALIAS (show_ipv6_route_tag,</a>
<a name="ln4532">       show_ipv6_route_tag_vrf_cmd,</a>
<a name="ln4533">       &quot;show ipv6 route tag &lt;1-4294967295&gt;&quot; VRF_CMD_STR,</a>
<a name="ln4534">       SHOW_STR</a>
<a name="ln4535">       IP_STR</a>
<a name="ln4536">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4537">       &quot;Show only routes with tag\n&quot;</a>
<a name="ln4538">       &quot;Tag value\n&quot;</a>
<a name="ln4539">       VRF_CMD_HELP_STR)</a>
<a name="ln4540"> </a>
<a name="ln4541">DEFUN (show_ipv6_route_prefix_longer,</a>
<a name="ln4542">       show_ipv6_route_prefix_longer_cmd,</a>
<a name="ln4543">       &quot;show ipv6 route X:X::X:X/M longer-prefixes&quot;,</a>
<a name="ln4544">       SHOW_STR</a>
<a name="ln4545">       IP_STR</a>
<a name="ln4546">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4547">       &quot;IPv6 prefix\n&quot;</a>
<a name="ln4548">       &quot;Show route matching the specified Network/Mask pair only\n&quot;)</a>
<a name="ln4549">{</a>
<a name="ln4550">  struct route_table *table;</a>
<a name="ln4551">  struct route_node *rn;</a>
<a name="ln4552">  struct rib *rib;</a>
<a name="ln4553">  struct prefix p;</a>
<a name="ln4554">  int ret;</a>
<a name="ln4555">  int first = 1;</a>
<a name="ln4556">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4557"> </a>
<a name="ln4558">  ret = str2prefix (argv[0], &amp;p);</a>
<a name="ln4559">  if (! ret)</a>
<a name="ln4560">    {</a>
<a name="ln4561">      vty_out (vty, &quot;%% Malformed Prefix%s&quot;, VTY_NEWLINE);</a>
<a name="ln4562">      return CMD_WARNING;</a>
<a name="ln4563">    }</a>
<a name="ln4564"> </a>
<a name="ln4565">  if (argc &gt; 1)</a>
<a name="ln4566">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln4567"> </a>
<a name="ln4568">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4569">  if (! table)</a>
<a name="ln4570">    return CMD_SUCCESS;</a>
<a name="ln4571"> </a>
<a name="ln4572">  /* Show matched type IPv6 routes. */</a>
<a name="ln4573">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4574">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4575">      if (prefix_match (&amp;p, &amp;rn-&gt;p))</a>
<a name="ln4576">	{</a>
<a name="ln4577">	  if (first)</a>
<a name="ln4578">	    {</a>
<a name="ln4579">	      vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4580">	      first = 0;</a>
<a name="ln4581">	    }</a>
<a name="ln4582">	  vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4583">	}</a>
<a name="ln4584">  return CMD_SUCCESS;</a>
<a name="ln4585">}</a>
<a name="ln4586"> </a>
<a name="ln4587">ALIAS (show_ipv6_route_prefix_longer,</a>
<a name="ln4588">       show_ipv6_route_prefix_longer_vrf_cmd,</a>
<a name="ln4589">       &quot;show ipv6 route X:X::X:X/M longer-prefixes &quot; VRF_CMD_STR,</a>
<a name="ln4590">       SHOW_STR</a>
<a name="ln4591">       IP_STR</a>
<a name="ln4592">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4593">       &quot;IPv6 prefix\n&quot;</a>
<a name="ln4594">       &quot;Show route matching the specified Network/Mask pair only\n&quot;</a>
<a name="ln4595">       VRF_CMD_HELP_STR)</a>
<a name="ln4596"> </a>
<a name="ln4597">DEFUN (show_ipv6_route_protocol,</a>
<a name="ln4598">       show_ipv6_route_protocol_cmd,</a>
<a name="ln4599">       &quot;show ipv6 route &quot; QUAGGA_IP6_REDIST_STR_ZEBRA,</a>
<a name="ln4600">       SHOW_STR</a>
<a name="ln4601">       IP_STR</a>
<a name="ln4602">       &quot;IP routing table\n&quot;</a>
<a name="ln4603">	QUAGGA_IP6_REDIST_HELP_STR_ZEBRA)</a>
<a name="ln4604">{</a>
<a name="ln4605">  int type;</a>
<a name="ln4606">  struct route_table *table;</a>
<a name="ln4607">  struct route_node *rn;</a>
<a name="ln4608">  struct rib *rib;</a>
<a name="ln4609">  int first = 1;</a>
<a name="ln4610">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4611"> </a>
<a name="ln4612">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln4613">  if (type &lt; 0)</a>
<a name="ln4614">    {</a>
<a name="ln4615">      vty_out (vty, &quot;Unknown route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln4616">      return CMD_WARNING;</a>
<a name="ln4617">    }</a>
<a name="ln4618"> </a>
<a name="ln4619">  if (argc &gt; 1)</a>
<a name="ln4620">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln4621"> </a>
<a name="ln4622">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4623">  if (! table)</a>
<a name="ln4624">    return CMD_SUCCESS;</a>
<a name="ln4625"> </a>
<a name="ln4626">  /* Show matched type IPv6 routes. */</a>
<a name="ln4627">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4628">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4629">      if (rib-&gt;type == type)</a>
<a name="ln4630">	{</a>
<a name="ln4631">	  if (first)</a>
<a name="ln4632">	    {</a>
<a name="ln4633">	      vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4634">	      first = 0;</a>
<a name="ln4635">	    }</a>
<a name="ln4636">	  vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4637">	}</a>
<a name="ln4638">  return CMD_SUCCESS;</a>
<a name="ln4639">}</a>
<a name="ln4640"> </a>
<a name="ln4641">ALIAS (show_ipv6_route_protocol,</a>
<a name="ln4642">       show_ipv6_route_protocol_vrf_cmd,</a>
<a name="ln4643">       &quot;show ipv6 route &quot; QUAGGA_IP6_REDIST_STR_ZEBRA &quot; &quot; VRF_CMD_STR,</a>
<a name="ln4644">       SHOW_STR</a>
<a name="ln4645">       IP_STR</a>
<a name="ln4646">       &quot;IP routing table\n&quot;</a>
<a name="ln4647">       QUAGGA_IP6_REDIST_HELP_STR_ZEBRA</a>
<a name="ln4648">       VRF_CMD_HELP_STR)</a>
<a name="ln4649"> </a>
<a name="ln4650">DEFUN (show_ipv6_route_addr,</a>
<a name="ln4651">       show_ipv6_route_addr_cmd,</a>
<a name="ln4652">       &quot;show ipv6 route X:X::X:X&quot;,</a>
<a name="ln4653">       SHOW_STR</a>
<a name="ln4654">       IP_STR</a>
<a name="ln4655">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4656">       &quot;IPv6 Address\n&quot;)</a>
<a name="ln4657">{</a>
<a name="ln4658">  int ret;</a>
<a name="ln4659">  struct prefix_ipv6 p;</a>
<a name="ln4660">  struct route_table *table;</a>
<a name="ln4661">  struct route_node *rn;</a>
<a name="ln4662">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4663"> </a>
<a name="ln4664">  ret = str2prefix_ipv6 (argv[0], &amp;p);</a>
<a name="ln4665">  if (ret &lt;= 0)</a>
<a name="ln4666">    {</a>
<a name="ln4667">      vty_out (vty, &quot;Malformed IPv6 address%s&quot;, VTY_NEWLINE);</a>
<a name="ln4668">      return CMD_WARNING;</a>
<a name="ln4669">    }</a>
<a name="ln4670"> </a>
<a name="ln4671">  if (argc &gt; 1)</a>
<a name="ln4672">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln4673"> </a>
<a name="ln4674">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4675">  if (! table)</a>
<a name="ln4676">    return CMD_SUCCESS;</a>
<a name="ln4677"> </a>
<a name="ln4678">  rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln4679">  if (! rn)</a>
<a name="ln4680">    {</a>
<a name="ln4681">      vty_out (vty, &quot;%% Network not in table%s&quot;, VTY_NEWLINE);</a>
<a name="ln4682">      return CMD_WARNING;</a>
<a name="ln4683">    }</a>
<a name="ln4684"> </a>
<a name="ln4685">  vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln4686"> </a>
<a name="ln4687">  route_unlock_node (rn);</a>
<a name="ln4688"> </a>
<a name="ln4689">  return CMD_SUCCESS;</a>
<a name="ln4690">}</a>
<a name="ln4691"> </a>
<a name="ln4692">ALIAS (show_ipv6_route_addr,</a>
<a name="ln4693">       show_ipv6_route_addr_vrf_cmd,</a>
<a name="ln4694">       &quot;show ipv6 route X:X::X:X &quot; VRF_CMD_STR,</a>
<a name="ln4695">       SHOW_STR</a>
<a name="ln4696">       IP_STR</a>
<a name="ln4697">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4698">       &quot;IPv6 Address\n&quot;</a>
<a name="ln4699">       VRF_CMD_HELP_STR)</a>
<a name="ln4700"> </a>
<a name="ln4701">DEFUN (show_ipv6_route_prefix,</a>
<a name="ln4702">       show_ipv6_route_prefix_cmd,</a>
<a name="ln4703">       &quot;show ipv6 route X:X::X:X/M&quot;,</a>
<a name="ln4704">       SHOW_STR</a>
<a name="ln4705">       IP_STR</a>
<a name="ln4706">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4707">       &quot;IPv6 prefix\n&quot;)</a>
<a name="ln4708">{</a>
<a name="ln4709">  int ret;</a>
<a name="ln4710">  struct prefix_ipv6 p;</a>
<a name="ln4711">  struct route_table *table;</a>
<a name="ln4712">  struct route_node *rn;</a>
<a name="ln4713">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4714"> </a>
<a name="ln4715">  ret = str2prefix_ipv6 (argv[0], &amp;p);</a>
<a name="ln4716">  if (ret &lt;= 0)</a>
<a name="ln4717">    {</a>
<a name="ln4718">      vty_out (vty, &quot;Malformed IPv6 prefix%s&quot;, VTY_NEWLINE);</a>
<a name="ln4719">      return CMD_WARNING;</a>
<a name="ln4720">    }</a>
<a name="ln4721"> </a>
<a name="ln4722">  if (argc &gt; 1)</a>
<a name="ln4723">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[1]);</a>
<a name="ln4724"> </a>
<a name="ln4725">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4726">  if (! table)</a>
<a name="ln4727">    return CMD_SUCCESS;</a>
<a name="ln4728"> </a>
<a name="ln4729">  rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln4730">  if (! rn || rn-&gt;p.prefixlen != p.prefixlen)</a>
<a name="ln4731">    {</a>
<a name="ln4732">      vty_out (vty, &quot;%% Network not in table%s&quot;, VTY_NEWLINE);</a>
<a name="ln4733">      if (rn)</a>
<a name="ln4734">        route_unlock_node (rn);</a>
<a name="ln4735">      return CMD_WARNING;</a>
<a name="ln4736">    }</a>
<a name="ln4737"> </a>
<a name="ln4738">  vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln4739"> </a>
<a name="ln4740">  route_unlock_node (rn);</a>
<a name="ln4741"> </a>
<a name="ln4742">  return CMD_SUCCESS;</a>
<a name="ln4743">}</a>
<a name="ln4744"> </a>
<a name="ln4745">ALIAS (show_ipv6_route_prefix,</a>
<a name="ln4746">       show_ipv6_route_prefix_vrf_cmd,</a>
<a name="ln4747">       &quot;show ipv6 route X:X::X:X/M &quot; VRF_CMD_STR,</a>
<a name="ln4748">       SHOW_STR</a>
<a name="ln4749">       IP_STR</a>
<a name="ln4750">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4751">       &quot;IPv6 prefix\n&quot;</a>
<a name="ln4752">       VRF_CMD_HELP_STR)</a>
<a name="ln4753"> </a>
<a name="ln4754">/* Show route summary.  */</a>
<a name="ln4755">DEFUN (show_ipv6_route_summary,</a>
<a name="ln4756">       show_ipv6_route_summary_cmd,</a>
<a name="ln4757">       &quot;show ipv6 route summary&quot;,</a>
<a name="ln4758">       SHOW_STR</a>
<a name="ln4759">       IP_STR</a>
<a name="ln4760">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4761">       &quot;Summary of all IPv6 routes\n&quot;)</a>
<a name="ln4762">{</a>
<a name="ln4763">  struct route_table *table;</a>
<a name="ln4764">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4765"> </a>
<a name="ln4766">  if (argc &gt; 0)</a>
<a name="ln4767">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln4768"> </a>
<a name="ln4769">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4770">  if (! table)</a>
<a name="ln4771">    return CMD_SUCCESS;</a>
<a name="ln4772"> </a>
<a name="ln4773">  vty_show_ip_route_summary (vty, table);</a>
<a name="ln4774"> </a>
<a name="ln4775">  return CMD_SUCCESS;</a>
<a name="ln4776">}</a>
<a name="ln4777"> </a>
<a name="ln4778">ALIAS (show_ipv6_route_summary,</a>
<a name="ln4779">       show_ipv6_route_summary_vrf_cmd,</a>
<a name="ln4780">       &quot;show ipv6 route summary &quot; VRF_CMD_STR,</a>
<a name="ln4781">       SHOW_STR</a>
<a name="ln4782">       IP_STR</a>
<a name="ln4783">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4784">       &quot;Summary of all IPv6 routes\n&quot;</a>
<a name="ln4785">       VRF_CMD_HELP_STR)</a>
<a name="ln4786"> </a>
<a name="ln4787">/* Show ipv6 route summary prefix.  */</a>
<a name="ln4788">DEFUN (show_ipv6_route_summary_prefix,</a>
<a name="ln4789">       show_ipv6_route_summary_prefix_cmd,</a>
<a name="ln4790">       &quot;show ipv6 route summary prefix&quot;,</a>
<a name="ln4791">       SHOW_STR</a>
<a name="ln4792">       IP_STR</a>
<a name="ln4793">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4794">       &quot;Summary of all IPv6 routes\n&quot;</a>
<a name="ln4795">       &quot;Prefix routes\n&quot;)</a>
<a name="ln4796">{</a>
<a name="ln4797">  struct route_table *table;</a>
<a name="ln4798">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4799"> </a>
<a name="ln4800">  if (argc &gt; 0)</a>
<a name="ln4801">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln4802"> </a>
<a name="ln4803">  table = zebra_vrf_table (AFI_IP6, SAFI_UNICAST, vrf_id);</a>
<a name="ln4804">  if (! table)</a>
<a name="ln4805">    return CMD_SUCCESS;</a>
<a name="ln4806"> </a>
<a name="ln4807">  vty_show_ip_route_summary_prefix (vty, table);</a>
<a name="ln4808"> </a>
<a name="ln4809">  return CMD_SUCCESS;</a>
<a name="ln4810">}</a>
<a name="ln4811"> </a>
<a name="ln4812">ALIAS (show_ipv6_route_summary_prefix,</a>
<a name="ln4813">       show_ipv6_route_summary_prefix_vrf_cmd,</a>
<a name="ln4814">       &quot;show ipv6 route summary prefix &quot; VRF_CMD_STR,</a>
<a name="ln4815">       SHOW_STR</a>
<a name="ln4816">       IP_STR</a>
<a name="ln4817">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4818">       &quot;Summary of all IPv6 routes\n&quot;</a>
<a name="ln4819">       &quot;Prefix routes\n&quot;</a>
<a name="ln4820">       VRF_CMD_HELP_STR)</a>
<a name="ln4821"> </a>
<a name="ln4822">/*</a>
<a name="ln4823"> * Show IPv6 mroute command.Used to dump</a>
<a name="ln4824"> * the Multicast routing table.</a>
<a name="ln4825"> */</a>
<a name="ln4826"> </a>
<a name="ln4827">DEFUN (show_ipv6_mroute,</a>
<a name="ln4828">       show_ipv6_mroute_cmd,</a>
<a name="ln4829">       &quot;show ipv6 mroute&quot;,</a>
<a name="ln4830">       SHOW_STR</a>
<a name="ln4831">       IP_STR</a>
<a name="ln4832">       &quot;IPv6 Multicast routing table\n&quot;)</a>
<a name="ln4833">{</a>
<a name="ln4834">  struct route_table *table;</a>
<a name="ln4835">  struct route_node *rn;</a>
<a name="ln4836">  struct rib *rib;</a>
<a name="ln4837">  int first = 1;</a>
<a name="ln4838">  vrf_id_t vrf_id = VRF_DEFAULT;</a>
<a name="ln4839"> </a>
<a name="ln4840">  if (argc &gt; 0)</a>
<a name="ln4841">    VTY_GET_INTEGER (&quot;VRF ID&quot;, vrf_id, argv[0]);</a>
<a name="ln4842"> </a>
<a name="ln4843">  table = zebra_vrf_table (AFI_IP6, SAFI_MULTICAST, vrf_id);</a>
<a name="ln4844">  if (! table)</a>
<a name="ln4845">    return CMD_SUCCESS;</a>
<a name="ln4846"> </a>
<a name="ln4847">  /* Show all IPv6 route. */</a>
<a name="ln4848">  for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4849">    RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4850">      {</a>
<a name="ln4851">       if (first)</a>
<a name="ln4852">         {</a>
<a name="ln4853">	   vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4854">           first = 0;</a>
<a name="ln4855">         }</a>
<a name="ln4856">       vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4857">      }</a>
<a name="ln4858">  return CMD_SUCCESS;</a>
<a name="ln4859">}</a>
<a name="ln4860"> </a>
<a name="ln4861">ALIAS (show_ipv6_mroute,</a>
<a name="ln4862">       show_ipv6_mroute_vrf_cmd,</a>
<a name="ln4863">       &quot;show ipv6 mroute &quot; VRF_CMD_STR,</a>
<a name="ln4864">       SHOW_STR</a>
<a name="ln4865">       IP_STR</a>
<a name="ln4866">       &quot;IPv6 Multicast routing table\n&quot;</a>
<a name="ln4867">       VRF_CMD_HELP_STR)</a>
<a name="ln4868"> </a>
<a name="ln4869">DEFUN (show_ipv6_route_vrf_all,</a>
<a name="ln4870">       show_ipv6_route_vrf_all_cmd,</a>
<a name="ln4871">       &quot;show ipv6 route &quot; VRF_ALL_CMD_STR,</a>
<a name="ln4872">       SHOW_STR</a>
<a name="ln4873">       IP_STR</a>
<a name="ln4874">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4875">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln4876">{</a>
<a name="ln4877">  struct route_table *table;</a>
<a name="ln4878">  struct route_node *rn;</a>
<a name="ln4879">  struct rib *rib;</a>
<a name="ln4880">  struct zebra_vrf *zvrf;</a>
<a name="ln4881">  vrf_iter_t iter;</a>
<a name="ln4882">  int first = 1;</a>
<a name="ln4883"> </a>
<a name="ln4884">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln4885">    {</a>
<a name="ln4886">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln4887">          (table = zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]) == NULL)</a>
<a name="ln4888">        continue;</a>
<a name="ln4889"> </a>
<a name="ln4890">      /* Show all IPv6 route. */</a>
<a name="ln4891">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4892">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4893">          {</a>
<a name="ln4894">            if (first)</a>
<a name="ln4895">              {</a>
<a name="ln4896">                vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4897">                first = 0;</a>
<a name="ln4898">              }</a>
<a name="ln4899">            vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4900">          }</a>
<a name="ln4901">    }</a>
<a name="ln4902"> </a>
<a name="ln4903">  return CMD_SUCCESS;</a>
<a name="ln4904">}</a>
<a name="ln4905"> </a>
<a name="ln4906">DEFUN (show_ipv6_route_prefix_longer_vrf_all,</a>
<a name="ln4907">       show_ipv6_route_prefix_longer_vrf_all_cmd,</a>
<a name="ln4908">       &quot;show ipv6 route X:X::X:X/M longer-prefixes &quot; VRF_ALL_CMD_STR,</a>
<a name="ln4909">       SHOW_STR</a>
<a name="ln4910">       IP_STR</a>
<a name="ln4911">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln4912">       &quot;IPv6 prefix\n&quot;</a>
<a name="ln4913">       &quot;Show route matching the specified Network/Mask pair only\n&quot;</a>
<a name="ln4914">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln4915">{</a>
<a name="ln4916">  struct route_table *table;</a>
<a name="ln4917">  struct route_node *rn;</a>
<a name="ln4918">  struct rib *rib;</a>
<a name="ln4919">  struct prefix p;</a>
<a name="ln4920">  struct zebra_vrf *zvrf;</a>
<a name="ln4921">  vrf_iter_t iter;</a>
<a name="ln4922">  int ret;</a>
<a name="ln4923">  int first = 1;</a>
<a name="ln4924"> </a>
<a name="ln4925">  ret = str2prefix (argv[0], &amp;p);</a>
<a name="ln4926">  if (! ret)</a>
<a name="ln4927">    {</a>
<a name="ln4928">      vty_out (vty, &quot;%% Malformed Prefix%s&quot;, VTY_NEWLINE);</a>
<a name="ln4929">      return CMD_WARNING;</a>
<a name="ln4930">    }</a>
<a name="ln4931"> </a>
<a name="ln4932">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln4933">    {</a>
<a name="ln4934">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln4935">          (table = zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]) == NULL)</a>
<a name="ln4936">        continue;</a>
<a name="ln4937"> </a>
<a name="ln4938">      /* Show matched type IPv6 routes. */</a>
<a name="ln4939">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4940">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4941">          if (prefix_match (&amp;p, &amp;rn-&gt;p))</a>
<a name="ln4942">            {</a>
<a name="ln4943">              if (first)</a>
<a name="ln4944">                {</a>
<a name="ln4945">                  vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4946">                  first = 0;</a>
<a name="ln4947">                }</a>
<a name="ln4948">              vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4949">            }</a>
<a name="ln4950">    }</a>
<a name="ln4951"> </a>
<a name="ln4952">  return CMD_SUCCESS;</a>
<a name="ln4953">}</a>
<a name="ln4954"> </a>
<a name="ln4955">DEFUN (show_ipv6_route_protocol_vrf_all,</a>
<a name="ln4956">       show_ipv6_route_protocol_vrf_all_cmd,</a>
<a name="ln4957">       &quot;show ipv6 route &quot; QUAGGA_IP6_REDIST_STR_ZEBRA &quot; &quot; VRF_ALL_CMD_STR,</a>
<a name="ln4958">       SHOW_STR</a>
<a name="ln4959">       IP_STR</a>
<a name="ln4960">       &quot;IP routing table\n&quot;</a>
<a name="ln4961">       QUAGGA_IP6_REDIST_HELP_STR_ZEBRA</a>
<a name="ln4962">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln4963">{</a>
<a name="ln4964">  int type;</a>
<a name="ln4965">  struct route_table *table;</a>
<a name="ln4966">  struct route_node *rn;</a>
<a name="ln4967">  struct rib *rib;</a>
<a name="ln4968">  struct zebra_vrf *zvrf;</a>
<a name="ln4969">  vrf_iter_t iter;</a>
<a name="ln4970">  int first = 1;</a>
<a name="ln4971"> </a>
<a name="ln4972">  type = proto_redistnum (AFI_IP6, argv[0]);</a>
<a name="ln4973">  if (type &lt; 0)</a>
<a name="ln4974">    {</a>
<a name="ln4975">      vty_out (vty, &quot;Unknown route type%s&quot;, VTY_NEWLINE);</a>
<a name="ln4976">      return CMD_WARNING;</a>
<a name="ln4977">    }</a>
<a name="ln4978"> </a>
<a name="ln4979">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln4980">    {</a>
<a name="ln4981">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln4982">          (table = zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]) == NULL)</a>
<a name="ln4983">        continue;</a>
<a name="ln4984"> </a>
<a name="ln4985">      /* Show matched type IPv6 routes. */</a>
<a name="ln4986">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln4987">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln4988">          if (rib-&gt;type == type)</a>
<a name="ln4989">            {</a>
<a name="ln4990">              if (first)</a>
<a name="ln4991">                {</a>
<a name="ln4992">                  vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln4993">                  first = 0;</a>
<a name="ln4994">                }</a>
<a name="ln4995">              vty_show_ip_route (vty, rn, rib);</a>
<a name="ln4996">            }</a>
<a name="ln4997">    }</a>
<a name="ln4998"> </a>
<a name="ln4999">  return CMD_SUCCESS;</a>
<a name="ln5000">}</a>
<a name="ln5001"> </a>
<a name="ln5002">DEFUN (show_ipv6_route_addr_vrf_all,</a>
<a name="ln5003">       show_ipv6_route_addr_vrf_all_cmd,</a>
<a name="ln5004">       &quot;show ipv6 route X:X::X:X &quot; VRF_ALL_CMD_STR,</a>
<a name="ln5005">       SHOW_STR</a>
<a name="ln5006">       IP_STR</a>
<a name="ln5007">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln5008">       &quot;IPv6 Address\n&quot;</a>
<a name="ln5009">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln5010">{</a>
<a name="ln5011">  int ret;</a>
<a name="ln5012">  struct prefix_ipv6 p;</a>
<a name="ln5013">  struct route_table *table;</a>
<a name="ln5014">  struct route_node *rn;</a>
<a name="ln5015">  struct zebra_vrf *zvrf;</a>
<a name="ln5016">  vrf_iter_t iter;</a>
<a name="ln5017"> </a>
<a name="ln5018">  ret = str2prefix_ipv6 (argv[0], &amp;p);</a>
<a name="ln5019">  if (ret &lt;= 0)</a>
<a name="ln5020">    {</a>
<a name="ln5021">      vty_out (vty, &quot;Malformed IPv6 address%s&quot;, VTY_NEWLINE);</a>
<a name="ln5022">      return CMD_WARNING;</a>
<a name="ln5023">    }</a>
<a name="ln5024"> </a>
<a name="ln5025">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln5026">    {</a>
<a name="ln5027">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln5028">          (table = zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]) == NULL)</a>
<a name="ln5029">        continue;</a>
<a name="ln5030"> </a>
<a name="ln5031">      rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln5032">      if (! rn)</a>
<a name="ln5033">        continue;</a>
<a name="ln5034"> </a>
<a name="ln5035">      vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln5036"> </a>
<a name="ln5037">      route_unlock_node (rn);</a>
<a name="ln5038">    }</a>
<a name="ln5039"> </a>
<a name="ln5040">  return CMD_SUCCESS;</a>
<a name="ln5041">}</a>
<a name="ln5042"> </a>
<a name="ln5043">DEFUN (show_ipv6_route_prefix_vrf_all,</a>
<a name="ln5044">       show_ipv6_route_prefix_vrf_all_cmd,</a>
<a name="ln5045">       &quot;show ipv6 route X:X::X:X/M &quot; VRF_ALL_CMD_STR,</a>
<a name="ln5046">       SHOW_STR</a>
<a name="ln5047">       IP_STR</a>
<a name="ln5048">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln5049">       &quot;IPv6 prefix\n&quot;</a>
<a name="ln5050">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln5051">{</a>
<a name="ln5052">  int ret;</a>
<a name="ln5053">  struct prefix_ipv6 p;</a>
<a name="ln5054">  struct route_table *table;</a>
<a name="ln5055">  struct route_node *rn;</a>
<a name="ln5056">  struct zebra_vrf *zvrf;</a>
<a name="ln5057">  vrf_iter_t iter;</a>
<a name="ln5058"> </a>
<a name="ln5059">  ret = str2prefix_ipv6 (argv[0], &amp;p);</a>
<a name="ln5060">  if (ret &lt;= 0)</a>
<a name="ln5061">    {</a>
<a name="ln5062">      vty_out (vty, &quot;Malformed IPv6 prefix%s&quot;, VTY_NEWLINE);</a>
<a name="ln5063">      return CMD_WARNING;</a>
<a name="ln5064">    }</a>
<a name="ln5065"> </a>
<a name="ln5066">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln5067">    {</a>
<a name="ln5068">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln5069">          (table = zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]) == NULL)</a>
<a name="ln5070">        continue;</a>
<a name="ln5071"> </a>
<a name="ln5072">      rn = route_node_match (table, (struct prefix *) &amp;p);</a>
<a name="ln5073">      if (! rn)</a>
<a name="ln5074">        continue;</a>
<a name="ln5075">      if (rn-&gt;p.prefixlen != p.prefixlen)</a>
<a name="ln5076">        {</a>
<a name="ln5077">          route_unlock_node (rn);</a>
<a name="ln5078">          continue;</a>
<a name="ln5079">        }</a>
<a name="ln5080"> </a>
<a name="ln5081">      vty_show_ip_route_detail (vty, rn, 0);</a>
<a name="ln5082"> </a>
<a name="ln5083">      route_unlock_node (rn);</a>
<a name="ln5084">    }</a>
<a name="ln5085"> </a>
<a name="ln5086">  return CMD_SUCCESS;</a>
<a name="ln5087">}</a>
<a name="ln5088"> </a>
<a name="ln5089">/* Show route summary.  */</a>
<a name="ln5090">DEFUN (show_ipv6_route_summary_vrf_all,</a>
<a name="ln5091">       show_ipv6_route_summary_vrf_all_cmd,</a>
<a name="ln5092">       &quot;show ipv6 route summary &quot; VRF_ALL_CMD_STR,</a>
<a name="ln5093">       SHOW_STR</a>
<a name="ln5094">       IP_STR</a>
<a name="ln5095">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln5096">       &quot;Summary of all IPv6 routes\n&quot;</a>
<a name="ln5097">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln5098">{</a>
<a name="ln5099">  struct zebra_vrf *zvrf;</a>
<a name="ln5100">  vrf_iter_t iter;</a>
<a name="ln5101"> </a>
<a name="ln5102">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln5103">    if ((zvrf = vrf_iter2info (iter)) != NULL)</a>
<a name="ln5104">      vty_show_ip_route_summary (vty, zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]);</a>
<a name="ln5105"> </a>
<a name="ln5106">  return CMD_SUCCESS;</a>
<a name="ln5107">}</a>
<a name="ln5108"> </a>
<a name="ln5109">DEFUN (show_ipv6_mroute_vrf_all,</a>
<a name="ln5110">       show_ipv6_mroute_vrf_all_cmd,</a>
<a name="ln5111">       &quot;show ipv6 mroute &quot; VRF_ALL_CMD_STR,</a>
<a name="ln5112">       SHOW_STR</a>
<a name="ln5113">       IP_STR</a>
<a name="ln5114">       &quot;IPv6 Multicast routing table\n&quot;</a>
<a name="ln5115">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln5116">{</a>
<a name="ln5117">  struct route_table *table;</a>
<a name="ln5118">  struct route_node *rn;</a>
<a name="ln5119">  struct rib *rib;</a>
<a name="ln5120">  struct zebra_vrf *zvrf;</a>
<a name="ln5121">  vrf_iter_t iter;</a>
<a name="ln5122">  int first = 1;</a>
<a name="ln5123"> </a>
<a name="ln5124">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln5125">    {</a>
<a name="ln5126">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln5127">          (table = zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]) == NULL)</a>
<a name="ln5128">        continue;</a>
<a name="ln5129"> </a>
<a name="ln5130">      /* Show all IPv6 route. */</a>
<a name="ln5131">      for (rn = route_top (table); rn; rn = route_next (rn))</a>
<a name="ln5132">        RNODE_FOREACH_RIB (rn, rib)</a>
<a name="ln5133">          {</a>
<a name="ln5134">           if (first)</a>
<a name="ln5135">             {</a>
<a name="ln5136">               vty_out (vty, SHOW_ROUTE_V6_HEADER);</a>
<a name="ln5137">               first = 0;</a>
<a name="ln5138">             }</a>
<a name="ln5139">           vty_show_ip_route (vty, rn, rib);</a>
<a name="ln5140">          }</a>
<a name="ln5141">    }</a>
<a name="ln5142">  return CMD_SUCCESS;</a>
<a name="ln5143">}</a>
<a name="ln5144"> </a>
<a name="ln5145">DEFUN (show_ipv6_route_summary_prefix_vrf_all,</a>
<a name="ln5146">       show_ipv6_route_summary_prefix_vrf_all_cmd,</a>
<a name="ln5147">       &quot;show ipv6 route summary prefix &quot; VRF_ALL_CMD_STR,</a>
<a name="ln5148">       SHOW_STR</a>
<a name="ln5149">       IP_STR</a>
<a name="ln5150">       &quot;IPv6 routing table\n&quot;</a>
<a name="ln5151">       &quot;Summary of all IPv6 routes\n&quot;</a>
<a name="ln5152">       &quot;Prefix routes\n&quot;</a>
<a name="ln5153">       VRF_ALL_CMD_HELP_STR)</a>
<a name="ln5154">{</a>
<a name="ln5155">  struct zebra_vrf *zvrf;</a>
<a name="ln5156">  vrf_iter_t iter;</a>
<a name="ln5157"> </a>
<a name="ln5158">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln5159">    if ((zvrf = vrf_iter2info (iter)) != NULL)</a>
<a name="ln5160">      vty_show_ip_route_summary_prefix (vty, zvrf-&gt;table[AFI_IP6][SAFI_UNICAST]);</a>
<a name="ln5161"> </a>
<a name="ln5162">  return CMD_SUCCESS;</a>
<a name="ln5163">}</a>
<a name="ln5164"> </a>
<a name="ln5165">/* Write IPv6 static route configuration. */</a>
<a name="ln5166">static int</a>
<a name="ln5167">static_config_ipv6 (struct vty *vty)</a>
<a name="ln5168">{</a>
<a name="ln5169">  struct route_node *rn;</a>
<a name="ln5170">  struct static_route *si;  </a>
<a name="ln5171">  int write;</a>
<a name="ln5172">  char buf[BUFSIZ];</a>
<a name="ln5173">  struct route_table *stable;</a>
<a name="ln5174">  struct zebra_vrf *zvrf;</a>
<a name="ln5175">  vrf_iter_t iter;</a>
<a name="ln5176"> </a>
<a name="ln5177">  write = 0;</a>
<a name="ln5178"> </a>
<a name="ln5179">  for (iter = vrf_first (); iter != VRF_ITER_INVALID; iter = vrf_next (iter))</a>
<a name="ln5180">    {</a>
<a name="ln5181">      if ((zvrf = vrf_iter2info (iter)) == NULL ||</a>
<a name="ln5182">          (stable = zvrf-&gt;stable[AFI_IP6][SAFI_UNICAST]) == NULL)</a>
<a name="ln5183">        continue;</a>
<a name="ln5184"> </a>
<a name="ln5185">      for (rn = route_top (stable); rn; rn = route_next (rn))</a>
<a name="ln5186">        for (si = rn-&gt;info; si; si = si-&gt;next)</a>
<a name="ln5187">          {</a>
<a name="ln5188">            vty_out (vty, &quot;ipv6 route %s&quot;, prefix2str (&amp;rn-&gt;p, buf, sizeof buf));</a>
<a name="ln5189"> </a>
<a name="ln5190">            switch (si-&gt;type)</a>
<a name="ln5191">              {</a>
<a name="ln5192">              case STATIC_IPV6_GATEWAY:</a>
<a name="ln5193">                vty_out (vty, &quot; %s&quot;,</a>
<a name="ln5194">                         inet_ntop (AF_INET6, &amp;si-&gt;addr.ipv6, buf, BUFSIZ));</a>
<a name="ln5195">                break;</a>
<a name="ln5196">              case STATIC_IPV6_IFNAME:</a>
<a name="ln5197">                vty_out (vty, &quot; %s&quot;, si-&gt;ifname);</a>
<a name="ln5198">                break;</a>
<a name="ln5199">              case STATIC_IPV6_GATEWAY_IFNAME:</a>
<a name="ln5200">                vty_out (vty, &quot; %s %s&quot;,</a>
<a name="ln5201">                         inet_ntop (AF_INET6, &amp;si-&gt;addr.ipv6, buf, BUFSIZ),</a>
<a name="ln5202">                         si-&gt;ifname);</a>
<a name="ln5203">                break;</a>
<a name="ln5204">              }</a>
<a name="ln5205"> </a>
<a name="ln5206">            if (CHECK_FLAG(si-&gt;flags, ZEBRA_FLAG_REJECT))</a>
<a name="ln5207">              vty_out (vty, &quot; %s&quot;, &quot;reject&quot;);</a>
<a name="ln5208"> </a>
<a name="ln5209">            if (CHECK_FLAG(si-&gt;flags, ZEBRA_FLAG_BLACKHOLE))</a>
<a name="ln5210">              vty_out (vty, &quot; %s&quot;, &quot;blackhole&quot;);</a>
<a name="ln5211"> </a>
<a name="ln5212">	    if (si-&gt;tag)</a>
<a name="ln5213">	      vty_out (vty, &quot; tag %d&quot;, si-&gt;tag);</a>
<a name="ln5214"> </a>
<a name="ln5215">            if (si-&gt;distance != ZEBRA_STATIC_DISTANCE_DEFAULT)</a>
<a name="ln5216">              vty_out (vty, &quot; %d&quot;, si-&gt;distance);</a>
<a name="ln5217"> </a>
<a name="ln5218">            if (si-&gt;vrf_id != VRF_DEFAULT)</a>
<a name="ln5219">              vty_out (vty, &quot; vrf %u&quot;, si-&gt;vrf_id);</a>
<a name="ln5220"> </a>
<a name="ln5221">            vty_out (vty, &quot;%s&quot;, VTY_NEWLINE);</a>
<a name="ln5222"> </a>
<a name="ln5223">            write = 1;</a>
<a name="ln5224">          }</a>
<a name="ln5225">    }</a>
<a name="ln5226">  return write;</a>
<a name="ln5227">}</a>
<a name="ln5228"> </a>
<a name="ln5229">/* Static ip route configuration write function. */</a>
<a name="ln5230">static int</a>
<a name="ln5231">zebra_ip_config (struct vty *vty)</a>
<a name="ln5232">{</a>
<a name="ln5233">  int write = 0;</a>
<a name="ln5234"> </a>
<a name="ln5235">  write += static_config_ipv4 (vty, SAFI_UNICAST, &quot;ip route&quot;);</a>
<a name="ln5236">  write += static_config_ipv4 (vty, SAFI_MULTICAST, &quot;ip mroute&quot;);</a>
<a name="ln5237">#ifdef HAVE_IPV6</a>
<a name="ln5238">  write += static_config_ipv6 (vty);</a>
<a name="ln5239">#endif /* HAVE_IPV6 */</a>
<a name="ln5240"> </a>
<a name="ln5241">  return write;</a>
<a name="ln5242">}</a>
<a name="ln5243"> </a>
<a name="ln5244">static int config_write_vty(struct vty *vty)</a>
<a name="ln5245">{</a>
<a name="ln5246">  int i;</a>
<a name="ln5247">  enum multicast_mode ipv4_multicast_mode = multicast_mode_ipv4_get ();</a>
<a name="ln5248"> </a>
<a name="ln5249">  if (ipv4_multicast_mode != MCAST_NO_CONFIG)</a>
<a name="ln5250">    vty_out (vty, &quot;ip multicast rpf-lookup-mode %s%s&quot;,</a>
<a name="ln5251">             ipv4_multicast_mode == MCAST_URIB_ONLY ? &quot;urib-only&quot; :</a>
<a name="ln5252">             ipv4_multicast_mode == MCAST_MRIB_ONLY ? &quot;mrib-only&quot; :</a>
<a name="ln5253">             ipv4_multicast_mode == MCAST_MIX_MRIB_FIRST ? &quot;mrib-then-urib&quot; :</a>
<a name="ln5254">             ipv4_multicast_mode == MCAST_MIX_DISTANCE ? &quot;lower-distance&quot; :</a>
<a name="ln5255">             &quot;longer-prefix&quot;,</a>
<a name="ln5256">             VTY_NEWLINE);</a>
<a name="ln5257"> </a>
<a name="ln5258">  for (i=0;i&lt;ZEBRA_ROUTE_MAX;i++)</a>
<a name="ln5259">    {</a>
<a name="ln5260">      if (proto_rm[AFI_IP][i])</a>
<a name="ln5261">        vty_out (vty, &quot;ip protocol %s route-map %s%s&quot;, zebra_route_string(i),</a>
<a name="ln5262">                 proto_rm[AFI_IP][i], VTY_NEWLINE);</a>
<a name="ln5263">    }</a>
<a name="ln5264">  if (proto_rm[AFI_IP][ZEBRA_ROUTE_MAX])</a>
<a name="ln5265">      vty_out (vty, &quot;ip protocol %s route-map %s%s&quot;, &quot;any&quot;,</a>
<a name="ln5266">               proto_rm[AFI_IP][ZEBRA_ROUTE_MAX], VTY_NEWLINE);</a>
<a name="ln5267"> </a>
<a name="ln5268">  return 1;</a>
<a name="ln5269">}   </a>
<a name="ln5270"> </a>
<a name="ln5271">/* table node for protocol filtering */</a>
<a name="ln5272">static struct cmd_node protocol_node = { PROTOCOL_NODE, &quot;&quot;, 1 };</a>
<a name="ln5273"> </a>
<a name="ln5274">/* IP node for static routes. */</a>
<a name="ln5275">static struct cmd_node ip_node = { IP_NODE,  &quot;&quot;,  1 };</a>
<a name="ln5276"> </a>
<a name="ln5277">/* Route VTY.  */</a>
<a name="ln5278">void</a>
<a name="ln5279">zebra_vty_init (void)</a>
<a name="ln5280">{</a>
<a name="ln5281">  install_node (&amp;ip_node, zebra_ip_config);</a>
<a name="ln5282">  install_node (&amp;protocol_node, config_write_vty);</a>
<a name="ln5283"> </a>
<a name="ln5284">  install_element (CONFIG_NODE, &amp;ip_mroute_cmd);</a>
<a name="ln5285">  install_element (CONFIG_NODE, &amp;ip_mroute_dist_cmd);</a>
<a name="ln5286">  install_element (CONFIG_NODE, &amp;no_ip_mroute_cmd);</a>
<a name="ln5287">  install_element (CONFIG_NODE, &amp;no_ip_mroute_dist_cmd);</a>
<a name="ln5288">  install_element (CONFIG_NODE, &amp;ip_multicast_mode_cmd);</a>
<a name="ln5289">  install_element (CONFIG_NODE, &amp;no_ip_multicast_mode_cmd);</a>
<a name="ln5290">  install_element (CONFIG_NODE, &amp;no_ip_multicast_mode_noarg_cmd);</a>
<a name="ln5291">  install_element (CONFIG_NODE, &amp;ip_protocol_cmd);</a>
<a name="ln5292">  install_element (CONFIG_NODE, &amp;no_ip_protocol_cmd);</a>
<a name="ln5293">  install_element (VIEW_NODE, &amp;show_ip_protocol_cmd);</a>
<a name="ln5294">  install_element (CONFIG_NODE, &amp;ip_route_cmd);</a>
<a name="ln5295">  install_element (CONFIG_NODE, &amp;ip_route_tag_cmd);</a>
<a name="ln5296">  install_element (CONFIG_NODE, &amp;ip_route_flags_cmd);</a>
<a name="ln5297">  install_element (CONFIG_NODE, &amp;ip_route_flags_tag_cmd);</a>
<a name="ln5298">  install_element (CONFIG_NODE, &amp;ip_route_flags_tag_vrf_cmd);</a>
<a name="ln5299">  install_element (CONFIG_NODE, &amp;ip_route_flags2_cmd);</a>
<a name="ln5300">  install_element (CONFIG_NODE, &amp;ip_route_flags2_tag_cmd);</a>
<a name="ln5301">  install_element (CONFIG_NODE, &amp;ip_route_flags2_tag_vrf_cmd);</a>
<a name="ln5302">  install_element (CONFIG_NODE, &amp;ip_route_mask_cmd);</a>
<a name="ln5303">  install_element (CONFIG_NODE, &amp;ip_route_mask_tag_cmd);</a>
<a name="ln5304">  install_element (CONFIG_NODE, &amp;ip_route_mask_tag_vrf_cmd);</a>
<a name="ln5305">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_cmd);</a>
<a name="ln5306">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_tag_cmd);</a>
<a name="ln5307">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_tag_vrf_cmd);</a>
<a name="ln5308">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags2_cmd);</a>
<a name="ln5309">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags2_tag_cmd);</a>
<a name="ln5310">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags2_tag_vrf_cmd);</a>
<a name="ln5311">  install_element (CONFIG_NODE, &amp;no_ip_route_cmd);</a>
<a name="ln5312">  install_element (CONFIG_NODE, &amp;no_ip_route_tag_cmd);</a>
<a name="ln5313">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_cmd);</a>
<a name="ln5314">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_tag_cmd);</a>
<a name="ln5315">  install_element (CONFIG_NODE, &amp;no_ip_route_flags2_cmd);</a>
<a name="ln5316">  install_element (CONFIG_NODE, &amp;no_ip_route_flags2_tag_cmd);</a>
<a name="ln5317">  install_element (CONFIG_NODE, &amp;no_ip_route_flags2_tag_vrf_cmd);</a>
<a name="ln5318">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_cmd);</a>
<a name="ln5319">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_tag_cmd);</a>
<a name="ln5320">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_cmd);</a>
<a name="ln5321">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_tag_cmd);</a>
<a name="ln5322">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags2_cmd);</a>
<a name="ln5323">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags2_tag_cmd);</a>
<a name="ln5324">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags2_tag_vrf_cmd);</a>
<a name="ln5325">  install_element (CONFIG_NODE, &amp;ip_route_distance_cmd);</a>
<a name="ln5326">  install_element (CONFIG_NODE, &amp;ip_route_tag_distance_cmd);</a>
<a name="ln5327">  install_element (CONFIG_NODE, &amp;ip_route_flags_distance_cmd);</a>
<a name="ln5328">  install_element (CONFIG_NODE, &amp;ip_route_flags_tag_distance_cmd);</a>
<a name="ln5329">  install_element (CONFIG_NODE, &amp;ip_route_flags_tag_distance_vrf_cmd);</a>
<a name="ln5330">  install_element (CONFIG_NODE, &amp;ip_route_flags_distance2_cmd);</a>
<a name="ln5331">  install_element (CONFIG_NODE, &amp;ip_route_flags_tag_distance2_cmd);</a>
<a name="ln5332">  install_element (CONFIG_NODE, &amp;ip_route_flags_tag_distance2_vrf_cmd);</a>
<a name="ln5333">  install_element (CONFIG_NODE, &amp;ip_route_mask_distance_cmd);</a>
<a name="ln5334">  install_element (CONFIG_NODE, &amp;ip_route_mask_tag_distance_cmd);</a>
<a name="ln5335">  install_element (CONFIG_NODE, &amp;ip_route_mask_tag_distance_vrf_cmd);</a>
<a name="ln5336">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_distance_cmd);</a>
<a name="ln5337">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_tag_distance_cmd);</a>
<a name="ln5338">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_tag_distance_vrf_cmd);</a>
<a name="ln5339">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_distance2_cmd);</a>
<a name="ln5340">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_tag_distance2_cmd);</a>
<a name="ln5341">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_tag_distance2_vrf_cmd);</a>
<a name="ln5342">  install_element (CONFIG_NODE, &amp;no_ip_route_distance_cmd);</a>
<a name="ln5343">  install_element (CONFIG_NODE, &amp;no_ip_route_tag_distance_cmd);</a>
<a name="ln5344">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_distance_cmd);</a>
<a name="ln5345">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_tag_distance_cmd);</a>
<a name="ln5346">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_tag_distance_vrf_cmd);</a>
<a name="ln5347">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_distance2_cmd);</a>
<a name="ln5348">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_tag_distance2_cmd);</a>
<a name="ln5349">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_tag_distance2_vrf_cmd);</a>
<a name="ln5350">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_distance_cmd);</a>
<a name="ln5351">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_tag_distance_cmd);</a>
<a name="ln5352">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_tag_distance_vrf_cmd);</a>
<a name="ln5353">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_distance_cmd);</a>
<a name="ln5354">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_tag_distance_cmd);</a>
<a name="ln5355">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_tag_distance_vrf_cmd);</a>
<a name="ln5356">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_distance2_cmd);</a>
<a name="ln5357">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_tag_distance2_cmd);</a>
<a name="ln5358">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_tag_distance2_vrf_cmd);</a>
<a name="ln5359"> </a>
<a name="ln5360">  install_element (VIEW_NODE, &amp;show_ip_route_cmd);</a>
<a name="ln5361">  install_element (VIEW_NODE, &amp;show_ip_route_tag_cmd);</a>
<a name="ln5362">  install_element (VIEW_NODE, &amp;show_ip_route_tag_vrf_cmd);</a>
<a name="ln5363">  install_element (VIEW_NODE, &amp;show_ip_nht_cmd);</a>
<a name="ln5364">  install_element (VIEW_NODE, &amp;show_ipv6_nht_cmd);</a>
<a name="ln5365">  install_element (VIEW_NODE, &amp;show_ip_route_addr_cmd);</a>
<a name="ln5366">  install_element (VIEW_NODE, &amp;show_ip_route_prefix_cmd);</a>
<a name="ln5367">  install_element (VIEW_NODE, &amp;show_ip_route_prefix_longer_cmd);</a>
<a name="ln5368">  install_element (VIEW_NODE, &amp;show_ip_route_protocol_cmd);</a>
<a name="ln5369">  install_element (VIEW_NODE, &amp;show_ip_route_supernets_cmd);</a>
<a name="ln5370">  install_element (VIEW_NODE, &amp;show_ip_route_summary_cmd);</a>
<a name="ln5371">  install_element (VIEW_NODE, &amp;show_ip_route_summary_prefix_cmd);</a>
<a name="ln5372"> </a>
<a name="ln5373">  install_element (VIEW_NODE, &amp;show_ip_rpf_cmd);</a>
<a name="ln5374">  install_element (VIEW_NODE, &amp;show_ip_rpf_addr_cmd);</a>
<a name="ln5375"> </a>
<a name="ln5376">  /* Commands for VRF */</a>
<a name="ln5377"> </a>
<a name="ln5378">  install_element (CONFIG_NODE, &amp;ip_mroute_vrf_cmd);</a>
<a name="ln5379">  install_element (CONFIG_NODE, &amp;ip_mroute_dist_vrf_cmd);</a>
<a name="ln5380">  install_element (CONFIG_NODE, &amp;no_ip_mroute_vrf_cmd);</a>
<a name="ln5381">  install_element (CONFIG_NODE, &amp;no_ip_mroute_dist_vrf_cmd);</a>
<a name="ln5382"> </a>
<a name="ln5383">  install_element (CONFIG_NODE, &amp;ip_route_vrf_cmd);</a>
<a name="ln5384">  install_element (CONFIG_NODE, &amp;ip_route_flags_vrf_cmd);</a>
<a name="ln5385">  install_element (CONFIG_NODE, &amp;ip_route_flags2_vrf_cmd);</a>
<a name="ln5386">  install_element (CONFIG_NODE, &amp;ip_route_mask_vrf_cmd);</a>
<a name="ln5387">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_vrf_cmd);</a>
<a name="ln5388">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags2_vrf_cmd);</a>
<a name="ln5389">  install_element (CONFIG_NODE, &amp;no_ip_route_vrf_cmd);</a>
<a name="ln5390">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_vrf_cmd);</a>
<a name="ln5391">  install_element (CONFIG_NODE, &amp;no_ip_route_flags2_vrf_cmd);</a>
<a name="ln5392">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_vrf_cmd);</a>
<a name="ln5393">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_vrf_cmd);</a>
<a name="ln5394">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags2_vrf_cmd);</a>
<a name="ln5395">  install_element (CONFIG_NODE, &amp;ip_route_distance_vrf_cmd);</a>
<a name="ln5396">  install_element (CONFIG_NODE, &amp;ip_route_flags_distance_vrf_cmd);</a>
<a name="ln5397">  install_element (CONFIG_NODE, &amp;ip_route_flags_distance2_vrf_cmd);</a>
<a name="ln5398">  install_element (CONFIG_NODE, &amp;ip_route_mask_distance_vrf_cmd);</a>
<a name="ln5399">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_distance_vrf_cmd);</a>
<a name="ln5400">  install_element (CONFIG_NODE, &amp;ip_route_mask_flags_distance2_vrf_cmd);</a>
<a name="ln5401">  install_element (CONFIG_NODE, &amp;no_ip_route_distance_vrf_cmd);</a>
<a name="ln5402">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_distance_vrf_cmd);</a>
<a name="ln5403">  install_element (CONFIG_NODE, &amp;no_ip_route_flags_distance2_vrf_cmd);</a>
<a name="ln5404">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_distance_vrf_cmd);</a>
<a name="ln5405">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_distance_vrf_cmd);</a>
<a name="ln5406">  install_element (CONFIG_NODE, &amp;no_ip_route_mask_flags_distance2_vrf_cmd);</a>
<a name="ln5407"> </a>
<a name="ln5408">  install_element (VIEW_NODE, &amp;show_ip_route_vrf_cmd);</a>
<a name="ln5409">  install_element (VIEW_NODE, &amp;show_ip_route_addr_vrf_cmd);</a>
<a name="ln5410">  install_element (VIEW_NODE, &amp;show_ip_route_prefix_vrf_cmd);</a>
<a name="ln5411">  install_element (VIEW_NODE, &amp;show_ip_route_prefix_longer_vrf_cmd);</a>
<a name="ln5412">  install_element (VIEW_NODE, &amp;show_ip_route_protocol_vrf_cmd);</a>
<a name="ln5413">  install_element (VIEW_NODE, &amp;show_ip_route_supernets_vrf_cmd);</a>
<a name="ln5414">  install_element (VIEW_NODE, &amp;show_ip_route_summary_vrf_cmd);</a>
<a name="ln5415">  install_element (VIEW_NODE, &amp;show_ip_route_summary_prefix_vrf_cmd);</a>
<a name="ln5416"> </a>
<a name="ln5417">  install_element (VIEW_NODE, &amp;show_ip_route_vrf_all_cmd);</a>
<a name="ln5418">  install_element (VIEW_NODE, &amp;show_ip_route_addr_vrf_all_cmd);</a>
<a name="ln5419">  install_element (VIEW_NODE, &amp;show_ip_route_prefix_vrf_all_cmd);</a>
<a name="ln5420">  install_element (VIEW_NODE, &amp;show_ip_route_prefix_longer_vrf_all_cmd);</a>
<a name="ln5421">  install_element (VIEW_NODE, &amp;show_ip_route_protocol_vrf_all_cmd);</a>
<a name="ln5422">  install_element (VIEW_NODE, &amp;show_ip_route_supernets_vrf_all_cmd);</a>
<a name="ln5423">  install_element (VIEW_NODE, &amp;show_ip_route_summary_vrf_all_cmd);</a>
<a name="ln5424">  install_element (VIEW_NODE, &amp;show_ip_route_summary_prefix_vrf_all_cmd);</a>
<a name="ln5425"> </a>
<a name="ln5426">  install_element (VIEW_NODE, &amp;show_ip_rpf_vrf_cmd);</a>
<a name="ln5427">  install_element (VIEW_NODE, &amp;show_ip_rpf_vrf_all_cmd);</a>
<a name="ln5428">  install_element (VIEW_NODE, &amp;show_ip_rpf_addr_vrf_cmd);</a>
<a name="ln5429">  install_element (VIEW_NODE, &amp;show_ip_rpf_addr_vrf_all_cmd);</a>
<a name="ln5430"> </a>
<a name="ln5431">  install_element (CONFIG_NODE, &amp;ipv6_route_cmd);</a>
<a name="ln5432">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_cmd);</a>
<a name="ln5433">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_cmd);</a>
<a name="ln5434">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_cmd);</a>
<a name="ln5435">  install_element (CONFIG_NODE, &amp;no_ipv6_route_cmd);</a>
<a name="ln5436">  install_element (CONFIG_NODE, &amp;no_ipv6_route_flags_cmd);</a>
<a name="ln5437">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_cmd);</a>
<a name="ln5438">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_flags_cmd);</a>
<a name="ln5439">  install_element (CONFIG_NODE, &amp;ipv6_route_pref_cmd);</a>
<a name="ln5440">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_pref_cmd);</a>
<a name="ln5441">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_pref_cmd);</a>
<a name="ln5442">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_pref_cmd);</a>
<a name="ln5443">  install_element (CONFIG_NODE, &amp;no_ipv6_route_pref_cmd);</a>
<a name="ln5444">  install_element (CONFIG_NODE, &amp;no_ipv6_route_flags_pref_cmd);</a>
<a name="ln5445">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_pref_cmd);</a>
<a name="ln5446">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_flags_pref_cmd);</a>
<a name="ln5447">  install_element (CONFIG_NODE, &amp;ipv6_route_tag_cmd);</a>
<a name="ln5448">  install_element (CONFIG_NODE, &amp;ipv6_route_tag_vrf_cmd);</a>
<a name="ln5449">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_tag_cmd);</a>
<a name="ln5450">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_tag_vrf_cmd);</a>
<a name="ln5451">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_tag_cmd);</a>
<a name="ln5452">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_tag_vrf_cmd);</a>
<a name="ln5453">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_tag_cmd);</a>
<a name="ln5454">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_tag_vrf_cmd);</a>
<a name="ln5455">  install_element (CONFIG_NODE, &amp;ipv6_route_pref_tag_cmd);</a>
<a name="ln5456">  install_element (CONFIG_NODE, &amp;ipv6_route_pref_tag_vrf_cmd);</a>
<a name="ln5457">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_pref_tag_cmd);</a>
<a name="ln5458">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_pref_tag_vrf_cmd);</a>
<a name="ln5459">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_pref_tag_cmd);</a>
<a name="ln5460">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_pref_tag_vrf_cmd);</a>
<a name="ln5461">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_pref_tag_cmd);</a>
<a name="ln5462">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_pref_tag_vrf_cmd);</a>
<a name="ln5463">  install_element (CONFIG_NODE, &amp;no_ipv6_route_tag_cmd);</a>
<a name="ln5464">  install_element (CONFIG_NODE, &amp;no_ipv6_route_tag_vrf_cmd);</a>
<a name="ln5465">  install_element (CONFIG_NODE, &amp;no_ipv6_route_flags_tag_cmd);</a>
<a name="ln5466">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_tag_cmd);</a>
<a name="ln5467">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_tag_vrf_cmd);</a>
<a name="ln5468">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_flags_tag_cmd);</a>
<a name="ln5469">  install_element (CONFIG_NODE, &amp;no_ipv6_route_pref_tag_cmd);</a>
<a name="ln5470">  install_element (CONFIG_NODE, &amp;no_ipv6_route_pref_tag_vrf_cmd);</a>
<a name="ln5471">  install_element (CONFIG_NODE, &amp;no_ipv6_route_flags_pref_tag_cmd);</a>
<a name="ln5472">  install_element (CONFIG_NODE, &amp;no_ipv6_route_flags_pref_tag_vrf_cmd);</a>
<a name="ln5473">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_pref_tag_cmd);</a>
<a name="ln5474">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_pref_tag_vrf_cmd);</a>
<a name="ln5475">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_flags_pref_tag_cmd);</a>
<a name="ln5476">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_flags_pref_tag_vrf_cmd);</a>
<a name="ln5477">  install_element (VIEW_NODE, &amp;show_ipv6_route_cmd);</a>
<a name="ln5478">  install_element (VIEW_NODE, &amp;show_ipv6_route_tag_cmd);</a>
<a name="ln5479">  install_element (VIEW_NODE, &amp;show_ipv6_route_tag_vrf_cmd);</a>
<a name="ln5480">  install_element (VIEW_NODE, &amp;show_ipv6_route_summary_cmd);</a>
<a name="ln5481">  install_element (VIEW_NODE, &amp;show_ipv6_route_summary_prefix_cmd);</a>
<a name="ln5482">  install_element (VIEW_NODE, &amp;show_ipv6_route_protocol_cmd);</a>
<a name="ln5483">  install_element (VIEW_NODE, &amp;show_ipv6_route_addr_cmd);</a>
<a name="ln5484">  install_element (VIEW_NODE, &amp;show_ipv6_route_prefix_cmd);</a>
<a name="ln5485">  install_element (VIEW_NODE, &amp;show_ipv6_route_prefix_longer_cmd);</a>
<a name="ln5486"> </a>
<a name="ln5487">  install_element (VIEW_NODE, &amp;show_ipv6_mroute_cmd);</a>
<a name="ln5488"> </a>
<a name="ln5489">  /* Commands for VRF */</a>
<a name="ln5490"> </a>
<a name="ln5491">  install_element (CONFIG_NODE, &amp;ipv6_route_vrf_cmd);</a>
<a name="ln5492">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_vrf_cmd);</a>
<a name="ln5493">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_vrf_cmd);</a>
<a name="ln5494">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_vrf_cmd);</a>
<a name="ln5495">  install_element (CONFIG_NODE, &amp;no_ipv6_route_vrf_cmd);</a>
<a name="ln5496">  install_element (CONFIG_NODE, &amp;no_ipv6_route_flags_vrf_cmd);</a>
<a name="ln5497">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_vrf_cmd);</a>
<a name="ln5498">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_flags_vrf_cmd);</a>
<a name="ln5499">  install_element (CONFIG_NODE, &amp;ipv6_route_pref_vrf_cmd);</a>
<a name="ln5500">  install_element (CONFIG_NODE, &amp;ipv6_route_flags_pref_vrf_cmd);</a>
<a name="ln5501">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_pref_vrf_cmd);</a>
<a name="ln5502">  install_element (CONFIG_NODE, &amp;ipv6_route_ifname_flags_pref_vrf_cmd);</a>
<a name="ln5503">  install_element (CONFIG_NODE, &amp;no_ipv6_route_pref_vrf_cmd);</a>
<a name="ln5504">  install_element (CONFIG_NODE, &amp;no_ipv6_route_flags_pref_vrf_cmd);</a>
<a name="ln5505">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_pref_vrf_cmd);</a>
<a name="ln5506">  install_element (CONFIG_NODE, &amp;no_ipv6_route_ifname_flags_pref_vrf_cmd);</a>
<a name="ln5507"> </a>
<a name="ln5508">  install_element (VIEW_NODE, &amp;show_ipv6_route_vrf_cmd);</a>
<a name="ln5509">  install_element (VIEW_NODE, &amp;show_ipv6_route_summary_vrf_cmd);</a>
<a name="ln5510">  install_element (VIEW_NODE, &amp;show_ipv6_route_summary_prefix_vrf_cmd);</a>
<a name="ln5511">  install_element (VIEW_NODE, &amp;show_ipv6_route_protocol_vrf_cmd);</a>
<a name="ln5512">  install_element (VIEW_NODE, &amp;show_ipv6_route_addr_vrf_cmd);</a>
<a name="ln5513">  install_element (VIEW_NODE, &amp;show_ipv6_route_prefix_vrf_cmd);</a>
<a name="ln5514">  install_element (VIEW_NODE, &amp;show_ipv6_route_prefix_longer_vrf_cmd);</a>
<a name="ln5515"> </a>
<a name="ln5516">  install_element (VIEW_NODE, &amp;show_ipv6_route_vrf_all_cmd);</a>
<a name="ln5517">  install_element (VIEW_NODE, &amp;show_ipv6_route_summary_vrf_all_cmd);</a>
<a name="ln5518">  install_element (VIEW_NODE, &amp;show_ipv6_route_summary_prefix_vrf_all_cmd);</a>
<a name="ln5519">  install_element (VIEW_NODE, &amp;show_ipv6_route_protocol_vrf_all_cmd);</a>
<a name="ln5520">  install_element (VIEW_NODE, &amp;show_ipv6_route_addr_vrf_all_cmd);</a>
<a name="ln5521">  install_element (VIEW_NODE, &amp;show_ipv6_route_prefix_vrf_all_cmd);</a>
<a name="ln5522">  install_element (VIEW_NODE, &amp;show_ipv6_route_prefix_longer_vrf_all_cmd);</a>
<a name="ln5523"> </a>
<a name="ln5524">  install_element (VIEW_NODE, &amp;show_ipv6_mroute_vrf_cmd);</a>
<a name="ln5525"> </a>
<a name="ln5526">  install_element (VIEW_NODE, &amp;show_ipv6_mroute_vrf_all_cmd);</a>
<a name="ln5527">  install_element (ENABLE_NODE, &amp;show_ipv6_mroute_vrf_all_cmd);</a>
<a name="ln5528">}</a>

</code></pre>
<div class="balloon" rel="7"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v1042/" target="_blank">V1042</a> This file is marked with copyleft license, which requires you to open the derived source code.</p></div>
<div class="balloon" rel="2033"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v595/" target="_blank">V595</a> The 'argv[0]' pointer was utilized before it was verified against nullptr. Check lines: 2033, 2039.</p></div>
<div class="balloon" rel="2058"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v595/" target="_blank">V595</a> The 'argv[0]' pointer was utilized before it was verified against nullptr. Check lines: 2058, 2064.</p></div>
<div class="balloon" rel="3431"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v581/" target="_blank">V581</a> The conditional expressions of the 'if' statements situated alongside each other are identical. Check lines: 3427, 3431.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
