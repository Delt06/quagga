
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>getopt1.c</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">/* getopt_long and getopt_long_only entry points for GNU getopt.</a>
<a name="ln2">   Copyright (C) 1987,88,89,90,91,92,93,94,96,97,98</a>
<a name="ln3">     Free Software Foundation, Inc.</a>
<a name="ln4"> </a>
<a name="ln5">   NOTE: The canonical source of this file is maintained with the GNU C Library.</a>
<a name="ln6">   Bugs can be reported to bug-glibc@gnu.org.</a>
<a name="ln7"> </a>
<a name="ln8">   This program is free software; you can redistribute it and/or modify it</a>
<a name="ln9">   under the terms of the GNU General Public License as published by the</a>
<a name="ln10">   Free Software Foundation; either version 2, or (at your option) any</a>
<a name="ln11">   later version.</a>
<a name="ln12"> </a>
<a name="ln13">   This program is distributed in the hope that it will be useful,</a>
<a name="ln14">   but WITHOUT ANY WARRANTY; without even the implied warranty of</a>
<a name="ln15">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</a>
<a name="ln16">   GNU General Public License for more details.</a>
<a name="ln17"> </a>
<a name="ln18">   You should have received a copy of the GNU General Public License</a>
<a name="ln19">   along with this program; if not, write to the Free Software</a>
<a name="ln20">   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,</a>
<a name="ln21">   USA.  */</a>
<a name="ln22"> </a>
<a name="ln23">#include &lt;zebra.h&gt;</a>
<a name="ln24">#include &quot;getopt.h&quot;</a>
<a name="ln25"> </a>
<a name="ln26">#if !defined __STDC__ || !__STDC__</a>
<a name="ln27">/* This is a separate conditional since some stdc systems</a>
<a name="ln28">   reject `defined (const)'.  */</a>
<a name="ln29">#ifndef const</a>
<a name="ln30">#define const</a>
<a name="ln31">#endif</a>
<a name="ln32">#endif</a>
<a name="ln33"> </a>
<a name="ln34">#include &lt;stdio.h&gt;</a>
<a name="ln35"> </a>
<a name="ln36">/* Comment out all this code if we are using the GNU C Library, and are not</a>
<a name="ln37">   actually compiling the library itself.  This code is part of the GNU C</a>
<a name="ln38">   Library, but also included in many other GNU distributions.  Compiling</a>
<a name="ln39">   and linking in this code is a waste when using the GNU C library</a>
<a name="ln40">   (especially if it is a shared library).  Rather than having every GNU</a>
<a name="ln41">   program understand `configure --with-gnu-libc' and omit the object files,</a>
<a name="ln42">   it is simpler to just do this in the source for each such file.  */</a>
<a name="ln43"> </a>
<a name="ln44">#define GETOPT_INTERFACE_VERSION 2</a>
<a name="ln45">#if !defined _LIBC &amp;&amp; defined __GLIBC__ &amp;&amp; __GLIBC__ &gt;= 2</a>
<a name="ln46">#include &lt;gnu-versions.h&gt;</a>
<a name="ln47">#if _GNU_GETOPT_INTERFACE_VERSION == GETOPT_INTERFACE_VERSION</a>
<a name="ln48">#define ELIDE_CODE</a>
<a name="ln49">#endif</a>
<a name="ln50">#endif</a>
<a name="ln51"> </a>
<a name="ln52">#ifndef ELIDE_CODE</a>
<a name="ln53"> </a>
<a name="ln54"> </a>
<a name="ln55">/* This needs to come after some library #include</a>
<a name="ln56">   to get __GNU_LIBRARY__ defined.  */</a>
<a name="ln57">#ifdef __GNU_LIBRARY__</a>
<a name="ln58">#include &lt;stdlib.h&gt;</a>
<a name="ln59">#endif</a>
<a name="ln60"> </a>
<a name="ln61">#ifndef	NULL</a>
<a name="ln62">#define NULL 0</a>
<a name="ln63">#endif</a>
<a name="ln64"> </a>
<a name="ln65">int</a>
<a name="ln66">getopt_long (argc, argv, options, long_options, opt_index)</a>
<a name="ln67">     int argc;</a>
<a name="ln68">     char *const *argv;</a>
<a name="ln69">     const char *options;</a>
<a name="ln70">     const struct option *long_options;</a>
<a name="ln71">     int *opt_index;</a>
<a name="ln72">{</a>
<a name="ln73">  return _getopt_internal (argc, argv, options, long_options, opt_index, 0);</a>
<a name="ln74">}</a>
<a name="ln75"> </a>
<a name="ln76">/* Like getopt_long, but '-' as well as '--' can indicate a long option.</a>
<a name="ln77">   If an option that starts with '-' (not '--') doesn't match a long option,</a>
<a name="ln78">   but does match a short option, it is parsed as a short option</a>
<a name="ln79">   instead.  */</a>
<a name="ln80"> </a>
<a name="ln81">int</a>
<a name="ln82">getopt_long_only (argc, argv, options, long_options, opt_index)</a>
<a name="ln83">     int argc;</a>
<a name="ln84">     char *const *argv;</a>
<a name="ln85">     const char *options;</a>
<a name="ln86">     const struct option *long_options;</a>
<a name="ln87">     int *opt_index;</a>
<a name="ln88">{</a>
<a name="ln89">  return _getopt_internal (argc, argv, options, long_options, opt_index, 1);</a>
<a name="ln90">}</a>
<a name="ln91"> </a>
<a name="ln92"> </a>
<a name="ln93">#endif	/* Not ELIDE_CODE.  */</a>
<a name="ln94"> </a>
<a name="ln95">#ifdef TEST</a>
<a name="ln96"> </a>
<a name="ln97">#include &lt;stdio.h&gt;</a>
<a name="ln98"> </a>
<a name="ln99">int</a>
<a name="ln100">main (argc, argv)</a>
<a name="ln101">     int argc;</a>
<a name="ln102">     char **argv;</a>
<a name="ln103">{</a>
<a name="ln104">  int c;</a>
<a name="ln105">  int digit_optind = 0;</a>
<a name="ln106"> </a>
<a name="ln107">  while (1)</a>
<a name="ln108">    {</a>
<a name="ln109">      int this_option_optind = optind ? optind : 1;</a>
<a name="ln110">      int option_index = 0;</a>
<a name="ln111">      static struct option long_options[] =</a>
<a name="ln112">      {</a>
<a name="ln113">	{&quot;add&quot;, 1, 0, 0},</a>
<a name="ln114">	{&quot;append&quot;, 0, 0, 0},</a>
<a name="ln115">	{&quot;delete&quot;, 1, 0, 0},</a>
<a name="ln116">	{&quot;verbose&quot;, 0, 0, 0},</a>
<a name="ln117">	{&quot;create&quot;, 0, 0, 0},</a>
<a name="ln118">	{&quot;file&quot;, 1, 0, 0},</a>
<a name="ln119">	{0, 0, 0, 0}</a>
<a name="ln120">      };</a>
<a name="ln121"> </a>
<a name="ln122">      c = getopt_long (argc, argv, &quot;abc:d:0123456789&quot;,</a>
<a name="ln123">		       long_options, &amp;option_index);</a>
<a name="ln124">      if (c == -1)</a>
<a name="ln125">	break;</a>
<a name="ln126"> </a>
<a name="ln127">      switch (c)</a>
<a name="ln128">	{</a>
<a name="ln129">	case 0:</a>
<a name="ln130">	  printf (&quot;option %s&quot;, long_options[option_index].name);</a>
<a name="ln131">	  if (optarg)</a>
<a name="ln132">	    printf (&quot; with arg %s&quot;, optarg);</a>
<a name="ln133">	  printf (&quot;\n&quot;);</a>
<a name="ln134">	  break;</a>
<a name="ln135"> </a>
<a name="ln136">	case '0':</a>
<a name="ln137">	case '1':</a>
<a name="ln138">	case '2':</a>
<a name="ln139">	case '3':</a>
<a name="ln140">	case '4':</a>
<a name="ln141">	case '5':</a>
<a name="ln142">	case '6':</a>
<a name="ln143">	case '7':</a>
<a name="ln144">	case '8':</a>
<a name="ln145">	case '9':</a>
<a name="ln146">	  if (digit_optind != 0 &amp;&amp; digit_optind != this_option_optind)</a>
<a name="ln147">	    printf (&quot;digits occur in two different argv-elements.\n&quot;);</a>
<a name="ln148">	  digit_optind = this_option_optind;</a>
<a name="ln149">	  printf (&quot;option %c\n&quot;, c);</a>
<a name="ln150">	  break;</a>
<a name="ln151"> </a>
<a name="ln152">	case 'a':</a>
<a name="ln153">	  printf (&quot;option a\n&quot;);</a>
<a name="ln154">	  break;</a>
<a name="ln155"> </a>
<a name="ln156">	case 'b':</a>
<a name="ln157">	  printf (&quot;option b\n&quot;);</a>
<a name="ln158">	  break;</a>
<a name="ln159"> </a>
<a name="ln160">	case 'c':</a>
<a name="ln161">	  printf (&quot;option c with value `%s'\n&quot;, optarg);</a>
<a name="ln162">	  break;</a>
<a name="ln163"> </a>
<a name="ln164">	case 'd':</a>
<a name="ln165">	  printf (&quot;option d with value `%s'\n&quot;, optarg);</a>
<a name="ln166">	  break;</a>
<a name="ln167"> </a>
<a name="ln168">	case '?':</a>
<a name="ln169">	  break;</a>
<a name="ln170"> </a>
<a name="ln171">	default:</a>
<a name="ln172">	  printf (&quot;?? getopt returned character code 0%o ??\n&quot;, c);</a>
<a name="ln173">	}</a>
<a name="ln174">    }</a>
<a name="ln175"> </a>
<a name="ln176">  if (optind &lt; argc)</a>
<a name="ln177">    {</a>
<a name="ln178">      printf (&quot;non-option ARGV-elements: &quot;);</a>
<a name="ln179">      while (optind &lt; argc)</a>
<a name="ln180">	printf (&quot;%s &quot;, argv[optind++]);</a>
<a name="ln181">      printf (&quot;\n&quot;);</a>
<a name="ln182">    }</a>
<a name="ln183"> </a>
<a name="ln184">  exit (0);</a>
<a name="ln185">}</a>
<a name="ln186"> </a>
<a name="ln187">#endif /* TEST */</a>

</code></pre>
<div class="balloon" rel="9"><p><span style="font-size:18px">&uarr;</span> <a href="https://pvs-studio.com/en/docs/warnings/v1042/" target="_blank">V1042</a> This file is marked with copyleft license, which requires you to open the derived source code.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
